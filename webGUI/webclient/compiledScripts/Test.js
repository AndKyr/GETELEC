var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
function NilFunction() {
    return nil;
}
var nil = new Proxy(Object.assign(NilFunction, { "class": nil, "className": "Nil" }), {
    get(target, name) {
        if (name == Symbol.toPrimitive) {
            return function (hint) {
                if (hint == "number") {
                    return 0;
                }
                if (hint == "string") {
                    return "";
                }
                return false;
            };
        }
        if (name == "toString") {
            return function toString() {
                return "";
            };
        }
        return NilFunction();
    },
    set(target, name, value) {
        return NilFunction();
    }
});
function wrapInNil(object) {
    var result = FIRST_OR_NIL(object);
    if (object instanceof Object && !(object instanceof Function)) {
        result = new Proxy(object, {
            get(target, name) {
                if (name == "wrapped_nil_target") {
                    return target;
                }
                const value = Reflect.get(target, name);
                if (typeof value === "object") {
                    return wrapInNil(value);
                }
                if (IS_NOT_LIKE_NULL(value)) {
                    return value;
                }
                return nil;
            }
        });
    }
    return result;
}
const YES = true;
const NO = false;
function IS(object) {
    if (object && object !== nil) {
        return YES;
    }
    return NO;
    //return (object != nil && object);
}
function IS_NOT(object) {
    return !IS(object);
}
function IS_DEFINED(object) {
    if (object != undefined) {
        return YES;
    }
    return NO;
}
function IS_UNDEFINED(object) {
    return !IS_DEFINED(object);
}
function IS_NIL(object) {
    if (object === nil) {
        return YES;
    }
    return NO;
}
function IS_NOT_NIL(object) {
    return !IS_NIL(object);
}
function IS_LIKE_NULL(object) {
    return (IS_UNDEFINED(object) || IS_NIL(object) || object == null);
}
function IS_NOT_LIKE_NULL(object) {
    return !IS_LIKE_NULL(object);
}
function IS_AN_EMAIL_ADDRESS(email) {
    const re = /\S+@\S+\.\S+/;
    return re.test(email);
}
function FIRST_OR_NIL(...objects) {
    const result = objects.find(function (object, index, array) {
        return IS(object);
    });
    return result || nil;
}
function FIRST(...objects) {
    const result = objects.find(function (object, index, array) {
        return IS(object);
    });
    return result || IF(IS_DEFINED(objects.lastElement))(RETURNER(objects.lastElement))();
}
function MAKE_ID(randomPartLength = 15) {
    var result = "";
    const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    for (var i = 0; i < randomPartLength; i++) {
        result = result + characters.charAt(Math.floor(Math.random() * characters.length));
    }
    result = result + Date.now();
    return result;
}
function RETURNER(value) {
    return function (...objects) {
        return value;
    };
}
function IF(value) {
    var thenFunction = nil;
    var elseFunction = nil;
    const result = function (functionToCall) {
        thenFunction = functionToCall;
        return result.evaluateConditions;
    };
    result.evaluateConditions = function () {
        if (IS(value)) {
            return thenFunction();
        }
        return elseFunction();
    };
    result.evaluateConditions.ELSE_IF = function (otherValue) {
        const functionResult = IF(otherValue);
        elseFunction = functionResult.evaluateConditions;
        const functionResultEvaluateConditionsFunction = function () {
            return result.evaluateConditions();
        };
        functionResultEvaluateConditionsFunction.ELSE_IF = functionResult.evaluateConditions.ELSE_IF;
        functionResultEvaluateConditionsFunction.ELSE = functionResult.evaluateConditions.ELSE;
        functionResult.evaluateConditions = functionResultEvaluateConditionsFunction;
        return functionResult;
    };
    result.evaluateConditions.ELSE = function (functionToCall) {
        elseFunction = functionToCall;
        return result.evaluateConditions();
    };
    return result;
}
// @ts-ignore
if (!window.AutoLayout) {
    // @ts-ignore
    window.AutoLayout = nil;
}
class UIObject {
    constructor() {
        this._class = UIObject;
        this.superclass = nil.class;
    }
    get class() {
        return this.constructor;
    }
    get superclass() {
        return this.constructor.superclass;
    }
    set superclass(superclass) {
        this.constructor.superclass = superclass;
    }
    static wrapObject(object) {
        if (IS_NOT(object)) {
            return nil;
        }
        if (object instanceof UIObject) {
            return object;
        }
        const result = Object.assign(new UIObject(), object);
        return result;
    }
    isKindOfClass(classObject) {
        if (this.isMemberOfClass(classObject)) {
            return YES;
        }
        for (var superclassObject = this.superclass; IS(superclassObject); superclassObject = superclassObject.superclass) {
            if (superclassObject == classObject) {
                return YES;
            }
        }
        return NO;
    }
    isMemberOfClass(classObject) {
        return (this.class == classObject);
    }
    valueForKey(key) {
        return this[key];
    }
    valueForKeyPath(keyPath) {
        return UIObject.valueForKeyPath(keyPath, this);
    }
    static valueForKeyPath(keyPath, object) {
        if (IS_NOT(keyPath)) {
            return object;
        }
        const keys = keyPath.split(".");
        var currentObject = object;
        for (var i = 0; i < keys.length; i++) {
            const key = keys[i];
            if (key.substring(0, 2) == "[]") {
                // This next object will be an array and the rest of the keys need to be run for each of the elements
                currentObject = currentObject[key.substring(2)];
                // CurrentObject is now an array
                const remainingKeyPath = keys.slice(i + 1).join(".");
                const currentArray = currentObject;
                currentObject = currentArray.map(function (subObject, index, array) {
                    const result = UIObject.valueForKeyPath(remainingKeyPath, subObject);
                    return result;
                });
                break;
            }
            currentObject = currentObject[key];
            if (IS_NOT(currentObject)) {
                currentObject = nil;
            }
        }
        return currentObject;
    }
    setValueForKeyPath(keyPath, value, createPath = YES) {
        return UIObject.setValueForKeyPath(keyPath, value, this, createPath);
    }
    static setValueForKeyPath(keyPath, value, currentObject, createPath) {
        const keys = keyPath.split(".");
        var didSetValue = NO;
        keys.forEach(function (key, index, array) {
            if (index == array.length - 1 && IS_NOT_LIKE_NULL(currentObject)) {
                currentObject[key] = value;
                didSetValue = YES;
                return;
            }
            else if (IS_NOT(currentObject)) {
                return;
            }
            const currentObjectValue = currentObject[key];
            if (IS_LIKE_NULL(currentObjectValue) && createPath) {
                currentObject[key] = {};
            }
            currentObject = currentObject[key];
        });
        return didSetValue;
    }
    performFunctionWithSelf(functionToPerform) {
        return functionToPerform(this);
    }
    performFunctionWithDelay(delay, functionToCall) {
        new UITimer(delay, NO, functionToCall);
    }
}
///<reference path="UIObject.ts"/>
class UIColor extends UIObject {
    constructor(stringValue) {
        super();
        this.stringValue = stringValue;
        this._class = UIColor;
        this.superclass = UIObject;
    }
    toString() {
        return this.stringValue;
    }
    static get redColor() {
        return new UIColor("red");
    }
    static get blueColor() {
        return new UIColor("blue");
    }
    static get greenColor() {
        return new UIColor("green");
    }
    static get yellowColor() {
        return new UIColor("yellow");
    }
    static get blackColor() {
        return new UIColor("black");
    }
    static get brownColor() {
        return new UIColor("brown");
    }
    static get whiteColor() {
        return new UIColor("white");
    }
    static get greyColor() {
        return new UIColor("grey");
    }
    static get lightGreyColor() {
        return new UIColor("lightgrey");
    }
    static get theChosenGreyColor() {
        return new UIColor("#e1e1e1");
    }
    static get transparentColor() {
        return new UIColor("transparent");
    }
    static get undefinedColor() {
        return new UIColor("");
    }
    static get nilColor() {
        return new UIColor("");
    }
    static nameToHex(name) {
        return {
            "aliceblue": "#f0f8ff",
            "antiquewhite": "#faebd7",
            "aqua": "#00ffff",
            "aquamarine": "#7fffd4",
            "azure": "#f0ffff",
            "beige": "#f5f5dc",
            "bisque": "#ffe4c4",
            "black": "#000000",
            "blanchedalmond": "#ffebcd",
            "blue": "#0000ff",
            "blueviolet": "#8a2be2",
            "brown": "#a52a2a",
            "burlywood": "#deb887",
            "cadetblue": "#5f9ea0",
            "chartreuse": "#7fff00",
            "chocolate": "#d2691e",
            "coral": "#ff7f50",
            "cornflowerblue": "#6495ed",
            "cornsilk": "#fff8dc",
            "crimson": "#dc143c",
            "cyan": "#00ffff",
            "darkblue": "#00008b",
            "darkcyan": "#008b8b",
            "darkgoldenrod": "#b8860b",
            "darkgray": "#a9a9a9",
            "darkgreen": "#006400",
            "darkkhaki": "#bdb76b",
            "darkmagenta": "#8b008b",
            "darkolivegreen": "#556b2f",
            "darkorange": "#ff8c00",
            "darkorchid": "#9932cc",
            "darkred": "#8b0000",
            "darksalmon": "#e9967a",
            "darkseagreen": "#8fbc8f",
            "darkslateblue": "#483d8b",
            "darkslategray": "#2f4f4f",
            "darkturquoise": "#00ced1",
            "darkviolet": "#9400d3",
            "deeppink": "#ff1493",
            "deepskyblue": "#00bfff",
            "dimgray": "#696969",
            "dodgerblue": "#1e90ff",
            "firebrick": "#b22222",
            "floralwhite": "#fffaf0",
            "forestgreen": "#228b22",
            "fuchsia": "#ff00ff",
            "gainsboro": "#dcdcdc",
            "ghostwhite": "#f8f8ff",
            "gold": "#ffd700",
            "goldenrod": "#daa520",
            "gray": "#808080",
            "green": "#008000",
            "greenyellow": "#adff2f",
            "honeydew": "#f0fff0",
            "hotpink": "#ff69b4",
            "indianred ": "#cd5c5c",
            "indigo": "#4b0082",
            "ivory": "#fffff0",
            "khaki": "#f0e68c",
            "lavender": "#e6e6fa",
            "lavenderblush": "#fff0f5",
            "lawngreen": "#7cfc00",
            "lemonchiffon": "#fffacd",
            "lightblue": "#add8e6",
            "lightcoral": "#f08080",
            "lightcyan": "#e0ffff",
            "lightgoldenrodyellow": "#fafad2",
            "lightgrey": "#d3d3d3",
            "lightgreen": "#90ee90",
            "lightpink": "#ffb6c1",
            "lightsalmon": "#ffa07a",
            "lightseagreen": "#20b2aa",
            "lightskyblue": "#87cefa",
            "lightslategray": "#778899",
            "lightsteelblue": "#b0c4de",
            "lightyellow": "#ffffe0",
            "lime": "#00ff00",
            "limegreen": "#32cd32",
            "linen": "#faf0e6",
            "magenta": "#ff00ff",
            "maroon": "#800000",
            "mediumaquamarine": "#66cdaa",
            "mediumblue": "#0000cd",
            "mediumorchid": "#ba55d3",
            "mediumpurple": "#9370d8",
            "mediumseagreen": "#3cb371",
            "mediumslateblue": "#7b68ee",
            "mediumspringgreen": "#00fa9a",
            "mediumturquoise": "#48d1cc",
            "mediumvioletred": "#c71585",
            "midnightblue": "#191970",
            "mintcream": "#f5fffa",
            "mistyrose": "#ffe4e1",
            "moccasin": "#ffe4b5",
            "navajowhite": "#ffdead",
            "navy": "#000080",
            "oldlace": "#fdf5e6",
            "olive": "#808000",
            "olivedrab": "#6b8e23",
            "orange": "#ffa500",
            "orangered": "#ff4500",
            "orchid": "#da70d6",
            "palegoldenrod": "#eee8aa",
            "palegreen": "#98fb98",
            "paleturquoise": "#afeeee",
            "palevioletred": "#d87093",
            "papayawhip": "#ffefd5",
            "peachpuff": "#ffdab9",
            "peru": "#cd853f",
            "pink": "#ffc0cb",
            "plum": "#dda0dd",
            "powderblue": "#b0e0e6",
            "purple": "#800080",
            "red": "#ff0000",
            "rosybrown": "#bc8f8f",
            "royalblue": "#4169e1",
            "saddlebrown": "#8b4513",
            "salmon": "#fa8072",
            "sandybrown": "#f4a460",
            "seagreen": "#2e8b57",
            "seashell": "#fff5ee",
            "sienna": "#a0522d",
            "silver": "#c0c0c0",
            "skyblue": "#87ceeb",
            "slateblue": "#6a5acd",
            "slategray": "#708090",
            "snow": "#fffafa",
            "springgreen": "#00ff7f",
            "steelblue": "#4682b4",
            "tan": "#d2b48c",
            "teal": "#008080",
            "thistle": "#d8bfd8",
            "tomato": "#ff6347",
            "turquoise": "#40e0d0",
            "violet": "#ee82ee",
            "wheat": "#f5deb3",
            "white": "#ffffff",
            "whitesmoke": "#f5f5f5",
            "yellow": "#ffff00",
            "yellowgreen": "#9acd32"
        }[name.toLowerCase()];
    }
    static hexToDescriptor(c) {
        if (c[0] === "#") {
            c = c.substr(1);
        }
        const r = parseInt(c.slice(0, 2), 16);
        const g = parseInt(c.slice(2, 4), 16);
        const b = parseInt(c.slice(4, 6), 16);
        const a = parseInt(c.slice(6, 8), 16);
        const result = { "red": r, "green": g, "blue": b, "alpha": a };
        return result;
        //return 'rgb(' + r + ',' + g + ',' + b + ')';
    }
    static rgbToDescriptor(colorString) {
        if (colorString.startsWith("rgba(")) {
            colorString = colorString.slice(5, colorString.length - 1);
        }
        if (colorString.startsWith("rgb(")) {
            colorString = colorString.slice(4, colorString.length - 1) + ", 0";
        }
        const components = colorString.split(",");
        const result = {
            "red": Number(components[0]),
            "green": Number(components[1]),
            "blue": Number(components[2]),
            "alpha": Number(components[3])
        };
        return result;
    }
    get colorDescriptor() {
        var descriptor;
        const colorHEXFromName = UIColor.nameToHex(this.stringValue);
        if (this.stringValue.startsWith("rgb")) {
            descriptor = UIColor.rgbToDescriptor(this.stringValue);
        }
        else if (colorHEXFromName) {
            descriptor = UIColor.hexToDescriptor(colorHEXFromName);
        }
        else {
            descriptor = UIColor.hexToDescriptor(this.stringValue);
        }
        return descriptor;
    }
    colorWithRed(red) {
        const descriptor = this.colorDescriptor;
        const result = new UIColor("rgba(" + red + "," + descriptor.green + "," + descriptor.blue + "," +
            descriptor.alpha + ")");
        return result;
    }
    colorWithGreen(green) {
        const descriptor = this.colorDescriptor;
        const result = new UIColor("rgba(" + descriptor.red + "," + green + "," + descriptor.blue + "," +
            descriptor.alpha + ")");
        return result;
    }
    colorWithBlue(blue) {
        const descriptor = this.colorDescriptor;
        const result = new UIColor("rgba(" + descriptor.red + "," + descriptor.green + "," + blue + "," +
            descriptor.alpha + ")");
        return result;
    }
    colorWithAlpha(alpha) {
        const descriptor = this.colorDescriptor;
        const result = new UIColor("rgba(" + descriptor.red + "," + descriptor.green + "," + descriptor.blue + "," +
            alpha + ")");
        return result;
    }
    static colorWithRGBA(red, green, blue, alpha = 1) {
        const result = new UIColor("rgba(" + red + "," + green + "," + blue + "," + alpha + ")");
        return result;
    }
    static colorWithDescriptor(descriptor) {
        const result = new UIColor("rgba(" + descriptor.red.toFixed(0) + "," + descriptor.green.toFixed(0) + "," +
            descriptor.blue.toFixed(0) + "," + this.defaultAlphaToOne(descriptor.alpha) + ")");
        return result;
    }
    static defaultAlphaToOne(value = 1) {
        if (value != value) {
            value = 1;
        }
        return value;
    }
    colorByMultiplyingRGB(multiplier) {
        const descriptor = this.colorDescriptor;
        descriptor.red = descriptor.red * multiplier;
        descriptor.green = descriptor.green * multiplier;
        descriptor.blue = descriptor.blue * multiplier;
        const result = UIColor.colorWithDescriptor(descriptor);
        return result;
    }
}
/// <reference path="./UIObject.ts" />
class UIPoint extends UIObject {
    constructor(x, y) {
        super();
        this.x = x;
        this.y = y;
        this._class = UIPoint;
        this.superclass = UIObject;
    }
    copy() {
        return new UIPoint(this.x, this.y);
    }
    isEqualTo(point) {
        const result = (this.x == point.x && this.y == point.y);
        return result;
    }
    scale(zoom) {
        const x = this.x;
        const y = this.y;
        this.x = x * zoom;
        this.y = y * zoom;
        return this;
    }
    add(v) {
        this.x = this.x + v.x;
        this.y = this.y + v.y;
        return this;
    }
    subtract(v) {
        this.x = this.x - v.x;
        this.y = this.y - v.y;
        return this;
    }
    to(b) {
        const a = this;
        const ab = b.copy().add(a.copy().scale(-1));
        return ab;
    }
    pointWithX(x) {
        const result = this.copy();
        result.x = x;
        return result;
    }
    pointWithY(y) {
        const result = this.copy();
        result.y = y;
        return result;
    }
    pointByAddingX(x) {
        return this.pointWithX(this.x + x);
    }
    pointByAddingY(y) {
        return this.pointWithY(this.y + y);
    }
    get length() {
        var result = this.x * this.x + this.y * this.y;
        result = Math.sqrt(result);
        return result;
    }
    didChange(b) {
        // Callback to be set by delegate
    }
}
/// <reference path="./UIPoint.ts" />
class UIRectangle extends UIObject {
    constructor(x = 0, y = 0, height = 0, width = 0) {
        super();
        this._class = UIRectangle;
        this.superclass = UIObject;
        this.min = new UIPoint(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);
        this.max = new UIPoint(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);
        this.min.didChange = this.rectanglePointDidChange;
        this.max.didChange = this.rectanglePointDidChange;
        this._isBeingUpdated = NO;
        this.min = new UIPoint(x, y);
        this.max = new UIPoint(x + width, y + height);
        if (IS_NIL(height)) {
            this.max.y = height;
        }
        if (IS_NIL(width)) {
            this.max.x = width;
        }
    }
    copy() {
        const result = new UIRectangle(this.x, this.y, this.height, this.width);
        return result;
    }
    isEqualTo(rectangle) {
        const result = (IS(rectangle) && this.min.isEqualTo(rectangle.min) && this.max.isEqualTo(rectangle.max));
        return result;
    }
    static zero() {
        const result = new UIRectangle(0, 0, 0, 0);
        return result;
    }
    containsPoint(point) {
        return this.min.x <= point.x && this.min.y <= point.y &&
            point.x <= this.max.x && point.y <= this.max.y;
    }
    updateByAddingPoint(point) {
        if (!point) {
            point = new UIPoint(0, 0);
        }
        this.beginUpdates();
        const min = this.min.copy();
        if (min.x === nil) {
            min.x = this.max.x;
        }
        if (min.y === nil) {
            min.y = this.max.y;
        }
        const max = this.max.copy();
        if (max.x === nil) {
            max.x = this.min.x;
        }
        if (max.y === nil) {
            max.y = this.min.y;
        }
        this.min.x = Math.min(min.x, point.x);
        this.min.y = Math.min(min.y, point.y);
        this.max.x = Math.max(max.x, point.x);
        this.max.y = Math.max(max.y, point.y);
        this.finishUpdates();
    }
    get height() {
        if (this.max.y === nil) {
            return nil;
        }
        return this.max.y - this.min.y;
    }
    set height(height) {
        this.max.y = this.min.y + height;
    }
    get width() {
        if (this.max.x === nil) {
            return nil;
        }
        return this.max.x - this.min.x;
    }
    set width(width) {
        this.max.x = this.min.x + width;
    }
    get x() {
        return this.min.x;
    }
    set x(x) {
        this.beginUpdates();
        const width = this.width;
        this.min.x = x;
        this.max.x = this.min.x + width;
        this.finishUpdates();
    }
    get y() {
        return this.min.y;
    }
    set y(y) {
        this.beginUpdates();
        const height = this.height;
        this.min.y = y;
        this.max.y = this.min.y + height;
        this.finishUpdates();
    }
    get topLeft() {
        return this.min.copy();
    }
    get topRight() {
        return new UIPoint(this.max.x, this.y);
    }
    get bottomLeft() {
        return new UIPoint(this.x, this.max.y);
    }
    get bottomRight() {
        return this.max.copy();
    }
    get center() {
        const result = this.min.copy().add(this.min.to(this.max).scale(0.5));
        return result;
    }
    set center(center) {
        const offset = this.center.to(center);
        this.offsetByPoint(offset);
    }
    offsetByPoint(offset) {
        this.min.add(offset);
        this.max.add(offset);
        return this;
    }
    concatenateWithRectangle(rectangle) {
        this.updateByAddingPoint(rectangle.bottomRight);
        this.updateByAddingPoint(rectangle.topLeft);
        return this;
    }
    intersectionRectangleWithRectangle(rectangle) {
        const result = this.copy();
        result.beginUpdates();
        const min = result.min;
        if (min.x === nil) {
            min.x = rectangle.max.x - Math.min(result.width, rectangle.width);
        }
        if (min.y === nil) {
            min.y = rectangle.max.y - Math.min(result.height, rectangle.height);
        }
        const max = result.max;
        if (max.x === nil) {
            max.x = rectangle.min.x + Math.min(result.width, rectangle.width);
        }
        if (max.y === nil) {
            max.y = rectangle.min.y + Math.min(result.height, rectangle.height);
        }
        result.min.x = Math.max(result.min.x, rectangle.min.x);
        result.min.y = Math.max(result.min.y, rectangle.min.y);
        result.max.x = Math.min(result.max.x, rectangle.max.x);
        result.max.y = Math.min(result.max.y, rectangle.max.y);
        if (result.height < 0) {
            const averageY = (this.center.y + rectangle.center.y) * 0.5;
            result.min.y = averageY;
            result.max.y = averageY;
        }
        if (result.width < 0) {
            const averageX = (this.center.x + rectangle.center.x) * 0.5;
            result.min.x = averageX;
            result.max.x = averageX;
        }
        result.finishUpdates();
        return result;
    }
    get area() {
        const result = this.height * this.width;
        return result;
    }
    intersectsWithRectangle(rectangle) {
        return (this.intersectionRectangleWithRectangle(rectangle).area != 0);
    }
    // add some space around the rectangle
    rectangleWithInsets(left, right, bottom, top) {
        const result = this.copy();
        result.min.x = this.min.x + left;
        result.max.x = this.max.x - right;
        result.min.y = this.min.y + top;
        result.max.y = this.max.y - bottom;
        return result;
    }
    rectangleWithInset(inset) {
        const result = this.rectangleWithInsets(inset, inset, inset, inset);
        return result;
    }
    rectangleWithHeight(height, centeredOnPosition = nil) {
        if (isNaN(centeredOnPosition)) {
            centeredOnPosition = nil;
        }
        const result = this.copy();
        result.height = height;
        if (centeredOnPosition != nil) {
            const change = height - this.height;
            result.offsetByPoint(new UIPoint(0, change * centeredOnPosition).scale(-1));
        }
        return result;
    }
    rectangleWithWidth(width, centeredOnPosition = nil) {
        if (isNaN(centeredOnPosition)) {
            centeredOnPosition = nil;
        }
        const result = this.copy();
        result.width = width;
        if (centeredOnPosition != nil) {
            const change = width - this.width;
            result.offsetByPoint(new UIPoint(change * centeredOnPosition, 0).scale(-1));
        }
        return result;
    }
    rectangleWithHeightRelativeToWidth(heightRatio = 1, centeredOnPosition = nil) {
        const result = this.rectangleWithHeight(this.width * heightRatio, centeredOnPosition);
        return result;
    }
    rectangleWithWidthRelativeToHeight(widthRatio = 1, centeredOnPosition = nil) {
        const result = this.rectangleWithWidth(this.height * widthRatio, centeredOnPosition);
        return result;
    }
    rectangleWithX(x, centeredOnPosition = 0) {
        const result = this.copy();
        result.x = x - result.width * centeredOnPosition;
        return result;
    }
    rectangleWithY(y, centeredOnPosition = 0) {
        const result = this.copy();
        result.y = y - result.height * centeredOnPosition;
        return result;
    }
    rectangleByAddingX(x) {
        const result = this.copy();
        result.x = this.x + x;
        return result;
    }
    rectangleByAddingY(y) {
        const result = this.copy();
        result.y = this.y + y;
        return result;
    }
    rectanglesBySplittingWidth(weights, paddings = 0, absoluteWidths = nil) {
        if (IS_NIL(paddings)) {
            paddings = 1;
        }
        if (!(paddings instanceof Array)) {
            paddings = [paddings].arrayByRepeating(weights.length - 1);
        }
        paddings = paddings.arrayByTrimmingToLengthIfLonger(weights.length - 1);
        if (!(absoluteWidths instanceof Array) && IS_NOT_NIL(absoluteWidths)) {
            absoluteWidths = [absoluteWidths].arrayByRepeating(weights.length);
        }
        const result = [];
        const sumOfWeights = weights.reduce(function (a, b, index) {
            if (IS_NOT_NIL(absoluteWidths[index])) {
                b = 0;
            }
            return a + b;
        }, 0);
        const sumOfPaddings = paddings.summedValue;
        const sumOfAbsoluteWidths = absoluteWidths.summedValue;
        const totalRelativeWidth = this.width - sumOfPaddings - sumOfAbsoluteWidths;
        var previousCellMaxX = this.x;
        for (var i = 0; i < weights.length; i++) {
            var resultWidth;
            if (IS_NOT_NIL(absoluteWidths[i])) {
                resultWidth = absoluteWidths[i] || 0;
            }
            else {
                resultWidth = totalRelativeWidth * (weights[i] / sumOfWeights);
            }
            const rectangle = this.rectangleWithWidth(resultWidth);
            var padding = 0;
            if (paddings.length > i && paddings[i]) {
                padding = paddings[i];
            }
            rectangle.x = previousCellMaxX;
            previousCellMaxX = rectangle.max.x + padding;
            //rectangle = rectangle.rectangleWithInsets(0, padding, 0, 0);
            result.push(rectangle);
        }
        return result;
    }
    rectanglesBySplittingHeight(weights, paddings = 0, absoluteHeights = nil) {
        if (IS_NIL(paddings)) {
            paddings = 1;
        }
        if (!(paddings instanceof Array)) {
            paddings = [paddings].arrayByRepeating(weights.length - 1);
        }
        paddings = paddings.arrayByTrimmingToLengthIfLonger(weights.length - 1);
        if (!(absoluteHeights instanceof Array) && IS_NOT_NIL(absoluteHeights)) {
            absoluteHeights = [absoluteHeights].arrayByRepeating(weights.length);
        }
        const result = [];
        const sumOfWeights = weights.reduce(function (a, b, index) {
            if (IS_NOT_NIL(absoluteHeights[index])) {
                b = 0;
            }
            return a + b;
        }, 0);
        const sumOfPaddings = paddings.summedValue;
        const sumOfAbsoluteHeights = absoluteHeights.summedValue;
        const totalRelativeHeight = this.height - sumOfPaddings - sumOfAbsoluteHeights;
        var previousCellMaxY = this.y;
        for (var i = 0; i < weights.length; i++) {
            var resultHeight;
            if (IS_NOT_NIL(absoluteHeights[i])) {
                resultHeight = absoluteHeights[i] || 0;
            }
            else {
                resultHeight = totalRelativeHeight * (weights[i] / sumOfWeights);
            }
            const rectangle = this.rectangleWithHeight(resultHeight);
            var padding = 0;
            if (paddings.length > i && paddings[i]) {
                padding = paddings[i];
            }
            rectangle.y = previousCellMaxY;
            previousCellMaxY = rectangle.max.y + padding;
            //rectangle = rectangle.rectangleWithInsets(0, 0, padding, 0);
            result.push(rectangle);
        }
        return result;
    }
    rectanglesByEquallySplittingWidth(numberOfFrames, padding = 0) {
        const result = [];
        const totalPadding = padding * (numberOfFrames - 1);
        const resultWidth = (this.width - totalPadding) / numberOfFrames;
        for (var i = 0; i < numberOfFrames; i++) {
            const rectangle = this.rectangleWithWidth(resultWidth, i / (numberOfFrames - 1));
            result.push(rectangle);
        }
        return result;
    }
    rectanglesByEquallySplittingHeight(numberOfFrames, padding = 0) {
        const result = [];
        const totalPadding = padding * (numberOfFrames - 1);
        const resultHeight = (this.height - totalPadding) / numberOfFrames;
        for (var i = 0; i < numberOfFrames; i++) {
            const rectangle = this.rectangleWithHeight(resultHeight, i / (numberOfFrames - 1));
            result.push(rectangle);
        }
        return result;
    }
    distributeViewsAlongWidth(views, weights = 1, paddings, absoluteWidths) {
        if (!(weights instanceof Array)) {
            weights = [weights].arrayByRepeating(views.length);
        }
        const frames = this.rectanglesBySplittingWidth(weights, paddings, absoluteWidths);
        frames.forEach(function (frame, index, array) {
            views[index].frame = frame;
        });
        return this;
    }
    distributeViewsAlongHeight(views, weights = 1, paddings, absoluteHeights) {
        if (!(weights instanceof Array)) {
            weights = [weights].arrayByRepeating(views.length);
        }
        const frames = this.rectanglesBySplittingHeight(weights, paddings, absoluteHeights);
        frames.forEach(function (frame, index, array) {
            views[index].frame = frame;
        });
        return this;
    }
    distributeViewsEquallyAlongWidth(views, padding) {
        const frames = this.rectanglesByEquallySplittingWidth(views.length, padding);
        frames.forEach(function (frame, index, array) {
            views[index].frame = frame;
        });
        return this;
    }
    distributeViewsEquallyAlongHeight(views, padding) {
        const frames = this.rectanglesByEquallySplittingHeight(views.length, padding);
        frames.forEach(function (frame, index, array) {
            views[index].frame = frame;
        });
        return this;
    }
    rectangleForNextRow(padding = 0, height = this.height) {
        const result = this.rectangleWithY(this.max.y + padding);
        if (height != this.height) {
            result.height = height;
        }
        return result;
    }
    rectangleForNextColumn(padding = 0, width = this.width) {
        const result = this.rectangleWithX(this.max.x + padding);
        if (width != this.width) {
            result.width = width;
        }
        return result;
    }
    rectangleForPreviousRow(padding = 0) {
        const result = this.rectangleWithY(this.min.y - this.height - padding);
        return result;
    }
    rectangleForPreviousColumn(padding = 0) {
        const result = this.rectangleWithX(this.min.x - this.width - padding);
        return result;
    }
    // Bounding box
    static boundingBoxForPoints(points) {
        const result = new UIRectangle();
        for (var i = 0; i < points.length; i++) {
            result.updateByAddingPoint(points[i]);
        }
        return result;
    }
    beginUpdates() {
        this._isBeingUpdated = YES;
    }
    finishUpdates() {
        this._isBeingUpdated = NO;
        this.didChange();
    }
    didChange() {
        // Callback to be set by delegate
    }
    _rectanglePointDidChange() {
        if (!this._isBeingUpdated) {
            this.didChange();
        }
    }
}
///// <reference path="../autolayout/src/AutoLayout.js" />
/// <reference path="./UIObject.ts" />
/// <reference path="./UIColor.ts" />
/// <reference path="./UIRectangle.ts" />
class UIView extends UIObject {
    constructor(elementID = ("UIView" +
        UIView.nextIndex), viewHTMLElement = null, elementType = null, initViewData) {
        super();
        this._nativeSelectionEnabled = YES;
        this._enabled = YES;
        this._backgroundColor = UIColor.transparentColor;
        this._localizedTextObject = nil;
        this._controlEventTargets = {}; //{ "PointerDown": Function[]; "PointerMove": Function[]; "PointerLeave": Function[]; "PointerEnter": Function[]; "PointerUpInside": Function[]; "PointerUp": Function[]; "PointerHover": Function[]; };
        this._viewControllerLayoutFunction = nil;
        this._isHidden = NO;
        this.pausesPointerEvents = NO;
        this.stopsPointerEventPropagation = YES;
        this._pointerDragThreshold = 2;
        this.ignoresTouches = NO;
        this.ignoresMouse = NO;
        this.forceIntrinsicSizeZero = NO;
        this.controlEvent = UIView.controlEvent;
        this._class = UIView;
        this.superclass = UIObject;
        // Instance variables
        UIView._UIViewIndex = UIView.nextIndex;
        this._UIViewIndex = UIView._UIViewIndex;
        this._styleClasses = [];
        // Object.defineProperty(this, "styleClasses", { get: this.styleClasses, set: this.setStyleClasses });
        // Object.defineProperty(this, "styleClassName", { get: this.styleClassName });
        this._initViewHTMLElement(elementID, viewHTMLElement, elementType);
        this.subviews = [];
        this.superview = nil;
        // Object.defineProperty(this, "elementID", { get: this.elementID });
        // Object.defineProperty(this, "constraints", { get: this.constraints, set: this.setConstraints });
        this._constraints = [];
        this._updateLayoutFunction = nil;
        //Object.defineProperty(this, "backgroundColor", { get: this.backgroundColor, set: this.setBackgroundColor });
        //this.backgroundColor = "transparent";
        // Object.defineProperty(this, "alpha", { get: this.alpha, set: this.setAlpha });
        // Object.defineProperty(this, "frame", { get: this.frame, set: this.setFrame });
        // Object.defineProperty(this, "bounds", { get: this.bounds, set: this.setBounds });
        // Object.defineProperty(this, "userInteractionEnabled", { get: this.userInteractionEnabled, set: this.setUserInteractionEnabled });
        // this._controlEventTargets = {
        //     "PointerDown": [],
        //     "PointerMove": [],
        //     "PointerLeave": [],
        //     "PointerEnter": [],
        //     "PointerUpInside": [],
        //     "PointerUp": [],
        //     "PointerHover": []
        // }
        this._didLayoutSubviewsDelegateFunction = function () {
        };
        this._frameTransform = "";
        this.initView(this.viewHTMLElement.id, this.viewHTMLElement, initViewData);
        this._initViewCSSSelectorsIfNeeded();
        this._loadUIEvents();
        this.setNeedsLayout();
    }
    static get nextIndex() {
        return UIView._UIViewIndex + 1;
    }
    static get pageHeight() {
        const body = document.body;
        const html = document.documentElement;
        const height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);
        return height;
    }
    static get pageWidth() {
        const body = document.body;
        const html = document.documentElement;
        const width = Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth);
        return width;
    }
    initView(elementID, viewHTMLElement, initViewData) {
    }
    centerInContainer() {
        this.style.left = "50%";
        this.style.top = "50%";
        this.style.transform = "translateX(-50%) translateY(-50%)";
    }
    centerXInContainer() {
        this.style.left = "50%";
        this.style.transform = "translateX(-50%)";
    }
    centerYInContainer() {
        this.style.top = "50%";
        this.style.transform = "translateY(-50%)";
    }
    _initViewHTMLElement(elementID, viewHTMLElement, elementType = "div") {
        if (!IS(elementType)) {
            elementType = "div";
        }
        if (!IS(viewHTMLElement)) {
            this._viewHTMLElement = this.createElement(elementID, elementType);
            this.style.position = "absolute";
            this.style.margin = "0";
        }
        else {
            this._viewHTMLElement = viewHTMLElement;
        }
        if (IS(elementID)) {
            this.viewHTMLElement.id = elementID;
        }
        this.viewHTMLElement.obeyAutolayout = YES;
        this.viewHTMLElement.UIView = this;
        this.addStyleClass(this.styleClassName);
    }
    set nativeSelectionEnabled(selectable) {
        this._nativeSelectionEnabled = selectable;
        if (!selectable) {
            this.style.cssText = this.style.cssText +
                " -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;";
        }
        else {
            this.style.cssText = this.style.cssText +
                " -webkit-touch-callout: text; -webkit-user-select: text; -khtml-user-select: text; -moz-user-select: text; -ms-user-select: text; user-select: text;";
        }
    }
    get nativeSelectionEnabled() {
        return this._nativeSelectionEnabled;
    }
    get styleClassName() {
        const result = "UICore_UIView_" + this.class.name;
        return result;
    }
    _initViewCSSSelectorsIfNeeded() {
        if (!this.class._areViewCSSSelectorsInitialized) {
            this.initViewStyleSelectors();
            this.class._areViewCSSSelectorsInitialized = YES;
        }
    }
    initViewStyleSelectors() {
        // Override this in a subclass
    }
    initStyleSelector(selector, style) {
        const styleRules = UIView.getStyleRules(selector);
        if (!styleRules) {
            UIView.createStyleSelector(selector, style);
        }
    }
    createElement(elementID, elementType) {
        var result = document.getElementById(elementID);
        if (!result) {
            result = document.createElement(elementType);
        }
        return result;
    }
    get viewHTMLElement() {
        return this._viewHTMLElement;
    }
    get elementID() {
        return this.viewHTMLElement.id;
    }
    setInnerHTML(key, defaultString, parameters) {
        this._innerHTMLKey = key;
        this._defaultInnerHTML = defaultString;
        this._parameters = parameters;
        const languageName = UICore.languageService.currentLanguageKey;
        const result = UICore.languageService.stringForKey(key, languageName, defaultString, parameters);
        this.innerHTML = result;
    }
    _setInnerHTMLFromKeyIfPossible() {
        if (this._innerHTMLKey && this._defaultInnerHTML) {
            this.setInnerHTML(this._innerHTMLKey, this._defaultInnerHTML, this._parameters);
        }
    }
    _setInnerHTMLFromLocalizedTextObjectIfPossible() {
        if (IS(this._localizedTextObject)) {
            this.innerHTML = UICore.languageService.stringForCurrentLanguage(this._localizedTextObject);
        }
    }
    get localizedTextObject() {
        return this._localizedTextObject;
    }
    set localizedTextObject(localizedTextObject) {
        this._localizedTextObject = localizedTextObject;
        this._setInnerHTMLFromLocalizedTextObjectIfPossible();
    }
    get innerHTML() {
        return this.viewHTMLElement.innerHTML;
    }
    set innerHTML(innerHTML) {
        if (this.innerHTML != innerHTML) {
            this.viewHTMLElement.innerHTML = FIRST(innerHTML, "");
        }
    }
    set hoverText(hoverText) {
        this.viewHTMLElement.setAttribute("title", hoverText);
    }
    get hoverText() {
        return this.viewHTMLElement.getAttribute("title");
    }
    get scrollSize() {
        const result = new UIRectangle(0, 0, this.viewHTMLElement.scrollHeight, this.viewHTMLElement.scrollWidth);
        return result;
    }
    get dialogView() {
        if (!IS(this.superview)) {
            return nil;
        }
        if (!(this instanceof UIDialogView)) {
            return this.superview.dialogView;
        }
        return this;
    }
    get rootView() {
        if (IS(this.superview)) {
            return this.superview.rootView;
        }
        return this;
    }
    set enabled(enabled) {
        this._enabled = enabled;
        this.updateContentForCurrentEnabledState();
    }
    get enabled() {
        return this._enabled;
    }
    updateContentForCurrentEnabledState() {
        this.hidden = !this.enabled;
        this.userInteractionEnabled = this.enabled;
    }
    get tabIndex() {
        return Number(this.viewHTMLElement.getAttribute("tabindex"));
    }
    set tabIndex(index) {
        this.viewHTMLElement.setAttribute("tabindex", "" + index);
    }
    get styleClasses() {
        return this._styleClasses;
    }
    set styleClasses(styleClasses) {
        this._styleClasses = styleClasses;
    }
    hasStyleClass(styleClass) {
        // This is for performance reasons
        if (!IS(styleClass)) {
            return NO;
        }
        const index = this.styleClasses.indexOf(styleClass);
        if (index > -1) {
            return YES;
        }
        return NO;
    }
    addStyleClass(styleClass) {
        if (!IS(styleClass)) {
            return;
        }
        if (!this.hasStyleClass(styleClass)) {
            this._styleClasses.push(styleClass);
        }
    }
    removeStyleClass(styleClass) {
        // This is for performance reasons
        if (!IS(styleClass)) {
            return;
        }
        const index = this.styleClasses.indexOf(styleClass);
        if (index > -1) {
            this.styleClasses.splice(index, 1);
        }
    }
    static findViewWithElementID(elementID) {
        const viewHTMLElement = document.getElementById(elementID);
        if (IS_NOT(viewHTMLElement)) {
            return nil;
        }
        // @ts-ignore
        const result = viewHTMLElement.UIView;
        return result;
    }
    static createStyleSelector(selector, style) {
        return;
        // @ts-ignore
        if (!document.styleSheets) {
            return;
        }
        if (document.getElementsByTagName("head").length == 0) {
            return;
        }
        var styleSheet;
        var mediaType;
        if (document.styleSheets.length > 0) {
            for (var i = 0, l = document.styleSheets.length; i < l; i++) {
                if (document.styleSheets[i].disabled) {
                    continue;
                }
                const media = document.styleSheets[i].media;
                mediaType = typeof media;
                if (mediaType === "string") {
                    if (media === "" || (media.indexOf("screen") !== -1)) {
                        styleSheet = document.styleSheets[i];
                    }
                }
                else if (mediaType == "object") {
                    if (media.mediaText === "" || (media.mediaText.indexOf("screen") !== -1)) {
                        styleSheet = document.styleSheets[i];
                    }
                }
                if (typeof styleSheet !== "undefined") {
                    break;
                }
            }
        }
        if (typeof styleSheet === "undefined") {
            const styleSheetElement = document.createElement("style");
            styleSheetElement.type = "text/css";
            document.getElementsByTagName("head")[0].appendChild(styleSheetElement);
            for (i = 0; i < document.styleSheets.length; i++) {
                if (document.styleSheets[i].disabled) {
                    continue;
                }
                styleSheet = document.styleSheets[i];
            }
            mediaType = typeof styleSheet.media;
        }
        if (mediaType === "string") {
            for (var i = 0, l = styleSheet.rules.length; i < l; i++) {
                if (styleSheet.rules[i].selectorText && styleSheet.rules[i].selectorText.toLowerCase() ==
                    selector.toLowerCase()) {
                    styleSheet.rules[i].style.cssText = style;
                    return;
                }
            }
            styleSheet.addRule(selector, style);
        }
        else if (mediaType === "object") {
            var styleSheetLength = 0;
            try {
                styleSheetLength = (styleSheet.cssRules) ? styleSheet.cssRules.length : 0;
            }
            catch (error) {
            }
            for (var i = 0; i < styleSheetLength; i++) {
                if (styleSheet.cssRules[i].selectorText && styleSheet.cssRules[i].selectorText.toLowerCase() ==
                    selector.toLowerCase()) {
                    styleSheet.cssRules[i].style.cssText = style;
                    return;
                }
            }
            styleSheet.insertRule(selector + "{" + style + "}", styleSheetLength);
        }
    }
    static getStyleRules(selector) {
        var selector = selector.toLowerCase();
        for (var i = 0; i < document.styleSheets.length; i++) {
            const styleSheet = document.styleSheets[i];
            var styleRules;
            try {
                styleRules = styleSheet.cssRules ? styleSheet.cssRules : styleSheet.rules;
            }
            catch (error) {
            }
            return styleRules;
        }
    }
    get style() {
        return this.viewHTMLElement.style;
    }
    get computedStyle() {
        return getComputedStyle(this.viewHTMLElement);
    }
    get hidden() {
        return this._isHidden;
    }
    set hidden(v) {
        this._isHidden = v;
        if (this._isHidden) {
            this.style.visibility = "hidden";
        }
        else {
            this.style.visibility = "visible";
        }
    }
    static set pageScale(scale) {
        UIView._pageScale = scale;
        const zoom = scale;
        const width = 100 / zoom;
        const viewHTMLElement = UICore.main.rootViewController.view.viewHTMLElement;
        viewHTMLElement.style.transformOrigin = "left top";
        viewHTMLElement.style.transform = "scale(" + zoom + ")";
        viewHTMLElement.style.width = width + "%";
    }
    static get pageScale() {
        return UIView._pageScale;
    }
    calculateAndSetViewFrame() {
        // Use this method to calculate the frame for the view itself
        // This can be used when adding subviews to existing views like buttons
    }
    get frame() {
        // var result = new UIRectangle(1 * this.viewHTMLElement.offsetLeft, 1 * this.viewHTMLElement.offsetTop, 1 * this.viewHTMLElement.offsetHeight, 1 * this.viewHTMLElement.offsetWidth);
        // result.zIndex = 1 * this.style.zIndex;
        var result = this._frame;
        if (!result) {
            result = new UIRectangle(1 * this.viewHTMLElement.offsetLeft, 1 * this.viewHTMLElement.offsetTop, 1 *
                this.viewHTMLElement.offsetHeight, 1 * this.viewHTMLElement.offsetWidth);
            result.zIndex = 0;
        }
        return result.copy();
    }
    set frame(rectangle) {
        if (IS(rectangle)) {
            this.setFrame(rectangle);
        }
    }
    setFrame(rectangle, zIndex = 0, performUncheckedLayout = NO) {
        const frame = this._frame || new UIRectangle(nil, nil, nil, nil);
        if (zIndex != undefined) {
            rectangle.zIndex = zIndex;
        }
        this._frame = rectangle;
        // This is useless because frames are copied
        // frame.didChange = function () {
        //     // Do nothing
        // }
        // rectangle.didChange = function () {
        //     this.frame = rectangle;
        // }.bind(this);
        if (frame && frame.isEqualTo(rectangle) && !performUncheckedLayout) {
            return;
        }
        UIView._setAbsoluteSizeAndPosition(this.viewHTMLElement, rectangle.topLeft.x, rectangle.topLeft.y, rectangle.width, rectangle.height, rectangle.zIndex);
        if (frame.height != rectangle.height || frame.width != rectangle.width || performUncheckedLayout) {
            this.setNeedsLayout();
            this.boundsDidChange();
            //this.layoutSubviews();
        }
    }
    get bounds() {
        var result;
        // if (IS_NOT(this._frame) && this.style.height == "" && this.style.width  == "" && this.style.left == "" && this.style.right == "" && this.style.bottom == "" && this.style.top == "") {
        //     result = new UIRectangle(0, 0, 0, 0)
        // }
        // else
        if (IS_NOT(this._frame)) {
            result = new UIRectangle(0, 0, 1 * this.viewHTMLElement.offsetHeight, 1 * this.viewHTMLElement.offsetWidth);
        }
        else {
            result = this.frame.copy();
            result.x = 0;
            result.y = 0;
        }
        return result;
    }
    set bounds(rectangle) {
        const frame = this.frame;
        this.frame = new UIRectangle(frame.topLeft.x, frame.topLeft.y, rectangle.height, rectangle.width);
    }
    boundsDidChange() {
    }
    setPosition(left = nil, right = nil, bottom = nil, top = nil, height = nil, width = nil) {
        const previousBounds = this.bounds;
        this.setStyleProperty("left", left);
        this.setStyleProperty("right", right);
        this.setStyleProperty("bottom", bottom);
        this.setStyleProperty("top", top);
        this.setStyleProperty("height", height);
        this.setStyleProperty("width", width);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setSizes(height, width) {
        const previousBounds = this.bounds;
        this.setStyleProperty("height", height);
        this.setStyleProperty("width", width);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setMinSizes(height, width) {
        const previousBounds = this.bounds;
        this.setStyleProperty("minHeight", height);
        this.setStyleProperty("minWidth", width);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setMaxSizes(height, width) {
        const previousBounds = this.bounds;
        this.setStyleProperty("maxHeight", height);
        this.setStyleProperty("maxWidth", width);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setMargin(margin) {
        const previousBounds = this.bounds;
        this.setStyleProperty("margin", margin);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setMargins(left, right, bottom, top) {
        const previousBounds = this.bounds;
        this.setStyleProperty("marginLeft", left);
        this.setStyleProperty("marginRight", right);
        this.setStyleProperty("marginBottom", bottom);
        this.setStyleProperty("marginTop", top);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setPadding(padding) {
        const previousBounds = this.bounds;
        this.setStyleProperty("padding", padding);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setPaddings(left, right, bottom, top) {
        const previousBounds = this.bounds;
        this.setStyleProperty("paddingLeft", left);
        this.setStyleProperty("paddingRight", right);
        this.setStyleProperty("paddingBottom", bottom);
        this.setStyleProperty("paddingTop", top);
        const bounds = this.bounds;
        if (bounds.height != previousBounds.height || bounds.width != previousBounds.width) {
            this.setNeedsLayout();
            this.boundsDidChange();
        }
    }
    setBorder(radius = nil, width = 1, color = UIColor.blackColor, style = "solid") {
        this.setStyleProperty("borderStyle", style);
        this.setStyleProperty("borderRadius", radius);
        this.setStyleProperty("borderColor", color.stringValue);
        this.setStyleProperty("borderWidth", width);
    }
    setStyleProperty(propertyName, value) {
        try {
            if (IS_NIL(value)) {
                return;
            }
            if (IS_DEFINED(value) && value.isANumber) {
                value = "" + value.integerValue + "px";
            }
            this.style[propertyName] = value;
        }
        catch (exception) {
            console.log(exception);
        }
    }
    get userInteractionEnabled() {
        const result = (this.style.pointerEvents != "none");
        return result;
    }
    set userInteractionEnabled(userInteractionEnabled) {
        if (userInteractionEnabled) {
            this.style.pointerEvents = "";
        }
        else {
            this.style.pointerEvents = "none";
        }
    }
    get backgroundColor() {
        return this._backgroundColor;
    }
    set backgroundColor(backgroundColor) {
        this._backgroundColor = backgroundColor;
        this.style.backgroundColor = backgroundColor.stringValue;
    }
    get alpha() {
        return 1 * this.style.opacity;
    }
    set alpha(alpha) {
        this.style.opacity = "" + alpha;
    }
    static animateViewOrViewsWithDurationDelayAndFunction(viewOrViews, duration, delay, timingStyle = "cubic-bezier(0.25,0.1,0.25,1)", transformFunction, transitioncompletionFunction) {
        function callTransitioncompletionFunction() {
            (transitioncompletionFunction || nil)();
            viewOrViews.forEach(function (view, index, array) {
                view.animationDidFinish();
            });
        }
        if (IS_FIREFOX) {
            // Firefox does not fire the transition completion event properly
            new UIObject().performFunctionWithDelay(delay + duration, callTransitioncompletionFunction);
        }
        if (!(viewOrViews instanceof Array)) {
            viewOrViews = [viewOrViews];
        }
        const transitionStyles = [];
        const transitionDurations = [];
        const transitionDelays = [];
        const transitionTimings = [];
        for (var i = 0; i < viewOrViews.length; i++) {
            var view = viewOrViews[i];
            if (view.viewHTMLElement) {
                view = view.viewHTMLElement;
            }
            view.addEventListener("transitionend", transitionDidFinish, true);
            transitionStyles.push(view.style.transition);
            transitionDurations.push(view.style.transitionDuration);
            transitionDelays.push(view.style.transitionDelay);
            transitionTimings.push(view.style.transitionTimingFunction);
            view.style.transition = "all";
            view.style.transitionDuration = "" + duration + "s";
            view.style.transitionDelay = "" + delay + "s";
            view.style.transitionTimingFunction = timingStyle;
        }
        transformFunction();
        const transitionObject = {
            "finishImmediately": finishTransitionImmediately,
            "didFinish": transitionDidFinishManually,
            "views": viewOrViews,
            "registrationTime": Date.now()
        };
        function finishTransitionImmediately() {
            for (var i = 0; i < viewOrViews.length; i++) {
                var view = viewOrViews[i];
                if (view.viewHTMLElement) {
                    view = view.viewHTMLElement;
                }
                view.style.transition = "all";
                view.style.transitionDuration = "" + duration + "s";
                view.style.transitionDelay = "" + delay + "s";
                view.style.transition = transitionStyles[i];
                view.style.transitionDuration = transitionDurations[i];
                view.style.transitionDelay = transitionDelays[i];
                view.style.transitionTimingFunction = transitionTimings[i];
            }
        }
        function transitionDidFinish(event) {
            var view = event.srcElement;
            if (!view) {
                return;
            }
            if (view.viewHTMLElement) {
                view = view.viewHTMLElement;
            }
            view.style.transition = transitionStyles[i];
            view.style.transitionDuration = transitionDurations[i];
            view.style.transitionDelay = transitionDelays[i];
            view.style.transitionTimingFunction = transitionTimings[i];
            callTransitioncompletionFunction();
            view.removeEventListener("transitionend", transitionDidFinish, true);
        }
        function transitionDidFinishManually() {
            for (var i = 0; i < viewOrViews.length; i++) {
                var view = viewOrViews[i];
                if (view.viewHTMLElement) {
                    view = view.viewHTMLElement;
                }
                view.style.transition = transitionStyles[i];
                view.style.transitionDuration = transitionDurations[i];
                view.style.transitionDelay = transitionDelays[i];
                view.style.transitionTimingFunction = transitionTimings[i];
                view.removeEventListener("transitionend", transitionDidFinish, true);
            }
        }
        return transitionObject;
    }
    animationDidFinish() {
    }
    static _setAbsoluteSizeAndPosition(element, left, top, width, height, zIndex = 0) {
        // if (!UIView._transformAttribute) {
        //     UIView._transformAttribute = (('transform' in document.documentElement.style) ? 'transform' : undefined);
        //     UIView._transformAttribute = UIView._transformAttribute || (('-webkit-transform' in document.documentElement.style) ? '-webkit-transform' : 'undefined');
        //     UIView._transformAttribute = UIView._transformAttribute || (('-moz-transform' in document.documentElement.style) ? '-moz-transform' : 'undefined');
        //     UIView._transformAttribute = UIView._transformAttribute || (('-ms-transform' in document.documentElement.style) ? '-ms-transform' : 'undefined');
        //     UIView._transformAttribute = UIView._transformAttribute || (('-o-transform' in document.documentElement.style) ? '-o-transform' : 'undefined');
        // }
        if (!IS(element) || !element.obeyAutolayout && !element.getAttribute("obeyAutolayout")) {
            return;
        }
        if (element.id == "mainView") {
            var asd = 1;
        }
        if (IS(height)) {
            height = height.integerValue + "px";
        }
        if (IS(width)) {
            width = width.integerValue + "px";
        }
        var str = element.style.cssText;
        const frameTransform = UIView._transformAttribute + ": translate3d(" + (1 * left).integerValue + "px, " +
            (1 * top).integerValue + "px, " + zIndex.integerValue + "px)";
        if (element.UIView) {
            str = str + frameTransform + ";";
        }
        else {
            element.UIView._frameTransform = frameTransform;
        }
        if (height == nil) {
            str = str + " height: unset;";
        }
        else {
            str = str + " height:" + height + ";";
        }
        if (width == nil) {
            str = str + " width: unset;";
        }
        else {
            str = str + " width:" + width + ";";
        }
        if (element.id == "mainView") {
            var asd = 1;
        }
        element.style.cssText = element.style.cssText + str;
    }
    static performAutoLayout(parentElement, visualFormatArray, constraintsArray) {
        const view = new AutoLayout.View();
        if (IS(visualFormatArray) && IS(visualFormatArray.length)) {
            view.addConstraints(AutoLayout.VisualFormat.parse(visualFormatArray, { extended: true }));
        }
        if (IS(constraintsArray) && IS(constraintsArray.length)) {
            view.addConstraints(constraintsArray);
        }
        const elements = {};
        for (var key in view.subViews) {
            if (!view.subViews.hasOwnProperty(key)) {
                continue;
            }
            var element = nil;
            try {
                element = parentElement.querySelector("#" + key);
            }
            catch (error) {
                //console.log("Error occurred " + error);
            }
            if (element && !element.obeyAutolayout && !element.getAttribute("obeyAutolayout")) {
            }
            else if (element) {
                element.className += element.className ? " abs" : "abs";
                elements[key] = element;
            }
        }
        var parentUIView = nil;
        if (parentElement.UIView) {
            parentUIView = parentElement.UIView;
        }
        const updateLayout = function () {
            view.setSize(parentElement ? parentElement.clientWidth : window.innerWidth, parentElement ? parentElement.clientHeight : window.innerHeight);
            for (key in view.subViews) {
                if (!view.subViews.hasOwnProperty(key)) {
                    continue;
                }
                const subView = view.subViews[key];
                if (elements[key]) {
                    UIView._setAbsoluteSizeAndPosition(elements[key], subView.left, subView.top, subView.width, subView.height);
                }
            }
            parentUIView.didLayoutSubviews();
        };
        updateLayout();
        return updateLayout;
    }
    static runFunctionBeforeNextFrame(step) {
        if (IS_SAFARI) {
            // This creates a microtask
            Promise.resolve().then(step);
        }
        else {
            window.requestAnimationFrame(step);
        }
    }
    static scheduleLayoutViewsIfNeeded() {
        UIView.runFunctionBeforeNextFrame(UIView.layoutViewsIfNeeded);
    }
    static layoutViewsIfNeeded() {
        for (var i = 0; i < UIView._viewsToLayout.length; i++) {
            const view = UIView._viewsToLayout[i];
            view.layoutIfNeeded();
        }
        UIView._viewsToLayout = [];
    }
    setNeedsLayout() {
        if (this._shouldLayout) {
            return;
        }
        this._shouldLayout = YES;
        // Register view for layout before next frame
        UIView._viewsToLayout.push(this);
        if (UIView._viewsToLayout.length == 1) {
            UIView.scheduleLayoutViewsIfNeeded();
        }
    }
    get needsLayout() {
        return this._shouldLayout;
    }
    layoutIfNeeded() {
        if (!this._shouldLayout) {
            return;
        }
        this._shouldLayout = NO;
        try {
            this.layoutSubviews();
        }
        catch (exception) {
            console.log(exception);
        }
    }
    layoutSubviews() {
        this._shouldLayout = NO;
        // Autolayout
        //window.removeEventListener('resize', this._updateLayoutFunction);
        if (this.constraints.length) {
            this._updateLayoutFunction = UIView.performAutoLayout(this.viewHTMLElement, null, this.constraints);
        }
        //this._updateLayoutFunction = this.layoutSubviews.bind(this);
        //window.addEventListener('resize', this._updateLayoutFunction);
        this._viewControllerLayoutFunction();
        this.applyClassesAndStyles();
        for (var i = 0; i < this.subviews.length; i++) {
            const subview = this.subviews[i];
            subview.calculateAndSetViewFrame();
            //subview.layoutSubviews();
        }
        this.didLayoutSubviews();
    }
    applyClassesAndStyles() {
        //var classesString = "";
        for (var i = 0; i < this.styleClasses.length; i++) {
            const styleClass = this.styleClasses[i];
            if (styleClass) {
                this.viewHTMLElement.classList.add(styleClass);
            }
            //classesString = classesString + " " + styleClass;
        }
        //this.viewHTMLElement.className = classesString;
    }
    didLayoutSubviews() {
        this._didLayoutSubviewsDelegateFunction();
    }
    get constraints() {
        return this._constraints;
    }
    set constraints(constraints) {
        this._constraints = constraints;
    }
    addConstraint(constraint) {
        this.constraints.push(constraint);
    }
    addConstraintsWithVisualFormat(visualFormatArray) {
        this.constraints = this.constraints.concat(AutoLayout.VisualFormat.parse(visualFormatArray, { extended: true }));
    }
    static constraintWithView(view, attribute, relation, toView, toAttribute, multiplier, constant, priority) {
        var UIViewObject = nil;
        var viewID = null;
        if (view) {
            if (view.isKindOfClass && view.isKindOfClass(UIView)) {
                UIViewObject = view;
                view = view.viewHTMLElement;
            }
            viewID = view.id;
        }
        var toUIViewObject = nil;
        var toViewID = null;
        if (toView) {
            if (toView.isKindOfClass && view.isKindOfClass(UIView)) {
                toUIViewObject = toView;
                toView = toView.viewHTMLElement;
            }
            toViewID = toView.id;
        }
        const constraint = {
            view1: viewID,
            attr1: attribute,
            relation: relation,
            view2: toViewID,
            attr2: toAttribute,
            multiplier: multiplier,
            constant: constant,
            priority: priority
        };
        return constraint;
    }
    subviewWithID(viewID) {
        var resultHTMLElement = nil;
        try {
            resultHTMLElement = this.viewHTMLElement.querySelector("#" + viewID);
        }
        catch (error) {
        }
        if (resultHTMLElement && resultHTMLElement.UIView) {
            return resultHTMLElement.UIView;
        }
        return nil;
    }
    rectangleContainingSubviews() {
        const center = this.bounds.center;
        var result = new UIRectangle(center.x, center.y, 0, 0);
        for (var i = 0; i < this.subviews.length; i++) {
            const subview = this.subviews[i];
            var frame = subview.frame;
            const rectangleContainingSubviews = subview.rectangleContainingSubviews();
            frame = frame.concatenateWithRectangle(rectangleContainingSubviews);
            result = result.concatenateWithRectangle(frame);
        }
        return result;
    }
    hasSubview(view) {
        // This is for performance reasons
        if (!IS(view)) {
            return NO;
        }
        for (var i = 0; i < this.subviews.length; i++) {
            const subview = this.subviews[i];
            if (subview == view) {
                return YES;
            }
        }
        return NO;
    }
    get viewBelowThisView() {
        const result = (this.viewHTMLElement.previousElementSibling || {}).UIView;
        return result;
    }
    get viewAboveThisView() {
        const result = (this.viewHTMLElement.nextElementSibling || {}).UIView;
        return result;
    }
    addSubview(view, aboveView) {
        if (!this.hasSubview(view) && IS(view)) {
            view.willMoveToSuperview(this);
            if (IS(aboveView)) {
                this.viewHTMLElement.insertBefore(view.viewHTMLElement, aboveView.viewHTMLElement.nextSibling);
                this.subviews.insertElementAtIndex(this.subviews.indexOf(aboveView), view);
            }
            else {
                this.viewHTMLElement.appendChild(view.viewHTMLElement);
                this.subviews.push(view);
            }
            view.didMoveToSuperview(this);
            if (this.superview && this.isMemberOfViewTree) {
                view.broadcastEventInSubtree({
                    name: UIView.broadcastEventName.AddedToViewTree,
                    parameters: nil
                });
            }
            this.setNeedsLayout();
        }
    }
    addSubviews(views) {
        views.forEach(function (view, index, array) {
            this.addSubview(view);
        }, this);
    }
    moveToBottomOfSuperview() {
        if (IS(this.superview)) {
            const bottomView = this.superview.subviews.firstElement;
            if (bottomView == this) {
                return;
            }
            this.superview.subviews.removeElement(this);
            this.superview.subviews.insertElementAtIndex(0, this);
            this.superview.viewHTMLElement.insertBefore(this.viewHTMLElement, bottomView.viewHTMLElement);
        }
    }
    moveToTopOfSuperview() {
        if (IS(this.superview)) {
            const topView = this.superview.subviews.lastElement;
            if (topView == this) {
                return;
            }
            this.superview.subviews.removeElement(this);
            this.superview.subviews.push(this);
            this.superview.viewHTMLElement.appendChild(this.viewHTMLElement);
        }
    }
    removeFromSuperview() {
        if (IS(this.superview)) {
            this.forEachViewInSubtree(function (view) {
                view.blur();
            });
            const index = this.superview.subviews.indexOf(this);
            if (index > -1) {
                this.superview.subviews.splice(index, 1);
                this.superview.viewHTMLElement.removeChild(this.viewHTMLElement);
                this.superview = nil;
                this.broadcastEventInSubtree({
                    name: UIView.broadcastEventName.RemovedFromViewTree,
                    parameters: nil
                });
            }
        }
    }
    willAppear() {
    }
    willMoveToSuperview(superview) {
        this._setInnerHTMLFromKeyIfPossible();
        this._setInnerHTMLFromLocalizedTextObjectIfPossible();
    }
    didMoveToSuperview(superview) {
        this.superview = superview;
    }
    wasAddedToViewTree() {
    }
    wasRemovedFromViewTree() {
    }
    get isMemberOfViewTree() {
        var element = this.viewHTMLElement;
        for (var i = 0; element; i = i) {
            if (element.parentElement && element.parentElement == document.body) {
                return YES;
            }
            element = element.parentElement;
        }
        return NO;
    }
    get allSuperviews() {
        const result = [];
        var view = this;
        for (var i = 0; IS(view); i = i) {
            result.push(view);
            view = view.superview;
        }
        return result;
    }
    setNeedsLayoutOnAllSuperviews() {
        this.allSuperviews.reverse().forEach(function (view, index, array) {
            view.setNeedsLayout();
        });
    }
    setNeedsLayoutUpToRootView() {
        this.setNeedsLayoutOnAllSuperviews();
        this.setNeedsLayout();
    }
    focus() {
        this.viewHTMLElement.focus();
    }
    blur() {
        this.viewHTMLElement.blur();
    }
    _loadUIEvents() {
        //this.viewHTMLElement = nil;
        const isTouchEventClassDefined = NO || window.TouchEvent;
        const pauseEvent = (event, forced = NO) => {
            if (this.pausesPointerEvents || forced) {
                if (event.stopPropagation) {
                    event.stopPropagation();
                }
                if (event.preventDefault) {
                    event.preventDefault();
                }
                event.cancelBubble = true;
                event.returnValue = false;
                return false;
            }
            if (event.stopPropagation && this.stopsPointerEventPropagation) {
                event.stopPropagation();
            }
        };
        const onMouseDown = (event) => {
            if ((this.ignoresTouches && isTouchEventClassDefined && event instanceof TouchEvent) ||
                ((this.ignoresMouse || (IS(this._touchEventTime) && (Date.now() - this._touchEventTime) > 500)) &&
                    event instanceof MouseEvent)) {
                return;
            }
            this.sendControlEventForKey(UIView.controlEvent.PointerDown, event);
            this._isPointerInside = YES;
            this._isPointerValid = YES;
            this._initialPointerPosition = new UIPoint(event.clientX, event.clientY);
            if (isTouchEventClassDefined && event instanceof TouchEvent) {
                this._touchEventTime = Date.now();
                this._initialPointerPosition = new UIPoint(event.touches[0].clientX, event.touches[0].clientY);
                if (event.touches.length > 1) {
                    onTouchCancel(event);
                    return;
                }
            }
            else {
                this._touchEventTime = nil;
                pauseEvent(event);
            }
            this._hasPointerDragged = NO;
        };
        const onTouchStart = onMouseDown;
        const onmouseup = (event) => {
            if (!this._isPointerValid) {
                return;
            }
            if ((this.ignoresTouches && isTouchEventClassDefined && event instanceof TouchEvent) ||
                (this.ignoresMouse && event instanceof MouseEvent)) {
                return;
            }
            if (this._isPointerInside) {
                onPointerUpInside(event);
                if (!this._hasPointerDragged) {
                    this.sendControlEventForKey(UIView.controlEvent.PointerTap, event);
                }
            }
            // This has to be sent after the more specific event so that UIButton can ignore it when not highlighted
            this.sendControlEventForKey(UIView.controlEvent.PointerUp, event);
            pauseEvent(event);
        };
        const onTouchEnd = onmouseup;
        // function onMouseEnter(event) {
        //     this.sendControlEventForKey(UIView.controlEvent.PointerEnter, event);
        //     this._isPointerInside = YES;
        //     pauseEvent(event);
        // }
        const onmouseout = (event) => {
            if ((this.ignoresTouches && isTouchEventClassDefined && event instanceof TouchEvent) ||
                (this.ignoresMouse && event instanceof MouseEvent)) {
                return;
            }
            this.sendControlEventForKey(UIView.controlEvent.PointerLeave, event);
            this._isPointerInside = NO;
            pauseEvent(event);
        };
        const onTouchLeave = onmouseout;
        var onTouchCancel = function (event) {
            if (!this._isPointerValid) {
                return;
            }
            if ((this.ignoresTouches && isTouchEventClassDefined && event instanceof TouchEvent) ||
                (this.ignoresMouse && event instanceof MouseEvent)) {
                return;
            }
            this._isPointerValid = NO;
            this.sendControlEventForKey(UIView.controlEvent.PointerCancel, event);
        }.bind(this);
        const onmouseover = (event) => {
            if ((this.ignoresTouches && isTouchEventClassDefined && event instanceof TouchEvent) ||
                (this.ignoresMouse && event instanceof MouseEvent)) {
                return;
            }
            this.sendControlEventForKey(UIView.controlEvent.PointerHover, event);
            this._isPointerInside = YES;
            this._isPointerValid = YES;
            pauseEvent(event);
        };
        const onMouseMove = (event) => {
            if (!this._isPointerValid) {
                return;
            }
            if ((this.ignoresTouches && isTouchEventClassDefined && event instanceof TouchEvent) ||
                (this.ignoresMouse && event instanceof MouseEvent)) {
                return;
            }
            if (IS_NOT(this._initialPointerPosition)) {
                this._initialPointerPosition = new UIPoint(event.clientX, event.clientY);
            }
            if (new UIPoint(event.clientX, event.clientY).to(this._initialPointerPosition).length >
                this._pointerDragThreshold) {
                this._hasPointerDragged = YES;
            }
            this.sendControlEventForKey(UIView.controlEvent.PointerMove, event);
            pauseEvent(event);
        };
        const onTouchMove = function (event) {
            if (!this._isPointerValid) {
                return;
            }
            if ((this.ignoresTouches && isTouchEventClassDefined && event instanceof TouchEvent) ||
                (this.ignoresMouse && event instanceof MouseEvent)) {
                return;
            }
            if (event.touches.length > 1) {
                onTouchZoom(event);
                return;
            }
            const touch = event.touches[0];
            if (new UIPoint(touch.clientX, touch.clientY).to(this._initialPointerPosition).length >
                this._pointerDragThreshold) {
                this._hasPointerDragged = YES;
            }
            if (this._isPointerInside && this.viewHTMLElement !=
                document.elementFromPoint(touch.clientX, touch.clientY)) {
                this._isPointerInside = NO;
                this.sendControlEventForKey(UIView.controlEvent.PointerLeave, event);
            }
            this.sendControlEventForKey(UIView.controlEvent.PointerMove, event);
            //pauseEvent(event);
        };
        var onTouchZoom = function onTouchZoom(event) {
            this.sendControlEventForKey(UIView.controlEvent.MultipleTouches, event);
        }.bind(this);
        var onPointerUpInside = (event) => {
            pauseEvent(event);
            this.sendControlEventForKey(UIView.controlEvent.PointerUpInside, event);
        };
        function eventKeyIsEnter(event) {
            if (event.keyCode !== 13) {
                return NO;
            }
            return YES;
        }
        function eventKeyIsTab(event) {
            if (event.keyCode !== 9) {
                return NO;
            }
            return YES;
        }
        function eventKeyIsEsc(event) {
            var result = false;
            if ("key" in event) {
                result = (event.key == "Escape" || event.key == "Esc");
            }
            else {
                result = (event.keyCode == 27);
            }
            return result;
        }
        function eventKeyIsLeft(event) {
            if (event.keyCode != "37") {
                return NO;
            }
            return YES;
        }
        function eventKeyIsRight(event) {
            if (event.keyCode != "39") {
                return NO;
            }
            return YES;
        }
        function eventKeyIsDown(event) {
            if (event.keyCode != "40") {
                return NO;
            }
            return YES;
        }
        function eventKeyIsUp(event) {
            if (event.keyCode != "38") {
                return NO;
            }
            return YES;
        }
        const onKeyDown = function (event) {
            if (eventKeyIsEnter(event)) {
                this.sendControlEventForKey(UIView.controlEvent.EnterDown, event);
            }
            if (eventKeyIsEsc(event)) {
                this.sendControlEventForKey(UIView.controlEvent.EscDown, event);
            }
            if (eventKeyIsTab(event) && this._controlEventTargets.TabDown && this._controlEventTargets.TabDown.length) {
                this.sendControlEventForKey(UIView.controlEvent.TabDown, event);
                pauseEvent(event, YES);
            }
            if (eventKeyIsLeft(event)) {
                this.sendControlEventForKey(UIView.controlEvent.LeftArrowDown, event);
            }
            if (eventKeyIsRight(event)) {
                this.sendControlEventForKey(UIView.controlEvent.RightArrowDown, event);
            }
            if (eventKeyIsDown(event)) {
                this.sendControlEventForKey(UIView.controlEvent.DownArrowDown, event);
            }
            if (eventKeyIsUp(event)) {
                this.sendControlEventForKey(UIView.controlEvent.UpArrowDown, event);
            }
        }.bind(this);
        const onKeyUp = function (event) {
            if (eventKeyIsEnter(event)) {
                this.sendControlEventForKey(UIView.controlEvent.EnterUp, event);
            }
        }.bind(this);
        const onfocus = function (event) {
            this.sendControlEventForKey(UIView.controlEvent.Focus, event);
        }.bind(this);
        const onblur = function (event) {
            this.sendControlEventForKey(UIView.controlEvent.Blur, event);
        }.bind(this);
        // Mouse and touch start events
        this._viewHTMLElement.onmousedown = onMouseDown.bind(this);
        this._viewHTMLElement.ontouchstart = onTouchStart.bind(this);
        // this.viewHTMLElement.addEventListener("mousedown", onMouseDown.bind(this), false)
        // this.viewHTMLElement.addEventListener('touchstart', onTouchStart.bind(this), false)
        // //this.viewHTMLElement.addEventListener("mouseenter", onMouseEnter.bind(this), false);
        // Mouse and touch move events
        this._viewHTMLElement.onmousemove = onMouseMove.bind(this);
        this._viewHTMLElement.ontouchmove = onTouchMove.bind(this);
        // this.viewHTMLElement.addEventListener("mousemove", onMouseMove.bind(this), false)
        // this.viewHTMLElement.addEventListener('touchmove', onTouchMove.bind(this), false)
        //this.viewHTMLElement.addEventListener("mousewheel", onmousewheel.bind(this), false)
        this._viewHTMLElement.onmouseover = onmouseover.bind(this);
        // this.viewHTMLElement.addEventListener("mouseover", onmouseover.bind(this), false)
        // Mouse and touch end events
        this._viewHTMLElement.onmouseup = onmouseup.bind(this);
        this._viewHTMLElement.ontouchend = onTouchEnd.bind(this);
        this._viewHTMLElement.ontouchcancel = onTouchCancel.bind(this);
        // this.viewHTMLElement.addEventListener("mouseup", onmouseup.bind(this), false)
        // this.viewHTMLElement.addEventListener('touchend', onTouchEnd.bind(this), false)
        // this.viewHTMLElement.addEventListener('touchcancel', onTouchCancel.bind(this), false)
        this._viewHTMLElement.onmouseout = onmouseout.bind(this);
        // this.viewHTMLElement.addEventListener("mouseout", onmouseout.bind(this), false)
        this._viewHTMLElement.addEventListener("touchleave", onTouchLeave.bind(this), false);
        // this.viewHTMLElement.onkeydown = onkeydown
        // this.viewHTMLElement.onkeyup = onkeyup
        this._viewHTMLElement.addEventListener("keydown", onKeyDown, false);
        this._viewHTMLElement.addEventListener("keyup", onKeyUp, false);
        // Focus events
        this._viewHTMLElement.onfocus = onfocus;
        this._viewHTMLElement.onblur = onblur;
        // this.viewHTMLElement.addEventListener("focus", onfocus, true)
        // this.viewHTMLElement.addEventListener("blur", onblur, true)
    }
    get addControlEventTarget() {
        const eventKeys = [];
        const result = new Proxy(this.constructor.controlEvent, {
            get: (target, key, receiver) => {
                eventKeys.push(key);
                return result;
            },
            set: (target, key, value, receiver) => {
                eventKeys.push(key);
                this.addTargetForControlEvents(eventKeys, value);
                return true;
            }
        });
        return result;
    }
    addTargetForControlEvents(eventKeys, targetFunction) {
        eventKeys.forEach(function (key, index, array) {
            this.addTargetForControlEvent(key, targetFunction);
        }, this);
    }
    addTargetForControlEvent(eventKey, targetFunction) {
        var targets = this._controlEventTargets[eventKey];
        if (!targets) {
            // @ts-ignore
            targets = [];
            this._controlEventTargets[eventKey] = targets;
        }
        if (targets.indexOf(targetFunction) == -1) {
            targets.push(targetFunction);
        }
    }
    removeTargetForControlEvent(eventKey, targetFunction) {
        const targets = this._controlEventTargets[eventKey];
        if (!targets) {
            return;
        }
        const index = targets.indexOf(targetFunction);
        if (index != -1) {
            targets.splice(index, 1);
        }
    }
    removeTargetForControlEvents(eventKeys, targetFunction) {
        eventKeys.forEach(function (key, index, array) {
            this.removeTargetForControlEvent(key, targetFunction);
        }, this);
    }
    sendControlEventForKey(eventKey, nativeEvent) {
        var targets = this._controlEventTargets[eventKey];
        if (!targets) {
            return;
        }
        targets = targets.copy();
        for (var i = 0; i < targets.length; i++) {
            const target = targets[i];
            target(this, nativeEvent);
        }
    }
    broadcastEventInSubtree(event) {
        this.forEachViewInSubtree(function (view) {
            view.didReceiveBroadcastEvent(event);
            if (view._didReceiveBroadcastEventDelegateFunction) {
                view._didReceiveBroadcastEventDelegateFunction(event);
            }
        });
    }
    didReceiveBroadcastEvent(event) {
        if (event.name == UIView.broadcastEventName.PageDidScroll) {
            this._isPointerValid = NO;
        }
        if (event.name == UIView.broadcastEventName.AddedToViewTree) {
            this.wasAddedToViewTree();
        }
        if (event.name == UIView.broadcastEventName.RemovedFromViewTree) {
            this.wasRemovedFromViewTree();
        }
        if (event.name == UIView.broadcastEventName.LanguageChanged || event.name ==
            UIView.broadcastEventName.AddedToViewTree) {
            this._setInnerHTMLFromKeyIfPossible();
            this._setInnerHTMLFromLocalizedTextObjectIfPossible();
        }
    }
    forEachViewInSubtree(functionToCall) {
        functionToCall(this);
        this.subviews.forEach(function (subview, index, array) {
            subview.forEachViewInSubtree(functionToCall);
        });
    }
    rectangleInView(rectangle, view) {
        if (!view.isMemberOfViewTree || !this.isMemberOfViewTree) {
            return nil;
        }
        const viewClientRectangle = view.viewHTMLElement.getBoundingClientRect();
        const viewLocation = new UIPoint(viewClientRectangle.left, viewClientRectangle.top);
        const selfClientRectangle = this.viewHTMLElement.getBoundingClientRect();
        const selfLocation = new UIPoint(selfClientRectangle.left, selfClientRectangle.top);
        const offsetPoint = selfLocation.subtract(viewLocation);
        return rectangle.copy().offsetByPoint(offsetPoint);
    }
    rectangleFromView(rectangle, view) {
        return view.rectangleInView(rectangle, this);
    }
    intrinsicContentSizeWithConstraints(constrainingHeight = 0, constrainingWidth = 0) {
        // This works but is slow
        const result = new UIRectangle(0, 0, 0, 0);
        if (this.rootView.forceIntrinsicSizeZero) {
            return result;
        }
        var temporarilyInViewTree = NO;
        var nodeAboveThisView;
        if (!this.isMemberOfViewTree) {
            document.body.appendChild(this.viewHTMLElement);
            temporarilyInViewTree = YES;
            nodeAboveThisView = this.viewHTMLElement.nextSibling;
        }
        const height = this.style.height;
        const width = this.style.width;
        this.style.height = "" + constrainingHeight;
        this.style.width = "" + constrainingWidth;
        const left = this.style.left;
        const right = this.style.right;
        const bottom = this.style.bottom;
        const top = this.style.top;
        this.style.left = "";
        this.style.right = "";
        this.style.bottom = "";
        this.style.top = "";
        const resultHeight = this.viewHTMLElement.scrollHeight;
        const whiteSpace = this.style.whiteSpace;
        this.style.whiteSpace = "nowrap";
        const resultWidth = this.viewHTMLElement.scrollWidth;
        this.style.whiteSpace = whiteSpace;
        this.style.height = height;
        this.style.width = width;
        this.style.left = left;
        this.style.right = right;
        this.style.bottom = bottom;
        this.style.top = top;
        if (temporarilyInViewTree) {
            document.body.removeChild(this.viewHTMLElement);
            if (this.superview) {
                if (nodeAboveThisView) {
                    this.superview.viewHTMLElement.insertBefore(this.viewHTMLElement, nodeAboveThisView);
                }
                else {
                    this.superview.viewHTMLElement.appendChild(this.viewHTMLElement);
                }
            }
        }
        result.height = resultHeight;
        result.width = resultWidth;
        return result;
    }
    intrinsicContentWidth(constrainingHeight = 0) {
        const result = this.intrinsicContentSizeWithConstraints(constrainingHeight).width;
        return result;
    }
    intrinsicContentHeight(constrainingWidth = 0) {
        const result = this.intrinsicContentSizeWithConstraints(undefined, constrainingWidth).height;
        return result;
    }
    intrinsicContentSize() {
        return nil;
    }
}
UIView._UIViewIndex = -1;
UIView._viewsToLayout = [];
UIView._pageScale = 1;
UIView._transformAttribute = (("transform" in document.documentElement.style) ? "transform" : undefined) ||
    (("-webkit-transform" in document.documentElement.style) ? "-webkit-transform" : "undefined") ||
    (("-moz-transform" in document.documentElement.style) ? "-moz-transform" : "undefined") ||
    (("-ms-transform" in document.documentElement.style) ? "-ms-transform" : "undefined") ||
    (("-o-transform" in document.documentElement.style) ? "-o-transform" : "undefined");
UIView.constraintAttribute = {
    "left": AutoLayout.Attribute.LEFT,
    "right": AutoLayout.Attribute.RIGHT,
    "bottom": AutoLayout.Attribute.BOTTOM,
    "top": AutoLayout.Attribute.TOP,
    "centerX": AutoLayout.Attribute.CENTERX,
    "centerY": AutoLayout.Attribute.CENTERY,
    "height": AutoLayout.Attribute.HEIGHT,
    "width": AutoLayout.Attribute.WIDTH,
    "zIndex": AutoLayout.Attribute.ZINDEX,
    // Not sure what these are for
    "constant": AutoLayout.Attribute.NOTANATTRIBUTE,
    "variable": AutoLayout.Attribute.VARIABLE
};
UIView.constraintRelation = {
    "equal": AutoLayout.Relation.EQU,
    "lessThanOrEqual": AutoLayout.Relation.LEQ,
    "greaterThanOrEqual": AutoLayout.Relation.GEQ
};
UIView.controlEvent = {
    "PointerDown": "PointerDown",
    "PointerMove": "PointerMove",
    "PointerLeave": "PointerLeave",
    "PointerEnter": "PointerEnter",
    "PointerUpInside": "PointerUpInside",
    "PointerTap": "PointerTap",
    "PointerUp": "PointerUp",
    "MultipleTouches": "PointerZoom",
    "PointerCancel": "PointerCancel",
    "PointerHover": "PointerHover",
    "EnterDown": "EnterDown",
    "EnterUp": "EnterUp",
    "EscDown": "EscDown",
    "TabDown": "TabDown",
    "LeftArrowDown": "LeftArrowDown",
    "RightArrowDown": "RightArrowDown",
    "DownArrowDown": "DownArrowDown",
    "UpArrowDown": "UpArrowDown",
    "Focus": "Focus",
    "Blur": "Blur"
};
UIView.broadcastEventName = {
    "LanguageChanged": "LanguageChanged",
    "RemovedFromViewTree": "RemovedFromViewTree",
    "AddedToViewTree": "AddedToViewTree",
    "PageDidScroll": "PageDidScroll"
};
/// <reference path="./UICore/UIView.ts" />
class BottomBarView extends UIView {
    //label: UITextView;
    constructor(elementID) {
        super(elementID);
        this._class = BottomBarView;
        this.superclass = UIView;
    }
    initView(elementID, viewHTMLElement) {
        super.initView(elementID, viewHTMLElement);
        this.backgroundColor = UIColor.colorWithRGBA(50, 50, 50);
        this.setInnerHTML("bottomBarContent", "bottomBarContent");
        // this.label = new UITextView("BottomBarLabel");
        // this.label.setText("bottomBarLabelText","Bottom bar for contact information and such");
        // this.label.textColor = UIColor.whiteColor;
        // this.label.textAlignment = UITextView.textAlignment.center;
        // this.addSubview(this.label);
    }
    layoutSubviews() {
        super.layoutSubviews();
        //this.label.centerInContainer();
    }
}
if ("removeElementAtIndex" in Array.prototype == NO) {
    Array.prototype.removeElementAtIndex = function (index) {
        if (index >= 0 && index < this.length) {
            this.splice(index, 1);
        }
    };
}
if ("removeElement" in Array.prototype == NO) {
    Array.prototype.removeElement = function (element) {
        this.removeElementAtIndex(this.indexOf(element));
    };
}
if ("insertElementAtIndex" in Array.prototype == NO) {
    Array.prototype.insertElementAtIndex = function (index, element) {
        if (index >= 0 && index <= this.length) {
            this.splice(index, 0, element);
        }
    };
}
if ("replaceElementAtIndex" in Array.prototype == NO) {
    Array.prototype.replaceElementAtIndex = function (index, element) {
        this.removeElementAtIndex(index);
        this.insertElementAtIndex(index, element);
    };
}
if ("contains" in Array.prototype == NO) {
    Array.prototype.contains = function (element) {
        const result = (this.indexOf(element) != -1);
        return result;
    };
}
if ("containsAny" in Array.prototype == NO) {
    Array.prototype.containsAny = function (elements) {
        const result = this.anyMatch(function (element, index, array) {
            return elements.contains(element);
        });
        return result;
    };
}
Array.prototype.max = function () {
    return Math.max.apply(null, this);
};
Array.prototype.min = function () {
    return Math.min.apply(null, this);
};
if ("anyMatch" in Array.prototype == NO) {
    Array.prototype.anyMatch = function (functionToCall) {
        const result = (this.findIndex(functionToCall) > -1);
        return result;
    };
}
if ("noneMatch" in Array.prototype == NO) {
    Array.prototype.noneMatch = function (functionToCall) {
        const result = (this.findIndex(functionToCall) == -1);
        return result;
    };
}
if ("allMatch" in Array.prototype == NO) {
    Array.prototype.allMatch = function (functionToCall) {
        function reversedFunction(value, index, array) {
            return !functionToCall(value, index, array);
        }
        const result = (this.findIndex(reversedFunction) == -1);
        return result;
    };
}
if ("groupedBy" in Array.prototype == NO) {
    Array.prototype.groupedBy = function (funcProp) {
        return this.reduce(function (acc, val) {
            (acc[funcProp(val)] = acc[funcProp(val)] || []).push(val);
            return acc;
        }, {});
    };
}
if ("firstElement" in Array.prototype == NO) {
    Object.defineProperty(Array.prototype, "firstElement", {
        get: function firstElement() {
            const result = this[0];
            return result;
        },
        set: function (element) {
            if (this.length == 0) {
                this.push(element);
                return;
            }
            this[0] = element;
        }
    });
}
if ("lastElement" in Array.prototype == NO) {
    Object.defineProperty(Array.prototype, "lastElement", {
        get: function lastElement() {
            const result = this[this.length - 1];
            return result;
        },
        set: function (element) {
            if (this.length == 0) {
                this.push(element);
                return;
            }
            this[this.length - 1] = element;
        }
    });
}
if ("everyElement" in Array.prototype == NO) {
    Object.defineProperty(Array.prototype, "everyElement", {
        get: function everyElement() {
            var valueKeys = [];
            const targetFunction = (objects) => {
                return this.map((element, index, array) => {
                    var elementFunction = UIObject.valueForKeyPath(valueKeys.join("."), element).bind(element, objects);
                    return elementFunction();
                });
            };
            const result = new Proxy(targetFunction, {
                get: (target, key, receiver) => {
                    if (key == "UI_elementValues") {
                        return this.map((element, index, array) => UIObject.valueForKeyPath(valueKeys.join("."), element));
                    }
                    valueKeys.push(key);
                    return result;
                },
                set: (target, key, value, receiver) => {
                    valueKeys.push(key);
                    this.forEach((element, index, array) => {
                        UIObject.setValueForKeyPath(valueKeys.join("."), value, element, YES);
                    });
                    return true;
                }
            });
            return result;
        },
        set: function (element) {
            for (var i = 0; i < this.length; ++i) {
                this[i] = element;
            }
        }
    });
}
if ("copy" in Array.prototype == NO) {
    Array.prototype.copy = function () {
        const result = this.slice(0);
        return result;
    };
}
if ("arrayByRepeating" in Array.prototype == NO) {
    Array.prototype.arrayByRepeating = function (numberOfRepetitions) {
        const result = [];
        for (var i = 0; i < numberOfRepetitions; i++) {
            this.forEach(function (element, index, array) {
                result.push(element);
            });
        }
        return result;
    };
}
if ("arrayByTrimmingToLengthIfLonger" in Array.prototype == NO) {
    Array.prototype.arrayByTrimmingToLengthIfLonger = function (maxLength) {
        const result = [];
        for (var i = 0; i < maxLength && i < this.length; i++) {
            result.push(this[i]);
        }
        return result;
    };
}
if ("summedValue" in Array.prototype == NO) {
    Object.defineProperty(Array.prototype, "summedValue", {
        get: function summedValue() {
            const result = this.reduce(function (a, b) {
                return a + b;
            }, 0);
            return result;
        }
    });
}
// Warn if overriding existing method
if ("isEqualToArray" in Array.prototype == YES) {
    console.warn("Overriding existing Array.prototype.isEqualToArray. Possible causes: New API defines the method, there's a framework conflict or you've got double inclusions in your code.");
}
// attach the .equals method to Array's prototype to call it on any array
Array.prototype.isEqualToArray = function (array, keyPath) {
    // if the other array is a falsy value, return
    if (!array) {
        return false;
    }
    // compare lengths - can save a lot of time 
    if (this.length != array.length) {
        return false;
    }
    var i = 0;
    const l = this.length;
    for (; i < l; i++) {
        // Check if we have nested arrays
        if (this[i] instanceof Array && array[i] instanceof Array && !keyPath) {
            // recurse into the nested arrays
            if (!this[i].isEqualToArray(array[i])) {
                return false;
            }
        }
        else if (keyPath && UIObject.valueForKeyPath(keyPath, this[i]) != UIObject.valueForKeyPath(keyPath, array[i])) {
            return false;
        }
        else if (this[i] != array[i]) {
            // Warning - two different object instances will never be equal: {x:20} != {x:20}
            return false;
        }
    }
    return true;
};
// Hide method from for-in loops
Object.defineProperty(Array.prototype, "isEqualToArray", { enumerable: false });
if ("forEach" in Object.prototype == NO) {
    Object.prototype.forEach = function (callbackFunction) {
        const keys = Object.keys(this);
        keys.forEach(function (key, index, array) {
            callbackFunction(this[key], key);
        }.bind(this));
    };
    // Hide method from for-in loops
    Object.defineProperty(Object.prototype, "forEach", { enumerable: false });
}
if ("allValues" in Object.prototype == NO) {
    Object.defineProperty(Object.prototype, "allValues", {
        get: function () {
            const values = [];
            this.forEach(function (value) {
                values.push(value);
            });
            return values;
        }
    });
}
if ("allKeys" in Object.prototype == NO) {
    Object.defineProperty(Object.prototype, "allKeys", {
        get: function () {
            const values = Object.keys(this);
            return values;
        }
    });
}
if ("objectByCopyingValuesRecursivelyFromObject" in Object.prototype == NO) {
    Object.prototype.objectByCopyingValuesRecursivelyFromObject = function (object) {
        function isAnObject(item) {
            return (item && typeof item === "object" && !Array.isArray(item));
        }
        function mergeRecursively(target, source) {
            const output = Object.assign({}, target);
            if (isAnObject(target) && isAnObject(source)) {
                Object.keys(source).forEach(function (key) {
                    if (isAnObject(source[key])) {
                        // if (!(key in target)) {
                        //     Object.assign(output, { [key]: source[key] });
                        // }
                        // else {
                        output[key] = mergeRecursively(target[key], source[key]);
                        //}
                    }
                    else {
                        Object.assign(output, { [key]: source[key] });
                    }
                });
            }
            return output;
        }
        const result = mergeRecursively(this, object);
        return result;
    };
    // Hide method from for-in loops
    Object.defineProperty(Object.prototype, "objectByCopyingValuesRecursivelyFromObject", { enumerable: false });
}
if ("copyValuesRecursivelyFromObject" in Object.prototype == NO) {
    Object.prototype.copyValuesRecursivelyFromObject = function (object) {
        function isAnObject(item) {
            return (item && typeof item === "object" && !Array.isArray(item));
        }
        function mergeRecursively(target, source) {
            const output = target;
            if (isAnObject(target) && isAnObject(source)) {
                Object.keys(source).forEach(function (key) {
                    if (isAnObject(source[key])) {
                        // if (!(key in target)) {
                        //     Object.assign(output, { [key]: source[key] });
                        // }
                        // else {
                        output[key] = mergeRecursively(target[key], source[key]);
                        //}
                    }
                    else {
                        Object.assign(output, { [key]: source[key] });
                    }
                });
            }
            return output;
        }
        const result = mergeRecursively(this, object);
        return result;
    };
    // Hide method from for-in loops
    Object.defineProperty(Object.prototype, "copyValuesRecursivelyFromObject", { enumerable: false });
}
if ("contains" in String.prototype == NO) {
    String.prototype.contains = function (string) {
        const result = (this.indexOf(string) != -1);
        return result;
    };
}
if ("capitalizedString" in String.prototype == NO) {
    Object.defineProperty(Object.prototype, "capitalizedString", {
        get: function () {
            const result = this.charAt(0).toUpperCase() + this.slice(1).toLowerCase();
            return result;
        }
    });
}
if ("numericalValue" in String.prototype == NO) {
    Object.defineProperty(String.prototype, "numericalValue", {
        get: function numericalValue() {
            const result = Number(this);
            return result;
        }
    });
}
if ("isAString" in String.prototype == NO) {
    String.prototype.isAString = YES;
}
if ("isANumber" in Number.prototype == NO) {
    Number.prototype.isANumber = YES;
}
if ("integerValue" in Number.prototype == NO) {
    Object.defineProperty(Number.prototype, "integerValue", {
        get: function () {
            const result = parseInt("" + (Math.round(this) + 0.5));
            return result;
        }
    });
}
class PrimitiveNumber {
    // @ts-ignore
    static [Symbol.hasInstance](x) {
        return;
    }
}
if ("integerValue" in Boolean.prototype == NO) {
    Object.defineProperty(Boolean.prototype, "integerValue", {
        get: function () {
            if (this == true) {
                return 1;
            }
            return 0;
        }
    });
}
if ("dateString" in Date.prototype == NO) {
    Object.defineProperty(Date.prototype, "dateString", {
        get: function dateString() {
            const result = ("0" + this.getDate()).slice(-2) + "-" + ("0" + (this.getMonth() + 1)).slice(-2) + "-" +
                this.getFullYear() + " " + ("0" + this.getHours()).slice(-2) + ":" +
                ("0" + this.getMinutes()).slice(-2);
            return result;
        }
    });
}
/// <reference path="../UICore/UIObject.ts" />
/// <reference path="../UICore/UICoreExtensions.ts" />
class CBSocketCallbackHolder extends UIObject {
    constructor(socketClient, previousCallbackHolder) {
        super();
        this.messageDescriptors = {};
        this.handlers = {};
        this.onetimeHandlers = {};
        this.keysForIdentifiers = {};
        this.isValid = YES;
        this._verifiedResponseHashesDictionary = {};
        this._socketClient = socketClient;
        if (IS(previousCallbackHolder)) {
            this.handlers = previousCallbackHolder.handlers;
            this._verifiedResponseHashesDictionary = previousCallbackHolder._verifiedResponseHashesDictionary;
        }
    }
    triggerDisconnectHandlers() {
        this.messageDescriptors.forEach(function (descriptor, key) {
            if (descriptor.mainResponseReceived) {
                descriptor.completionFunction(CBSocketClient.disconnectionMessage, nil);
            }
        });
    }
    registerHandler(key, handlerFunction) {
        if (!this.handlers[key]) {
            this.handlers[key] = [];
        }
        this.handlers[key].push(handlerFunction);
    }
    registerOnetimeHandler(key, handlerFunction) {
        if (!this.onetimeHandlers[key]) {
            this.onetimeHandlers[key] = [];
        }
        this.onetimeHandlers[key].push(handlerFunction);
    }
    get storedResponseHashesDictionary() {
        if (IS_NOT(this._storedResponseHashesDictionary)) {
            this._storedResponseHashesDictionary = JSON.parse(localStorage["CBSocketResponseHashesDictionary"] || "{}");
        }
        return this._storedResponseHashesDictionary;
    }
    storedResponseHashObjectForKey(requestKey, requestDataHash) {
        const localStorageKey = this.keyForRequestKeyAndRequestDataHash(requestKey, requestDataHash);
        const hashObject = this.storedResponseHashesDictionary[localStorageKey];
        const result = FIRST(hashObject, {});
        return result;
    }
    storedResponseForKey(requestKey, requestDataHash) {
        const localStorageKey = this.keyForRequestKeyAndRequestDataHash(requestKey, requestDataHash);
        const storedObject = JSON.parse(localStorage[localStorageKey] || "{}");
        return storedObject.responseMessageData;
    }
    keyForRequestKeyAndRequestDataHash(requestKey, requestDataHash) {
        const result = "_CBSCH_LS_key_" + requestKey + "_" + requestDataHash;
        return result;
    }
    storeResponse(requestKey, requestDataHash, responseMessage, responseDataHash) {
        if (!responseMessage.canBeStoredAsResponse ||
            (IS_NOT(responseMessage.messageData) && IS_NOT(responseMessage.messageDataHash))) {
            return;
        }
        const localStorageKey = this.keyForRequestKeyAndRequestDataHash(requestKey, requestDataHash);
        var validityDate;
        if (responseMessage.responseValidityDuration) {
            validityDate = Date.now() + responseMessage.responseValidityDuration;
        }
        const storedResponseHashesDictionary = this.storedResponseHashesDictionary;
        storedResponseHashesDictionary[localStorageKey] = {
            hash: responseDataHash,
            validityDate: validityDate
        };
        this.saveInLocalStorage(localStorageKey, {
            responseMessageData: responseMessage.messageData,
            responseHash: responseDataHash
        });
        this.saveStoredResponseHashesDictionary(storedResponseHashesDictionary);
    }
    saveStoredResponseHashesDictionary(storedResponseHashesDictionary) {
        this.saveInLocalStorage("CBSocketResponseHashesDictionary", storedResponseHashesDictionary);
    }
    saveInLocalStorage(key, object) {
        const stringToSave = JSON.stringify(object);
        if (stringToSave != localStorage[key]) {
            localStorage[key] = stringToSave;
        }
    }
    socketShouldSendMessage(key, message, completionPolicy, completionFunction) {
        var result = YES;
        var triggerStoredResponseImmediately = NO;
        // @ts-ignore
        const messageDataHash = objectHash(message.messageData || nil);
        const descriptorKey = "socketMessageDescriptor_" + key + messageDataHash;
        this.messageDescriptors[descriptorKey] = (this.messageDescriptors[descriptorKey] || []);
        const hashObject = this.storedResponseHashObjectForKey(key, messageDataHash);
        message.storedResponseHash = hashObject.hash;
        if (completionPolicy == CBSocketClient.completionPolicy.first) {
            const descriptorsForKey = (this.messageDescriptors[descriptorKey] || []);
            const matchingDescriptor = descriptorsForKey.find(function (descriptor, index, array) {
                return (descriptor.messageDataHash == messageDataHash);
            });
            if (matchingDescriptor) {
                result = NO;
            }
        }
        if (completionPolicy == CBSocketClient.completionPolicy.storedOrFirst) {
            const descriptorsForKey = (this.messageDescriptors[descriptorKey] || []);
            const matchingDescriptor = descriptorsForKey.find(function (descriptor, index, array) {
                return (descriptor.messageDataHash == messageDataHash);
            });
            const storedResponse = IS(message.storedResponseHash);
            if (matchingDescriptor ||
                (storedResponse && this._verifiedResponseHashesDictionary[message.storedResponseHash])) {
                result = NO;
                triggerStoredResponseImmediately = YES;
            }
        }
        if (completionPolicy == CBSocketClient.completionPolicy.firstOnly) {
            const descriptorsForKey = (this.messageDescriptors[descriptorKey] || []);
            const matchingDescriptor = descriptorsForKey.find(function (descriptor, index, array) {
                return (descriptor.messageDataHash == messageDataHash);
            });
            if (matchingDescriptor) {
                return NO;
            }
        }
        if (hashObject && hashObject.hash && hashObject.validityDate && message.storedResponseHash &&
            this._verifiedResponseHashesDictionary[message.storedResponseHash] && hashObject.validityDate >
            Date.now()) {
            result = NO;
            triggerStoredResponseImmediately = YES;
        }
        if (IS(completionFunction)) {
            this.messageDescriptors[descriptorKey].push({
                key: key,
                message: {
                    identifier: message.identifier,
                    inResponseToIdentifier: message.inResponseToIdentifier,
                    keepWaitingForResponses: message.keepWaitingForResponses
                },
                sentAtTime: Date.now(),
                //completionTriggered: NO,
                messageDataHash: messageDataHash,
                mainResponseReceived: NO,
                anyMainResponseReceived: NO,
                completionPolicy: completionPolicy,
                completionFunction: completionFunction
            });
            this.keysForIdentifiers[message.identifier] = descriptorKey;
        }
        if (triggerStoredResponseImmediately) {
            this.socketDidReceiveMessageForKey(CBSocketClient.responseMessageKey, {
                identifier: nil,
                messageData: nil,
                inResponseToIdentifier: message.identifier,
                useStoredResponse: YES
            }, nil);
        }
        return result;
    }
    static defaultMultipleMessagecompletionFunction(responseMessages, callcompletionFunctions) {
        callcompletionFunctions();
    }
    socketWillSendMultipleMessage(messageToSend, completionFunction = CBSocketCallbackHolder.defaultMultipleMessagecompletionFunction) {
        const key = CBSocketClient.multipleMessageKey;
        // @ts-ignore
        const messageDataHash = objectHash(messageToSend.messageData || nil);
        const descriptorKey = "socketMessageDescriptor_" + key + messageDataHash;
        this.messageDescriptors[descriptorKey] = (this.messageDescriptors[descriptorKey] || []);
        messageToSend.storedResponseHash = this.storedResponseHashObjectForKey(key, messageDataHash).hash;
        this.messageDescriptors[descriptorKey].push({
            key: key,
            message: {
                identifier: messageToSend.identifier,
                inResponseToIdentifier: messageToSend.inResponseToIdentifier,
                keepWaitingForResponses: messageToSend.keepWaitingForResponses
            },
            sentAtTime: Date.now(),
            //completionTriggered: NO,
            messageDataHash: messageDataHash,
            mainResponseReceived: NO,
            anyMainResponseReceived: NO,
            completionPolicy: CBSocketClient.completionPolicy.directOnly,
            completionFunction: function (responseMessage, respondWithMessage) {
                completionFunction(responseMessage.map(function (messageObject, index, array) {
                    return messageObject.message.messageData;
                }), function () {
                    //console.log("Received multiple message response with length of " + responseMessage.length + ".");
                    // Call all completion functions
                    responseMessage.forEach(function (messageObject, index, array) {
                        this._socketClient.didReceiveMessageForKey(messageObject.key, messageObject.message);
                    }.bind(this));
                }.bind(this));
            }.bind(this)
        });
        this.keysForIdentifiers[messageToSend.identifier] = descriptorKey;
    }
    socketDidReceiveMessageForKey(key, message, sendResponseFunction) {
        if (!this.isValid) {
            return;
        }
        // Call static handlers
        if (this.handlers[key]) {
            this.handlers[key].forEach(function (handler, index, array) {
                handler(message.messageData, sendResponseFunction);
            }.bind(this));
        }
        if (this.onetimeHandlers[key]) {
            this.onetimeHandlers[key].forEach(function (handler, index, array) {
                handler(message.messageData, sendResponseFunction);
            }.bind(this));
            delete this.onetimeHandlers[key];
        }
        // Temporary response handlers are evaluated here
        if (message.inResponseToIdentifier &&
            (CBSocketClient.responseMessageKey == key || CBSocketClient.multipleMessageKey == key)) {
            // Find descriptors for the key of the message that is being responded to
            const descriptorKey = this.keysForIdentifiers[message.inResponseToIdentifier];
            const descriptorsForKey = (this.messageDescriptors[descriptorKey] || []);
            // Find response data hash to check for differences
            const responseDataHash = message.messageDataHash;
            // Remove identifier from dictionary
            if (!message.keepWaitingForResponses) {
                delete this.keysForIdentifiers[message.inResponseToIdentifier];
                delete this.messageDescriptors[descriptorKey];
            }
            // Function to call completion function
            const callCompletionFunction = (descriptor, storedResponseCondition = NO) => {
                var messageData = message.messageData;
                if (message.useStoredResponse && storedResponseCondition) {
                    messageData = this.storedResponseForKey(descriptor.key, descriptor.messageDataHash);
                    const responseHash = this.storedResponseHashObjectForKey(descriptor.key, descriptor.messageDataHash).hash;
                    const localStorageKey = this.keyForRequestKeyAndRequestDataHash(descriptor.key, descriptor.messageDataHash);
                    if (message.responseValidityDuration && this.storedResponseHashesDictionary[localStorageKey]) {
                        this.storedResponseHashesDictionary[localStorageKey].validityDate = Date.now() +
                            message.responseValidityDuration;
                        this.saveStoredResponseHashesDictionary(this.storedResponseHashesDictionary);
                    }
                    this._verifiedResponseHashesDictionary[responseHash] = YES;
                    console.log("Using stored response.");
                }
                // Call completionFunction and set response data hash
                descriptor.completionFunction(messageData, sendResponseFunction);
                descriptor.responseDataHash = responseDataHash;
            };
            descriptorsForKey.copy().forEach(function (descriptor, index, array) {
                if ((descriptor.completionPolicy == CBSocketClient.completionPolicy.directOnly &&
                    descriptor.message.identifier == message.inResponseToIdentifier) || descriptor.completionPolicy ==
                    CBSocketClient.completionPolicy.first || descriptor.completionPolicy ==
                    CBSocketClient.completionPolicy.firstOnly || descriptor.completionPolicy ==
                    CBSocketClient.completionPolicy.storedOrFirst) {
                    // Calling completion function and removing descriptor
                    if (!message.keepWaitingForResponses) {
                        this.storeResponse(descriptor.key, descriptor.messageDataHash, message, responseDataHash);
                        descriptorsForKey.removeElement(descriptor);
                        sendResponseFunction.respondingToMainResponse = YES;
                    }
                    callCompletionFunction(descriptor, !message.keepWaitingForResponses);
                }
                else if (descriptor.completionPolicy == CBSocketClient.completionPolicy.all) {
                    // Calling completion function
                    callCompletionFunction(descriptor, !message.keepWaitingForResponses);
                    // Marking descriptor as having been responded to
                    if (!message.keepWaitingForResponses) {
                        if (message.inResponseToIdentifier == descriptor.message.identifier) {
                            sendResponseFunction.respondingToMainResponse = YES;
                            descriptor.mainResponseReceived = YES;
                            descriptorsForKey.removeElement(descriptor);
                        }
                        descriptor.anyMainResponseReceived = YES;
                    }
                }
                else if (descriptor.completionPolicy == CBSocketClient.completionPolicy.allDifferent) {
                    // Calling completionFunction if messageData is different from previous
                    if (descriptor.responseDataHash != responseDataHash) {
                        callCompletionFunction(descriptor, !message.keepWaitingForResponses);
                    }
                    // Marking descriptor as having been responded to
                    if (!message.keepWaitingForResponses) {
                        if (message.inResponseToIdentifier == descriptor.message.identifier) {
                            sendResponseFunction.respondingToMainResponse = YES;
                            descriptor.mainResponseReceived = YES;
                            descriptorsForKey.removeElement(descriptor);
                        }
                        descriptor.anyMainResponseReceived = YES;
                    }
                }
                else if (descriptor.completionPolicy == CBSocketClient.completionPolicy.last &&
                    descriptor.message.identifier == message.inResponseToIdentifier) {
                    if (!message.keepWaitingForResponses) {
                        // Marking descriptor as having been responded to
                        descriptor.mainResponseReceived = YES;
                        descriptor.anyMainResponseReceived = YES;
                        sendResponseFunction.respondingToMainResponse = YES;
                    }
                    else {
                        descriptor.completionFunction(message.messageData, sendResponseFunction);
                    }
                }
                else if (descriptor.completionPolicy == CBSocketClient.completionPolicy.firstAndLast ||
                    descriptor.completionPolicy == CBSocketClient.completionPolicy.firstAndLastIfDifferent) {
                    if (!message.keepWaitingForResponses) {
                        // Only calling completionFunction once as a first response call
                        if (!descriptor.anyMainResponseReceived) {
                            callCompletionFunction(descriptor, !message.keepWaitingForResponses);
                        }
                        // Marking descriptor as having been responded to
                        if (descriptor.message.identifier == message.inResponseToIdentifier) {
                            descriptor.mainResponseReceived = YES;
                            sendResponseFunction.respondingToMainResponse = YES;
                        }
                        descriptor.anyMainResponseReceived = YES;
                    }
                    else if (descriptor.message.identifier == message.inResponseToIdentifier &&
                        message.keepWaitingForResponses) {
                        descriptor.completionFunction(message.messageData, sendResponseFunction);
                    }
                }
            }.bind(this));
            // Last message completion policies
            const allResponsesReceived = descriptorsForKey.allMatch(function (descriptorObject, index, array) {
                return descriptorObject.mainResponseReceived;
            });
            descriptorsForKey.copy().forEach(function (descriptor, index, array) {
                if ((descriptor.completionPolicy == CBSocketClient.completionPolicy.last ||
                    descriptor.completionPolicy == CBSocketClient.completionPolicy.firstAndLast) &&
                    allResponsesReceived && !message.keepWaitingForResponses) {
                    // Calling completionFunction
                    callCompletionFunction(descriptor, !message.keepWaitingForResponses);
                    // Cleaning up
                    descriptorsForKey.removeElement(descriptor);
                }
                else if (descriptor.completionPolicy == CBSocketClient.completionPolicy.firstAndLastIfDifferent &&
                    allResponsesReceived && !message.keepWaitingForResponses) {
                    // Calling completionFunction if needed
                    if (descriptor.responseDataHash != responseDataHash) {
                        callCompletionFunction(descriptor, !message.keepWaitingForResponses);
                    }
                    // Cleaning up
                    descriptorsForKey.removeElement(descriptor);
                }
            }.bind(this));
        }
    }
}
/// <reference path="../socket.io-client.dev.d.ts" />
/// <reference path="../UICore/UIObject.ts" />
/// <reference path="../UICore/UICoreExtensions.ts" />
/// <reference path="../CBCore.ts" />
/// <reference path="./CBSocketCallbackHolder.ts" />
function IS_SOCKET_ERROR(object) {
    const result = (IS(object) && object._isCBSocketErrorMessage);
    return result;
}
function IS_NOT_SOCKET_ERROR(object) {
    return !IS_SOCKET_ERROR(object);
}
class CBSocketClient extends UIObject {
    constructor(core) {
        super();
        this._socket = io();
        this._isConnectionEstablished = NO;
        this._collectMessagesToSendLater = NO;
        this._messagesToBeSent = [];
        this._subscribedKeys = {};
        this._callbackHolder = new CBSocketCallbackHolder(this);
        this._class = CBSocketClient;
        this.superclass = UIObject;
        this._core = core;
        // @ts-ignore
        this.socket.on("connect", function (socket) {
            console.log("Socket.io connected to server. clientID = " + socket + ", socketID = " + socket);
            var instanceIdentifier = localStorage.getItem("InstanceIdentifier");
            if (IS_NOT(instanceIdentifier)) {
                instanceIdentifier = MAKE_ID();
                localStorage.setItem("InstanceIdentifier", instanceIdentifier);
            }
            const handshakeMessage = {
                accessToken: null,
                instanceIdentifier: instanceIdentifier
            };
            this.socket.emit("CBSocketHandshakeInitMessage", {
                identifier: MAKE_ID(),
                messageData: handshakeMessage
            });
        }.bind(this));
        this.socket.on("CBSocketHandshakeResponseMessage", function (message) {
            this._isConnectionEstablished = message.messageData.accepted;
            if (!message.messageData.accepted) {
                console.log("SocketIO connection failed.");
            }
            else {
                console.log("SocketIO connection handshake completed.");
                this._callbackHolder = new CBSocketCallbackHolder(this, this._callbackHolder);
                this.sendUnsentMessages();
            }
        }.bind(this));
        // @ts-ignore
        this.socket.on("disconnect", function (socket) {
            console.log("Socket.io disconnected from server. clientID = " + socket + ".");
            this._isConnectionEstablished = NO;
            this._callbackHolder.isValid = NO;
            this._callbackHolder.triggerDisconnectHandlers();
        }.bind(this));
        this.socket.on("CBPerformReconnect", function (message) {
            console.log("Performing socket reconnection.");
            core.reloadSocketConnection();
            if (message) {
                alert(message);
            }
        }.bind(this));
        this._socket.on(CBSocketClient.responseMessageKey, function (message) {
            this.didReceiveMessageForKey(CBSocketClient.responseMessageKey, message);
        }.bind(this));
        this._socket.on(CBSocketClient.multipleMessageKey, (message) => {
            console.log("Received " + message.messageData.length + " messages.");
            this.didReceiveMessageForKey(CBSocketClient.multipleMessageKey, message);
        });
    }
    get socket() {
        return this._socket;
    }
    cancelUnsentMessages(messagesToCancel) {
        this._messagesToBeSent = this._messagesToBeSent.filter(function (messageObject, index, array) {
            return !messagesToCancel.contains(messageObject);
        }.bind(this));
    }
    sendUnsentMessages(receiveResponsesTogether = NO, completion) {
        if (!this._isConnectionEstablished || this._collectMessagesToSendLater) {
            return;
        }
        const groupedMessages = [];
        const didSendFunctions = [];
        this._messagesToBeSent.copy().forEach(function (messageToBeSentObject, index, array) {
            if (this._isConnectionEstablished) {
                var message = messageToBeSentObject.message;
                if (IS_NOT(message)) {
                    message = "";
                }
                const identifier = MAKE_ID();
                const completion = messageToBeSentObject.completion;
                const messageObject = {
                    messageData: message,
                    identifier: identifier,
                    keepWaitingForResponses: messageToBeSentObject.keepWaitingForResponses,
                    inResponseToIdentifier: messageToBeSentObject.inResponseToMessage.identifier
                };
                const shouldSendMessage = this._callbackHolder.socketShouldSendMessage(messageToBeSentObject.key, messageObject, messageToBeSentObject.completionPolicy, completion);
                if (shouldSendMessage) {
                    groupedMessages.push({
                        key: messageToBeSentObject.key,
                        message: messageObject
                    });
                }
                didSendFunctions.push(messageToBeSentObject.didSendFunction);
            }
        }.bind(this));
        this._messagesToBeSent = [];
        if (IS_NOT(groupedMessages.length)) {
            return;
        }
        if (groupedMessages.length == 1) {
            console.log("sending 1 unsent message.");
        }
        else {
            console.log("Sending " + groupedMessages.length + " unsent messages.");
        }
        const messageObject = {
            messageData: groupedMessages,
            identifier: MAKE_ID(),
            shouldGroupResponses: receiveResponsesTogether
        };
        //if (receiveResponsesTogether) {
        this._callbackHolder.socketWillSendMultipleMessage(messageObject, completion);
        //}
        this.socket.emit(CBSocketClient.multipleMessageKey, messageObject);
        didSendFunctions.forEach(function (didSendFunction, index, array) {
            didSendFunction();
        });
    }
    sendUserBoundMessageForKeyWithPolicy(key, message, completionPolicy, completion) {
        this._sendMessageForKey(key, message, undefined, NO, completionPolicy, YES, nil, completion);
    }
    sendUserBoundMessageForKey(key, message, completion) {
        this._sendMessageForKey(key, message, undefined, NO, undefined, YES, nil, completion);
    }
    sendMessageForKeyWithPolicy(key, message, completionPolicy, completion) {
        this._sendMessageForKey(key, message, undefined, NO, completionPolicy, NO, nil, completion);
    }
    sendMessageForKey(key, message, completion) {
        this._sendMessageForKey(key, message, undefined, NO, undefined, NO, nil, completion);
    }
    resultForMessageForKey(key, message, completionPolicy, isUserBound = NO, intermediateResultMessageFunction = nil) {
        const result = new Promise((resolve, reject) => {
            this._sendMessageForKey(key, message, undefined, NO, completionPolicy, isUserBound, nil, (responseMessage, respondWithMessage) => {
                if (respondWithMessage.respondingToMainResponse) {
                    resolve({
                        responseMessage: responseMessage,
                        result: IF(IS_NOT_SOCKET_ERROR(responseMessage))(() => responseMessage)
                            .ELSE(RETURNER(undefined)),
                        errorResult: IF(IS_SOCKET_ERROR(responseMessage))(() => responseMessage)
                            .ELSE(RETURNER(undefined)),
                        respondWithMessage: respondWithMessage
                    });
                    return;
                }
                intermediateResultMessageFunction(responseMessage, respondWithMessage);
            });
        });
        return result;
    }
    _sendMessageForKey(key, message, inResponseToMessage = {}, keepMessageConnectionOpen = NO, completionPolicy = CBSocketClient.completionPolicy.directOnly, isUserBound = NO, didSendFunction = nil, completion = nil) {
        if (IS_NIL(message)) {
            message = "";
        }
        if (this._isConnectionEstablished && !this._collectMessagesToSendLater) {
            const identifier = MAKE_ID();
            const messageObject = {
                messageData: message,
                identifier: identifier,
                keepWaitingForResponses: keepMessageConnectionOpen,
                inResponseToIdentifier: inResponseToMessage.identifier
            };
            const shouldSendMessage = this._callbackHolder.socketShouldSendMessage(key, messageObject, completionPolicy, completion);
            if (shouldSendMessage) {
                this.socket.emit(key, messageObject);
            }
            didSendFunction();
        }
        else {
            this._messagesToBeSent.push({
                key: key,
                message: message,
                inResponseToMessage: inResponseToMessage,
                keepWaitingForResponses: keepMessageConnectionOpen,
                completionPolicy: completionPolicy,
                isBoundToUserWithID: null,
                didSendFunction: didSendFunction,
                completion: completion
            });
            return this._messagesToBeSent.lastElement;
        }
    }
    sendMessagesAsGroup(functionToCall) {
        const collectMessagesToSendLater = this._collectMessagesToSendLater;
        this._collectMessagesToSendLater = YES;
        functionToCall();
        this._collectMessagesToSendLater = collectMessagesToSendLater;
        this.sendUnsentMessages();
    }
    sendAndReceiveMessagesAsGroup(functionToCall, completion) {
        const collectMessagesToSendLater = this._collectMessagesToSendLater;
        this._collectMessagesToSendLater = YES;
        functionToCall();
        this._collectMessagesToSendLater = collectMessagesToSendLater;
        this.sendUnsentMessages(YES, completion);
    }
    didReceiveMessageForKey(key, message) {
        const sendResponseFunction = function (responseMessage, completion) {
            this._sendMessageForKey(CBSocketClient.responseMessageKey, responseMessage, message, NO, undefined, NO, nil, completion);
        }.bind(this);
        sendResponseFunction.sendIntermediateResponse = function (updateMessage, completion) {
            this._sendMessageForKey(CBSocketClient.responseMessageKey, updateMessage, message, YES, undefined, NO, nil, completion);
        }.bind(this);
        const sendUserBoundResponseFunction = function (responseMessage, completion) {
            this._sendMessageForKey(CBSocketClient.responseMessageKey, responseMessage, message, NO, undefined, YES, nil, completion);
        }.bind(this);
        sendUserBoundResponseFunction.sendIntermediateResponse = function (updateMessage, completion) {
            this._sendMessageForKey(CBSocketClient.responseMessageKey, updateMessage, message, YES, undefined, YES, nil, completion);
        }.bind(this);
        if (IS_SOCKET_ERROR(message.messageData)) {
            console.log("CBSocketClient did receive error message.");
            console.log(message.messageData);
        }
        this._callbackHolder.socketDidReceiveMessageForKey(key, message, sendResponseFunction);
    }
    addTargetForMessagesForKeys(keys, handlerFunction) {
        keys.forEach(function (key, index, array) {
            this.addTargetForMessagesForKey(key, handlerFunction);
        }.bind(this));
    }
    addTargetForMessagesForKey(key, handlerFunction) {
        this._callbackHolder.registerHandler(key, handlerFunction);
        if (IS_NOT(this._subscribedKeys[key])) {
            this._socket.on(key, function (message) {
                this.didReceiveMessageForKey(key, message);
            }.bind(this));
            this._subscribedKeys[key] = true;
        }
    }
    addTargetForOneMessageForKey(key, handlerFunction) {
        this._callbackHolder.registerOnetimeHandler(key, handlerFunction);
        if (IS_NOT(this._subscribedKeys[key])) {
            this._socket.on(key, function (message) {
                this.didReceiveMessageForKey(key, message);
            }.bind(this));
            this._subscribedKeys[key] = true;
        }
    }
}
CBSocketClient.responseMessageKey = "CBSocketResponseMessage";
CBSocketClient.multipleMessageKey = "CBSocketMultipleMessage";
CBSocketClient.disconnectionMessage = {
    _isCBSocketErrorMessage: YES,
    messageData: "Server disconnected"
};
CBSocketClient.completionPolicy = {
    "all": "all",
    "allDifferent": "allDifferent",
    "first": "first",
    "last": "last",
    "firstAndLast": "firstAndLast",
    "firstAndLastIfDifferent": "firstAndLastIfDifferent",
    "directOnly": "directOnly",
    "firstOnly": "firstOnly",
    "storedOrFirst": "storedOrFirst"
};
const SocketClient = new Proxy({ "name": "SocketClient" }, {
    get(target, key) {
        const result = (messageData, completionPolicy, isUserBound, intermediateResultFunction) => CBCore.sharedInstance.socketClient.resultForMessageForKey(key, messageData, completionPolicy, isUserBound, intermediateResultFunction);
        return result;
    }
});
/// <reference path="./Custom components/CBSocketClient.ts" />
class CBCore extends UIObject {
    constructor() {
        super();
        this._socketClient = new CBSocketClient(this);
        this._functionsToCallForEachSocketClient = [];
        this._class = CBCore;
        this.superclass = UIObject;
    }
    static get sharedInstance() {
        if (!CBCore._sharedInstance) {
            CBCore._sharedInstance = new CBCore();
        }
        return CBCore._sharedInstance;
    }
    broadcastMessageInRootViewTree(message) {
        UICore.main.rootViewController.view.broadcastEventInSubtree(message);
    }
    get socketClient() {
        return this._socketClient;
    }
    set languageKey(languageKey) {
        if (IS_NOT(languageKey)) {
            localStorage.removeItem("CBLanguageKey");
        }
        localStorage.setItem("CBLanguageKey", JSON.stringify(languageKey));
        this.didSetLanguageKey();
    }
    get languageKey() {
        const result = FIRST(localStorage.getItem("CBLanguageKey"), LanguageService.defaultLanguageKey).replace("\"", "").replace("\"", "");
        return result;
    }
    didSetLanguageKey() {
        UIRoute.currentRoute.routeWithComponent("settings", { "language": this.languageKey }, YES).applyByReplacingCurrentRouteInHistory();
    }
    readTextFileFromURL(fileURL) {
        var result = new Promise((resolve, reject) => {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", fileURL, false);
            rawFile.onreadystatechange = function () {
                if (rawFile.readyState === 4) {
                    if (rawFile.status === 200 || rawFile.status == 0) {
                        var allText = rawFile.responseText;
                        resolve(allText);
                        return;
                    }
                    reject(rawFile.response);
                }
            };
            rawFile.send(null);
        });
        return result;
    }
    reloadSocketConnection() {
        // @ts-ignore
        this.socketClient.socket.disconnect();
        this._socketClient = new CBSocketClient(this);
        this._socketClient._messagesToBeSent = [];
        this._functionsToCallForEachSocketClient.forEach(function (functionToCall, index, array) {
            functionToCall();
        });
    }
    callFunctionForEachSocketClient(functionToCall) {
        this._functionsToCallForEachSocketClient.push(functionToCall);
        functionToCall();
    }
}
/// <reference path="./UIView.ts" />
/// <reference path="./UIObject.ts" />
class UIViewController extends UIObject {
    constructor(view) {
        super();
        this.view = view;
        this.loadIntrospectionVariables();
        this._UIViewController_constructorArguments = { "view": view };
        this._initInstanceVariables();
        this.loadSubviews();
        this.updateViewConstraints();
        this.updateViewStyles();
        this._layoutViewSubviews();
    }
    loadIntrospectionVariables() {
        this._class = UIViewController;
        this.superclass = UIObject;
    }
    _initInstanceVariables() {
        this.view = this._UIViewController_constructorArguments.view;
        this.view._viewControllerLayoutFunction = this.layoutViewsManually.bind(this);
        this.view._didLayoutSubviewsDelegateFunction = this.viewDidLayoutSubviews.bind(this);
        this.view._didReceiveBroadcastEventDelegateFunction = this.viewDidReceiveBroadcastEvent.bind(this);
        this.childViewControllers = [];
        this.parentViewController = nil;
    }
    handleRouteRecursively(route) {
        this.handleRoute(route);
        this.childViewControllers.forEach(function (controller, index, array) {
            if (!route.isHandled) {
                controller.handleRouteRecursively(route);
            }
        });
    }
    handleRoute(route) {
        return __awaiter(this, void 0, void 0, function* () {
        });
    }
    loadSubviews() {
    }
    viewWillAppear() {
        return __awaiter(this, void 0, void 0, function* () {
        });
    }
    viewDidAppear() {
        return __awaiter(this, void 0, void 0, function* () {
        });
    }
    viewWillDisappear() {
        return __awaiter(this, void 0, void 0, function* () {
        });
    }
    viewDidDisappear() {
        return __awaiter(this, void 0, void 0, function* () {
        });
    }
    updateViewConstraints() {
    }
    updateViewStyles() {
    }
    layoutViewsManually() {
    }
    _layoutViewSubviews() {
        this.view.layoutSubviews();
        this.viewDidLayoutSubviews();
    }
    viewDidLayoutSubviews() {
        // this.childViewControllers.forEach(function (controller, index, controllers) {
        //     controller._layoutViewSubviews();
        // })
    }
    viewDidReceiveBroadcastEvent(event) {
    }
    hasChildViewController(viewController) {
        // This is for performance reasons
        if (!IS(viewController)) {
            return NO;
        }
        for (var i = 0; i < this.childViewControllers.length; i++) {
            const childViewController = this.childViewControllers[i];
            if (childViewController == viewController) {
                return YES;
            }
        }
        return NO;
    }
    addChildViewController(viewController) {
        if (!this.hasChildViewController(viewController)) {
            viewController.willMoveToParentViewController(this);
            this.childViewControllers.push(viewController);
            //this.view.addSubview(viewController.view);
            //viewController.didMoveToParentViewController(this);
        }
    }
    removeFromParentViewController() {
        const index = this.parentViewController.childViewControllers.indexOf(this);
        if (index > -1) {
            this.parentViewController.childViewControllers.splice(index, 1);
            //this.view.removeFromSuperview();
            this.parentViewController = nil;
        }
    }
    willMoveToParentViewController(parentViewController) {
    }
    didMoveToParentViewController(parentViewController) {
        this.parentViewController = parentViewController;
    }
    removeChildViewController(controller) {
        controller.viewWillDisappear();
        if (IS(controller.parentViewController)) {
            controller.removeFromParentViewController();
        }
        if (IS(controller.view)) {
            controller.view.removeFromSuperview();
        }
        controller.viewDidDisappear();
    }
    addChildViewControllerInContainer(controller, containerView) {
        controller.viewWillAppear();
        this.addChildViewController(controller);
        containerView.addSubview(controller.view);
        controller.didMoveToParentViewController(this);
        controller.viewDidAppear();
    }
    addChildViewControllerInDialogView(controller, dialogView) {
        controller.viewWillAppear();
        this.addChildViewController(controller);
        dialogView.view = controller.view;
        var originalDismissFunction = dialogView.dismiss.bind(dialogView);
        dialogView.dismiss = animated => {
            originalDismissFunction(animated);
            this.removeChildViewController(controller);
        };
        controller.didMoveToParentViewController(this);
        controller.viewDidAppear();
    }
}
///<reference path="UIView.ts"/>
class UIDialogView extends UIView {
    constructor(elementID, viewHTMLElement) {
        super(elementID, viewHTMLElement);
        this._view = nil;
        this.animationDuration = 0.25;
        this._zIndex = 100;
        this.isVisible = NO;
        this.dismissesOnTapOutside = YES;
        this.addTargetForControlEvent(UIView.controlEvent.PointerTap, function (sender, event) {
            this.didDetectTapOutside(sender, event);
        }.bind(this));
        this.backgroundColor = UIColor.colorWithRGBA(0, 10, 25).colorWithAlpha(0.75); //CBColor.primaryContentColor.colorWithAlpha(0.75)
        this.zIndex = this._zIndex;
    }
    didDetectTapOutside(sender, event) {
        if (event.target == this.viewHTMLElement && this.dismissesOnTapOutside) {
            this.dismiss(this._appearedAnimated);
        }
    }
    set zIndex(zIndex) {
        this._zIndex = zIndex;
        this.style.zIndex = "" + zIndex;
    }
    get zIndex() {
        return this._zIndex;
    }
    set view(view) {
        this._view.removeFromSuperview();
        this._view = view;
        this.addSubview(view);
    }
    get view() {
        return this._view;
    }
    willAppear(animated = NO) {
        if (animated) {
            this.style.opacity = "0";
        }
        this.style.height = "";
        this._frame = null;
    }
    animateAppearing() {
        this.style.opacity = "1";
    }
    animateDisappearing() {
        this.style.opacity = "0";
    }
    showInView(containerView, animated) {
        animated = (animated && !IS_FIREFOX);
        this._appearedAnimated = animated;
        this.willAppear(animated);
        containerView.addSubview(this);
        if (animated) {
            this.layoutSubviews();
            UIView.animateViewOrViewsWithDurationDelayAndFunction(this, this.animationDuration, 0, undefined, function () {
                this.animateAppearing();
            }.bind(this), nil);
        }
        else {
            this.setNeedsLayout();
        }
        this.isVisible = YES;
    }
    showInRootView(animated) {
        this.showInView(UICore.main.rootViewController.view, animated);
    }
    dismiss(animated) {
        animated = (animated && !IS_FIREFOX);
        if (animated == undefined) {
            animated = this._appearedAnimated;
        }
        if (animated) {
            UIView.animateViewOrViewsWithDurationDelayAndFunction(this, this.animationDuration, 0, undefined, function () {
                this.animateDisappearing();
            }.bind(this), function () {
                if (this.isVisible == NO) {
                    this.removeFromSuperview();
                }
            }.bind(this));
        }
        else {
            this.removeFromSuperview();
        }
        this.isVisible = NO;
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
        if (event.name == UICore.broadcastEventName.WindowDidResize) {
            this.setNeedsLayout();
        }
    }
    layoutSubviews() {
        if (!IS(this.view)) {
            return;
        }
        //this.frame = this.superview.bounds;
        this.setPosition(0, 0, 0, 0, 0, "100%");
        this.setPosition(0, 0, 0, 0, UIView.pageHeight, "100%");
        const bounds = this.bounds;
        const margin = 20;
        //this.view.centerInContainer();
        this.view.style.position = "relative";
        // this.view.style.maxHeight = "" + (bounds.height - margin * 2).integerValue + "px";
        // this.view.style.maxWidth = "" + (bounds.width - margin * 2).integerValue + "px";
        // var viewIntrinsicRectangle = this.view.intrinsicContentSize();
        // this.view.frame = new UIRectangle((bounds.width - viewIntrinsicRectangle.width)*0.5,  )
        super.layoutSubviews();
    }
}
/// <reference path="./UIView.ts" />
class UIBaseButton extends UIView {
    constructor(elementID, elementType, initViewData) {
        super(elementID, nil, elementType, initViewData);
        this._selected = NO;
        this._highlighted = NO;
        this._isToggleable = NO;
        this._class = UIButton;
        this.superclass = UIView;
        this.initViewStateControl();
    }
    initViewStateControl() {
        this.class.superclass = UIView;
        // Instance variables
        this._isPointerInside = NO;
        const setHovered = function () {
            this.hovered = YES;
        }.bind(this);
        this.addTargetForControlEvent(UIView.controlEvent.PointerHover, setHovered);
        const setNotHovered = function () {
            this.hovered = NO;
        }.bind(this);
        this.addTargetForControlEvents([
            UIView.controlEvent.PointerLeave, UIView.controlEvent.PointerCancel, UIView.controlEvent.MultipleTouches
        ], setNotHovered);
        var highlightingTime;
        const setHighlighted = function () {
            this.highlighted = YES;
            highlightingTime = Date.now();
        }.bind(this);
        this.addTargetForControlEvent(UIView.controlEvent.PointerDown, setHighlighted);
        this.addTargetForControlEvent(UIView.controlEvent.PointerEnter, setHighlighted);
        const setNotHighlighted = function () {
            this.highlighted = NO;
        }.bind(this);
        const setNotHighlightedWithMinimumDuration = function () {
            const minimumDurationInMilliseconds = 50;
            const elapsedTime = Date.now() - highlightingTime;
            if (minimumDurationInMilliseconds < elapsedTime) {
                this.highlighted = NO;
            }
            else {
                setTimeout(function () {
                    this.highlighted = NO;
                }.bind(this), minimumDurationInMilliseconds - elapsedTime);
            }
        }.bind(this);
        this.addTargetForControlEvents([
            UIView.controlEvent.PointerLeave, UIView.controlEvent.PointerCancel, UIView.controlEvent.MultipleTouches
        ], setNotHighlighted);
        this.addTargetForControlEvent(UIView.controlEvent.PointerUp, setNotHighlightedWithMinimumDuration);
        // Handle enter key press
        this.addTargetForControlEvent(UIView.controlEvent.EnterDown, function () {
            setHighlighted();
            setNotHighlightedWithMinimumDuration();
        });
        this.addTargetForControlEvent(UIView.controlEvent.Focus, function (sender, event) {
            this.focused = YES;
        }.bind(this));
        this.addTargetForControlEvent(UIView.controlEvent.Blur, function (sender, event) {
            this.focused = NO;
        }.bind(this));
        this.updateContentForCurrentState();
        this.pausesPointerEvents = YES;
        this.tabIndex = 1;
        this.style.cursor = "pointer";
        //this.style.outline = "none";
        this.nativeSelectionEnabled = NO;
        this.addTargetForControlEvents([
            UIView.controlEvent.EnterDown, UIView.controlEvent.PointerUpInside
        ], function (sender, event) {
            if (this.isToggleable) {
                this.toggleSelectedState();
            }
        }.bind(this));
    }
    set hovered(hovered) {
        this._hovered = hovered;
        this.updateContentForCurrentState();
    }
    get hovered() {
        return this._hovered;
    }
    set highlighted(highlighted) {
        this._highlighted = highlighted;
        this.updateContentForCurrentState();
    }
    get highlighted() {
        return this._highlighted;
    }
    set focused(focused) {
        this._focused = focused;
        if (focused) {
            this.focus();
        }
        else {
            this.blur();
        }
        this.updateContentForCurrentState();
    }
    get focused() {
        return this._focused;
    }
    set selected(selected) {
        this._selected = selected;
        this.updateContentForCurrentState();
    }
    get selected() {
        return this._selected;
    }
    updateContentForCurrentState() {
        var updateFunction = this.updateContentForNormalState;
        if (this.selected && this.highlighted) {
            updateFunction = this.updateContentForSelectedAndHighlightedState;
        }
        else if (this.selected) {
            updateFunction = this.updateContentForSelectedState;
        }
        else if (this.focused) {
            updateFunction = this.updateContentForFocusedState;
        }
        else if (this.highlighted) {
            updateFunction = this.updateContentForHighlightedState;
        }
        else if (this.hovered) {
            updateFunction = this.updateContentForHoveredState;
        }
        if (!IS(updateFunction)) {
            this.backgroundColor = UIColor.nilColor;
        }
        else {
            updateFunction.call(this);
        }
    }
    updateContentForNormalState() {
    }
    updateContentForHoveredState() {
        this.updateContentForNormalState();
    }
    updateContentForFocusedState() {
        this.updateContentForHoveredState();
    }
    updateContentForHighlightedState() {
    }
    updateContentForSelectedState() {
    }
    updateContentForSelectedAndHighlightedState() {
        this.updateContentForSelectedState();
    }
    set enabled(enabled) {
        super.enabled = enabled;
        this.updateContentForCurrentEnabledState();
    }
    get enabled() {
        return super.enabled;
    }
    updateContentForCurrentEnabledState() {
        if (this.enabled) {
            this.alpha = 1;
        }
        else {
            this.alpha = 0.5;
        }
        this.userInteractionEnabled = this.enabled;
    }
    addStyleClass(styleClassName) {
        super.addStyleClass(styleClassName);
        if (this.styleClassName != styleClassName) {
            this.updateContentForCurrentState.call(this);
        }
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
        if (event.name == UIView.broadcastEventName.PageDidScroll || event.name ==
            UIView.broadcastEventName.AddedToViewTree) {
            this.hovered = NO;
            this.highlighted = NO;
        }
    }
    toggleSelectedState() {
        this.selected = !this.selected;
    }
    set isToggleable(isToggleable) {
        this._isToggleable = isToggleable;
    }
    get isToggleable() {
        return this._isToggleable;
    }
    layoutSubviews() {
        super.layoutSubviews();
        const bounds = this.bounds;
    }
    sendControlEventForKey(eventKey, nativeEvent) {
        if (eventKey == UIView.controlEvent.PointerUpInside && !this.highlighted) {
            // Do not send the event in this case
            //super.sendControlEventForKey(eventKey, nativeEvent);
            const asd = 1;
        }
        else {
            super.sendControlEventForKey(eventKey, nativeEvent);
        }
    }
    static getEventCoordinatesInDocument(touchOrMouseEvent) {
        // http://www.quirksmode.org/js/events_properties.html
        var posx = 0;
        var posy = 0;
        var e = touchOrMouseEvent;
        if (!e) {
            e = window.event;
        }
        if (e.pageX || e.pageY) {
            posx = e.pageX;
            posy = e.pageY;
        }
        else if (e.clientX || e.clientY) {
            posx = e.clientX + document.body.scrollLeft
                + document.documentElement.scrollLeft;
            posy = e.clientY + document.body.scrollTop
                + document.documentElement.scrollTop;
        }
        // posx and posy contain the mouse position relative to the document
        const coordinates = { "x": posx, "y": posy };
        return coordinates;
    }
    static getElementPositionInDocument(el) {
        //https://www.kirupa.com/html5/getting_mouse_click_position.htm
        var xPosition = 0;
        var yPosition = 0;
        while (el) {
            if (el.tagName == "BODY") {
                // Coordinates in document are coordinates in body, therefore subtracting the scroll position of the body is not needed
                //      // deal with browser quirks with body/window/document and page scroll
                //      var xScrollPos = el.scrollLeft || document.documentElement.scrollLeft;
                //      var yScrollPos = el.scrollTop || document.documentElement.scrollTop;
                //
                //      xPosition += (el.offsetLeft - xScrollPos + el.clientLeft);
                //      yPosition += (el.offsetTop - yScrollPos + el.clientTop);
            }
            else {
                xPosition += (el.offsetLeft - el.scrollLeft + el.clientLeft);
                yPosition += (el.offsetTop - el.scrollTop + el.clientTop);
            }
            el = el.offsetParent;
        }
        return {
            x: xPosition,
            y: yPosition
        };
    }
    static convertCoordinatesFromDocumentToElement(x, y, element) {
        const elementPositionInDocument = this.getElementPositionInDocument(element);
        const coordinatesInElement = { "x": x - elementPositionInDocument.x, "y": y - elementPositionInDocument.y };
        return coordinatesInElement;
    }
    static getEventCoordinatesInElement(touchOrMouseEvent, element) {
        const coordinatesInDocument = this.getEventCoordinatesInDocument(touchOrMouseEvent);
        const coordinatesInElement = this.convertCoordinatesFromDocumentToElement(coordinatesInDocument.x, coordinatesInDocument.y, element);
        return coordinatesInElement;
    }
}
/// <reference path="./UIBaseButton.ts" />
class UILink extends UIBaseButton {
    constructor(elementID, initViewData = nil) {
        super(elementID, "a", initViewData);
        this._class = UILink;
        this.superclass = UIBaseButton;
        this.stopsPointerEventPropagation = NO;
        this.pausesPointerEvents = NO;
    }
    initView(elementID, viewHTMLElement, initViewData) {
        super.initView(elementID, viewHTMLElement, initViewData);
        this.class.superclass = UIBaseButton;
        // Instance variables
        //this.style.position = "relative"
        viewHTMLElement.onclick = this.blur.bind(this);
    }
    get colors() {
        return this._colors;
    }
    set colors(value) {
        this._colors = value;
    }
    get viewHTMLElement() {
        return super.viewHTMLElement;
    }
    set text(text) {
        this.viewHTMLElement.textContent = text;
    }
    get text() {
        return this.viewHTMLElement.textContent;
    }
    set target(target) {
        this.viewHTMLElement.setAttribute("href", target);
    }
    get target() {
        const result = this.viewHTMLElement.getAttribute("href");
        return result;
    }
    set targetRouteForCurrentState(targetRouteForCurrentState) {
        this._targetRouteForCurrentState = targetRouteForCurrentState;
        this.updateTarget();
    }
    get targetRouteForCurrentState() {
        return this._targetRouteForCurrentState;
    }
    _targetRouteForCurrentState() {
        const result = UIRoute.currentRoute.routeByRemovingComponentsOtherThanOnesNamed(["settings"]);
        return result;
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
        if (event.name == UICore.broadcastEventName.RouteDidChange) {
            this.updateTarget();
        }
    }
    wasAddedToViewTree() {
        super.wasAddedToViewTree();
        this.updateTarget();
    }
    updateTarget() {
        const route = this.targetRouteForCurrentState();
        if (route instanceof UIRoute) {
            this.target = route.linkRepresentation;
            return;
        }
        this.target = route;
    }
    layoutSubviews() {
        super.layoutSubviews();
        const bounds = this.bounds;
    }
}
/// <reference path="./UILink.ts" />
class UILinkButton extends UILink {
    //link = new UILink(this.elementID + "Link");
    constructor(elementID, elementType, titleType) {
        super(elementID, { "elementType": elementType, "titleType": titleType });
        this._class = UILinkButton;
        this.superclass = UILink;
        this.button.addTargetForControlEvents([
            UIButton.controlEvent.EnterDown, UIButton.controlEvent.PointerUpInside
        ], function (sender, event) {
            const asd = 1;
            window.location = this.target;
        }.bind(this));
        // this.link.hidden = YES;
        // this.addSubview(this.link);
    }
    initView(elementID, viewHTMLElement, initViewData) {
        super.initView(elementID, viewHTMLElement, initViewData);
        this.class.superclass = UILink;
        // Instance variables
        this.button = new UIButton(this.elementID + "Button", initViewData.elementType, initViewData.titleType);
        this.addSubview(this.button);
        this.style.position = "absolute";
    }
    get titleLabel() {
        return this.button.titleLabel;
    }
    get imageView() {
        return this.button.imageView;
    }
    set colors(colors) {
        this.button.colors = colors;
    }
    get colors() {
        return this.button.colors;
    }
    get viewHTMLElement() {
        return super.viewHTMLElement;
    }
    set target(target) {
        this.viewHTMLElement.setAttribute("href", target);
    }
    get target() {
        const result = this.viewHTMLElement.getAttribute("href");
        return result;
    }
    layoutSubviews() {
        super.layoutSubviews();
        const bounds = this.bounds;
        this.button.frame = bounds;
        this.button.layoutSubviews();
    }
}
/// <reference path="./UICore/UIViewController.ts" />
/// <reference path="./UICore/UIDialogView.ts" />
/// <reference path="./UICore/UILinkButton.ts" />
class RootViewController extends UIViewController {
    constructor(view) {
        // Calling super
        super(view);
        // Here are some suggested conventions that are used in UICore
        // Instance variables, it is good to initialize to nil or empty function, not leave as undefined to avoid
        // if blocks
        // this._firstView = nil;
        // this._secondView = nil;
        // this._testView = nil;
        // this._button = nil;
        // The nil object avoids unneccessary crashes by allowing you to call any function or access any variable on it, returning nil
        // Define properties with get and set functions so they can be accessed and set like variables
        // Name variables that should be private, like property variables, with a _ sign, this also holds for private functions
        // Avoid accessing variables and functions named with _ from outside as this creates strong coupling and hinders stability
        // Code for further setup if necessary
    }
    loadIntrospectionVariables() {
        super.loadIntrospectionVariables();
        this.superclass = UIViewController;
    }
    loadSubviews() {
        this.view.backgroundColor = UIColor.colorWithRGBA(225, 225, 225);
        document.body.style.backgroundColor = this.view.backgroundColor.stringValue;
        this.topBarView = new CellView("TopBarView").copyValuesRecursivelyFromObject({
            titleLabel: {
                text: "",
                textAlignment: UITextView.textAlignment.center
            },
            colors: {
                background: { normal: new UIColor("#004f20") },
                titleLabel: { normal: UIColor.whiteColor }
            }
        });
        this.view.addSubview(this.topBarView);
        // Bottom bar
        this.bottomBarView = new BottomBarView("BottomBarView").copyValuesRecursivelyFromObject({
            style: { overflow: "hidden" }
        });
        //this.view.addSubview(this.bottomBarView)
        this.backToMainButton = new CBFlatButton();
        this.backToMainButton.titleLabel.text = "&#8592;";
        this.backToMainButton.colors = {
            titleLabel: {
                normal: UIColor.whiteColor,
                highlighted: UIColor.whiteColor.colorWithAlpha(0.75),
                selected: UIColor.whiteColor.colorWithAlpha(0.5)
            },
            background: {
                normal: UIColor.transparentColor,
                highlighted: UIColor.transparentColor,
                selected: UIColor.transparentColor
            }
        };
        this.backToMainButton.calculateAndSetViewFrame = function () {
            this.setPosition(0, nil, 0, 0, nil, 50);
        };
        this.topBarView.addSubview(this.backToMainButton);
        this.backToMainButton.addControlEventTarget.EnterDown.PointerUpInside = (sender, event) => UIRoute.currentRoute.routeByRemovingComponentsOtherThanOnesNamed(["settings"]).apply();
    }
    handleRoute(route) {
        const _super = Object.create(null, {
            handleRoute: { get: () => super.handleRoute }
        });
        return __awaiter(this, void 0, void 0, function* () {
            _super.handleRoute.call(this, route);
            this.backToMainButton.hidden = NO;
            if (IS(route.componentWithName(GETELECViewController.routeComponentName))) {
                // Show article view
                if (!IS(this.useGETELECViewController)) {
                    this.useGETELECViewController = new GETELECViewController(new UIView("GETELECView"));
                }
                this.contentViewController = this.useGETELECViewController;
            }
            else if (IS(route.componentWithName(GETELECTableViewController.routeComponentName))) {
                // Show article view
                if (!IS(this.useGETELECViewController)) {
                    this.useGETELECTableViewController = new GETELECTableViewController(new UIView("GETELECTableView"));
                }
                this.contentViewController = this.useGETELECTableViewController;
            }
            else {
                // Main view controller
                if (!IS(this.mainViewController)) {
                    this.mainViewController = new UIViewController(new UIView("MainView"));
                    this.mainViewController.view.backgroundColor = UIColor.theChosenGreyColor;
                    this.mainViewController.view.viewHTMLElement.innerHTML = yield CBCore.sharedInstance.readTextFileFromURL("/frontpage.html");
                    //     LanguageService.stringForKey(
                    //     "frontPageHTML",
                    //     LanguageService.currentLanguageKey,
                    //     "This is the front page."
                    // )
                }
                this.contentViewController = this.mainViewController;
                this.backToMainButton.hidden = YES;
            }
        });
    }
    set contentViewController(controller) {
        if (this.contentViewController == controller) {
            return;
        }
        if (this.contentViewController) {
            this.removeChildViewController(this.contentViewController);
        }
        this._contentViewController = controller;
        this.addChildViewControllerInContainer(controller, this.view);
        this._layoutViewSubviews();
        this.view.setNeedsLayout();
    }
    get contentViewController() {
        return this._contentViewController || nil;
    }
    static get paddingLength() {
        return 20;
    }
    get paddingLength() {
        return this.class.paddingLength;
    }
    layoutViewsManually() {
        super.layoutViewsManually();
        // View bounds
        var bounds = this.view.bounds;
        this.topBarView.frame = bounds.rectangleWithHeight(50);
        this.contentViewController.view.frame = this.topBarView.frame.rectangleForNextRow(this.paddingLength, FIRST_OR_NIL(wrapInNil(this.contentViewController).intrinsicViewContentHeight([bounds.width, 1250].min()), wrapInNil(this.contentViewController).view.intrinsicContentHeight([bounds.width, 1250].min()))).rectangleWithWidth([bounds.width, 1250].min(), 0.5);
        this.contentViewController.view.style.boxShadow = "0 3px 6px 0 rgba(0, 0, 0, 0.1)";
        this.contentViewController.view.setMargins(0, 0, this.paddingLength, 0);
        //this.view.setPaddings(0, 0, this.paddingLength, 0);
        var bottomBarHeight = Math.max(100, this.bottomBarView.intrinsicContentHeight(this.contentViewController.view.frame.width));
        this.bottomBarView.frame = this.contentViewController.view.frame.rectangleWithY([
            this.contentViewController.view.frame.max.y + this.paddingLength * 2,
            UIView.pageHeight - bottomBarHeight
        ].max()).rectangleWithHeight(bottomBarHeight).rectangleWithWidth(this.view.bounds.width).rectangleWithX(0);
    }
}
// @ts-ignore
class UIRoute extends Array {
    constructor(hash) {
        super();
        this._isHandled = NO;
        this.completedComponents = [];
        if (!hash || !hash.startsWith) {
            return;
        }
        if (hash.startsWith("#")) {
            hash = hash.slice(1);
        }
        hash = decodeURIComponent(hash);
        const components = hash.split("]");
        components.forEach(function (component, index, array) {
            const componentName = component.split("[")[0];
            const parameters = {};
            if (!componentName) {
                return;
            }
            const parametersString = component.split("[")[1] || "";
            const parameterPairStrings = parametersString.split(",") || [];
            parameterPairStrings.forEach(function (pairString, index, array) {
                const keyAndValueArray = pairString.split(":");
                const key = decodeURIComponent(keyAndValueArray[0]);
                const value = decodeURIComponent(keyAndValueArray[1]);
                if (key) {
                    parameters[key] = value;
                }
            });
            this.push({
                name: componentName,
                parameters: parameters
            });
        }, this);
    }
    static get currentRoute() {
        return new UIRoute(window.location.hash);
    }
    apply() {
        window.location.hash = this.stringRepresentation;
    }
    applyByReplacingCurrentRouteInHistory() {
        window.location.replace(this.linkRepresentation);
    }
    copy() {
        var result = new UIRoute();
        result = Object.assign(result, this);
        return result;
    }
    childRoute() {
        var result = this.copy();
        result.completedComponents.forEach(function (component, index, completedComponents) {
            var indexInResult = result.indexOf(component);
            if (indexInResult > -1) {
                result.splice(indexInResult, 1);
            }
        });
        result.completedComponents = [];
        result.parentRoute = this;
        return result;
    }
    routeByRemovingComponentsOtherThanOnesNamed(componentNames) {
        const result = this.copy();
        const indexesToRemove = [];
        result.forEach(function (component, index, array) {
            if (!componentNames.contains(component.name)) {
                indexesToRemove.push(index);
            }
        });
        indexesToRemove.forEach(function (indexToRemove, index, array) {
            result.removeElementAtIndex(indexToRemove);
        });
        return result;
    }
    routeByRemovingComponentNamed(componentName) {
        const result = this.copy();
        const componentIndex = result.findIndex(function (component, index) {
            return (component.name == componentName);
        });
        if (componentIndex != -1) {
            result.splice(componentIndex, 1);
        }
        return result;
    }
    routeByRemovingParameterInComponent(componentName, parameterName, removeComponentIfEmpty = NO) {
        var result = this.copy();
        var parameters = result.componentWithName(componentName).parameters;
        if (IS_NOT(parameters)) {
            parameters = {};
        }
        delete parameters[parameterName];
        result = result.routeWithComponent(componentName, parameters);
        if (removeComponentIfEmpty && Object.keys(parameters).length == 0) {
            result = result.routeByRemovingComponentNamed(componentName);
        }
        return result;
    }
    routeBySettingParameterInComponent(componentName, parameterName, valueToSet) {
        var result = this.copy();
        if (IS_NIL(valueToSet) || IS_NIL(parameterName)) {
            return result;
        }
        var parameters = result.componentWithName(componentName).parameters;
        if (IS_NOT(parameters)) {
            parameters = {};
        }
        parameters[parameterName] = valueToSet;
        result = result.routeWithComponent(componentName, parameters);
        return result;
    }
    routeWithViewControllerComponent(viewController, parameters, extendParameters = NO) {
        return this.routeWithComponent(viewController.routeComponentName, parameters, extendParameters);
    }
    routeWithComponent(name, parameters, extendParameters = NO) {
        const result = this.copy();
        var component = result.componentWithName(name);
        if (IS_NOT(component)) {
            component = {
                name: name,
                parameters: {}
            };
            result.push(component);
        }
        if (IS_NOT(parameters)) {
            parameters = {};
        }
        if (extendParameters) {
            component.parameters = Object.assign(component.parameters, parameters);
        }
        else {
            component.parameters = parameters;
        }
        return result;
    }
    navigateBySettingComponent(name, parameters, extendParameters = NO) {
        this.routeWithComponent(name, parameters, extendParameters).apply();
    }
    componentWithViewController(viewController) {
        return this.componentWithName(viewController.routeComponentName);
    }
    componentWithName(name) {
        var result = nil;
        this.forEach(function (component, index, self) {
            if (component.name == name) {
                result = component;
            }
        });
        return result;
    }
    didcompleteComponent(component) {
        const self = this;
        const index = self.indexOf(component, 0);
        if (index > -1) {
            self.completedComponents.push(self.splice(index, 1)[0]);
            //self.completedComponents.push(component);
        }
    }
    set isHandled(isHandled) {
        this._isHandled = isHandled;
    }
    get isHandled() {
        return (this._isHandled || (this.length == 0 && this.completedComponents.length != 0));
    }
    get linkRepresentation() {
        return "#" + this.stringRepresentation;
    }
    get stringRepresentation() {
        var result = "";
        this.completedComponents.forEach(function (component, index, self) {
            result = result + component.name;
            const parameters = component.parameters;
            result = result + "[";
            Object.keys(parameters).forEach(function (key, index, keys) {
                if (index) {
                    result = result + ",";
                }
                result = result + encodeURIComponent(key) + ":" + encodeURIComponent(parameters[key]);
            });
            result = result + "]";
        });
        this.forEach(function (component, index, self) {
            result = result + component.name;
            const parameters = component.parameters;
            result = result + "[";
            Object.keys(parameters).forEach(function (key, index, keys) {
                if (index) {
                    result = result + ",";
                }
                result = result + encodeURIComponent(key) + ":" + encodeURIComponent(parameters[key]);
            });
            result = result + "]";
        });
        return result;
    }
}
/// <reference path="UIView.ts" />
/// <reference path="UIViewController.ts" />
/// <reference path="../RootViewController.ts" />
/// <reference path="UIRoute.ts" />
class UICore extends UIObject {
    constructor(rootDivElementID, rootViewControllerClass) {
        super();
        this.rootViewController = nil;
        this._class = UICore;
        this.superclass = UIObject;
        UICore.RootViewControllerClass = rootViewControllerClass;
        UICore.main = this;
        const rootViewElement = document.getElementById(rootDivElementID);
        const rootView = new UIView(rootDivElementID, rootViewElement);
        rootView.pausesPointerEvents = NO; //YES;
        if (UICore.RootViewControllerClass) {
            if (!(UICore.RootViewControllerClass.prototype instanceof UIViewController) ||
                UICore.RootViewControllerClass === UIViewController) {
                console.log("Error, UICore.RootViewControllerClass must be a or a subclass of UIViewController, falling back to UIViewController.");
                UICore.RootViewControllerClass = UIViewController;
            }
            this.rootViewController = new UICore.RootViewControllerClass(rootView);
        }
        else {
            this.rootViewController = new UIViewController(rootView);
        }
        this.rootViewController.viewWillAppear();
        this.rootViewController.viewDidAppear();
        this.rootViewController.view.addTargetForControlEvent(UIView.controlEvent.PointerUpInside, function (sender, event) {
            document.activeElement.blur();
        });
        const windowDidResize = function () {
            // Doing layout two times to prevent page scrollbars from confusing the layout
            this.rootViewController._layoutViewSubviews();
            UIView.layoutViewsIfNeeded();
            this.rootViewController._layoutViewSubviews();
            //UIView.layoutViewsIfNeeded()
            this.rootViewController.view.broadcastEventInSubtree({
                name: UICore.broadcastEventName.WindowDidResize,
                parameters: nil
            });
        };
        window.addEventListener("resize", windowDidResize.bind(this));
        const didScroll = function () {
            //code
            this.rootViewController.view.broadcastEventInSubtree({
                name: UIView.broadcastEventName.PageDidScroll,
                parameters: nil
            });
        }.bind(this);
        window.addEventListener("scroll", didScroll, false);
        const hashDidChange = function () {
            //code
            this.rootViewController.handleRouteRecursively(UIRoute.currentRoute);
            this.rootViewController.view.broadcastEventInSubtree({
                name: UICore.broadcastEventName.RouteDidChange,
                parameters: nil
            });
        }.bind(this);
        window.addEventListener("hashchange", hashDidChange.bind(this), false);
        hashDidChange();
    }
    static loadClass(className) {
        if (window[className]) {
            return;
        }
        document.writeln("<script type='text/javascript' src='dist/UICore/" + className + ".js'></script>");
    }
}
UICore.languageService = nil;
UICore.broadcastEventName = {
    "RouteDidChange": "RouteDidChange",
    "WindowDidResize": "WindowDidResize"
};
UICore.RootViewControllerClass = nil;
const IS_FIREFOX = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
Array.prototype.indexOf || (Array.prototype.indexOf = function (d, e) {
    var a;
    if (null == this) {
        throw new TypeError("\"this\" is null or not defined");
    }
    const c = Object(this), b = c.length >>> 0;
    if (0 === b) {
        return -1;
    }
    a = +e || 0;
    Infinity === Math.abs(a) && (a = 0);
    if (a >= b) {
        return -1;
    }
    for (a = Math.max(0 <= a ? a : b - Math.abs(a), 0); a < b;) {
        if (a in c && c[a] === d) {
            return a;
        }
        a++;
    }
    return -1;
});
/// <reference path="UIView.ts" />
/// <reference path="UICore.ts" />
class UITextView extends UIView {
    constructor(elementID, textViewType = UITextView.type.paragraph, viewHTMLElement = null) {
        super(elementID, viewHTMLElement, textViewType);
        this._textColor = UITextView.defaultTextColor;
        this._isSingleLine = YES;
        this.textPrefix = "";
        this.textSuffix = "";
        this._notificationAmount = 0;
        this._minFontSize = nil;
        this._maxFontSize = nil;
        this._automaticFontSizeSelection = NO;
        this.changesOften = NO;
        this._class = UITextView;
        this.superclass = UIView;
        this.text = "";
        this.style.overflow = "hidden";
        this.style.textOverflow = "ellipsis";
        this.isSingleLine = YES;
        this.textColor = this.textColor;
        this.userInteractionEnabled = YES;
        if (textViewType == UITextView.type.textArea) {
            this.pausesPointerEvents = YES;
            this.addTargetForControlEvent(UIView.controlEvent.PointerUpInside, function (sender, event) {
                sender.focus();
            });
        }
    }
    static _determinePXAndPTRatios() {
        const o = document.createElement("div");
        o.style.width = "1000pt";
        document.body.appendChild(o);
        UITextView._ptToPx = o.clientWidth / 1000;
        document.body.removeChild(o);
        UITextView._pxToPt = 1 / UITextView._ptToPx;
    }
    get textAlignment() {
        const result = this.style.textAlign;
        return result;
    }
    set textAlignment(textAlignment) {
        this._textAlignment = textAlignment;
        this.style.textAlign = textAlignment;
    }
    get textColor() {
        const result = this._textColor;
        return result;
    }
    set textColor(color) {
        this._textColor = color || UITextView.defaultTextColor;
        this.style.color = this._textColor.stringValue;
    }
    get isSingleLine() {
        return this._isSingleLine;
    }
    set isSingleLine(isSingleLine) {
        this._isSingleLine = isSingleLine;
        if (isSingleLine) {
            this.style.whiteSpace = "pre";
            return;
        }
        this.style.whiteSpace = "pre-wrap";
    }
    get notificationAmount() {
        return this._notificationAmount;
    }
    set notificationAmount(notificationAmount) {
        if (this._notificationAmount == notificationAmount) {
            return;
        }
        this._notificationAmount = notificationAmount;
        this.text = this.text;
        this.setNeedsLayoutUpToRootView();
        this.notificationAmountDidChange(notificationAmount);
    }
    notificationAmountDidChange(notificationAmount) {
    }
    get text() {
        return (this._text || this.viewHTMLElement.innerHTML);
    }
    set text(text) {
        this._text = text;
        var notificationText = "";
        if (this.notificationAmount) {
            notificationText = "<span style=\"color: " + UITextView.notificationTextColor.stringValue + ";\">" +
                (" (" + this.notificationAmount + ")").bold() + "</span>";
        }
        if (this.viewHTMLElement.innerHTML != this.textPrefix + text + this.textSuffix + notificationText) {
            this.viewHTMLElement.innerHTML = this.textPrefix + FIRST(text, "") + this.textSuffix + notificationText;
        }
        this.setNeedsLayout();
    }
    set innerHTML(innerHTML) {
        this.text = innerHTML;
    }
    get innerHTML() {
        return this.viewHTMLElement.innerHTML;
    }
    setText(key, defaultString, parameters) {
        this.setInnerHTML(key, defaultString, parameters);
    }
    get fontSize() {
        const style = window.getComputedStyle(this.viewHTMLElement, null).fontSize;
        const result = (parseFloat(style) * UITextView._pxToPt);
        return result;
    }
    set fontSize(fontSize) {
        this.style.fontSize = "" + fontSize + "pt";
    }
    useAutomaticFontSize(minFontSize = nil, maxFontSize = nil) {
        this._automaticFontSizeSelection = YES;
        this._minFontSize = minFontSize;
        this._maxFontSize = maxFontSize;
        this.setNeedsLayout();
    }
    static automaticallyCalculatedFontSize(bounds, currentSize, currentFontSize, minFontSize, maxFontSize) {
        minFontSize = FIRST(minFontSize, 1);
        maxFontSize = FIRST(maxFontSize, 100000000000);
        const heightMultiplier = bounds.height / (currentSize.height + 1);
        const widthMultiplier = bounds.width / (currentSize.width + 1);
        var multiplier = heightMultiplier;
        if (heightMultiplier > widthMultiplier) {
            multiplier = widthMultiplier;
        }
        const maxFittingFontSize = currentFontSize * multiplier;
        if (maxFittingFontSize > maxFontSize) {
            return maxFontSize;
        }
        if (minFontSize > maxFittingFontSize) {
            return minFontSize;
        }
        return maxFittingFontSize;
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
    }
    willMoveToSuperview(superview) {
        super.willMoveToSuperview(superview);
    }
    layoutSubviews() {
        super.layoutSubviews();
        if (this._automaticFontSizeSelection) {
            this.fontSize = UITextView.automaticallyCalculatedFontSize(new UIRectangle(0, 0, 1 *
                this.viewHTMLElement.offsetHeight, 1 *
                this.viewHTMLElement.offsetWidth), this.intrinsicContentSize(), this.fontSize, this._minFontSize, this._maxFontSize);
        }
    }
    intrinsicContentHeight(constrainingWidth = 0) {
        if (this.changesOften) {
            return super.intrinsicContentHeight(constrainingWidth);
        }
        const keyPath = (this.viewHTMLElement.innerHTML + "_csf_" + this.computedStyle.font).replace(new RegExp("\\.", "g"), "_") + "." +
            ("" + constrainingWidth).replace(new RegExp("\\.", "g"), "_");
        var result = UITextView._intrinsicHeightCache.valueForKeyPath(keyPath);
        if (IS_LIKE_NULL(result)) {
            result = super.intrinsicContentHeight(constrainingWidth);
            UITextView._intrinsicHeightCache.setValueForKeyPath(keyPath, result);
        }
        return result;
    }
    intrinsicContentWidth(constrainingHeight = 0) {
        if (this.changesOften) {
            return super.intrinsicContentWidth(constrainingHeight);
        }
        const keyPath = (this.viewHTMLElement.innerHTML + "_csf_" + this.computedStyle.font).replace(new RegExp("\\.", "g"), "_") + "." +
            ("" + constrainingHeight).replace(new RegExp("\\.", "g"), "_");
        var result = UITextView._intrinsicWidthCache.valueForKeyPath(keyPath);
        if (IS_LIKE_NULL(result)) {
            result = super.intrinsicContentWidth(constrainingHeight);
            UITextView._intrinsicWidthCache.setValueForKeyPath(keyPath, result);
        }
        return result;
    }
    intrinsicContentSize() {
        // This works but is slow
        const result = this.intrinsicContentSizeWithConstraints(nil, nil);
        return result;
    }
}
UITextView.defaultTextColor = UIColor.blackColor;
UITextView.notificationTextColor = UIColor.redColor;
UITextView._intrinsicHeightCache = new UIObject();
UITextView._intrinsicWidthCache = new UIObject();
UITextView.type = {
    "paragraph": "p",
    "header1": "h1",
    "header2": "h2",
    "header3": "h3",
    "header4": "h4",
    "header5": "h5",
    "header6": "h6",
    "textArea": "textarea",
    "textField": "input",
    "span": "span",
    "label": "label"
};
UITextView.textAlignment = {
    "left": "left",
    "center": "center",
    "right": "right",
    "justify": "justify"
};
UITextView._determinePXAndPTRatios();
// /**
//  * Uses canvas.measureText to compute and return the width of the given text of given font in pixels.
//  * 
//  * @param {String} text The text to be rendered.
//  * @param {String} font The css font descriptor that text is to be rendered with (e.g. "bold 14px verdana").
//  * 
//  * @see https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript/21015393#21015393
//  */
// function getTextMetrics(text, font) {
//     // re-use canvas object for better performance
//     var canvas = getTextMetrics.canvas || (getTextMetrics.canvas = document.createElement("canvas"));
//     var context = canvas.getContext("2d");
//     context.font = font;
//     var metrics = context.measureText(text);
//     return metrics;
// }
/// <reference path="./UICore/UIViewController.ts" />
///<reference path="UICore/UITextView.ts"/>
class GETELECTableViewController extends UIViewController {
    constructor(view) {
        // Calling super
        super(view);
        // Code for further setup if necessary
    }
    loadIntrospectionVariables() {
        super.loadIntrospectionVariables();
        this.superclass = UIViewController;
    }
    loadSubviews() {
        this.view.backgroundColor = UIColor.whiteColor;
        this.titleLabel = new UITextView(this.view.elementID + "TitleLabel", UITextView.type.header4);
        this.titleLabel.textAlignment = UITextView.textAlignment.left;
        this.titleLabel.nativeSelectionEnabled = NO;
        this.titleLabel.isSingleLine = NO;
        this.view.addSubview(this.titleLabel);
        this.inputTextArea = new UITextArea(this.view.elementID + "InputTextArea");
        this.inputTextArea.placeholderText = "Input your data here.";
        this.inputTextArea.changesOften = YES;
        this.view.addSubview(this.inputTextArea);
        this.loadDataButton = new CBButton();
        this.loadDataButton.titleLabel.text = "Load data";
        this.view.addSubview(this.loadDataButton);
        this.loadDataButton.enabled = NO;
        this.resultsLabel = new UIView();
        this.resultsLabel.innerHTML = "Results";
        this.resultsLabel.hidden = YES;
        this.view.addSubview(this.resultsLabel);
        this.chartView = new UIView("ResultDataChart", nil, "canvas");
        this.chartView.hidden = YES;
        this.view.addSubview(this.chartView);
        this.inputTextArea.addControlEventTarget.TextChange = (sender, event) => {
            //console.log(sender);
            this.view.setNeedsLayoutUpToRootView();
            this.loadDataButton.enabled = IS(this.inputTextArea.text);
        };
        // @ts-ignore
        const ctx = this.chartView.viewHTMLElement.getContext("2d");
        // @ts-ignore
        this.chart = new Chart(ctx, {
            // The type of chart we want to create
            //type: "line",
            type: "scatter",
            // The data for our dataset
            data: {
                //labels: ['January', 'February', 'March', 'April', 'May', 'June'],
                datasets: [
                    {
                        label: "Input Data",
                        fill: false,
                        lineTension: 0,
                        //backgroundColor: UIColor.transparentColor,
                        borderColor: "rgb(125, 115, 252)" //,
                        //data: [{ x: 0, y: 0 }, { x: 2, y: 10 }, { x: 5, y: 5 }, { x: 7, y: 2 }, { x: 8, y: 20 }, {
                        // x: 11, y: 45 }]
                    },
                    {
                        label: "Fitted theoretical line",
                        fill: false,
                        lineTension: 0,
                        backgroundColor: "rgb(255, 99, 132)",
                        borderColor: "rgb(255, 99, 132)" //,
                        //data: [{ x: 0, y: 0 }, { x: 2, y: 10 }, { x: 5, y: 5 }, { x: 7, y: 2 }, { x: 8, y: 20 }, {
                        // x: 11, y: 45 }]
                    }
                ]
            },
            // Configuration options go here
            options: {
                fill: false,
                lineTension: 0,
                scales: {
                    x: {
                        type: "linear",
                        position: "bottom"
                    },
                    y: {
                        type: "logarithmic",
                        position: "bottom"
                    },
                    yAxes: [
                        {
                            type: "logarithmic",
                            ticks: {
                                min: 1,
                                max: 1000000,
                                callback: function (value, index, values) {
                                    if (value === 1000000) {
                                        return "1M";
                                    }
                                    if (value === 100000) {
                                        return "100K";
                                    }
                                    if (value === 10000) {
                                        return "10K";
                                    }
                                    if (value === 1000) {
                                        return "1K";
                                    }
                                    if (value === 100) {
                                        return "100";
                                    }
                                    if (value === 10) {
                                        return "10";
                                    }
                                    if (value === 1) {
                                        return "1";
                                    }
                                    return null;
                                }
                            }
                        }
                    ]
                },
                tooltips: {
                    mode: "interpolate",
                    intersect: true
                },
                plugins: {
                    crosshair: {
                        line: {
                            color: "#F66",
                            width: 1 // crosshair line width
                        },
                        sync: {
                            enabled: true,
                            group: 1,
                            suppressTooltips: false // suppress tooltips when showing a synced tracer
                        },
                        zoom: {
                            enabled: NO,
                            zoomboxBackgroundColor: "rgba(66,133,244,0.2)",
                            zoomboxBorderColor: "#48F",
                            zoomButtonText: "Reset Zoom",
                            zoomButtonClass: "reset-zoom" // reset zoom button class
                        },
                        callbacks: {
                            beforeZoom: function (start, end) {
                                return true;
                            },
                            afterZoom: function (start, end) {
                            }
                        }
                    }
                }
                // responsive: false,
                // maintainAspectRatio: false,
                // showScale: true
            }
        });
        this.loadDataButton.addControlEventTarget.EnterDown.PointerUpInside = (sender, event) => __awaiter(this, void 0, void 0, function* () {
            //console.log(sender)
            try {
                CBDialogViewShower.showActionIndicatorDialog("Loading.");
                const stringSocketClientResult = yield SocketClient.PerformFitFun({
                    inputData: this.inputTextArea.text
                });
                if (IS(stringSocketClientResult.errorResult)) {
                    console.log(stringSocketClientResult.errorResult);
                    CBDialogViewShower.alert("Failed to analyze data. " + JSON.stringify(stringSocketClientResult.errorResult));
                    return;
                }
                const result = JSON.parse(stringSocketClientResult.result);
                //console.log(result)
                this.resultsLabel.innerHTML = FIRST(result.resultHTMLString, "")
                    + IF(IS_NOT(result.resultHTMLString))(RETURNER(`\r\nRadius: ${result.Radius} \r\nbeta: ${result.beta} \r\nsigma_Aeff: ${result.sigma_Aeff}`))();
                const pointPoints = this.pointObjectsFromValues(result.xplot_mrk, result.yplot_mrk);
                const linePoints = this.pointObjectsFromValues(result.xplot_line, result.yplot_line);
                this.chart.data.datasets[0].data = pointPoints;
                this.chart.data.datasets[0].showLine = NO;
                this.chart.data.datasets[1].data = linePoints;
                this.chart.data.datasets[1].showLine = YES;
                this.chart.data.datasets[1].pointRadius = 0;
                this.chart.data.datasets[1].interpolate = YES;
                this.chart.options.scales.xAxes[0].scaleLabel.display = true;
                this.chart.options.scales.xAxes[0].scaleLabel.labelString = "" + FIRST(result.xAxisUnit, "");
                this.chart.options.scales.yAxes[0].scaleLabel.display = true;
                this.chart.options.scales.yAxes[0].scaleLabel.labelString = "" + FIRST(result.yAxisUnit, "");
                this.resultsLabel.hidden = NO;
                this.chartView.hidden = NO;
                this.chart.update();
                this.view.setNeedsLayoutUpToRootView();
            }
            catch (exception) {
                console.log(exception);
                CBDialogViewShower.alert("Failed to display results. " + JSON.stringify(exception));
            }
            CBDialogViewShower.hideActionIndicatorDialog();
        });
    }
    pointObjectsFromValues(xValues, yValues) {
        var resultPoints = [];
        for (var i = 0; i < xValues.length; i++) {
            var x = xValues[i];
            var y = yValues[i];
            resultPoints.push({ x: x, y: y });
        }
        return resultPoints;
    }
    handleRoute(route) {
        const _super = Object.create(null, {
            handleRoute: { get: () => super.handleRoute }
        });
        return __awaiter(this, void 0, void 0, function* () {
            _super.handleRoute.call(this, route);
            const inquiryComponent = route.componentWithViewController(GETELECTableViewController);
            this.titleLabel.text = "Enter your data and press the load button. TABLE VIEW";
            route.didcompleteComponent(inquiryComponent);
        });
    }
    layoutViewsManually() {
        super.layoutViewsManually();
        const padding = RootViewController.paddingLength;
        const labelHeight = padding * 1.25;
        // View bounds
        var bounds = this.view.bounds;
        this.view.setPaddings(0, 0, padding, 0);
        this.titleLabel.frame = bounds.rectangleWithInsets(padding, padding, 0, padding)
            .rectangleWithHeight(this.titleLabel.intrinsicContentHeight(bounds.width));
        this.inputTextArea.frame = this.titleLabel.frame.rectangleForNextRow(padding * 0.25, this.inputTextArea.intrinsicContentHeight(this.titleLabel.frame.width) + 5);
        this.loadDataButton.frame = this.inputTextArea.frame.rectangleForNextRow(padding, labelHeight * 2);
        this.loadDataButton.setMargins(0, 0, padding, 0);
        this.resultsLabel.frame = this.loadDataButton.frame.rectangleForNextRow(padding);
        this.chartView.frame = this.resultsLabel.frame.rectangleForNextRow(padding, this.loadDataButton.frame.width * 0.5);
        //.rectangleWithInsets(padding * 5 * 0, padding * 5, 0, 0)
        //.rectangleByAddingX(-padding)
        //this.chartView.setPadding(padding);
        this.chartView.setMaxSizes(this.chartView.frame.height, this.chartView.frame.width);
    }
    intrinsicViewContentHeight(constrainingWidth = 0) {
        const padding = RootViewController.paddingLength;
        const labelHeight = padding * 1.5;
        var result = padding + this.titleLabel.intrinsicContentHeight(constrainingWidth) + padding * 0.25 +
            labelHeight * 2 + padding * 0.5 + padding +
            this.inputTextArea.intrinsicContentHeight(constrainingWidth);
        if (IS_NOT(this.chartView.hidden)) {
            result = result + padding + (constrainingWidth - padding * 2) * 0.5 + padding + labelHeight * 2;
        }
        return result;
    }
}
GETELECTableViewController.routeComponentName = "fit_funasdasd";
GETELECTableViewController.ParameterIdentifierName = { "ID": "ID" };
// @ts-ignore
Chart.Interaction.modes["interpolate"] = function (chart, e, options) {
    // This function has a separate license
    // MIT License
    //
    // Copyright (c) 2018 Abel Heinsbroek
    //
    // Permission is hereby granted, free of charge, to any person obtaining a copy
    // of this software and associated documentation files (the "Software"), to deal
    // in the Software without restriction, including without limitation the rights
    // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    // copies of the Software, and to permit persons to whom the Software is
    // furnished to do so, subject to the following conditions:
    //
    //     The above copyright notice and this permission notice shall be included in all
    // copies or substantial portions of the Software.
    //
    //     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    //     FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    //     OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    // SOFTWARE.
    var items = [];
    for (var datasetIndex = 0; datasetIndex < chart.data.datasets.length; datasetIndex++) {
        // check for interpolate setting
        if (!chart.data.datasets[datasetIndex].interpolate) {
            continue;
        }
        var meta = chart.getDatasetMeta(datasetIndex);
        // do not interpolate hidden charts
        if (meta.hidden) {
            continue;
        }
        var xScale = chart.scales[meta.xAxisID];
        var yScale = chart.scales[meta.yAxisID];
        var xValue = xScale.getValueForPixel(e.x);
        var data = chart.data.datasets[datasetIndex].data;
        var index = data.findIndex(function (o) {
            return o.x >= xValue;
        });
        if (index === -1) {
            continue;
        }
        // linear interpolate value
        var prev = data[index - 1];
        var next = data[index];
        if (prev && next) {
            var slope = (next.y - prev.y) / (next.x - prev.x);
            var interpolatedValue = prev.y + (xValue - prev.x) * slope;
        }
        if (chart.data.datasets[datasetIndex].steppedLine && prev) {
            interpolatedValue = prev.y;
        }
        if (isNaN(interpolatedValue)) {
            continue;
        }
        var yPosition = yScale.getPixelForValue(interpolatedValue);
        // do not interpolate values outside of the axis limits
        if (isNaN(yPosition)) {
            continue;
        }
        // create a 'fake' event point
        var fakePoint = {
            value: interpolatedValue,
            xValue: xValue,
            tooltipPosition: function () {
                return this._model;
            },
            hasValue: function () {
                return true;
            },
            _model: {
                x: e.x,
                y: yPosition
            },
            _datasetIndex: datasetIndex,
            _index: items.length,
            _xScale: {
                getLabelForIndex: function (indx) {
                    let xValue = items[indx].xValue;
                    xValue = xValue.toPrecision(5);
                    return xValue;
                }
            },
            _yScale: {
                getLabelForIndex: function (indx) {
                    let value = items[indx].value.toPrecision(5);
                    return value;
                }
            },
            _chart: chart
        };
        items.push(fakePoint);
    }
    // add other, not interpolated, items
    // @ts-ignore
    var xItems = Chart.Interaction.modes.x(chart, e, options);
    xItems.forEach((item, index, array) => {
        if (!chart.data.datasets[item._datasetIndex].interpolate) {
            items.push(item);
        }
    });
    return items;
};
/// <reference path="./UICore/UIViewController.ts" />
///<reference path="UICore/UITextView.ts"/>
class GETELECViewController extends UIViewController {
    constructor(view) {
        // Calling super
        super(view);
        // Code for further setup if necessary
    }
    loadIntrospectionVariables() {
        super.loadIntrospectionVariables();
        this.superclass = UIViewController;
    }
    loadSubviews() {
        this.view.backgroundColor = UIColor.whiteColor;
        this.titleLabel = new UITextView(this.view.elementID + "TitleLabel", UITextView.type.header3);
        this.titleLabel.textAlignment = UITextView.textAlignment.left;
        this.titleLabel.nativeSelectionEnabled = NO;
        this.titleLabel.isSingleLine = NO;
        this.view.addSubview(this.titleLabel);
        this.inputTextArea = new UITextArea(this.view.elementID + "InputTextArea");
        this.inputTextArea.placeholderText = "{\r\n\"Voltage\": [2.413e+02, 3.305e+02,  4.993e+02],\r\n" +
            "\"Current\": [8.719e-01, 3.670e+01, 5.617e+03], \r\n\"Work_function\": 4.5\r\n}";
        this.inputTextArea.changesOften = YES;
        this.view.addSubview(this.inputTextArea);
        this.loadDataButton = new CBButton();
        this.loadDataButton.titleLabel.text = "Load data";
        this.view.addSubview(this.loadDataButton);
        this.loadDataButton.enabled = NO;
        this.resultsLabel = new UIView();
        this.resultsLabel.innerHTML = "Results";
        this.resultsLabel.hidden = YES;
        this.view.addSubview(this.resultsLabel);
        this.chartView = new UIView("ResultDataChart", nil, "canvas");
        this.chartView.hidden = YES;
        this.view.addSubview(this.chartView);
        this.inputTextArea.addControlEventTarget.TextChange = (sender, event) => {
            //console.log(sender);
            this.view.setNeedsLayoutUpToRootView();
            this.loadDataButton.enabled = IS(this.inputTextArea.text);
        };
        // @ts-ignore
        const ctx = this.chartView.viewHTMLElement.getContext("2d");
        // @ts-ignore
        this.chart = new Chart(ctx, {
            // The type of chart we want to create
            //type: "line",
            type: "scatter",
            // The data for our dataset
            data: {
                //labels: ['January', 'February', 'March', 'April', 'May', 'June'],
                datasets: [
                    {
                        label: "Input data points",
                        fill: false,
                        lineTension: 0,
                        //backgroundColor: UIColor.transparentColor,
                        borderColor: "rgb(87, 173, 122)" //,
                        //data: [{ x: 0, y: 0 }, { x: 2, y: 10 }, { x: 5, y: 5 }, { x: 7, y: 2 }, { x: 8, y: 20 }, {
                        // x: 11, y: 45 }]
                    },
                    {
                        label: "Fitted line",
                        fill: false,
                        lineTension: 0,
                        backgroundColor: "rgb(213, 150, 102)",
                        borderColor: "rgb(213, 150, 102)" //,
                        //data: [{ x: 0, y: 0 }, { x: 2, y: 10 }, { x: 5, y: 5 }, { x: 7, y: 2 }, { x: 8, y: 20 }, {
                        // x: 11, y: 45 }]
                    }
                ]
            },
            // Configuration options go here
            options: {
                fill: false,
                lineTension: 0,
                scales: {
                    x: {
                        type: "linear",
                        position: "bottom"
                    },
                    y: {
                        type: "logarithmic",
                        position: "bottom"
                    },
                    yAxes: [
                        {
                            type: "logarithmic",
                            ticks: {
                                min: 0,
                                max: 1000000,
                                callback: function (value, index, values) {
                                    if (value === 1000000) {
                                        return "1M";
                                    }
                                    if (value === 100000) {
                                        return "100K";
                                    }
                                    if (value === 10000) {
                                        return "10K";
                                    }
                                    if (value === 1000) {
                                        return "1K";
                                    }
                                    if (value === 100) {
                                        return "100";
                                    }
                                    if (value === 10) {
                                        return "10";
                                    }
                                    if (value === 1) {
                                        return "1";
                                    }
                                    if (value === 0) {
                                        return "0";
                                    }
                                    return null;
                                }
                            }
                        }
                    ]
                },
                tooltips: {
                    mode: "interpolate",
                    intersect: true
                },
                plugins: {
                    crosshair: {
                        line: {
                            color: "#F66",
                            width: 1 // crosshair line width
                        },
                        sync: {
                            enabled: true,
                            group: 1,
                            suppressTooltips: false // suppress tooltips when showing a synced tracer
                        },
                        zoom: {
                            enabled: NO,
                            zoomboxBackgroundColor: "rgba(66,133,244,0.2)",
                            zoomboxBorderColor: "#48F",
                            zoomButtonText: "Reset Zoom",
                            zoomButtonClass: "reset-zoom" // reset zoom button class
                        },
                        callbacks: {
                            beforeZoom: function (start, end) {
                                return true;
                            },
                            afterZoom: function (start, end) {
                            }
                        }
                    }
                }
                // responsive: false,
                // maintainAspectRatio: false,
                // showScale: true
            }
        });
        this.loadDataButton.addControlEventTarget.EnterDown.PointerUpInside = (sender, event) => __awaiter(this, void 0, void 0, function* () {
            //console.log(sender)
            try {
                CBDialogViewShower.showActionIndicatorDialog("Loading.");
                const stringSocketClientResult = yield SocketClient.PerformFitFun({
                    inputData: this.inputTextArea.text
                });
                if (IS(stringSocketClientResult.errorResult)) {
                    console.log(stringSocketClientResult.errorResult);
                    CBDialogViewShower.alert("Failed to analyze data. " + JSON.stringify(stringSocketClientResult.errorResult));
                    CBDialogViewShower.hideActionIndicatorDialog();
                    return;
                }
                const result = JSON.parse(stringSocketClientResult.result);
                //console.log(result)
                this.resultsLabel.innerHTML = FIRST(result.resultHTMLString, "") +
                    IF(IS_NOT(result.resultHTMLString))(RETURNER(`Radius: ${result.Radius} <br>
                     &beta;: ${result.beta} <br>
                     &sigma;Aeff: ${result.sigma_Aeff}<br>`))
                        .ELSE(RETURNER(""));
                const pointPoints = this.pointObjectsFromValues(result.xplot_mrk, result.yplot_mrk);
                const linePoints = this.pointObjectsFromValues(result.xplot_line, result.yplot_line);
                this.chart.data.datasets[0].data = pointPoints;
                this.chart.data.datasets[0].showLine = NO;
                this.chart.data.datasets[1].data = linePoints;
                this.chart.data.datasets[1].showLine = YES;
                this.chart.data.datasets[1].pointRadius = 0;
                this.chart.data.datasets[1].interpolate = YES;
                this.chart.options.scales.xAxes[0].scaleLabel.display = true;
                this.chart.options.scales.xAxes[0].scaleLabel.labelString = "" + FIRST(result.xAxisUnit, "");
                this.chart.options.scales.yAxes[0].scaleLabel.display = true;
                this.chart.options.scales.yAxes[0].scaleLabel.labelString = "" + FIRST(result.yAxisUnit, "");
                this.resultsLabel.hidden = NO;
                this.chartView.hidden = NO;
                this.chart.update();
                this.view.setNeedsLayoutUpToRootView();
            }
            catch (exception) {
                console.log(exception);
                CBDialogViewShower.alert("Failed to display results. " + JSON.stringify(exception));
            }
            CBDialogViewShower.hideActionIndicatorDialog();
        });
    }
    pointObjectsFromValues(xValues, yValues) {
        var resultPoints = [];
        for (var i = 0; i < xValues.length; i++) {
            var x = xValues[i];
            var y = yValues[i];
            resultPoints.push({ x: x, y: y });
        }
        return resultPoints;
    }
    handleRoute(route) {
        const _super = Object.create(null, {
            handleRoute: { get: () => super.handleRoute }
        });
        return __awaiter(this, void 0, void 0, function* () {
            _super.handleRoute.call(this, route);
            const inquiryComponent = route.componentWithViewController(GETELECViewController);
            this.titleLabel.text = "Enter your data in json format and press the load button.";
            route.didcompleteComponent(inquiryComponent);
        });
    }
    layoutViewsManually() {
        super.layoutViewsManually();
        const padding = RootViewController.paddingLength;
        const labelHeight = padding * 1.25;
        // View bounds
        var bounds = this.view.bounds;
        this.view.setPaddings(0, 0, padding, 0);
        this.titleLabel.frame = bounds.rectangleWithInsets(padding, padding, 0, padding)
            .rectangleWithHeight(this.titleLabel.intrinsicContentHeight(bounds.width - padding * 2));
        this.inputTextArea.frame = this.titleLabel.frame.rectangleForNextRow(padding * 0.25, this.inputTextArea.intrinsicContentHeight(this.titleLabel.frame.width) + 5);
        this.loadDataButton.frame = this.inputTextArea.frame.rectangleForNextRow(padding, labelHeight * 2);
        this.loadDataButton.setMargins(0, 0, padding, 0);
        this.resultsLabel.frame = this.loadDataButton.frame.rectangleForNextRow(padding);
        this.chartView.frame = this.resultsLabel.frame.rectangleForNextRow(padding, this.loadDataButton.frame.width * 0.5);
        //.rectangleWithInsets(padding * 5 * 0, padding * 5, 0, 0)
        //.rectangleByAddingX(-padding)
        //this.chartView.setPadding(padding);
        this.chartView.setMaxSizes(this.chartView.frame.height, this.chartView.frame.width);
    }
    intrinsicViewContentHeight(constrainingWidth = 0) {
        const padding = RootViewController.paddingLength;
        const labelHeight = padding * 1.5;
        var result = padding + this.titleLabel.intrinsicContentHeight(constrainingWidth) + padding * 0.25 +
            labelHeight * 2 + padding * 0.5 + padding +
            this.inputTextArea.intrinsicContentHeight(constrainingWidth);
        if (IS_NOT(this.chartView.hidden)) {
            result = result + padding + (constrainingWidth - padding * 2) * 0.5 + padding + labelHeight * 2;
        }
        return result;
    }
}
GETELECViewController.routeComponentName = "fit_fun";
GETELECViewController.ParameterIdentifierName = { "ID": "ID" };
// @ts-ignore
Chart.Interaction.modes["interpolate"] = function (chart, e, options) {
    // This function has a separate license
    // MIT License
    //
    // Copyright (c) 2018 Abel Heinsbroek
    //
    // Permission is hereby granted, free of charge, to any person obtaining a copy
    // of this software and associated documentation files (the "Software"), to deal
    // in the Software without restriction, including without limitation the rights
    // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    // copies of the Software, and to permit persons to whom the Software is
    // furnished to do so, subject to the following conditions:
    //
    //     The above copyright notice and this permission notice shall be included in all
    // copies or substantial portions of the Software.
    //
    //     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    //     FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    //     OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    // SOFTWARE.
    var items = [];
    for (var datasetIndex = 0; datasetIndex < chart.data.datasets.length; datasetIndex++) {
        // check for interpolate setting
        if (!chart.data.datasets[datasetIndex].interpolate) {
            continue;
        }
        var meta = chart.getDatasetMeta(datasetIndex);
        // do not interpolate hidden charts
        if (meta.hidden) {
            continue;
        }
        var xScale = chart.scales[meta.xAxisID];
        var yScale = chart.scales[meta.yAxisID];
        var xValue = xScale.getValueForPixel(e.x);
        var data = chart.data.datasets[datasetIndex].data;
        var index = data.findIndex(function (o) {
            return o.x >= xValue;
        });
        if (index === -1) {
            continue;
        }
        // linear interpolate value
        var prev = data[index - 1];
        var next = data[index];
        if (prev && next) {
            var slope = (next.y - prev.y) / (next.x - prev.x);
            var interpolatedValue = prev.y + (xValue - prev.x) * slope;
        }
        if (chart.data.datasets[datasetIndex].steppedLine && prev) {
            interpolatedValue = prev.y;
        }
        if (isNaN(interpolatedValue)) {
            continue;
        }
        var yPosition = yScale.getPixelForValue(interpolatedValue);
        // do not interpolate values outside of the axis limits
        if (isNaN(yPosition)) {
            continue;
        }
        // create a 'fake' event point
        var fakePoint = {
            value: interpolatedValue,
            xValue: xValue,
            tooltipPosition: function () {
                return this._model;
            },
            hasValue: function () {
                return true;
            },
            _model: {
                x: e.x,
                y: yPosition
            },
            _datasetIndex: datasetIndex,
            _index: items.length,
            _xScale: {
                getLabelForIndex: function (indx) {
                    let xValue = items[indx].xValue;
                    xValue = xValue.toPrecision(5);
                    return xValue;
                }
            },
            _yScale: {
                getLabelForIndex: function (indx) {
                    let value = items[indx].value.toPrecision(5);
                    return value;
                }
            },
            _chart: chart
        };
        items.push(fakePoint);
    }
    // add other, not interpolated, items
    // @ts-ignore
    var xItems = Chart.Interaction.modes.x(chart, e, options);
    xItems.forEach((item, index, array) => {
        if (!chart.data.datasets[item._datasetIndex].interpolate) {
            items.push(item);
        }
    });
    return items;
};
/// <reference path="./UIBaseButton.ts" />
class UIButton extends UIBaseButton {
    constructor(elementID, elementType, titleType = UITextView.type.span) {
        super(elementID, elementType, { "titleType": titleType });
        this.usesAutomaticTitleFontSize = NO;
        this.minAutomaticFontSize = nil;
        this.maxAutomaticFontSize = 25;
        this._class = UIButton;
        this.superclass = UIBaseButton;
    }
    initView(elementID, viewHTMLElement, initViewData) {
        this.class.superclass = UIBaseButton;
        // Instance variables
        this.colors = {
            titleLabel: {
                normal: UIColor.whiteColor,
                highlighted: UIColor.whiteColor,
                selected: UIColor.whiteColor
            },
            background: {
                normal: UIColor.blueColor,
                highlighted: UIColor.greenColor,
                selected: UIColor.redColor
            }
        };
        this._imageView = new UIImageView(elementID + "ImageView");
        this._imageView.hidden = YES;
        this.addSubview(this.imageView);
        this.imageView.fillMode = UIImageView.fillMode.aspectFitIfLarger;
        if (IS_NOT_NIL(initViewData.titleType)) {
            this._titleLabel = new UITextView(elementID + "TitleLabel", initViewData.titleType);
            this.titleLabel.style.whiteSpace = "nowrap";
            this.addSubview(this.titleLabel);
            this.titleLabel.userInteractionEnabled = NO;
        }
        this.contentPadding = 10;
        this.imageView.userInteractionEnabled = NO;
        this.titleLabel.textAlignment = UITextView.textAlignment.center;
        this.titleLabel.nativeSelectionEnabled = NO;
    }
    get contentPadding() {
        return this._contentPadding.integerValue;
    }
    set contentPadding(contentPadding) {
        this._contentPadding = contentPadding;
        this.setNeedsLayout();
    }
    set hovered(hovered) {
        this._hovered = hovered;
        this.updateContentForCurrentState();
    }
    get hovered() {
        return this._hovered;
    }
    set highlighted(highlighted) {
        this._highlighted = highlighted;
        this.updateContentForCurrentState();
    }
    get highlighted() {
        return this._highlighted;
    }
    set focused(focused) {
        this._focused = focused;
        if (focused) {
            this.focus();
        }
        else {
            this.blur();
        }
        this.updateContentForCurrentState();
    }
    get focused() {
        return this._focused;
    }
    set selected(selected) {
        this._selected = selected;
        this.updateContentForCurrentState();
    }
    get selected() {
        return this._selected;
    }
    updateContentForCurrentState() {
        var updateFunction = this.updateContentForNormalState;
        if (this.selected && this.highlighted) {
            updateFunction = this.updateContentForSelectedAndHighlightedState;
        }
        else if (this.selected) {
            updateFunction = this.updateContentForSelectedState;
        }
        else if (this.focused) {
            updateFunction = this.updateContentForFocusedState;
        }
        else if (this.highlighted) {
            updateFunction = this.updateContentForHighlightedState;
        }
        else if (this.hovered) {
            updateFunction = this.updateContentForHoveredState;
        }
        if (!IS(updateFunction)) {
            this.titleLabel.textColor = UIColor.nilColor;
            this.backgroundColor = UIColor.nilColor;
        }
        else {
            updateFunction.call(this);
        }
        this.updateContentForCurrentEnabledState();
    }
    updateContentForNormalState() {
        this.backgroundColor = this.colors.background.normal;
        this.titleLabel.textColor = this.colors.titleLabel.normal;
    }
    updateContentForHoveredState() {
        this.updateContentForNormalState();
        if (this.colors.background.hovered) {
            this.backgroundColor = this.colors.background.hovered;
        }
        if (this.colors.titleLabel.hovered) {
            this.titleLabel.textColor = this.colors.titleLabel.hovered;
        }
    }
    updateContentForFocusedState() {
        this.updateContentForHoveredState();
        if (this.colors.background.focused) {
            this.backgroundColor = this.colors.background.focused;
        }
        if (this.colors.titleLabel.focused) {
            this.titleLabel.textColor = this.colors.titleLabel.focused;
        }
    }
    updateContentForHighlightedState() {
        this.backgroundColor = this.colors.background.highlighted;
        this.titleLabel.textColor = this.colors.titleLabel.highlighted;
    }
    updateContentForSelectedState() {
        this.backgroundColor = this.colors.background.selected;
        this.titleLabel.textColor = this.colors.titleLabel.selected;
    }
    updateContentForSelectedAndHighlightedState() {
        this.updateContentForSelectedState();
        if (this.colors.background.selectedAndHighlighted) {
            this.backgroundColor = this.colors.background.selectedAndHighlighted;
        }
        if (this.colors.titleLabel.selectedAndHighlighted) {
            this.titleLabel.textColor = this.colors.titleLabel.selectedAndHighlighted;
        }
    }
    set enabled(enabled) {
        super.enabled = enabled;
        this.updateContentForCurrentState();
    }
    get enabled() {
        return super.enabled;
    }
    updateContentForCurrentEnabledState() {
        if (this.enabled) {
            this.alpha = 1;
        }
        else {
            this.alpha = 0.5;
        }
        this.userInteractionEnabled = this.enabled;
    }
    addStyleClass(styleClassName) {
        super.addStyleClass(styleClassName);
        if (this.styleClassName != styleClassName) {
            this.updateContentForCurrentState.call(this);
        }
    }
    get titleLabel() {
        return this._titleLabel;
    }
    get imageView() {
        return this._imageView;
    }
    layoutSubviews() {
        super.layoutSubviews();
        var bounds = this.bounds;
        this.hoverText = this.titleLabel.text;
        // Image only if text is not present
        if (IS_NOT(this.imageView.hidden) && !IS(this.titleLabel.text)) {
            this.imageView.frame = bounds;
        }
        // Text only if image is not present
        if (IS(this.imageView.hidden) && IS(this.titleLabel.text)) {
            var titleElement = this.titleLabel.viewHTMLElement;
            this.titleLabel.style.left = this.contentPadding;
            this.titleLabel.style.right = this.contentPadding;
            // this.titleLabel.style.marginLeft = ""
            // this.titleLabel.style.right = this.contentPadding
            this.titleLabel.style.top = "50%";
            this.titleLabel.style.transform = "translateY(-50%)";
            this.titleLabel.frame = new UIRectangle(nil, nil, nil, nil);
            if (this.usesAutomaticTitleFontSize) {
                var hidden = this.titleLabel.hidden;
                this.titleLabel.hidden = YES;
                this.titleLabel.fontSize = 15;
                this.titleLabel.fontSize = UITextView.automaticallyCalculatedFontSize(new UIRectangle(0, 0, this.bounds.height, 1 *
                    this.titleLabel.viewHTMLElement.offsetWidth), this.titleLabel.intrinsicContentSize(), this.titleLabel.fontSize, this.minAutomaticFontSize, this.maxAutomaticFontSize);
                this.titleLabel.hidden = hidden;
            }
        }
        // Image and text both present
        if (IS_NOT(this.imageView.hidden) && IS(this.titleLabel.text)) {
            const imageShareOfWidth = 0.25;
            bounds = bounds.rectangleWithInset(this.contentPadding);
            const imageFrame = bounds.copy();
            imageFrame.width = bounds.height - this.contentPadding * 0.5;
            this.imageView.frame = imageFrame;
            var titleElement = this.titleLabel.viewHTMLElement;
            this.titleLabel.style.left = imageFrame.max.x + this.contentPadding;
            this.titleLabel.style.right = this.contentPadding;
            this.titleLabel.style.top = "50%";
            this.titleLabel.style.transform = "translateY(-50%)";
            if (this.usesAutomaticTitleFontSize) {
                var hidden = this.titleLabel.hidden;
                this.titleLabel.hidden = YES;
                this.titleLabel.fontSize = 15;
                this.titleLabel.fontSize = UITextView.automaticallyCalculatedFontSize(new UIRectangle(0, 0, this.bounds.height, 1 *
                    this.titleLabel.viewHTMLElement.offsetWidth), this.titleLabel.intrinsicContentSize(), this.titleLabel.fontSize, this.minAutomaticFontSize, this.maxAutomaticFontSize);
                this.titleLabel.hidden = hidden;
            }
        }
        this.applyClassesAndStyles();
    }
    initViewStyleSelectors() {
        this.initStyleSelector("." + this.styleClassName, "background-color: lightblue;");
        // var selectorWithoutImage = "." + this.styleClassName + " ." + this.imageView.styleClassName + " + ." + this.titleLabel.styleClassName;
        // this.initStyleSelector(
        //     selectorWithoutImage,
        //     "left: " + this.contentPadding + ";" +
        //     "right: " + this.contentPadding + ";" +
        //     "top: 50%;" +
        //     "transform: translateY(-50%);");
    }
}
/// <reference path="../UICore/UIButton.ts" />
class CBButton extends UIButton {
    constructor(elementID, elementType) {
        super(elementID, elementType);
        this._class = CBButton;
        this.superclass = UIButton;
    }
    initView(elementID, viewHTMLElement, initViewData) {
        super.initView(elementID, viewHTMLElement, initViewData);
        //this.style.borderRadius = "2px"
        this.style.outline = "none";
        this.colors.titleLabel.normal = UIColor.whiteColor;
        this.setBackgroundColorsWithNormalColor(UIColor.colorWithRGBA(0, 79, 32));
        this.colors.titleLabel.selected = UIColor.blackColor;
    }
    setBackgroundColorsWithNormalColor(normalBackgroundColor) {
        this.colors.background.normal = normalBackgroundColor;
        this.colors.background.hovered = UIColor.colorWithRGBA(87, 173, 122); // normalBackgroundColor.colorByMultiplyingRGB(0.85)
        this.colors.background.focused = normalBackgroundColor; // normalBackgroundColor.colorByMultiplyingRGB(0.5)
        this.colors.background.highlighted = UIColor.colorWithRGBA(48, 196, 212); // normalBackgroundColor.colorByMultiplyingRGB(0.7)
        this.colors.background.selected = UIColor.whiteColor;
        this.updateContentForCurrentState();
    }
    updateContentForNormalState() {
        super.updateContentForNormalState();
        this.setBorder(0, 0);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.24)"
    }
    updateContentForHoveredState() {
        super.updateContentForHoveredState();
        this.setBorder(0, 0);
        //this.titleLabel.textColor = UIColor.whiteColor.colorByMultiplyingRGB(0.85);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.18)"
    }
    updateContentForFocusedState() {
        super.updateContentForFocusedState();
        this.setBorder(0, 1, UIColor.blueColor);
        //this.titleLabel.textColor = UIColor.whiteColor.colorByMultiplyingRGB(0.85);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.18)"
    }
    updateContentForHighlightedState() {
        super.updateContentForHighlightedState();
        this.setBorder(0, 0);
        //this.titleLabel.textColor = UIColor.whiteColor.colorByMultiplyingRGB(0.7);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.12)"
    }
    updateContentForCurrentEnabledState() {
        super.updateContentForCurrentEnabledState();
        if (IS_NOT(this.enabled)) {
            this.titleLabel.textColor = new UIColor("#adadad");
            this.backgroundColor = new UIColor("#e5e5e5");
            this.alpha = 1;
        }
    }
}
///<reference path="../UICore/UIButton.ts"/>
class CBCheckbox extends UIView {
    constructor(elementID) {
        super(elementID, nil, "label");
        this._class = CBCheckbox;
        this.superclass = UIView;
    }
    initView(elementID, viewHTMLElement) {
        super.initView(elementID, viewHTMLElement);
        this.checkbox = new UIView(elementID + "Checkbox", nil, "input");
        this.checkbox.viewHTMLElement.setAttribute("type", "checkbox");
        this.addSubview(this.checkbox);
        this.titleLabel = new UITextView(elementID + "TitleLabel", UITextView.type.span);
        this.addSubview(this.titleLabel);
        this.checkbox.userInteractionEnabled = NO;
        this.titleLabel.userInteractionEnabled = NO;
        this.titleLabel.style.overflow = "visible";
        this.titleLabel.style.lineHeight = "1.5";
        this.style.cursor = "pointer";
        this.viewHTMLElement.onchange = (event) => {
            this.sendControlEventForKey(CBCheckbox.controlEvent.SelectionChange, event);
        };
    }
    get isStatic() {
        const result = this.checkbox.viewHTMLElement.classList.contains("staticCheckbox");
        return result;
    }
    set isStatic(isStatic) {
        if (isStatic) {
            this.checkbox.viewHTMLElement.classList.add("staticCheckbox");
        }
        else {
            this.checkbox.viewHTMLElement.classList.remove("staticCheckbox");
        }
    }
    get selected() {
        return this.checkbox.viewHTMLElement.checked;
    }
    set selected(selected) {
        this.checkbox.viewHTMLElement.checked = selected;
    }
    layoutSubviews() {
        super.layoutSubviews();
        const titleWidth = this.bounds.width - 35;
        this.titleLabel.setMaxSizes(nil, titleWidth);
        this.titleLabel.textPrefix = "<span style=\"position: absolute; overflow: hidden; left: 0; top: 0;text-overflow: ellipsis; white-space: pre; padding-left: 35px; width: " +
            titleWidth + "px;\">";
        this.titleLabel.textSuffix = "</span>";
        this.hoverText = this.titleLabel.text.replace(this.titleLabel.textPrefix, "").replace(this.titleLabel.textSuffix, "");
    }
}
CBCheckbox.controlEvent = Object.assign({}, UIView.controlEvent, {
    "SelectionChange": "SelectionChange"
});
/// <reference path="../UICore/UIColor.ts" />
class CBColor extends UIColor {
    constructor(stringValue) {
        super(stringValue);
        this._class = CBColor;
        this.superclass = UIColor;
    }
    static get primaryTintColor() {
        return new CBColor("rgba(52, 127, 230, 1)");
    }
    static get secondaryTintColor() {
        return new CBColor("rgba(0, 196, 212, 1)");
    }
    static get primaryContentColor() {
        return new CBColor("rgb(35, 35, 35)");
    }
    static get greenTintColor() {
        return new CBColor("rgba(51, 188, 125, 1)");
    }
    static get redTintColor() {
        return new CBColor("rgba(236, 88, 111, 1)");
    }
}
/// <reference path="./CBButton.ts" />
class CBFlatButton extends CBButton {
    constructor(elementID, elementType) {
        super(elementID, elementType);
        this._class = CBFlatButton;
        this.superclass = CBButton;
    }
    initView(elementID, viewHTMLElement, initViewData) {
        super.initView(elementID, viewHTMLElement, initViewData);
        this.colors = {
            titleLabel: {
                normal: UIColor.blueColor,
                highlighted: UIColor.blueColor,
                selected: UIColor.blueColor
            },
            background: {
                normal: UIColor.transparentColor,
                hovered: new UIColor("#F8F8F8"),
                highlighted: new UIColor("#ebebeb"),
                selected: new UIColor("#ebebeb")
            }
        };
    }
    set titleLabelColor(titleLabelColor) {
        this.colors.titleLabel.normal = titleLabelColor;
        this.colors.titleLabel.highlighted = titleLabelColor;
        this.colors.titleLabel.selected = titleLabelColor;
        this.updateContentForCurrentState();
    }
    get titleLabelColor() {
        const result = this.colors.titleLabel.normal;
        return result;
    }
    updateContentForNormalState() {
        UIButton.prototype.updateContentForNormalState.call(this);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.24)"
    }
    updateContentForHoveredState() {
        UIButton.prototype.updateContentForHoveredState.call(this);
        //this.titleLabel.textColor = UIColor.whiteColor.colorByMultiplyingRGB(0.85);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.18)";
    }
    updateContentForFocusedState() {
        UIButton.prototype.updateContentForFocusedState.call(this);
        //this.titleLabel.textColor = UIColor.whiteColor.colorByMultiplyingRGB(0.85);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.18)"
    }
    updateContentForHighlightedState() {
        UIButton.prototype.updateContentForHighlightedState.call(this);
        //this.titleLabel.textColor = UIColor.whiteColor.colorByMultiplyingRGB(0.7);
        //this.style.boxShadow = "0 2px 2px 0 rgba(0,0,0,0.12)"
    }
}
CBFlatButton.colors = {
    titleLabel: {
        normal: UIColor.blueColor,
        highlighted: UIColor.blueColor,
        selected: UIColor.blueColor
    },
    background: {
        normal: UIColor.transparentColor,
        hovered: new UIColor("#F8F8F8"),
        highlighted: new UIColor("#ebebeb"),
        selected: new UIColor("#ebebeb")
    }
};
/// <reference path="../UICore/UIView.ts" />
class RowView extends UIView {
    constructor(elementID, cells = [], cellWidths = []) {
        super(elementID);
        this.padding = 0;
        this._rowHeight = 50;
        this._class = RowView;
        this.superclass = UIView;
        this._cells = cells;
        this._cellWeights = cellWidths;
    }
    get cells() {
        return this._cells;
    }
    set cells(cells) {
        const previousCells = this.cells;
        // The cells are added to this._cells in this.addCell()
        previousCells.copy().forEach(function (cell, index, array) {
            if (!cells.contains(cell)) {
                cell.removeFromSuperview();
                this._cells.removeElement(cell);
            }
        }.bind(this));
        cells.copy().forEach(function (cell, index, array) {
            if (!IS(cell.superview)) {
                this.addCell(cell, 1, index);
            }
        }, this);
        this._previousLayoutBounds = nil;
        this.setNeedsLayout();
    }
    removeCellAtIndex(index) {
        const remainingCells = this.cells.copy();
        remainingCells.removeElementAtIndex(index);
        this.cellWeights.removeElementAtIndex(index);
        this.cells = remainingCells;
    }
    removeFirstCell() {
        this.removeCellAtIndex(0);
    }
    removeLastCell() {
        this.removeCellAtIndex(this.cells.length - 1);
    }
    addCell(cell, weight = 1, index = this.cells.length) {
        if (this.cells.contains(cell) && IS_NOT_NIL(cell)) {
            return;
        }
        this.cells.insertElementAtIndex(index, cell);
        this.cellWeights.insertElementAtIndex(index, weight);
        this.addSubview(cell);
        this.setNeedsLayout();
    }
    get cellWeights() {
        return this._cellWeights;
    }
    set cellWeights(widths) {
        this._cellWeights = widths;
        this._previousLayoutBounds = nil;
        this.setNeedsLayout();
    }
    get cellWidths() {
        return this._cellWidths;
    }
    set cellWidths(widths) {
        this._cellWidths = widths;
        this._previousLayoutBounds = nil;
        this.setNeedsLayout();
    }
    get rowHeight() {
        var result = IF(this._rowHeight)(() => this._rowHeight)
            .ELSE(() => this.cells.map((value, index, array) => value.intrinsicContentHeight(this.bounds.width)).max());
        return result; //this.bounds.height
    }
    layoutSubviews() {
        const bounds = this.bounds;
        if (bounds.isEqualTo(this._previousLayoutBounds)) {
            return;
        }
        super.layoutSubviews();
        this._previousLayoutBounds = bounds;
        bounds.distributeViewsAlongWidth(this._cells, this._cellWeights, this.padding, this._cellWidths);
        this.cells.forEach(function (cell, index, array) {
            cell.frame = cell.frame.rectangleWithHeight(this.rowHeight);
        }.bind(this));
    }
}
/// <reference path="./CBFlatButton.ts" />
/// <reference path="./RowView.ts" />
/// <reference path="../UICore/UICoreExtensions.ts" />
class CBDialogView extends UIView {
    constructor(elementID) {
        super(elementID);
        this.titleLabel = nil;
        this.titleRow = nil;
        this.placeholderLabel = nil;
        this._view = nil;
        this.questionLabel = nil;
        this.yesButton = nil;
        this.noButton = nil;
        this.cancelButton = nil;
        this.noButtonDismissesDialog = YES;
        this._class = CBDialogView;
        this.superclass = UIView;
        this.updateContent();
    }
    initView(elementID, viewHTMLElement) {
        super.initView(elementID, viewHTMLElement);
        // this.initPlaceholderLabelIfNeeded()
        // this.initTitleLabelIfNeeded()
        // this.initTitleRow()
        // this.titleRow.cellWeights = [1, 0.75, 1.2, 1]
        // var cells = this.titleRow.cells as CellView[];
        // var cellTitles = ["TIME:", "COMPANY:", "COMMENTS:", "PRICE:"]
        // cells.forEach(function (cell, index, array) {
        //     cell.titleLabel.text = cellTitles[index];
        //     cell.titleLabel.useSairaFont()
        // })
        // this.initQuestionLabelIfNeeded()
        // this.initYesNoButtonsIfNeeded()
        this.style.borderRadius = "5px";
    }
    set view(view) {
        this.view.removeFromSuperview();
        this._view = view;
        this.addSubview(view);
    }
    get view() {
        return this._view;
    }
    initCancelButtonIfNeeded() {
        if (IS_NOT(this.cancelButton)) {
            this.cancelButton = new CBFlatButton(this.elementID + "CancelButton");
            this.cancelButton.titleLabel.text = "OK";
            this.cancelButton.titleLabelColor = UIColor.greenColor;
            this.cancelButton.titleLabel.style.fontWeight = "600";
            this.addSubview(this.cancelButton);
            this.cancelButton.addTargetForControlEvents([
                UIButton.controlEvent.PointerUpInside, UIButton.controlEvent.EnterDown
            ], function (sender, event) {
                this.dialogView.dismiss();
            }.bind(this));
        }
    }
    initYesNoButtonsIfNeeded() {
        if (IS_NOT(this.yesButton)) {
            this.yesButton = new CBFlatButton(this.elementID + "YesButton");
            this.yesButton.titleLabel.setText("cBDDialogViewYES", "YES");
            this.yesButton.titleLabelColor = UIColor.greenColor;
            this.yesButton.titleLabel.style.fontWeight = "600";
            this.addSubview(this.yesButton);
            this.noButton = new CBFlatButton(this.elementID + "NoButton");
            this.noButton.titleLabel.setText("cBDDialogViewNO", "NO");
            this.noButton.titleLabelColor = UIColor.redColor;
            this.noButton.titleLabel.style.fontWeight = "600";
            this.addSubview(this.noButton);
            // this.yesButton.addTargetForControlEvents([UIButton.controlEvent.PointerUpInside, UIButton.controlEvent.EnterDown], function (this: CBDialogView, sender: UIButton, event: Event) {
            //     this.dialogView.dismiss()
            // }.bind(this))
            this.noButton.addTargetForControlEvents([
                UIButton.controlEvent.PointerUpInside, UIButton.controlEvent.EnterDown
            ], function (sender, event) {
                if (this.noButtonDismissesDialog) {
                    this.dialogView.dismiss();
                }
            }.bind(this));
        }
    }
    initQuestionLabelIfNeeded() {
        if (IS_NOT(this.questionLabel)) {
            this.questionLabel = new UITextView(this.elementID + "QuestionLabel", UITextView.type.header3);
            this.questionLabel.text = LanguageService.stringForKey("cBDDialogViewAreYouSure", LanguageService.currentLanguageKey, "Are you sure?");
            this.questionLabel.textAlignment = UITextView.textAlignment.center;
            this.addSubview(this.questionLabel);
        }
    }
    initTitleRow() {
        if (IS_NOT(this.titleRow)) {
            this.titleRow = new RowView(this.elementID + "TitleRow");
            this.addSubview(this.titleRow);
        }
    }
    initTitleLabelIfNeeded() {
        if (IS_NOT(this.titleLabel)) {
            this.titleLabel = new UITextView(this.elementID + "TitleLabel", UITextView.type.header4);
            this.titleLabel.text = "Accept offer";
            this.titleLabel.style.fontSize = "24";
            this.addSubview(this.titleLabel);
        }
    }
    initPlaceholderLabelIfNeeded() {
        if (IS_NOT(this.placeholderLabel)) {
            this.placeholderLabel = new UITextView(this.elementID + "PlaceholderLabel", UITextView.type.header4);
            this.placeholderLabel.text = "No offers have been made yet.";
            this.addSubview(this.placeholderLabel);
        }
    }
    updateContent() {
        function stringFromValue(value) {
            if (IS(value)) {
                return value;
            }
            return "-";
        }
        this.layoutSubviews();
    }
    layoutSubviews() {
        super.layoutSubviews();
        const padding = RootViewController.paddingLength;
        const labelHeight = padding * 0.75;
        const bounds = this.bounds.rectangleWithInsets(padding * 0.5, padding * 0.5, 0, 0);
        const topObject = { frame: bounds.rectangleWithHeight(0) };
        this.titleLabel.frame = bounds.rectangleWithHeight(this.titleLabel.intrinsicContentHeight(bounds.width)).rectangleWithY(bounds.y +
            padding * 0.5);
        this.titleLabel.style.marginLeft = "" + (padding * 0.5) + "px";
        this.titleRow.frame = FIRST_OR_NIL(this.titleLabel, topObject).frame.rectangleForNextRow(0, this.titleRow.intrinsicContentHeight(bounds.width));
        this.view.frame = FIRST_OR_NIL(this.titleRow, this.titleLabel, topObject).frame.rectangleForNextRow(padding, this.view.intrinsicContentHeight(bounds.width)).rectangleWithWidth(bounds.width).rectangleWithX(bounds.x);
        this.questionLabel.frame = FIRST_OR_NIL(this.view, this.titleRow, this.titleLabel, topObject).frame.rectangleForNextRow(padding, this.questionLabel.intrinsicContentHeight(bounds.width)).rectangleWithWidth(bounds.width).rectangleWithX(bounds.x);
        const buttons = [this.yesButton, this.noButton];
        const buttonsFrame = FIRST_OR_NIL(this.questionLabel, this.view, this.titleRow, this.titleLabel, topObject).frame.rectangleForNextRow(padding, labelHeight *
            2)
            .rectangleWithWidth([buttons.everyElement.titleLabel.intrinsicContentWidth().max(), 120].max() * 2 + padding * 3, 0.5);
        buttonsFrame.distributeViewsAlongWidth(buttons);
        this.cancelButton.frame = buttonsFrame.rectangleWithWidth(150, 0.5);
        this.placeholderLabel.frame = bounds.rectangleWithInsets(padding * 0.5, padding * 0.5, 0, 0);
        if (IS(this.view)) {
            this.placeholderLabel.hidden = YES;
            // this.titleLabel.hidden = NO
            // this.titleRow.hidden = NO
        }
        else {
            this.placeholderLabel.hidden = NO;
            // this.titleLabel.hidden = YES
            // this.titleRow.hidden = YES
        }
    }
    intrinsicContentHeight(constrainingWidth = 0) {
        const padding = RootViewController.paddingLength;
        const labelHeight = padding * 0.75;
        function addPaddingIfNeeded(value) {
            return IF(value)(function () {
                return value + padding;
            })();
        }
        var result = padding;
        result = result + addPaddingIfNeeded(this.titleLabel.intrinsicContentHeight(constrainingWidth));
        result = result + addPaddingIfNeeded(this.titleRow.intrinsicContentHeight(constrainingWidth));
        result = result + addPaddingIfNeeded(this.view.intrinsicContentHeight(constrainingWidth) + padding);
        result = result + addPaddingIfNeeded(this.questionLabel.intrinsicContentHeight(constrainingWidth));
        result = result + IF(FIRST_OR_NIL(this.yesButton, this.cancelButton))(RETURNER(labelHeight))();
        return result;
    }
}
/// <reference path="../UICore/UICore.ts" />
/// <reference path="../UICore/UIRoute.ts" />
class LanguageService {
    static useStoredLanguageValues(values = {}) {
        LanguageService.languages = JSON.parse(JSON.stringify(LanguageService.languageValues)).objectByCopyingValuesRecursivelyFromObject(values);
        LanguageService.broadcastLanguageChangeEvent();
    }
    static broadcastLanguageChangeEvent() {
        UICore.main.rootViewController.view.broadcastEventInSubtree({
            name: UIView.broadcastEventName.LanguageChanged,
            parameters: {}
        });
    }
    static get defaultLanguageKey() {
        return "en";
    }
    static get currentLanguageKey() {
        if (!LanguageService._currentLanguageKey) {
            LanguageService.updateCurrentLanguageKey();
        }
        return LanguageService._currentLanguageKey;
    }
    static updateCurrentLanguageKey(route = UIRoute.currentRoute) {
        var result = route.componentWithName("settings").parameters.language;
        if (IS_NOT(result)) {
            result = LanguageService.defaultLanguageKey;
        }
        LanguageService._currentLanguageKey = result;
    }
    get currentLanguageKey() {
        const result = LanguageService.currentLanguageKey;
        return result;
    }
    static stringForKey(key, languageKey, defaultString, parameters) {
        var result;
        if (IS(key) && LanguageService.languages[languageKey] &&
            IS_DEFINED(LanguageService.languages[languageKey][key])) {
            result = LanguageService.languages[languageKey][key];
        }
        else {
            result = defaultString;
        }
        if (IS(parameters)) {
            const parameterKeys = Object.keys(parameters);
            parameterKeys.forEach(function (key, index, array) {
                const keyString = "%" + key + "%";
                const parameter = parameters[key];
                var parameterString;
                if (parameter instanceof Object) {
                    parameterString = UICore.languageService.stringForCurrentLanguage(parameter);
                }
                else {
                    parameterString = parameter;
                }
                result = result.replace(new RegExp(keyString, "g"), parameterString);
            });
        }
        return result;
    }
    stringForKey(key, languageKey, defaultString, parameters) {
        return LanguageService.stringForKey(key, languageKey, defaultString, parameters);
    }
    static localizedTextObjectForKey(key, defaultString = key, parameters) {
        const result = {};
        LanguageService.languages.forEach(function (languageObject, languageKey) {
            result[languageKey] = LanguageService.stringForKey(key, languageKey, defaultString, parameters);
        });
        return result;
    }
    localizedTextObjectForKey(key, defaultString, parameters) {
        const result = LanguageService.localizedTextObjectForKey(key, defaultString, parameters);
        return result;
    }
    static localizedTextObjectForText(text) {
        if (IS_NOT(text)) {
            return nil;
        }
        const result = {
            [LanguageService.defaultLanguageKey]: text
        };
        return result;
    }
    localizedTextObjectForText(text) {
        const result = LanguageService.localizedTextObjectForText(text);
        return result;
    }
    static stringForCurrentLanguage(localizedTextObject) {
        if (!LanguageService || !localizedTextObject) {
            const asd = 1;
        }
        localizedTextObject = FIRST_OR_NIL(localizedTextObject);
        var result = localizedTextObject[LanguageService.currentLanguageKey];
        if (IS_NOT(result)) {
            result = localizedTextObject[LanguageService.defaultLanguageKey];
        }
        if (IS_NOT(result)) {
            result = localizedTextObject["en"];
        }
        if (IS_NOT(result)) {
            result = "";
        }
        return result;
    }
    stringForCurrentLanguage(localizedTextObject) {
        return LanguageService.stringForCurrentLanguage(localizedTextObject);
    }
}
LanguageService.languageValues = {
    "en": {
        "languageName": "English",
        "languageNameShort": "ENG",
        "topBarTitle": "Carrum",
        "frontPageHTML": "Asdasd",
        "bottomBarContent": "PUT BOTTOM BAR STUFF IN HERE"
    },
    "est": {
        "languageName": "Eesti keel",
        "languageNameShort": "EST",
        "topBarTitle": "Carrum"
    }
};
LanguageService.languages = JSON.parse(JSON.stringify(LanguageService.languageValues));
UICore.languageService = LanguageService;
/// <reference path="../UICore/UICoreExtensions.ts" />
/// <reference path="../UICore/UICore.ts" />
/// <reference path="../UICore/UIColor.ts" />
/// <reference path="./CBDialogView.ts" />
/// <reference path="../Custom components/LanguageService.ts" />
class CBDialogViewShower extends UIObject {
    constructor(elementID) {
        super();
        this._class = CBDialogViewShower;
        this.superclass = UIObject;
        this.dialogView = new UIDialogView();
        this.dialogView.view = new CBDialogView(elementID);
        this.dialogView.view.backgroundColor = UIColor.whiteColor;
        const dialogLayoutFunction = this.dialogView.layoutSubviews.bind(this.dialogView);
        this.dialogView.layoutSubviews = function () {
            dialogLayoutFunction();
            this.dialogView.view.frame = new UIRectangle(0, 0, window.innerHeight, window.innerWidth).rectangleWithHeight(this.dialogView.view.intrinsicContentHeight(this.getDialogWidth()), 0.5).rectangleWithWidth(this.getDialogWidth(), 0.5);
            this.dialogView.frame = UICore.main.rootViewController.view.bounds;
        }.bind(this);
        this.dialogView.view.yesButton.addTargetForControlEvents([
            UIButton.controlEvent.PointerUpInside, UIButton.controlEvent.EnterDown
        ], function (sender, event) {
            this.yesButtonWasPressed();
        }.bind(this));
        this.dialogView.view.noButton.addTargetForControlEvents([
            UIButton.controlEvent.PointerUpInside, UIButton.controlEvent.EnterDown
        ], function (sender, event) {
            this.noButtonWasPressed();
        }.bind(this));
    }
    getDialogWidth() {
        const padding = RootViewController.paddingLength;
        const labelHeight = padding * 0.75;
        var result = 250;
        const width = this.dialogView.view.titleLabel.intrinsicContentWidth() + padding * 2;
        result = Math.max(result, this.dialogView.view.view.intrinsicContentWidth(this.dialogView.view.view.viewHTMLElement.naturalHeight || 1000000000));
        result = Math.max(result, width);
        result = Math.min(result, 1000);
        const dialogMaxWidth = (this.dialogView.superview ||
            { "bounds": new UIRectangle(0, 0, 0, result) }).bounds.width;
        result = Math.min(result, dialogMaxWidth);
        return result;
    }
    yesButtonWasPressed() {
    }
    noButtonWasPressed() {
    }
    cancelButtonWasPressed() {
    }
    showQuestionDialogInRootView(titleTextObject, questionTextObject) {
        this.dialogView.view.initTitleLabelIfNeeded();
        this.dialogView.view.titleLabel.localizedTextObject = titleTextObject;
        this.dialogView.view.initQuestionLabelIfNeeded();
        if (IS(questionTextObject)) {
            this.dialogView.view.questionLabel.localizedTextObject = questionTextObject;
        }
        this.dialogView.view.initYesNoButtonsIfNeeded();
        this.dialogView.view.noButton.addTargetForControlEvents([
            UIButton.controlEvent.EnterDown, UIButton.controlEvent.PointerUpInside
        ], function (sender, event) {
            this.noButtonWasPressed();
        }.bind(this));
        this.dialogView.view.yesButton.addTargetForControlEvents([
            UIButton.controlEvent.EnterDown, UIButton.controlEvent.PointerUpInside
        ], function (sender, event) {
            this.yesButtonWasPressed();
        }.bind(this));
        this.dialogView.showInRootView(YES);
    }
    showMessageDialogInRootView(titleTextObject) {
        this.dialogView.view.initTitleLabelIfNeeded();
        this.dialogView.view.titleLabel.localizedTextObject = titleTextObject;
        this.dialogView.view.initCancelButtonIfNeeded();
        this.dialogView.view.cancelButton.addTargetForControlEvents([
            UIButton.controlEvent.EnterDown, UIButton.controlEvent.PointerUpInside
        ], function (sender, event) {
            this.cancelButtonWasPressed();
        }.bind(this));
        this.dialogView.showInRootView(YES);
        this.dialogView.view.cancelButton.focus();
    }
    showDialogInRootView(view) {
        this.dialogView.view.view = view;
        this.dialogView.view.initCancelButtonIfNeeded();
        this.dialogView.view.cancelButton.addTargetForControlEvents([
            UIButton.controlEvent.EnterDown, UIButton.controlEvent.PointerUpInside
        ], function (sender, event) {
            this.cancelButtonWasPressed();
        }.bind(this));
        this.dialogView.showInRootView(YES);
        this.dialogView.view.cancelButton.focus();
    }
    showImageDialogInRootView(imageURL, deleteImageCallback) {
        var loadingLabel = new UITextView();
        loadingLabel.text = "Loading image.";
        loadingLabel.textAlignment = UITextView.textAlignment.center;
        this.dialogView.view.view = loadingLabel;
        const imageView = new UIImageView();
        imageView.imageSource = imageURL;
        imageView.viewHTMLElement.onload = (event) => {
            this.dialogView.view.view = imageView;
            imageView.setNeedsLayoutUpToRootView();
        };
        imageView.fillMode = UIImageView.fillMode.aspectFitIfLarger;
        if (IS(deleteImageCallback)) {
            this.dialogView.view.initYesNoButtonsIfNeeded();
            this.dialogView.view.yesButton.titleLabel.text = "Close";
            this.dialogView.view.noButton.titleLabel.text = "Delete";
            this.dialogView.view.noButtonDismissesDialog = NO;
            this.dialogView.view.noButton.addTargetForControlEvents([
                UIButton.controlEvent.EnterDown, UIButton.controlEvent.PointerUpInside
            ], function (sender, event) {
                const dialogShower = CBDialogViewShower._dialogShowerWithDismissCallback(function () {
                    //this.dialogView.dismiss()
                }.bind(this));
                var textObject = LanguageService.localizedTextObjectForText("Delete this image.");
                dialogShower.showQuestionDialogInRootView(textObject);
                dialogShower.yesButtonWasPressed = function () {
                    deleteImageCallback();
                    dialogShower.dialogView.dismiss();
                };
            }.bind(this));
            this.dialogView.view.yesButton.addTargetForControlEvents([
                UIButton.controlEvent.EnterDown, UIButton.controlEvent.PointerUpInside
            ], function (sender, event) {
                this.dialogView.dismiss();
            }.bind(this));
        }
        else {
            this.dialogView.view.initCancelButtonIfNeeded();
            this.dialogView.view.cancelButton.titleLabel.text = "Close";
        }
        this.dialogView.showInRootView(YES);
        this.dialogView.view.cancelButton.focus();
    }
    showActionIndicatorDialogInRootView(message) {
        const actionIndicator = new UIActionIndicator();
        this.dialogView.zIndex = 150;
        this.dialogView.view.view = actionIndicator;
        actionIndicator.style.minHeight = "100px";
        this.dialogView.view.initQuestionLabelIfNeeded();
        this.dialogView.view.questionLabel.text = message;
        actionIndicator.start();
        this.dialogView.view.backgroundColor = CBColor.primaryContentColor.colorWithAlpha(0.5);
        this.dialogView.view.questionLabel.textColor = UIColor.whiteColor;
        this.dialogView.dismissesOnTapOutside = NO;
        CBDialogViewShower.currentActionIndicatorDialogViewShower = this;
        this.dialogView.showInRootView(NO);
        this.dialogView.view.cancelButton.focus();
    }
    static showNextDialog() {
        (CBDialogViewShower.nextShowDialogFunctions.firstElement || nil)();
        CBDialogViewShower.nextShowDialogFunctions.removeElementAtIndex(0);
    }
    static alert(text, dismissCallback = nil) {
        const dialogShower = CBDialogViewShower._dialogShowerWithDismissCallback(dismissCallback);
        const textObject = LanguageService.localizedTextObjectForText(text);
        const showDialogFunction = dialogShower.showMessageDialogInRootView.bind(dialogShower, textObject);
        CBDialogViewShower._showDialogWithFunction(showDialogFunction, dialogShower);
    }
    static localizedAlert(textObject, dismissCallback = nil) {
        const dialogShower = CBDialogViewShower._dialogShowerWithDismissCallback(dismissCallback);
        const showDialogFunction = dialogShower.showMessageDialogInRootView.bind(dialogShower, textObject);
        CBDialogViewShower._showDialogWithFunction(showDialogFunction, dialogShower);
    }
    static showQuestionDialog(questionText, dismissCallback = nil) {
        const dialogShower = CBDialogViewShower._dialogShowerWithDismissCallback(dismissCallback);
        const textObject = LanguageService.localizedTextObjectForText(questionText);
        const showDialogFunction = dialogShower.showQuestionDialogInRootView.bind(dialogShower, textObject);
        CBDialogViewShower._showDialogWithFunction(showDialogFunction, dialogShower);
        return dialogShower;
    }
    static showImageDialog(imageURL, deleteImageCallback = nil, dismissCallback = nil) {
        var dialogShower = CBDialogViewShower._dialogShowerWithDismissCallback(dismissCallback);
        var showDialogFunction = dialogShower.showImageDialogInRootView.bind(dialogShower, imageURL, deleteImageCallback);
        CBDialogViewShower._showDialogWithFunction(showDialogFunction, dialogShower);
        return dialogShower;
    }
    static showDialog(view, dismissCallback = nil) {
        const dialogShower = CBDialogViewShower._dialogShowerWithDismissCallback(dismissCallback);
        const showDialogFunction = dialogShower.showDialogInRootView.bind(dialogShower, view);
        CBDialogViewShower._showDialogWithFunction(showDialogFunction, dialogShower);
        return dialogShower;
    }
    static showActionIndicatorDialog(message, dismissCallback = nil) {
        if (IS(CBDialogViewShower.currentActionIndicatorDialogViewShower)) {
            CBDialogViewShower.currentActionIndicatorDialogViewShower.dialogView.view.questionLabel.text = message;
            CBDialogViewShower.currentActionIndicatorDialogViewShower.dialogView.view.setNeedsLayoutUpToRootView();
            return;
        }
        const dialogShower = CBDialogViewShower._dialogShowerWithDismissCallback(dismissCallback);
        dialogShower.showActionIndicatorDialogInRootView(message);
        return dialogShower;
    }
    static hideActionIndicatorDialog() {
        CBDialogViewShower.currentActionIndicatorDialogViewShower.dialogView.dismiss();
        CBDialogViewShower.currentActionIndicatorDialogViewShower = nil;
    }
    static _dialogShowerWithDismissCallback(dismissCallback) {
        const dialogShower = new CBDialogViewShower();
        const dismissFunction = dialogShower.dialogView.dismiss.bind(dialogShower.dialogView);
        dialogShower.dialogView.dismiss = function () {
            dismissFunction();
            dismissCallback();
            CBDialogViewShower.currentDialogViewShower = null;
            CBDialogViewShower.showNextDialog();
        };
        return dialogShower;
    }
    static _showDialogWithFunction(showDialogFunction, dialogShower) {
        if (IS(CBDialogViewShower.currentDialogViewShower)) {
            CBDialogViewShower.nextShowDialogFunctions.push(showDialogFunction);
        }
        else {
            CBDialogViewShower.currentDialogViewShower = dialogShower;
            showDialogFunction();
        }
    }
}
CBDialogViewShower.nextShowDialogFunctions = [];
CBDialogViewShower.currentActionIndicatorDialogViewShower = nil;
/// <reference path="../UICore/UILinkButton.ts" />
class CBLinkButton extends UILinkButton {
    constructor(elementID, elementType) {
        super(elementID, elementType);
        this._class = CBLinkButton;
        this.superclass = UILinkButton;
    }
    initView(elementID, viewHTMLElement, initViewData) {
        super.initView(elementID, viewHTMLElement, initViewData);
        this.button.removeFromSuperview();
        this.button = new CBButton(this.elementID + "Button", initViewData.elementType);
        this.addSubview(this.button);
    }
}
/// <reference path="../UICore/UIView.ts" />
class CellView extends UIButton {
    //titleLabel: UITextView;
    constructor(elementID, titleLabelType = UITextView.type.span) {
        super(elementID, undefined, titleLabelType);
        this._isAButton = NO;
        this.leftInset = 0;
        this.rightInset = 0;
        this._class = CellView;
        this.superclass = UIView;
        // this.titleLabel = new UITextView(this.elementID + "TitleLabel", titleLabelType);
        // this.addSubview(this.titleLabel);
        this.updateForCurrentIsAButtonState();
    }
    set isAButton(isAButton) {
        this._isAButton = isAButton;
        this.updateForCurrentIsAButtonState();
    }
    get isAButton() {
        return this._isAButton;
    }
    updateForCurrentIsAButtonState() {
        if (this._isAButton) {
            this.style.cursor = "pointer";
            this.titleLabel.userInteractionEnabled = NO;
            this.titleLabel.nativeSelectionEnabled = NO;
            this.titleLabel.textAlignment = UITextView.textAlignment.center;
            this.nativeSelectionEnabled = NO;
            this.style.outline = "";
            this.colors = {
                titleLabel: {
                    normal: UIColor.blueColor,
                    highlighted: UIColor.blueColor,
                    selected: UIColor.blueColor
                },
                background: {
                    normal: UIColor.transparentColor,
                    hovered: new UIColor("#F8F8F8"),
                    highlighted: new UIColor("#ebebeb"),
                    selected: new UIColor("#ebebeb")
                }
            };
        }
        else {
            this.style.cursor = "";
            this.titleLabel.userInteractionEnabled = YES;
            this.titleLabel.nativeSelectionEnabled = YES;
            this.titleLabel.textAlignment = UITextView.textAlignment.left;
            this.nativeSelectionEnabled = YES;
            this.style.outline = "none";
            this.colors = {
                titleLabel: {
                    normal: UIColor.blackColor,
                    highlighted: UIColor.blackColor,
                    selected: UIColor.blackColor
                },
                background: {
                    normal: UIColor.transparentColor,
                    highlighted: UIColor.transparentColor,
                    selected: UIColor.transparentColor
                }
            };
        }
        this.updateContentForCurrentState();
    }
    initRightImageViewIfNeeded() {
        if (this._rightImageView) {
            return;
        }
        this._rightImageView = new UIImageView(this.elementID + "RightImageView");
        this._rightImageView.userInteractionEnabled = NO;
    }
    set rightImageSource(imageSource) {
        if (IS(imageSource)) {
            this.initRightImageViewIfNeeded();
            this._rightImageView.imageSource = imageSource;
            this.addSubview(this._rightImageView);
        }
        else {
            this._rightImageView.removeFromSuperview();
        }
    }
    get rightImageSource() {
        var result = nil;
        if (this._rightImageView) {
            result = this._rightImageView.imageSource;
        }
        return result;
    }
    layoutSubviews() {
        super.layoutSubviews();
        const padding = RootViewController.paddingLength;
        const labelHeight = padding;
        const bounds = this.bounds;
        this.titleLabel.centerYInContainer();
        this.titleLabel.style.left = "" + (padding * 0.5 + this.leftInset).integerValue + "px";
        this.titleLabel.style.right = "" + (padding * 0.5 + this.rightInset).integerValue + "px";
        this.titleLabel.style.maxHeight = "100%";
        this.titleLabel.style.overflow = "hidden";
        //this.titleLabel.style.whiteSpace = "nowrap";
        if (this._rightImageView && this._rightImageView.superview == this) {
            // var imageHeight = bounds.height - padding;
            // this._rightImageView.frame = new UIRectangle(bounds.width - imageHeight - padding * 0.5, padding * 0.5, imageHeight, imageHeight);
            this._rightImageView.frame = bounds.rectangleWithInsets(this.leftInset, padding * 0.5 +
                this.rightInset, 0, 0).rectangleWithWidth(24, 1).rectangleWithHeight(24, 0.5);
            this.titleLabel.style.right = "" +
                (padding * 0.5 + this.rightInset + this._rightImageView.frame.width).integerValue + "px";
        }
    }
}
///<reference path="../UICore/UIView.ts"/>
class SearchTextField extends UIView {
    constructor(elementID) {
        super(elementID);
        this._class = SearchTextField;
        this.superclass = UIView;
    }
    initView(elementID, viewHTMLElement) {
        super.initView(elementID, viewHTMLElement);
        viewHTMLElement.classList.add("input", "input--search");
        viewHTMLElement.innerHTML = "\
            <button type=\"button\" class=\"input__button\">\
                <i class=\"material-icons\">search</i>\
            </button>\
            <input type=\"search\" class=\"input__field\" placeholder=\"Search\">";
        this._textField = new UIView(nil, this.textFieldElement);
        this._searchButton = new UIView(nil, this.searchButtonElement);
        this._searchButton.addTargetForControlEvents([
            UIView.controlEvent.EnterDown, UIView.controlEvent.PointerUpInside
        ], function (sender, event) {
            this.performSearch();
        }.bind(this));
        this._textField.addTargetForControlEvent(UIView.controlEvent.EnterDown, function (sender, event) {
            this.performSearch();
        }.bind(this));
        this._textField.viewHTMLElement.oninput = function (event) {
            this._textField.sendControlEventForKey(UITextField.controlEvent.TextChange, event);
        }.bind(this);
    }
    get searchButtonElement() {
        return this.viewHTMLElement.querySelector("button");
    }
    get textFieldElement() {
        return this.viewHTMLElement.querySelector("input");
    }
    set placeholderText(placeholderText) {
        this.textFieldElement.setAttribute("placeholder", placeholderText);
    }
    get placeholderText() {
        return this.textFieldElement.getAttribute("placeholder");
    }
    get text() {
        return this.textFieldElement.value;
    }
    set text(text) {
        this.textFieldElement.value = text;
    }
    focus() {
        this.textFieldElement.focus();
    }
    blur() {
        this.textFieldElement.blur();
    }
    performSearch() {
    }
    layoutSubviews() {
        super.layoutSubviews();
    }
}
///<reference path="UIObject.ts"/>
class UIKeyValueStringFilter extends UIObject {
    constructor(useSeparateWebWorker = NO) {
        super();
        this._isThreadClosed = NO;
        this._webWorker = UIKeyValueStringFilter._sharedWebWorker;
        this._class = UIKeyValueStringFilter;
        this.superclass = UIObject;
        if (useSeparateWebWorker) {
            this._webWorker = new Worker("compiledScripts/UIKeyValueStringFilterWebWorker.js");
        }
        UIKeyValueStringFilter._instanceNumber = UIKeyValueStringFilter._instanceNumber + 1;
        this._instanceNumber = UIKeyValueStringFilter._instanceNumber;
    }
    get instanceIdentifier() {
        return this._instanceNumber;
    }
    filterData(filteringString, data, excludedData, dataKeyPath, identifier, completion) {
        if (this._isThreadClosed) {
            return;
        }
        const startTime = Date.now();
        const instanceIdentifier = this.instanceIdentifier;
        this._webWorker.onmessage = function (message) {
            if (message.data.instanceIdentifier == instanceIdentifier) {
                console.log("Filtering took " + (Date.now() - startTime) + " ms.");
                completion(message.data.filteredData, message.data.filteredIndexes, message.data.identifier);
            }
        };
        try {
            this._webWorker.postMessage({
                "filteringString": filteringString,
                "data": data,
                "excludedData": excludedData,
                "dataKeyPath": dataKeyPath,
                "identifier": identifier,
                "instanceIdentifier": instanceIdentifier
            });
        }
        catch (exception) {
            completion([], [], identifier);
        }
    }
    closeThread() {
        this._isThreadClosed = YES;
        if (this._webWorker != UIKeyValueStringFilter._sharedWebWorker) {
            this._webWorker.terminate();
        }
    }
}
UIKeyValueStringFilter._sharedWebWorker = new Worker("compiledScripts/UIKeyValueStringFilterWebWorker.js");
UIKeyValueStringFilter._instanceNumber = -1;
/// <reference path="./UIView.ts" />
class UINativeScrollView extends UIView {
    constructor(elementID, viewHTMLElement) {
        super(elementID, viewHTMLElement);
        this.animationDuration = 0;
        this._class = UINativeScrollView;
        this.superclass = UIView;
        this.style.cssText = this.style.cssText + "-webkit-overflow-scrolling: touch;";
        this.style.overflow = "auto";
        // this.scrollsX = YES;
        // this.scrollsY = YES;
        this.viewHTMLElement.addEventListener("scroll", function (event) {
            this.didScrollToPosition(new UIPoint(this.viewHTMLElement.scrollLeft, this.viewHTMLElement.scrollTop));
            this.broadcastEventInSubtree({
                name: UIView.broadcastEventName.PageDidScroll,
                parameters: nil
            });
        }.bind(this));
    }
    didScrollToPosition(offsetPosition) {
    }
    get scrollsX() {
        const result = (this.style.overflowX == "scroll");
        return result;
    }
    set scrollsX(scrolls) {
        if (scrolls) {
            this.style.overflowX = "scroll";
        }
        else {
            this.style.overflowX = "hidden";
        }
    }
    get scrollsY() {
        const result = (this.style.overflowY == "scroll");
        return result;
    }
    set scrollsY(scrolls) {
        if (scrolls) {
            this.style.overflowY = "scroll";
        }
        else {
            this.style.overflowY = "hidden";
        }
    }
    get contentOffset() {
        const result = new UIPoint(this.viewHTMLElement.scrollLeft, this.viewHTMLElement.scrollTop);
        return result;
    }
    set contentOffset(offsetPoint) {
        if (this.animationDuration) {
            this.scrollXTo(this.viewHTMLElement, offsetPoint.x, this.animationDuration);
            this.scrollYTo(this.viewHTMLElement, offsetPoint.y, this.animationDuration);
            return;
        }
        this.viewHTMLElement.scrollLeft = offsetPoint.x;
        this.viewHTMLElement.scrollTop = offsetPoint.y;
    }
    scrollToBottom() {
        this.contentOffset = new UIPoint(this.contentOffset.x, this.scrollSize.height - this.frame.height);
    }
    scrollToTop() {
        this.contentOffset = new UIPoint(this.contentOffset.x, 0);
    }
    get isScrolledToBottom() {
        return this.contentOffset.isEqualTo(new UIPoint(this.contentOffset.x, this.scrollSize.height -
            this.frame.height));
    }
    get isScrolledToTop() {
        return this.contentOffset.isEqualTo(new UIPoint(this.contentOffset.x, 0));
    }
    scrollYTo(element, to, duration) {
        duration = duration * 1000;
        const start = element.scrollTop;
        const change = to - start;
        const increment = 10;
        const animateScroll = function (elapsedTime) {
            elapsedTime += increment;
            const position = this.easeInOut(elapsedTime, start, change, duration);
            element.scrollTop = position;
            if (elapsedTime < duration) {
                setTimeout(function () {
                    animateScroll(elapsedTime);
                }, increment);
            }
        }.bind(this);
        animateScroll(0);
    }
    scrollXTo(element, to, duration) {
        duration = duration * 1000;
        const start = element.scrollTop;
        const change = to - start;
        const increment = 10;
        const animateScroll = function (elapsedTime) {
            elapsedTime += increment;
            const position = this.easeInOut(elapsedTime, start, change, duration);
            element.scrollLeft = position;
            if (elapsedTime < duration) {
                setTimeout(function () {
                    animateScroll(elapsedTime);
                }, increment);
            }
        }.bind(this);
        animateScroll(0);
    }
    easeInOut(currentTime, start, change, duration) {
        currentTime /= duration / 2;
        if (currentTime < 1) {
            return change / 2 * currentTime * currentTime + start;
        }
        currentTime -= 1;
        return -change / 2 * (currentTime * (currentTime - 2) - 1) + start;
    }
}
/// <reference path="./UINativeScrollView.ts" />
class UITableView extends UINativeScrollView {
    constructor(elementID) {
        super(elementID);
        this.allRowsHaveEqualHeight = NO;
        this._visibleRows = [];
        this._firstLayoutVisibleRows = [];
        this._rowPositions = [];
        this._highestValidRowPositionIndex = 0;
        this._reusableViews = {};
        this._removedReusableViews = {};
        this._rowIDIndex = 0;
        this.reloadsOnLanguageChange = YES;
        this.sidePadding = 0;
        this._persistedData = [];
        this._needsDrawingOfVisibleRowsBeforeLayout = NO;
        this._isDrawVisibleRowsScheduled = NO;
        this.animationDuration = 0.25;
        this._class = UITableView;
        this.superclass = UINativeScrollView;
        this.scrollsX = NO;
    }
    initView(elementID, viewHTMLElement) {
        super.initView(elementID, viewHTMLElement);
        this._fullHeightView = new UIView();
        this._fullHeightView.hidden = YES;
        this._fullHeightView.userInteractionEnabled = NO;
        this.addSubview(this._fullHeightView);
    }
    loadData() {
        this._persistedData = [];
        this._calculatePositionsUntilIndex(this.numberOfRows() - 1);
        this._needsDrawingOfVisibleRowsBeforeLayout = YES;
        this.setNeedsLayout();
        // this.forEachViewInSubtree(function(view) {
        //     view.setNeedsLayout();
        // })
    }
    reloadData() {
        this._removeVisibleRows();
        this._removeAllReusableRows();
        this._rowPositions = [];
        this._highestValidRowPositionIndex = 0;
        this.loadData();
    }
    highlightChanges(previousData, newData) {
        previousData = previousData.map(function (dataPoint, index, array) {
            return JSON.stringify(dataPoint);
        });
        newData = newData.map(function (dataPoint, index, array) {
            return JSON.stringify(dataPoint);
        });
        const newIndexes = [];
        newData.forEach(function (value, index, array) {
            if (!previousData.contains(value)) {
                newIndexes.push(index);
            }
        });
        newIndexes.forEach(function (index) {
            if (this.isRowWithIndexVisible(index)) {
                this.highlightRowAsNew(this.viewForRowWithIndex(index));
            }
        }.bind(this));
    }
    highlightRowAsNew(row) {
    }
    invalidateSizeOfRowWithIndex(index, animateChange = NO) {
        if (this._rowPositions[index]) {
            this._rowPositions[index].isValid = NO;
        }
        this._highestValidRowPositionIndex = Math.min(this._highestValidRowPositionIndex, index - 1);
        // if (index == 0) {
        //     this._highestValidRowPositionIndex = 0;
        //     this._rowPositions = [];
        // }
        this._needsDrawingOfVisibleRowsBeforeLayout = YES;
        this._shouldAnimateNextLayout = animateChange;
    }
    _calculateAllPositions() {
        this._calculatePositionsUntilIndex(this.numberOfRows() - 1);
    }
    _calculatePositionsUntilIndex(maxIndex) {
        var validPositionObject = this._rowPositions[this._highestValidRowPositionIndex];
        if (!IS(validPositionObject)) {
            validPositionObject = {
                bottomY: 0,
                topY: 0,
                isValid: YES
            };
        }
        var previousBottomY = validPositionObject.bottomY;
        if (!this._rowPositions.length) {
            this._highestValidRowPositionIndex = -1;
        }
        for (var i = this._highestValidRowPositionIndex + 1; i <= maxIndex; i++) {
            var height;
            const rowPositionObject = this._rowPositions[i];
            if (IS((rowPositionObject || nil).isValid)) {
                height = rowPositionObject.bottomY - rowPositionObject.topY;
            }
            else {
                height = this.heightForRowWithIndex(i);
            }
            const positionObject = {
                bottomY: previousBottomY + height,
                topY: previousBottomY,
                isValid: YES
            };
            if (i < this._rowPositions.length) {
                this._rowPositions[i] = positionObject;
            }
            else {
                this._rowPositions.push(positionObject);
            }
            this._highestValidRowPositionIndex = i;
            previousBottomY = previousBottomY + height;
        }
    }
    indexesForVisibleRows(paddingRatio = 0.5) {
        const firstVisibleY = this.contentOffset.y - this.bounds.height * paddingRatio;
        const lastVisibleY = firstVisibleY + this.bounds.height * (1 + paddingRatio);
        const numberOfRows = this.numberOfRows();
        if (this.allRowsHaveEqualHeight) {
            const rowHeight = this.heightForRowWithIndex(0);
            var firstIndex = firstVisibleY / rowHeight;
            var lastIndex = lastVisibleY / rowHeight;
            firstIndex = Math.trunc(firstIndex);
            lastIndex = Math.trunc(lastIndex) + 1;
            firstIndex = Math.max(firstIndex, 0);
            lastIndex = Math.min(lastIndex, numberOfRows - 1);
            var result = [];
            for (var i = firstIndex; i < lastIndex + 1; i++) {
                result.push(i);
            }
            return result;
        }
        var accumulatedHeight = 0;
        var result = [];
        this._calculateAllPositions();
        const rowPositions = this._rowPositions;
        for (var i = 0; i < numberOfRows; i++) {
            const height = rowPositions[i].bottomY - rowPositions[i].topY; // this.heightForRowWithIndex(i)
            accumulatedHeight = accumulatedHeight + height;
            if (accumulatedHeight >= firstVisibleY) {
                result.push(i);
            }
            if (accumulatedHeight >= lastVisibleY) {
                break;
            }
        }
        return result;
    }
    _removeVisibleRows() {
        const visibleRows = [];
        this._visibleRows.forEach(function (row, index, array) {
            this._persistedData[row._UITableViewRowIndex] = this.persistenceDataItemForRowWithIndex(row._UITableViewRowIndex, row);
            row.removeFromSuperview();
            this._removedReusableViews[row._UITableViewReusabilityIdentifier].push(row);
        }, this);
        this._visibleRows = visibleRows;
    }
    _removeAllReusableRows() {
        this._reusableViews.forEach(function (rows) {
            rows.forEach(function (row, index, array) {
                this._persistedData[row._UITableViewRowIndex] = this.persistenceDataItemForRowWithIndex(row._UITableViewRowIndex, row);
                row.removeFromSuperview();
                this._markReusableViewAsUnused(row);
            }.bind(this));
        }.bind(this));
    }
    _markReusableViewAsUnused(row) {
        if (!this._removedReusableViews[row._UITableViewReusabilityIdentifier].contains(row)) {
            this._removedReusableViews[row._UITableViewReusabilityIdentifier].push(row);
        }
    }
    _drawVisibleRows() {
        if (!this.isMemberOfViewTree) {
            return;
        }
        const visibleIndexes = this.indexesForVisibleRows();
        const minIndex = visibleIndexes[0];
        const maxIndex = visibleIndexes[visibleIndexes.length - 1];
        const removedViews = [];
        const visibleRows = [];
        this._visibleRows.forEach(function (row, index, array) {
            if (row._UITableViewRowIndex < minIndex || row._UITableViewRowIndex > maxIndex) {
                //row.removeFromSuperview();
                this._persistedData[row._UITableViewRowIndex] = this.persistenceDataItemForRowWithIndex(row._UITableViewRowIndex, row);
                this._removedReusableViews[row._UITableViewReusabilityIdentifier].push(row);
                removedViews.push(row);
            }
            else {
                visibleRows.push(row);
            }
        }, this);
        this._visibleRows = visibleRows;
        visibleIndexes.forEach(function (rowIndex, index, array) {
            if (this.isRowWithIndexVisible(rowIndex)) {
                return;
            }
            const view = this.viewForRowWithIndex(rowIndex);
            //view._UITableViewRowIndex = rowIndex;
            this._firstLayoutVisibleRows.push(view);
            this._visibleRows.push(view);
            this.addSubview(view);
        }, this);
        for (var i = 0; i < removedViews.length; i++) {
            var view = removedViews[i];
            if (this._visibleRows.indexOf(view) == -1) {
                //this._persistedData[view._UITableViewRowIndex] = this.persistenceDataItemForRowWithIndex(view._UITableViewRowIndex, view);
                view.removeFromSuperview();
                //this._removedReusableViews[view._UITableViewReusabilityIdentifier].push(view);
            }
        }
        //this.setNeedsLayout();
    }
    visibleRowWithIndex(rowIndex) {
        for (var i = 0; i < this._visibleRows.length; i++) {
            const row = this._visibleRows[i];
            if (row._UITableViewRowIndex == rowIndex) {
                return row;
            }
        }
        return nil;
    }
    isRowWithIndexVisible(rowIndex) {
        return IS(this.visibleRowWithIndex(rowIndex));
    }
    reusableViewForIdentifier(identifier, rowIndex) {
        if (!this._removedReusableViews[identifier]) {
            this._removedReusableViews[identifier] = [];
        }
        if (this._removedReusableViews[identifier] && this._removedReusableViews[identifier].length) {
            const view = this._removedReusableViews[identifier].pop();
            view._UITableViewRowIndex = rowIndex;
            Object.assign(view, this._persistedData[rowIndex] || this.defaultRowPersistenceDataItem());
            return view;
        }
        if (!this._reusableViews[identifier]) {
            this._reusableViews[identifier] = [];
        }
        const newView = this.newReusableViewForIdentifier(identifier, this._rowIDIndex);
        this._rowIDIndex = this._rowIDIndex + 1;
        if (this._rowIDIndex > 40) {
            const asd = 1;
        }
        newView._UITableViewReusabilityIdentifier = identifier;
        newView._UITableViewRowIndex = rowIndex;
        Object.assign(newView, this._persistedData[rowIndex] || this.defaultRowPersistenceDataItem());
        this._reusableViews[identifier].push(newView);
        return newView;
    }
    // Functions that should be overridden to draw the correct content START
    newReusableViewForIdentifier(identifier, rowIDIndex) {
        const view = new UIButton(this.elementID + "Row" + rowIDIndex);
        view.stopsPointerEventPropagation = NO;
        view.pausesPointerEvents = NO;
        return view;
    }
    heightForRowWithIndex(index) {
        return 50;
    }
    numberOfRows() {
        return 10000;
    }
    defaultRowPersistenceDataItem() {
    }
    persistenceDataItemForRowWithIndex(rowIndex, row) {
    }
    viewForRowWithIndex(rowIndex) {
        const row = this.reusableViewForIdentifier("Row", rowIndex);
        row.titleLabel.text = "Row " + rowIndex;
        return row;
    }
    // Functions that should be overridden to draw the correct content END
    // Functions that trigger redrawing of the content
    didScrollToPosition(offsetPosition) {
        super.didScrollToPosition(offsetPosition);
        this.forEachViewInSubtree(function (view) {
            view._isPointerValid = NO;
        });
        if (!this._isDrawVisibleRowsScheduled) {
            this._isDrawVisibleRowsScheduled = YES;
            UIView.runFunctionBeforeNextFrame(function () {
                this._calculateAllPositions();
                this._drawVisibleRows();
                this.setNeedsLayout();
                this._isDrawVisibleRowsScheduled = NO;
            }.bind(this));
        }
    }
    wasAddedToViewTree() {
        this.loadData();
    }
    setFrame(rectangle, zIndex, performUncheckedLayout) {
        const frame = this.frame;
        super.setFrame(rectangle, zIndex, performUncheckedLayout);
        if (frame.isEqualTo(rectangle) && !performUncheckedLayout) {
            return;
        }
        this._needsDrawingOfVisibleRowsBeforeLayout = YES;
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
        if (event.name == UIView.broadcastEventName.LanguageChanged && this.reloadsOnLanguageChange) {
            this.reloadData();
        }
    }
    _layoutAllRows(positions = this._rowPositions) {
        const bounds = this.bounds;
        this._visibleRows.forEach(function (row, index, array) {
            const frame = bounds.copy();
            const positionObject = positions[row._UITableViewRowIndex];
            frame.min.y = positionObject.topY;
            frame.max.y = positionObject.bottomY;
            row.frame = frame;
            row.style.width = "" + (bounds.width - this.sidePadding * 2).integerValue + "px";
            row.style.left = "" + this.sidePadding.integerValue + "px";
        }, this);
        this._fullHeightView.frame = bounds.rectangleWithHeight((positions.lastElement ||
            nil).bottomY).rectangleWithWidth(bounds.width * 0.5);
        this._firstLayoutVisibleRows = [];
    }
    _animateLayoutAllRows() {
        UIView.animateViewOrViewsWithDurationDelayAndFunction(this._visibleRows, this.animationDuration, 0, undefined, function () {
            this._layoutAllRows();
        }.bind(this), function () {
            // this._calculateAllPositions()
            // this._layoutAllRows()
        }.bind(this));
    }
    layoutSubviews() {
        const previousPositions = JSON.parse(JSON.stringify(this._rowPositions));
        const previousVisibleRowsLength = this._visibleRows.length;
        if (this._needsDrawingOfVisibleRowsBeforeLayout) {
            //this._calculateAllPositions()
            this._drawVisibleRows();
            this._needsDrawingOfVisibleRowsBeforeLayout = NO;
        }
        super.layoutSubviews();
        if (!this.numberOfRows() || !this.isMemberOfViewTree) {
            return;
        }
        if (this._shouldAnimateNextLayout) {
            // Need to do layout with the previous positions
            this._layoutAllRows(previousPositions);
            if (previousVisibleRowsLength < this._visibleRows.length) {
                UIView.runFunctionBeforeNextFrame(function () {
                    this._animateLayoutAllRows();
                }.bind(this));
            }
            else {
                this._animateLayoutAllRows();
            }
            this._shouldAnimateNextLayout = NO;
        }
        else {
            // if (this._needsDrawingOfVisibleRowsBeforeLayout) {
            //     this._drawVisibleRows();
            //     this._needsDrawingOfVisibleRowsBeforeLayout = NO;
            // }
            this._calculateAllPositions();
            this._layoutAllRows();
        }
    }
    intrinsicContentHeight(constrainingWidth = 0) {
        var result = 10000000000000000000000000;
        if (this._rowPositions.length) {
            result = this._rowPositions[this._rowPositions.length - 1].bottomY;
        }
        return result;
    }
}
///<reference path="UIView.ts"/>
class UIImageView extends UIView {
    constructor(elementID, viewHTMLElement = null) {
        super(elementID, viewHTMLElement, "img");
        this._hiddenWhenEmpty = NO;
        this._class = UIImageView;
        this.superclass = UIView;
        //this.actionIndicator = new UIActionIndicator(elementID + "ActionIndicator");
    }
    get viewHTMLElement() {
        return super.viewHTMLElement;
    }
    static dataURL(url, callback) {
        const xhr = new XMLHttpRequest();
        xhr.open("get", url);
        xhr.responseType = "blob";
        xhr.onload = function () {
            const fr = new FileReader();
            fr.onload = function () {
                callback(this.result);
            };
            fr.readAsDataURL(xhr.response); // async call
        };
        xhr.send();
    }
    static dataURLWithMaxSize(URLString, maxSize, completion) {
        const imageView = new UIImageView();
        imageView.imageSource = URLString;
        imageView.viewHTMLElement.onload = function () {
            const originalSize = imageView.intrinsicContentSize();
            var multiplier = maxSize / Math.max(originalSize.height, originalSize.width);
            multiplier = Math.min(1, multiplier);
            const result = imageView.getDataURL((originalSize.height * multiplier).integerValue, (originalSize.width *
                multiplier).integerValue);
            completion(result);
        };
    }
    static dataURLWithSizes(URLString, height, width, completion) {
        const imageView = new UIImageView();
        imageView.imageSource = URLString;
        imageView.viewHTMLElement.onload = function () {
            const result = imageView.getDataURL(height, width);
            completion(result);
        };
    }
    getDataURL(height, width) {
        const img = this.viewHTMLElement;
        // Create an empty canvas element
        const canvas = document.createElement("canvas");
        canvas.width = width;
        canvas.height = height;
        // Copy the image contents to the canvas
        const ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, width, height);
        // Get the data-URL formatted image
        // Firefox supports PNG and JPEG. You could check img.src to
        // guess the original format, but be aware the using "image/jpg"
        // will re-encode the image.
        const dataURL = canvas.toDataURL("image/png");
        return dataURL;
        //return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
    }
    get imageSource() {
        return this.viewHTMLElement.src;
    }
    set imageSource(sourceString) {
        if (IS_NOT(sourceString)) {
            sourceString = "";
        }
        this.viewHTMLElement.src = sourceString;
        if (this.hiddenWhenEmpty) {
            this.hidden = IS_NOT(this.imageSource);
        }
        if (!sourceString || !sourceString.length) {
            //this.actionIndicator.stop();
            this.hidden = YES;
            return;
        }
        else {
            this.hidden = NO;
        }
        // this.superview.addSubview(this.actionIndicator);
        // this.actionIndicator.frame = this.frame;
        // this.actionIndicator.start();
        // this.actionIndicator.backgroundColor = UIColor.redColor
        // @ts-ignore
        this.viewHTMLElement.onload = function (event) {
            this.superview.setNeedsLayout();
            //this.actionIndicator.removeFromSuperview();
        }.bind(this);
    }
    setImageSource(key, defaultString) {
        const languageName = UICore.languageService.currentLanguageKey;
        this.imageSource = UICore.languageService.stringForKey(key, languageName, defaultString, nil);
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
        if (event.name == UIView.broadcastEventName.LanguageChanged || event.name ==
            UIView.broadcastEventName.AddedToViewTree) {
            this._setImageSourceFromKeyIfPossible();
        }
    }
    willMoveToSuperview(superview) {
        super.willMoveToSuperview(superview);
        this._setImageSourceFromKeyIfPossible();
    }
    _setImageSourceFromKeyIfPossible() {
        if (this._sourceKey && this._defaultSource) {
            this.setImageSource(this._sourceKey, this._defaultSource);
        }
    }
    get fillMode() {
        return this._fillMode;
    }
    set fillMode(fillMode) {
        this._fillMode = fillMode;
        this.style.objectFit = fillMode;
    }
    get hiddenWhenEmpty() {
        return this._hiddenWhenEmpty;
    }
    set hiddenWhenEmpty(hiddenWhenEmpty) {
        this._hiddenWhenEmpty = hiddenWhenEmpty;
        if (hiddenWhenEmpty) {
            this.hidden = IS_NOT(this.imageSource);
        }
    }
    didMoveToSuperview(superview) {
        super.didMoveToSuperview(superview);
    }
    layoutSubviews() {
        super.layoutSubviews();
    }
    intrinsicContentSize() {
        const result = new UIRectangle(0, 0, this.viewHTMLElement.naturalHeight, this.viewHTMLElement.naturalWidth);
        return result;
    }
    intrinsicContentSizeWithConstraints(constrainingHeight = 0, constrainingWidth = 0) {
        const heightRatio = constrainingHeight / this.viewHTMLElement.naturalHeight;
        const widthRatio = constrainingWidth / this.viewHTMLElement.naturalWidth;
        const multiplier = Math.max(heightRatio, widthRatio);
        const result = new UIRectangle(0, 0, this.viewHTMLElement.naturalHeight *
            multiplier, this.viewHTMLElement.naturalWidth * multiplier);
        return result;
    }
}
UIImageView.fillMode = {
    "stretchToFill": "fill",
    "aspectFit": "contain",
    "aspectFill": "cover",
    "center": "none",
    "aspectFitIfLarger": "scale-down"
};
/// <reference path="UITextView.ts" />
// @ts-ignore
class UITextField extends UITextView {
    constructor(elementID, viewHTMLElement = null, type = UITextView.type.textField) {
        super(elementID, type, viewHTMLElement);
        this._class = UITextField;
        this.superclass = UITextView;
        this.viewHTMLElement.setAttribute("type", "text");
        this.backgroundColor = UIColor.whiteColor;
        this.addTargetForControlEvent(UIView.controlEvent.PointerUpInside, function (sender, event) {
            sender.focus();
        });
        this.viewHTMLElement.oninput = (event) => {
            this.sendControlEventForKey(UITextField.controlEvent.TextChange, event);
        };
        this.style.webkitUserSelect = "text";
        this.nativeSelectionEnabled = YES;
        this.pausesPointerEvents = NO;
    }
    get addControlEventTarget() {
        return super.addControlEventTarget;
    }
    get viewHTMLElement() {
        return this._viewHTMLElement;
    }
    set text(text) {
        this.viewHTMLElement.value = text;
    }
    get text() {
        return this.viewHTMLElement.value;
    }
    set placeholderText(text) {
        this.viewHTMLElement.placeholder = text;
    }
    get placeholderText() {
        return this.viewHTMLElement.placeholder;
    }
    setPlaceholderText(key, defaultString) {
        this._placeholderTextKey = key;
        this._defaultPlaceholderText = defaultString;
        const languageName = UICore.languageService.currentLanguageKey;
        this.placeholderText = UICore.languageService.stringForKey(key, languageName, defaultString, nil);
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
        if (event.name == UIView.broadcastEventName.LanguageChanged || event.name ==
            UIView.broadcastEventName.AddedToViewTree) {
            this._setPlaceholderFromKeyIfPossible();
        }
    }
    willMoveToSuperview(superview) {
        super.willMoveToSuperview(superview);
        this._setPlaceholderFromKeyIfPossible();
    }
    _setPlaceholderFromKeyIfPossible() {
        if (this._placeholderTextKey && this._defaultPlaceholderText) {
            this.setPlaceholderText(this._placeholderTextKey, this._defaultPlaceholderText);
        }
    }
    get isSecure() {
        const result = (this.viewHTMLElement.type == "password");
        return result;
    }
    set isSecure(secure) {
        var type = "text";
        if (secure) {
            type = "password";
        }
        this.viewHTMLElement.type = type;
    }
}
UITextField.controlEvent = Object.assign({}, UIView.controlEvent, {
    "TextChange": "TextChange"
});
///<reference path="../UICore/UIButton.ts"/>
class SearchableDropdownRow extends UIButton {
    constructor(elementID) {
        super(elementID);
        this.type = SearchableDropdownRow.type.selectableItem;
        this._class = SearchableDropdownRow;
        this.superclass = UIButton;
    }
    initView(elementID, viewHTMLElement, initViewData) {
        super.initView(elementID, viewHTMLElement, initViewData);
        this._checkbox = new CBCheckbox(elementID + "Checkbox");
        this._checkbox.userInteractionEnabled = NO;
        this.addSubview(this._checkbox);
        this.style.outline = "none";
    }
    set titleText(titleText) {
        this.titleLabel.text = titleText;
        this._checkbox.titleLabel.text = titleText;
    }
    get titleText() {
        return this.titleLabel.text;
    }
    set selected(selected) {
        super.selected = selected;
        this._checkbox.selected = selected;
    }
    get selected() {
        return super.selected;
    }
    set focused(focused) {
        this._focused = focused;
        this.updateContentForCurrentState();
    }
    get focused() {
        return this._focused;
    }
    updateContentForNormalState() {
        if (this.type == SearchableDropdownRow.type.sectionTitle) {
            this.backgroundColor = UIColor.transparentColor;
            this.titleLabel.textColor = CBColor.primaryContentColor.colorWithAlpha(0.5);
            this.style.borderTop = "1px solid rgba(0, 0, 0, 0.3)";
            this.titleLabel.style.marginLeft = "";
            this.textSuffix = "";
            if (this._checkbox) {
                this._checkbox.hidden = YES;
            }
            this.titleLabel.hidden = NO;
        }
        else if (this.type == SearchableDropdownRow.type.selectedItem) {
            this.backgroundColor = UIColor.transparentColor;
            this.titleLabel.textColor = CBColor.primaryTintColor;
            this.style.borderTop = "";
            //this.titleLabel.style.marginLeft = "20px"
            this.textSuffix = "";
            if (this._checkbox) {
                this._checkbox.hidden = NO;
                this._checkbox.titleLabel.textColor = CBColor.primaryContentColor;
            }
            this.titleLabel.hidden = YES;
        }
        else if (this.type == SearchableDropdownRow.type.customItem) {
            this.backgroundColor = UIColor.transparentColor;
            this.titleLabel.textColor = CBColor.primaryTintColor;
            this.style.borderTop = "1px solid rgba(0, 0, 0, 0.3)";
            this.titleLabel.style.marginLeft = "";
            this.textSuffix = LanguageService.stringForKey("searchableDropdownCustomItem", LanguageService.currentLanguageKey, "-Custom item");
            if (this._checkbox) {
                this._checkbox.hidden = YES;
            }
            this.titleLabel.hidden = NO;
        }
        else {
            this.backgroundColor = UIColor.transparentColor;
            this.titleLabel.textColor = CBColor.primaryTintColor;
            this.style.borderTop = "";
            this.titleLabel.style.marginLeft = "20px";
            this.textSuffix = "";
            if (this._checkbox) {
                this._checkbox.hidden = YES;
            }
            this.titleLabel.hidden = NO;
        }
        this.userInteractionEnabled = YES;
    }
    get textSuffix() {
        const result = this.titleLabel.textSuffix;
        return result;
    }
    set textSuffix(textSuffix) {
        this.titleLabel.textSuffix = textSuffix;
        this._checkbox.titleLabel.textSuffix = textSuffix;
    }
    updateContentForHoveredState() {
        this.backgroundColor = CBColor.primaryContentColor.colorWithAlpha(0.05);
    }
    updateContentForHighlightedState() {
        this.backgroundColor = CBColor.primaryContentColor.colorWithAlpha(0.08);
    }
    updateContentForFocusedState() {
        this.backgroundColor = CBColor.primaryContentColor.colorWithAlpha(0.08);
    }
    updateContentForSelectedState() {
        this.updateContentForNormalState();
        if (this.type == SearchableDropdownRow.type.selectableItem || this.type ==
            SearchableDropdownRow.type.customItem) {
            this._checkbox.hidden = NO;
            //this._checkbox.titleLabel.hidden = YES;
            this._checkbox.titleLabel.textColor = CBColor.primaryTintColor;
            this._titleLabel.hidden = YES;
        }
    }
    wasRemovedFromViewTree() {
        super.wasRemovedFromViewTree();
        this.highlighted = NO;
        this.hovered = NO;
    }
    layoutSubviews() {
        super.layoutSubviews();
        if (this._checkbox) {
            this._checkbox.style.top = "25%";
            this._checkbox.style.height = "30px";
            this._checkbox.style.left = "" + this.contentPadding + "px";
            this._checkbox.style.right = "" + this.contentPadding + "px";
        }
    }
}
SearchableDropdownRow.type = {
    "sectionTitle": "SectionTitle",
    "selectedItem": "SelectedItem",
    "selectableItem": "SelectableItem",
    "customItem": "CustomItem"
};
/// <reference path="../UICore/UIButton.ts" />
/// <reference path="../UICore/UIKeyValueStringFilter.ts" />
/// <reference path="../UICore/UITableView.ts" />
/// <reference path="../UICore/UIImageView.ts" />
/// <reference path="../UICore/UITextView.ts" />
/// <reference path="../UICore/UITextField.ts" />
/// <reference path="../UICore/UIDialogView.ts" />
/// <reference path="./SearchTextField.ts" />
/// <reference path="./CBCheckbox.ts" />
/// <reference path="./CBColor.ts" />
/// <reference path="./SearchableDropdownRow.ts" />
/// <reference path="../RootViewController.ts" />
/// <reference path="./LanguageService.ts" />
class SearchableDropdown extends UIButton {
    constructor(elementID) {
        super(elementID);
        this._data = [];
        this._filteredData = [];
        this._excludedData = [];
        this.tintColor = CBColor.primaryTintColor;
        this.selectedIndices = [];
        this._selectedData = [];
        this._drawingData = [];
        this._isDrawingDataValid = NO;
        this.isSingleSelection = NO;
        this.showsSelectedSectionInMultipleSelectionMode = NO;
        this.allowsCustomItem = NO;
        this.keepFocusedRowVisible = YES;
        this._class = SearchableDropdown;
        this.superclass = UIButton;
    }
    initView(elementID, viewHTMLElement, initViewData) {
        super.initView(elementID, viewHTMLElement, initViewData);
        //this.style.borderRadius = "2px";
        this._titleLabel.text = "Current value";
        this._titleLabel.textAlignment = UITextView.textAlignment.left;
        this.overflowLabel = new UITextView(elementID + "OverflowLabel");
        this.overflowLabel.textColor = CBColor.primaryContentColor;
        this.overflowLabel.textAlignment = UITextView.textAlignment.right;
        this.addSubview(this.overflowLabel);
        this._rightImageView = new UIImageView(this.elementID + "RightImageView");
        this._rightImageView.imageSource = "images/baseline-arrow_drop_down-24px.svg";
        this._rightImageView.userInteractionEnabled = NO;
        this.addSubview(this._rightImageView);
        this.setNeedsLayout();
        this._containerView = new UIView(elementID + "ContainerView");
        this._containerView.style.boxShadow = "0 9px 13px 0 rgba(0,0,0,0.26)";
        this._containerView.style.borderRadius = "2px";
        this._searchTextField = new SearchTextField(elementID + "SearchTextField");
        this._searchTextField.placeholderText = "Search";
        this._containerView.addSubview(this._searchTextField);
        this._searchTextField._textField.addTargetForControlEvent(UITextField.controlEvent.TextChange, function (sender, event) {
            this.updateFilteredData(this._searchTextField.text);
        }.bind(this));
        this._searchTextField._textField.addTargetForControlEvent(UIView.controlEvent.EscDown, function (sender, event) {
            if (IS(this._searchTextField.text)) {
                this._searchTextField.text = "";
                this.updateFilteredData("");
            }
            else {
                this._dialogView.dismiss(YES);
            }
        }.bind(this));
        this._searchTextField._textField.addTargetForControlEvent(UIView.controlEvent.DownArrowDown, function (sender, event) {
            if (this.focusedRowIndex < (this.drawingData.length - 1)) {
                this.focusedRowIndex = this.focusedRowIndex + 1;
            }
        }.bind(this));
        this._searchTextField._textField.addTargetForControlEvent(UIView.controlEvent.UpArrowDown, function (sender, event) {
            if (this.focusedRowIndex > 0) {
                this.focusedRowIndex = this.focusedRowIndex - 1;
            }
        }.bind(this));
        this._searchTextField._textField.addTargetForControlEvent(UIView.controlEvent.EnterDown, function (sender, event) {
            const isTouchDevice = "ontouchstart" in document.documentElement;
            if (isTouchDevice) {
                this._searchTextField.blur();
                return;
            }
            const datapoint = this.drawingData[this.focusedRowIndex];
            const alreadySelected = this.selectedDataContains(datapoint);
            if (alreadySelected) {
                this.selectedData.removeElement(datapoint);
            }
            else if (this.isSingleSelection) {
                this.selectedIndices = [this.focusedRowIndex];
                this.selectedData = [datapoint];
                // view.selected = YES;
                this.selectionDidChange(this.selectedData);
                this.updateContentForCurrentSelection();
                this._dialogView.dismiss();
            }
            else {
                this.selectedData.push(datapoint);
            }
        }.bind(this));
        this._tableView = new UITableView(elementID + "TableView");
        this._containerView.addSubview(this._tableView);
        this._tableView.backgroundColor = UIColor.whiteColor;
        this._dialogView = new UIDialogView(elementID + "DialogView");
        this._dialogView.view = this._containerView;
        this._dialogView.backgroundColor = UIColor.transparentColor;
        this.addTargetForControlEvents([
            UIView.controlEvent.PointerUpInside, UIView.controlEvent.EnterDown
        ], function (sender, event) {
            if (this._dialogView.isVisible) {
                this.closeDropdown();
            }
            else {
                this.openDropdown();
            }
        }.bind(this));
        this._dialogView.addTargetForControlEvent(UIView.controlEvent.PointerDown, function (sender, event) {
            if (sender.viewHTMLElement == event.target) {
                sender.dismiss();
            }
        });
        const dialogLayoutFunction = this._dialogView.layoutSubviews;
        this._dialogView.layoutSubviews = function () {
            //dialogLayoutFunction.call(this._dialogView);
            this._dialogView.frame = this.rootView.bounds; //this.superview.rectangleInView(this.superview.bounds, this.rootView);
            const padding = RootViewController.paddingLength;
            const labelHeight = padding;
            const searchTextFieldHeight = this.bounds.height;
            this._containerView.frame = this.superview.rectangleInView(this.frame, this.rootView)
                .rectangleWithHeight(this.expandedContainerViewHeight);
            this._searchTextField.frame = this._containerView.bounds.rectangleWithHeight(searchTextFieldHeight).rectangleWithInsets(0, 16, 0, 0);
            this._tableView.frame = this._containerView.bounds.rectangleWithInsets(0, 0, 0, searchTextFieldHeight);
            //this._tableView.style.maxHeight = "" + this._tableView.intrinsicContentHeight() + "px";
        }.bind(this);
        // var animateDialogAppearing = this._dialogView.animateAppearing;
        // this._dialogView.animateAppearing = function (this: SearchableDropdown) {
        //     animateDialogAppearing.call(this._dialogView);
        //     this.style.zIndex = "101";
        //     if (this.highlightLabel) {
        //         this.highlightLabel.textColor = UIColor.whiteColor;
        //         this.highlightLabel.style.zIndex = "101";
        //         this.highlightLabel.userInteractionEnabled = NO;
        //     }
        //     this._searchTextField.focus();
        // }.bind(this)
        // var animateDialogDisappearing = this._dialogView.animateDisappearing;
        // this._dialogView.animateDisappearing = function (this: SearchableDropdown) {
        //     animateDialogDisappearing.call(this._dialogView);
        //     this.style.zIndex = "0";
        //     if (this.highlightLabel) {
        //         this.highlightLabel.textColor = CBColor.primaryContentColor;
        //         this.highlightLabel.style.zIndex = "0";
        //         this.highlightLabel.userInteractionEnabled = YES;
        //     }
        //     this._searchTextField.blur();
        // }.bind(this)
        this._tableView.numberOfRows = function () {
            var result = this.drawingData.length;
            if (IS_NOT(this.isSingleSelection) && this.showsSelectedSectionInMultipleSelectionMode) {
                result = result + this.selectedData.length;
            }
            return result;
        }.bind(this);
        const newReusableViewForIdentifierFunction = this._tableView.newReusableViewForIdentifier.bind(this._tableView);
        this._tableView.newReusableViewForIdentifier = function (identifier, rowIndex) {
            //if (identifier == "SelectedItemRow") {
            const view = new SearchableDropdownRow(elementID + identifier + rowIndex);
            view.stopsPointerEventPropagation = NO;
            view.pausesPointerEvents = NO;
            return view;
            // }
            // return newReusableViewForIdentifierFunction(identifier, rowIndex);
        }.bind(this);
        const viewForSelectedItemRow = function (index) {
            const view = this._tableView.reusableViewForIdentifier("SelectedItemRow", index);
            view.titleLabel.text = LanguageService.stringForCurrentLanguage(this.selectedData[index].title);
            view.selected = YES;
            return view;
        }.bind(this);
        this._tableView.viewForRowWithIndex = function (index) {
            const view = this._tableView.reusableViewForIdentifier("SubjectView", index);
            view.style.borderBottomColor = "";
            view.style.borderBottomStyle = "";
            view.style.borderBottomWidth = "";
            const rowWasHovered = function (sender, event) {
                this.focusedRowIndex = index;
            }.bind(this);
            view.addTargetForControlEvent(UIButton.controlEvent.PointerHover, rowWasHovered);
            view.removeTargetForControlEvent(UIButton.controlEvent.PointerHover, view._SearchableDropdownRowWasHoveredFunction);
            view._SearchableDropdownRowWasHoveredFunction = rowWasHovered;
            view.focused = (this.focusedRowIndex == index);
            if (!this.isSingleSelection && this.showsSelectedSectionInMultipleSelectionMode) {
                if (index < this.selectedData.length) {
                    view.type = SearchableDropdownRow.type.selectedItem;
                    view.titleText = LanguageService.stringForCurrentLanguage(this.selectedData[index].title);
                    view.selected = YES;
                    view.updateContentForCurrentState();
                    if (index == this.selectedData.length - 1) {
                        view.style.borderBottomColor = UIColor.colorWithRGBA(100, 100, 100).stringValue;
                        view.style.borderBottomStyle = "solid";
                        view.style.borderBottomWidth = "1px";
                    }
                    var viewWasTapped = function (sender, event) {
                        this.selectedIndices.removeElementAtIndex(index);
                        const selectedItem = this.selectedData[index];
                        this.selectedData.removeElement(selectedItem);
                        view.selected = NO;
                        this.selectionDidChange(this.selectedData);
                        //this.performFunctionWithDelay(0.15, function (this: SearchableDropdown<T>) {
                        this.updateContentForCurrentSelection();
                        //}.bind(this))
                        // // Unselecting main body item if possible
                        // var visibleRows = this._tableView._visibleRows as SearchableDropdownRow[]
                        // var visibleIndices = this._tableView.indexesForVisibleRows()
                        // visibleRows.forEach(function (this: SearchableDropdown<T>, visibleRow: SearchableDropdownRow, visibleRowIndex: number, visibleRowsArray: SearchableDropdownRow[]) {
                        //     var rowDataIndex = visibleIndices[visibleRowIndex]
                        //     visibleRow.selected = this.selectedData.contains(this.drawingData[rowDataIndex])
                        // }.bind(this))
                        this._searchTextField.focus();
                        if (view.viewWasTappedFunction) {
                            view.removeTargetForControlEvents([
                                UIView.controlEvent.EnterDown, UIView.controlEvent.PointerTap
                            ], view.viewWasTappedFunction);
                        }
                    }.bind(this);
                    // Removing previous event target if possible
                    if (view.viewWasTappedFunction) {
                        view.removeTargetForControlEvents([
                            UIView.controlEvent.EnterDown, UIView.controlEvent.PointerTap
                        ], view.viewWasTappedFunction);
                    }
                    // Adding event target
                    view.addTargetForControlEvents([
                        UIView.controlEvent.EnterDown, UIView.controlEvent.PointerTap
                    ], viewWasTapped);
                    view.viewWasTappedFunction = viewWasTapped;
                    return view;
                }
                index = index - this.selectedData.length;
            }
            // Datapoint
            const datapoint = this.drawingData[index];
            if (IS_NOT(datapoint)) {
                return;
            }
            // Setting different style for section title rows
            if (datapoint.isADropdownDataSection) {
                view.type = SearchableDropdownRow.type.sectionTitle;
                view.userInteractionEnabled = NO;
            }
            else {
                view.type = SearchableDropdownRow.type.selectableItem;
                view.userInteractionEnabled = YES;
            }
            if (datapoint._id == (this._customItem || nil)._id) {
                view.type = SearchableDropdownRow.type.customItem;
            }
            view.updateContentForNormalState();
            view.updateContentForCurrentState();
            // Setting row title
            view.titleText = LanguageService.stringForCurrentLanguage(datapoint.title);
            view.titleLabel.textAlignment = UITextView.textAlignment.left;
            // Highlighting of row
            //view.highlighted = (this.highlightedRowIndex == index);
            // Selecting of rows
            view.selected = this.selectedRowIdentifiers.contains(datapoint._id); //this.selectedIndices.contains(index); //this.selectedDataContains(datapoint);
            var viewWasTapped = function (sender, event) {
                if (view.selected) {
                    this.selectedIndices.removeElement(index);
                    this.selectedData.removeElement(datapoint);
                }
                else {
                    if (this.isSingleSelection) {
                        this.selectedIndices = [index];
                        this.selectedData = [datapoint];
                        // view.selected = YES;
                        this.selectionDidChange(this.selectedData);
                        this.updateContentForCurrentSelection();
                        this._dialogView.dismiss();
                        return;
                    }
                    else {
                        this.selectedIndices.push(index);
                        this.selectedData.push(datapoint);
                    }
                }
                //view.selected = !view.selected;
                const selectedData = this.selectedData;
                if (!view.selected) {
                    view.selected = YES;
                    this.performFunctionWithDelay(0.25, function () {
                        this.selectionDidChange(selectedData);
                        this.updateContentForCurrentSelection();
                        if (this.showsSelectedSectionInMultipleSelectionMode) {
                            this._tableView.contentOffset = this._tableView.contentOffset.pointByAddingY(view.frame.height);
                        }
                    }.bind(this));
                }
                else {
                    view._checkbox.selected = NO;
                    this.selectionDidChange(selectedData);
                    this.performFunctionWithDelay(0.15, function () {
                        view.selected = NO;
                        this.updateContentForCurrentSelection();
                        if (this.showsSelectedSectionInMultipleSelectionMode) {
                            this._tableView.contentOffset = this._tableView.contentOffset.pointByAddingY(-view.frame.height);
                        }
                    }.bind(this));
                }
                this._searchTextField.focus();
            }.bind(this);
            // Removing previous event target if possible
            if (view.viewWasTappedFunction) {
                view.removeTargetForControlEvents([
                    UIView.controlEvent.EnterDown, UIView.controlEvent.PointerUpInside
                ], view.viewWasTappedFunction);
            }
            // Adding event target
            view.addTargetForControlEvents([
                UIView.controlEvent.EnterDown, UIView.controlEvent.PointerUpInside
            ], viewWasTapped);
            view.viewWasTappedFunction = viewWasTapped;
            return view;
        }.bind(this);
        this._keyValueStringFilter = new UIKeyValueStringFilter();
    }
    openDropdown() {
        this._dialogView.showInView(this.rootView, YES);
        this._searchTextField.focus();
    }
    closeDropdown() {
        this._dialogView.dismiss(YES);
    }
    boundsDidChange() {
        super.boundsDidChange();
        this.setNeedsLayout();
    }
    get focusedRowIndex() {
        return this._focusedRowIndex;
    }
    set focusedRowIndex(focusedRowIndex) {
        const previousFocusedRowIndex = this.focusedRowIndex;
        this._focusedRowIndex = focusedRowIndex;
        if (previousFocusedRowIndex != focusedRowIndex) {
            this._tableView.visibleRowWithIndex(previousFocusedRowIndex).focused = NO;
            const focusedRow = this._tableView.visibleRowWithIndex(this.focusedRowIndex);
            focusedRow.focused = YES;
            if (!this.keepFocusedRowVisible) {
                return;
            }
            var contentOffset = this._tableView.contentOffset;
            if (focusedRow.frame.y < contentOffset.y) {
                contentOffset.y = focusedRow.frame.y;
            }
            if (focusedRow.frame.max.y > (contentOffset.y + this._tableView.bounds.height)) {
                contentOffset = contentOffset.pointByAddingY(-(contentOffset.y + this._tableView.bounds.height -
                    focusedRow.frame.max.y));
            }
            const animationDuration = this._tableView.animationDuration;
            this._tableView.animationDuration = 0;
            this._tableView.contentOffset = contentOffset;
            this._tableView.animationDuration = animationDuration;
        }
    }
    set expandedContainerViewHeight(expandedContainerViewHeight) {
        this._expandedContainerViewHeight = expandedContainerViewHeight;
        this._dialogView.setNeedsLayout();
    }
    get expandedContainerViewHeight() {
        if (IS(this._expandedContainerViewHeight)) {
            return this._expandedContainerViewHeight;
        }
        const padding = RootViewController.paddingLength;
        const labelHeight = padding;
        const result = this.superview.bounds.height - this.frame.max.y - padding;
        return result;
    }
    selectedDataContains(datapoint) {
        for (var i = 0; i < this.selectedData.length; i++) {
            const value = this.selectedData[i];
            if (value._id == datapoint._id) {
                return YES;
            }
        }
        return NO;
    }
    updateContentForNormalState() {
        this.style.borderBottom = "1px solid rgba(0,0,0,0.12)";
        this.titleLabel.textColor = CBColor.primaryContentColor;
        this.backgroundColor = UIColor.transparentColor;
        this.style.borderBottomColor = CBColor.primaryContentColor.colorWithAlpha(0.12).stringValue;
    }
    updateContentForHighlightedState() {
        this.style.borderBottomWidth = "2px";
        this.style.borderBottomColor = this.tintColor.stringValue;
    }
    selectionDidChange(selectedRows) {
        // Update title to indicate the selection
        this.updateTitleWithSelection(selectedRows);
        this.sendControlEventForKey(SearchableDropdown.controlEvent.SelectionDidChange, nil);
    }
    updateContentForCurrentSelection() {
        // Update selected rows in the top of the table view
        this._tableView.reloadData();
        this.setNeedsLayout();
    }
    get placeholderText() {
        if (IS_UNDEFINED(this._placeholderText)) {
            this._placeholderText = "Not selected";
        }
        return this._placeholderText;
    }
    set placeholderText(placeholderText) {
        this._placeholderText = placeholderText;
        this.updateTitleWithSelection(this.selectedData);
    }
    setPlaceholderText(key, defaultString, parameters) {
        this.placeholderLocalizedTextObject = LanguageService.localizedTextObjectForKey(key, defaultString, parameters);
        //this.titleLabel.setText(key, defaultString, parameters);
    }
    get placeholderLocalizedTextObject() {
        if (IS_UNDEFINED(this._placeholderLocalizedTextObject)) {
            this._placeholderLocalizedTextObject = LanguageService.localizedTextObjectForText("Not selected");
        }
        return this._placeholderLocalizedTextObject;
    }
    set placeholderLocalizedTextObject(placeholderText) {
        this._placeholderLocalizedTextObject = placeholderText;
        this.updateTitleWithSelection(this.selectedData);
    }
    updateTitleWithSelection(selectedRows) {
        this.titleLabel.localizedTextObject = this.placeholderLocalizedTextObject;
        if (selectedRows && selectedRows.length) {
            const maxWidth = this.titleLabel.bounds.width;
            this.titleLabel.localizedTextObject = nil;
            this.titleLabel.text = "";
            var stopLooping = NO;
            selectedRows.forEach(function (selectedDatapoint, index, array) {
                if (stopLooping) {
                    return;
                }
                var selectedString = LanguageService.stringForCurrentLanguage(selectedDatapoint.title);
                if (index) {
                    selectedString = ", " + selectedString;
                }
                const previousText = this.titleLabel.text;
                this.titleLabel.text = this.titleLabel.text + selectedString;
                this.overflowLabel.text = "+" + (array.length - index - 1);
                if (index == array.length - 1) {
                    this.overflowLabel.text = "";
                }
                if (index && (this.bounds.width -
                    (this.overflowLabel.intrinsicContentWidth() + this.titleLabel.intrinsicContentWidth()) - 20) < 0) {
                    this.titleLabel.text = previousText;
                    this.overflowLabel.text = "+" + (array.length - index - 2 * 0);
                    stopLooping = YES;
                }
            }, this);
        }
    }
    updateFilteredData(filteringString) {
        this._filteredData = [];
        this.data.forEach(function (sectionOrRow, index, array) {
            if (LanguageService.stringForCurrentLanguage(sectionOrRow.title).toLowerCase().contains(filteringString.toLowerCase())) {
                this.filteredData.push(sectionOrRow);
            }
            else if (sectionOrRow.isADropdownDataSection) {
                this._keyValueStringFilter.filterData(filteringString, sectionOrRow.rowsData, this._excludedData, "title." + LanguageService.currentLanguageKey, sectionOrRow, function (filteredData, filteredIndexes, sectionFromThread) {
                    if (filteredData.length) {
                        this.filteredData.push({
                            _id: sectionFromThread._id,
                            title: sectionFromThread.title,
                            rowsData: filteredData,
                            isADropdownDataSection: sectionFromThread.isADropdownDataSection,
                            isADropdownDataRow: sectionFromThread.isADropdownDataRow,
                            attachedObject: sectionFromThread.attachedObject,
                            itemCode: sectionFromThread.itemCode,
                            dropdownCode: sectionFromThread.dropdownCode
                        });
                        if (this.allowsCustomItem && this._searchTextField.text && this._customItem) {
                            this.filteredData.removeElement(this._customItem);
                            this.filteredData.push(this._customItem);
                        }
                        this._isDrawingDataValid = NO;
                        this._tableView.reloadData();
                    }
                }.bind(this));
            }
        }.bind(this));
        if (this.allowsCustomItem && this._searchTextField.text) {
            this.filteredData.removeElement(this._customItem);
            this.initCustomItemWithTitle(this._searchTextField.text);
            this.filteredData.push(this._customItem);
        }
        if (this.filteredData.length) {
            this.focusedRowIndex = 0;
        }
        else {
            this.focusedRowIndex = null;
        }
        this._isDrawingDataValid = NO;
        this._tableView.reloadData();
    }
    initCustomItemWithTitle(title) {
        if (IS_NOT(title)) {
            this._customItem = undefined;
        }
        else {
            this._customItem = {
                _id: "" + MAKE_ID(),
                title: LanguageService.localizedTextObjectForText(title),
                rowsData: [],
                isADropdownDataSection: NO,
                isADropdownDataRow: YES,
                attachedObject: undefined,
                itemCode: "custom_item",
                dropdownCode: null
            };
        }
    }
    selectItemOrCustomItemWithTitle(title) {
        if (IS_NOT(title)) {
            this._customItem = undefined;
        }
        else {
            var item = this.drawingData.find(function (dataItem, index, array) {
                return (LanguageService.stringForCurrentLanguage(dataItem.title) == title);
            });
            if (this.allowsCustomItem && IS_NOT(item)) {
                this._searchTextField.text = title;
                this.updateFilteredData(title);
                item = this._customItem;
            }
            if (IS_NOT(this.isSingleSelection)) {
                if (IS_NOT(this.selectedDataContains(item))) {
                    const selectedItemCodes = this.selectedItemCodes.copy();
                    selectedItemCodes.push(item.itemCode);
                    this.selectedItemCodes = selectedItemCodes;
                }
                return;
            }
            this.selectedItemCodes = [item.itemCode];
        }
    }
    set data(data) {
        this._data = data;
        this.updateFilteredData(this._searchTextField.text);
    }
    get data() {
        return this._data;
    }
    set filteredData(data) {
        this._filteredData = data;
        this._isDrawingDataValid = NO;
    }
    get filteredData() {
        return this._filteredData;
    }
    get drawingData() {
        if (this._isDrawingDataValid) {
            return this._drawingData;
        }
        const result = [];
        this._filteredData.forEach(function (section) {
            result.push({
                _id: section._id,
                title: section.title,
                // @ts-ignore
                rowsData: null,
                isADropdownDataSection: section.isADropdownDataSection,
                isADropdownDataRow: NO,
                attachedObject: section.attachedObject,
                itemCode: section.itemCode,
                dropdownCode: section.dropdownCode
            });
            if (section.rowsData) {
                section.rowsData.forEach(function (row) {
                    result.push(row);
                }.bind(this));
            }
        }.bind(this));
        this._drawingData = result;
        this._isDrawingDataValid = YES;
        return result;
    }
    get selectedData() {
        return this._selectedData;
    }
    set selectedData(selectedData) {
        this._selectedData = selectedData;
    }
    clearSelection() {
        this.selectedData = [];
        this.selectedIndices = [];
        this.updateTitleWithSelection(this.selectedData);
        this.updateContentForCurrentSelection();
        this.selectionDidChange(this.selectedData);
    }
    get selectedItemCodes() {
        return this.selectedData.map(function (item) {
            return item.itemCode;
        });
    }
    set selectedItemCodes(selectedItemCodes) {
        const selectedData = [];
        const selectedIndices = [];
        this._drawingData.forEach(function (item, index, array) {
            if (selectedItemCodes.contains(item.itemCode)) {
                selectedData.push(item);
                selectedIndices.push(index);
            }
        });
        this.selectedData = selectedData;
        this.selectedIndices = selectedIndices;
        this.updateTitleWithSelection(this.selectedData);
        this.updateContentForCurrentSelection();
        this.selectionDidChange(this.selectedData);
    }
    get selectedRowIdentifiers() {
        const result = [];
        this.selectedData.forEach(function (selectedDatapoint) {
            result.push(selectedDatapoint._id);
        }.bind(this));
        return result;
    }
    wasAddedToViewTree() {
        super.wasAddedToViewTree();
        this.setNeedsLayout();
    }
    layoutSubviews() {
        super.layoutSubviews();
        const bounds = this.bounds;
        const padding = RootViewController.paddingLength;
        const labelHeight = padding;
        this.updateTitleWithSelection(this.selectedData);
        if (this._rightImageView) {
            // var imageHeight = bounds.height - padding;
            // this._rightImageView.frame = new UIRectangle(bounds.width - imageHeight - padding * 0.5, padding * 0.5, imageHeight, imageHeight);
            this._rightImageView.frame = bounds.rectangleWithInsets(0, padding *
                0.5, 0, 0).rectangleWithWidth(24, 1).rectangleWithHeight(24, 0.5);
        }
        if (this.overflowLabel) {
            //this.overflowLabel.frame = bounds.rectangleWithInsets(padding, padding, 0, 0).rectangleWithInsets(0, this._rightImageView.bounds.width || 0, 0, 0).rectangleWithWidth(36, 1);
            //this.titleLabel.style.maxWidth = "" + (bounds.width - (bounds.width - this.titleLabel.viewHTMLElement.offsetLeft - (this.overflowLabel.frame.x || 0)))
            this.overflowLabel.style.width = "36px";
            this.overflowLabel.style.right = "32px";
            this.overflowLabel.centerYInContainer();
            this.titleLabel.style.marginRight = "60px";
            //this.overflowLabel.centerYInContainer();
            //this.titleLabel.frame = this.titleLabel.frame.rectangleWithWidth(bounds.width - (bounds.width - this.titleLabel.frame.x - (this.overflowLabel.frame.x || 0)))
        }
    }
}
SearchableDropdown.controlEvent = Object.assign({}, UIView.controlEvent, {
    "SelectionDidChange": "SelectionDidChange"
});
///<reference path="UIView.ts"/>
class UIActionIndicator extends UIView {
    constructor(elementID) {
        super(elementID);
        this._size = 50;
        this._class = UIActionIndicator;
        this.superclass = UIView;
        this.indicatorView = new UIView(this.elementID + "IndicatorView");
        this.addSubview(this.indicatorView);
        this.indicatorView.viewHTMLElement.classList.add("LukeHaasLoader");
        this.hidden = YES;
    }
    set size(size) {
        this._size = size;
        this.setNeedsLayoutUpToRootView();
    }
    get size() {
        return this._size;
    }
    set hidden(hidden) {
        super.hidden = hidden;
        if (hidden) {
            this.indicatorView.removeFromSuperview();
        }
        else {
            this.addSubview(this.indicatorView);
        }
    }
    start() {
        this.hidden = NO;
    }
    stop() {
        this.hidden = YES;
    }
    layoutSubviews() {
        super.layoutSubviews();
        const bounds = this.bounds;
        //this.indicatorView.centerInContainer();
        this.indicatorView.style.height = "" + this._size.integerValue + "px";
        this.indicatorView.style.width = "" + this._size.integerValue + "px";
        const minSize = Math.min(this.bounds.height, this.bounds.width);
        this.indicatorView.style.maxHeight = "" + minSize.integerValue + "px";
        this.indicatorView.style.maxWidth = "" + minSize.integerValue + "px";
        const size = Math.min(this._size, minSize);
        this.indicatorView.style.left = "" + ((bounds.width - size) * 0.5 - 11).integerValue + "px";
        this.indicatorView.style.top = "" + ((bounds.height - size) * 0.5 - 11).integerValue + "px";
    }
}
///<reference path="UIView.ts"/>
class UIDateTimeInput extends UIView {
    constructor(elementID, type = UIDateTimeInput.type.DateTime) {
        super(elementID, nil, "input");
        this._class = UIDateTimeInput;
        this.superclass = UIView;
        this.viewHTMLElement.setAttribute("type", type);
        this.viewHTMLElement.onchange = (event) => {
            this.sendControlEventForKey(UIDateTimeInput.controlEvent.ValueChange, event);
        };
    }
    get addControlEventTarget() {
        return super.addControlEventTarget;
    }
    get date() {
        const result = new Date(this.viewHTMLElement.value);
        return result;
    }
}
UIDateTimeInput.controlEvent = Object.assign({}, UIView.controlEvent, {
    "ValueChange": "ValueChange"
});
UIDateTimeInput.type = {
    "Date": "date",
    "Time": "time",
    "DateTime": "datetime"
};
UIDateTimeInput.format = {
    "European": "DD-MM-YYYY",
    "ISOComputer": "YYYY-MM-DD",
    "American": "MM/DD/YYYY"
};
///<reference path="UIObject.ts"/>
class UIKeyValueStringSorter extends UIObject {
    constructor(useSeparateWebWorker = NO) {
        super();
        this._isThreadClosed = NO;
        this._webWorker = UIKeyValueStringSorter._sharedWebWorker;
        this._class = UIKeyValueStringSorter;
        this.superclass = UIObject;
        if (useSeparateWebWorker) {
            this._webWorker = new Worker("compiledScripts/UIKeyValueStringSorterWebWorker.js");
        }
        UIKeyValueStringSorter._instanceNumber = UIKeyValueStringSorter._instanceNumber + 1;
        this._instanceNumber = UIKeyValueStringSorter._instanceNumber;
    }
    get instanceIdentifier() {
        return this._instanceNumber;
    }
    sortData(data, sortingInstructions, identifier, completion) {
        if (this._isThreadClosed) {
            return;
        }
        const startTime = Date.now();
        const instanceIdentifier = this.instanceIdentifier;
        this._webWorker.onmessage = function (message) {
            if (message.data.instanceIdentifier == instanceIdentifier) {
                console.log("Sorting " + data.length + " items took " + (Date.now() - startTime) + " ms.");
                completion(message.data.sortedData, message.data.sortedIndexes, message.data.identifier);
            }
        };
        try {
            this._webWorker.postMessage({
                "data": data,
                "sortingInstructions": sortingInstructions,
                "identifier": identifier,
                "instanceIdentifier": instanceIdentifier
            });
        }
        catch (exception) {
            completion([], [], identifier);
        }
    }
    sortedData(data, sortingInstructions, identifier = MAKE_ID()) {
        const result = new Promise((resolve, reject) => {
            this.sortData(data, sortingInstructions, identifier, (sortedData, sortedIndexes, sortedIdentifier) => {
                if (sortedIdentifier == identifier) {
                    resolve({
                        sortedData: sortedData,
                        sortedIndexes: sortedIndexes,
                        identifier: sortedIdentifier
                    });
                }
            });
        });
        return result;
    }
    closeThread() {
        this._isThreadClosed = YES;
        if (this._webWorker != UIKeyValueStringSorter._sharedWebWorker) {
            this._webWorker.terminate();
        }
    }
}
UIKeyValueStringSorter._sharedWebWorker = new Worker("compiledScripts/UIKeyValueStringSorterWebWorker.js");
UIKeyValueStringSorter._instanceNumber = -1;
UIKeyValueStringSorter.dataType = {
    "string": "string"
};
UIKeyValueStringSorter.direction = {
    "descending": "descending",
    "ascending": "ascending"
};
///<reference path="UIObject.ts"/>
class UILayoutGrid extends UIObject {
    constructor(frame) {
        super();
        this._subframes = [];
        this._class = UILayoutGrid;
        this.superclass = UIObject;
        this._frame = frame;
    }
    splitXInto(numberOfFrames) {
        if (this._subframes.length == 0) {
            for (var i = 0; i < numberOfFrames; i++) {
                const asd = 1;
            }
        }
    }
}
/// <reference path="./UIView.ts" />
class UIScrollView extends UIView {
    constructor(elementID, viewHTMLElement) {
        super(elementID, viewHTMLElement);
        this._contentOffset = new UIPoint(0, 0);
        this._contentScale = 1;
        this._scrollEnabled = YES;
        this._class = UIScrollView;
        this.superclass = UIView;
        this.containerView = new UIView(elementID + "ContainerView");
        super.addSubview(this.containerView);
        this.style.overflow = "hidden";
        this.pausesPointerEvents = NO; //YES;
        this.addTargetForControlEvent(UIView.controlEvent.PointerDown, function () {
            this._pointerDown = YES;
        }.bind(this));
        this.addTargetForControlEvent(UIView.controlEvent.PointerUp, function () {
            this._pointerDown = NO;
            this._previousClientPoint = null;
            scrollStopped();
        }.bind(this));
        function scrollStopped() {
            // Handle paging if needed
        }
        this.addTargetForControlEvent(UIView.controlEvent.PointerMove, function (sender, event) {
            if (!(this._pointerDown && this._scrollEnabled && this._enabled)) {
                return;
            }
            const currentClientPoint = new UIPoint(nil, nil);
            if (window.MouseEvent && event instanceof MouseEvent) {
                currentClientPoint.x = event.clientX;
                currentClientPoint.y = event.clientY;
            }
            if (window.TouchEvent && event instanceof TouchEvent) {
                const touchEvent = event;
                if (touchEvent.touches.length != 1) {
                    this._pointerDown = NO;
                    this._previousClientPoint = null;
                    scrollStopped();
                    return;
                }
                currentClientPoint.x = touchEvent.touches[0].clientX;
                currentClientPoint.y = touchEvent.touches[0].clientY;
            }
            if (!this._previousClientPoint) {
                this._previousClientPoint = currentClientPoint;
                return;
            }
            const changePoint = currentClientPoint.copy().subtract(this._previousClientPoint);
            if (this.containerView.bounds.width <= this.bounds.width) {
                changePoint.x = 0;
            }
            if (0 < this.contentOffset.x + changePoint.x) {
                changePoint.x = -this.contentOffset.x;
            }
            if (this.contentOffset.x + changePoint.x < -this.bounds.width) {
                changePoint.x = -this.bounds.width - this.contentOffset.x;
            }
            if (this.containerView.bounds.height <= this.bounds.height) {
                changePoint.y = 0;
            }
            if (0 < this.contentOffset.y + changePoint.y) {
                changePoint.y = -this.contentOffset.y;
            }
            if (this.contentOffset.y + changePoint.y < -this.bounds.height) {
                changePoint.y = -this.bounds.height - this.contentOffset.y;
            }
            this.contentOffset = this.contentOffset.add(changePoint);
            this._previousClientPoint = currentClientPoint;
        }.bind(this));
    }
    invalidateIntrinsicContentFrame() {
        this._intrinsicContentFrame = nil;
    }
    get contentOffset() {
        return this._contentOffset;
    }
    set contentOffset(offset) {
        this._contentOffset = offset;
        this.setNeedsLayout();
    }
    layoutSubviews() {
        super.layoutSubviews();
        // var intrinsicContentFrame = this._intrinsicContentFrame;
        // if (!IS(intrinsicContentFrame)) {
        //     intrinsicContentFrame = this.containerView.intrinsicContentSizeWithConstraints();   
        // }
        // intrinsicContentFrame.offsetByPoint(this.contentOffset);
        // intrinsicContentFrame.height = this.containerView.viewHTMLElement.scrollHeight;
        // intrinsicContentFrame.width = this.containerView.viewHTMLElement.scrollWidth;
        // this.containerView.frame = intrinsicContentFrame;
        this.containerView.frame = this.containerView.bounds.offsetByPoint(this.contentOffset);
    }
    // get _subviews() {
    //     return super.subviews;
    // }
    // set _subviews(subviews: UIView[]) {
    //     super.subviews = subviews;
    // }
    // get subviews() {
    //     return this.containerView.subviews;
    // }
    // set subviews(subviews: UIView[]) {
    //     this.containerView.subviews = subviews;
    //     this.invalidateIntrinsicContentFrame();
    // }
    hasSubview(view) {
        return this.containerView.hasSubview(view);
    }
    addSubview(view) {
        this.containerView.addSubview(view);
        this.invalidateIntrinsicContentFrame();
    }
}
///<reference path="UIView.ts"/>
class UISlideScrollerView extends UIView {
    constructor(elementID, viewHTMLElement) {
        super(elementID, viewHTMLElement);
        this._targetIndex = 0;
        this._isAnimating = NO;
        this._isAnimationOngoing = NO;
        this._animationTimer = nil;
        this._slideViews = [];
        this.wrapAround = YES;
        this.animationDuration = 0.35;
        this.animationDelay = 2;
        this._currentPageIndex = 0;
        this._class = UIScrollView;
        this.superclass = UIView;
        this._scrollView = new UIScrollView(elementID + "ScrollView");
        this.addSubview(this._scrollView);
        this._scrollView._scrollEnabled = NO;
        this._scrollView.addTargetForControlEvent(UIView.controlEvent.PointerMove, function (sender, event) {
            if (event instanceof MouseEvent) {
                this._animationTimer.invalidate();
            }
        }.bind(this));
        this._scrollView.addTargetForControlEvent(UIView.controlEvent.PointerLeave, function () {
            if (this._isAnimating && event instanceof MouseEvent) {
                this.startAnimating();
            }
        }.bind(this));
        // Touch events
        this._scrollView.addTargetForControlEvent(UIView.controlEvent.PointerDown, function (sender, event) {
            if (event instanceof TouchEvent) {
                this._animationTimer.invalidate();
            }
        }.bind(this));
        this._scrollView.addTargetForControlEvents([
            UIView.controlEvent.PointerUp, UIView.controlEvent.PointerCancel
        ], function (sender, event) {
            if (event instanceof TouchEvent && this._isAnimating) {
                this.startAnimating();
            }
        }.bind(this));
        // Page indicator
        this.pageIndicatorsView = new UIView(elementID + "PageIndicatorsView");
        this.addSubview(this.pageIndicatorsView);
    }
    buttonForPageIndicatorWithIndex(index) {
        const result = new UIButton(this.viewHTMLElement.id + "PageIndicatorButton" + index);
        result.addTargetForControlEvents([
            UIView.controlEvent.PointerUpInside, UIView.controlEvent.EnterUp
        ], function (sender, event) {
            this.scrollToPageWithIndex(index, YES);
            if (this._isAnimating) {
                this.startAnimating();
            }
        }.bind(this));
        result.addTargetForControlEvent(UIView.controlEvent.PointerMove, function () {
            this._animationTimer.invalidate();
        }.bind(this));
        result.updateContentForNormalState = function () {
            result.backgroundColor = UIColor.blueColor;
            result.titleLabel.textColor = UIColor.whiteColor;
        };
        result.frame = new UIRectangle(nil, nil, 20, 50);
        // result.style.height = "20px";
        // result.style.width = "50px";
        result.style.display = "table-cell";
        result.style.position = "relative";
        // var resultContent = new UIView(result.viewHTMLElement.id + "Content");
        // resultContent.backgroundColor = UIColor.whiteColor;
        // resultContent.centerYInContainer();
        // resultContent.style.height = "10px";
        // resultContent.style.height = "100%";
        // resultContent.style.borderRadius = "5px";
        // result.addSubview(resultContent);
        return result;
    }
    addSlideView(view) {
        this.slideViews.push(view);
        this.updateSlideViews();
    }
    set slideViews(views) {
        this._slideViews = views;
        this.updateSlideViews();
    }
    get slideViews() {
        return this._slideViews;
    }
    get currentPageIndex() {
        const result = this._currentPageIndex;
        return result;
    }
    set currentPageIndex(index) {
        this._currentPageIndex = index;
        this._slideViews[index].willAppear();
        //this._scrollView.contentOffset.x = -this._slideViews[index].frame.min.x; //-this.bounds.width * index;
        //this._scrollView.contentOffset.x = Math.round(this._scrollView.contentOffset.x);
        this._scrollView.contentOffset = this._scrollView.contentOffset.pointWithX(-this._slideViews[index].frame.min.x);
        this.pageIndicatorsView.subviews.forEach(function (button, index, array) {
            button.selected = NO;
        });
        this.pageIndicatorsView.subviews[index].selected = YES;
    }
    scrollToPreviousPage(animated) {
        if (this.slideViews.length == 0) {
            return;
        }
        var targetIndex = this.currentPageIndex;
        if (this.wrapAround) {
            targetIndex = (this.currentPageIndex - 1) % (this.slideViews.length);
        }
        else if (this.currentPageIndex - 1 < this.slideViews.length) {
            targetIndex = this.currentPageIndex - 1;
        }
        else {
            return;
        }
        this.scrollToPageWithIndex(targetIndex, animated);
    }
    scrollToNextPage(animated) {
        if (this.slideViews.length == 0) {
            return;
        }
        var targetIndex = this.currentPageIndex;
        if (this.wrapAround) {
            targetIndex = (this.currentPageIndex + 1) % (this.slideViews.length);
        }
        else if (this.currentPageIndex + 1 < this.slideViews.length) {
            targetIndex = this.currentPageIndex + 1;
        }
        else {
            return;
        }
        this.scrollToPageWithIndex(targetIndex, animated);
    }
    scrollToPageWithIndex(targetIndex, animated = YES) {
        this._targetIndex = targetIndex;
        // this._slideViews[this.currentPageIndex]._shouldLayout = NO;
        // this._slideViews[this._targetIndex]._shouldLayout = YES;
        //this._slideViews[this._targetIndex].hidden = NO;
        this.willScrollToPageWithIndex(targetIndex);
        this._isAnimationOngoing = YES;
        //var previousView = this._slideViews[this.currentPageIndex];
        if (animated) {
            UIView.animateViewOrViewsWithDurationDelayAndFunction(this._scrollView.containerView, this.animationDuration, 0, undefined, function () {
                this.currentPageIndex = targetIndex;
            }.bind(this), function () {
                this.didScrollToPageWithIndex(targetIndex);
                this._isAnimationOngoing = NO;
                //previousView.hidden = YES;
            }.bind(this));
        }
        else {
            this.currentPageIndex = targetIndex;
            this.didScrollToPageWithIndex(targetIndex);
            //previousView.hidden = YES;
        }
    }
    willScrollToPageWithIndex(index) {
        const targetView = this.slideViews[index];
        if (IS(targetView) && targetView.willAppear && targetView.willAppear instanceof Function) {
            targetView.willAppear();
        }
    }
    didScrollToPageWithIndex(index) {
    }
    startAnimating() {
        this._isAnimating = YES;
        this._animationTimer.invalidate();
        this._animationTimer = new UITimer(this.animationDelay + this.animationDuration, YES, function () {
            this.scrollToNextPage(YES);
        }.bind(this));
    }
    stopAnimating() {
        this._isAnimating = NO;
        this._animationTimer.invalidate();
    }
    updateSlideViews() {
        this._scrollView.containerView.subviews.slice().forEach(function (subview, index, array) {
            subview.removeFromSuperview();
        });
        this.pageIndicatorsView.subviews.slice().forEach(function (subview, index, array) {
            subview.removeFromSuperview();
        });
        this._slideViews.forEach(function (view, index, array) {
            this._scrollView.addSubview(view);
            this.pageIndicatorsView.addSubview(this.buttonForPageIndicatorWithIndex(index));
        }.bind(this));
    }
    didReceiveBroadcastEvent(event) {
        super.didReceiveBroadcastEvent(event);
        if (event.name == UICore.broadcastEventName.WindowDidResize) {
            this.currentPageIndex = this.currentPageIndex;
        }
    }
    set frame(frame) {
        super.frame = frame;
        this.currentPageIndex = this.currentPageIndex;
    }
    get frame() {
        return super.frame;
    }
    layoutSubviews() {
        super.layoutSubviews();
        if (this.bounds.isEqualTo(this._previousLayoutBounds)) {
            return;
        }
        const bounds = this.bounds;
        this._previousLayoutBounds = bounds;
        this._scrollView.frame = bounds;
        this._scrollView.containerView.frame = bounds.rectangleWithWidth(bounds.width *
            this.slideViews.length).performFunctionWithSelf(function (self) {
            self.offsetByPoint(this._scrollView.contentOffset);
            return self;
        }.bind(this));
        this._slideViews.forEach(function (view, index, array) {
            view.frame = bounds.rectangleWithX((this.bounds.width + 1) * index);
        }.bind(this));
        this.layoutPageIndicators();
    }
    layoutPageIndicators() {
        this.pageIndicatorsView.centerXInContainer();
        this.pageIndicatorsView.style.bottom = "20px";
        this.pageIndicatorsView.style.height = "20px";
        this.pageIndicatorsView.style.display = "table-row";
    }
    removeFromSuperview() {
        super.removeFromSuperview();
        this.stopAnimating();
    }
}
///<reference path="UIObject.ts"/>
class UIStringFilter extends UIObject {
    constructor(useSeparateWebWorker = NO) {
        super();
        this._isThreadClosed = NO;
        this._webWorker = UIStringFilter._sharedWebWorker;
        this._class = UIStringFilter;
        this.superclass = UIObject;
        if (useSeparateWebWorker) {
            this._webWorker = new Worker("compiledScripts/UIStringFilterWebWorker.js");
        }
        UIStringFilter._instanceNumber = UIStringFilter._instanceNumber + 1;
        this._instanceNumber = UIStringFilter._instanceNumber;
    }
    get instanceIdentifier() {
        return this._instanceNumber;
    }
    filterData(filteringString, data, excludedData, identifier, completion) {
        if (this._isThreadClosed) {
            return;
        }
        //var startTime = Date.now();
        const instanceIdentifier = this.instanceIdentifier;
        this._webWorker.onmessage = function (message) {
            if (message.data.instanceIdentifier == instanceIdentifier) {
                //console.log("Filtering took " + (Date.now() - startTime) + " ms");
                completion(message.data.filteredData, message.data.filteredIndexes, message.data.identifier);
            }
        };
        this._webWorker.postMessage({
            "filteringString": filteringString,
            "data": data,
            "excludedData": excludedData,
            "identifier": identifier,
            "instanceIdentifier": instanceIdentifier
        });
    }
    filteredData(filteringString, data, excludedData = [], identifier = MAKE_ID()) {
        const result = new Promise((resolve, reject) => {
            this.filterData(filteringString, data, excludedData, identifier, (filteredData, filteredIndexes, filteredIdentifier) => {
                if (filteredIdentifier == identifier) {
                    resolve({
                        filteredData: filteredData,
                        filteredIndexes: filteredIndexes,
                        identifier: filteredIdentifier
                    });
                }
            });
        });
        return result;
    }
    closeThread() {
        this._isThreadClosed = YES;
        if (this._webWorker != UIStringFilter._sharedWebWorker) {
            this._webWorker.terminate();
        }
    }
}
UIStringFilter._sharedWebWorker = new Worker("compiledScripts/UIStringFilterWebWorker.js");
UIStringFilter._instanceNumber = -1;
/// <reference path="UITextField.ts" />
class UITextArea extends UITextField {
    constructor(elementID, viewHTMLElement = null) {
        super(elementID, viewHTMLElement, UITextView.type.textArea);
        this._class = UITextArea;
        this.superclass = UITextField;
        this.viewHTMLElement.removeAttribute("type");
        this.style.overflow = "auto";
        this.style.webkitUserSelect = "text";
        this.pausesPointerEvents = NO;
    }
    get addControlEventTarget() {
        return super.addControlEventTarget;
    }
    // @ts-ignore
    get viewHTMLElement() {
        // @ts-ignore
        return super.viewHTMLElement;
    }
}
///<reference path="UIObject.ts"/>
class UITimer extends UIObject {
    constructor(interval, repeats, target) {
        super();
        this.interval = interval;
        this.repeats = repeats;
        this.target = target;
        this.isValid = YES;
        this.superclass = UIObject;
        this.schedule();
    }
    schedule() {
        const callback = function () {
            if (this.repeats == NO) {
                this.invalidate();
            }
            this.target();
        }.bind(this);
        this._intervalID = window.setInterval(callback, this.interval * 1000);
    }
    reschedule() {
        this.invalidate();
        this.schedule();
    }
    fire() {
        if (this.repeats == NO) {
            this.invalidate();
        }
        else {
            this.reschedule();
        }
        this.target();
    }
    invalidate() {
        if (this.isValid) {
            clearInterval(this._intervalID);
            this.isValid = NO;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NjcmlwdHMvVUlDb3JlL1VJT2JqZWN0LnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlDb2xvci50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJUG9pbnQudHMiLCIuLi9zY3JpcHRzL1VJQ29yZS9VSVJlY3RhbmdsZS50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJVmlldy50cyIsIi4uL3NjcmlwdHMvQm90dG9tQmFyVmlldy50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJQ29yZUV4dGVuc2lvbnMudHMiLCIuLi9zY3JpcHRzL0N1c3RvbSBjb21wb25lbnRzL0NCU29ja2V0Q2FsbGJhY2tIb2xkZXIudHMiLCIuLi9zY3JpcHRzL0N1c3RvbSBjb21wb25lbnRzL0NCU29ja2V0Q2xpZW50LnRzIiwiLi4vc2NyaXB0cy9DQkNvcmUudHMiLCIuLi9zY3JpcHRzL1VJQ29yZS9VSVZpZXdDb250cm9sbGVyLnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlEaWFsb2dWaWV3LnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlCYXNlQnV0dG9uLnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlMaW5rLnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlMaW5rQnV0dG9uLnRzIiwiLi4vc2NyaXB0cy9Sb290Vmlld0NvbnRyb2xsZXIudHMiLCIuLi9zY3JpcHRzL1VJQ29yZS9VSVJvdXRlLnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlDb3JlLnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlUZXh0Vmlldy50cyIsIi4uL3NjcmlwdHMvR0VURUxFQ1RhYmxlVmlld0NvbnRyb2xsZXIudHMiLCIuLi9zY3JpcHRzL0dFVEVMRUNWaWV3Q29udHJvbGxlci50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJQnV0dG9uLnRzIiwiLi4vc2NyaXB0cy9DdXN0b20gY29tcG9uZW50cy9DQkJ1dHRvbi50cyIsIi4uL3NjcmlwdHMvQ3VzdG9tIGNvbXBvbmVudHMvQ0JDaGVja2JveC50cyIsIi4uL3NjcmlwdHMvQ3VzdG9tIGNvbXBvbmVudHMvQ0JDb2xvci50cyIsIi4uL3NjcmlwdHMvQ3VzdG9tIGNvbXBvbmVudHMvQ0JGbGF0QnV0dG9uLnRzIiwiLi4vc2NyaXB0cy9DdXN0b20gY29tcG9uZW50cy9Sb3dWaWV3LnRzIiwiLi4vc2NyaXB0cy9DdXN0b20gY29tcG9uZW50cy9DQkRpYWxvZ1ZpZXcudHMiLCIuLi9zY3JpcHRzL0N1c3RvbSBjb21wb25lbnRzL0xhbmd1YWdlU2VydmljZS50cyIsIi4uL3NjcmlwdHMvQ3VzdG9tIGNvbXBvbmVudHMvQ0JEaWFsb2dWaWV3U2hvd2VyLnRzIiwiLi4vc2NyaXB0cy9DdXN0b20gY29tcG9uZW50cy9DQkxpbmtCdXR0b24udHMiLCIuLi9zY3JpcHRzL0N1c3RvbSBjb21wb25lbnRzL0NlbGxWaWV3LnRzIiwiLi4vc2NyaXB0cy9DdXN0b20gY29tcG9uZW50cy9TZWFyY2hUZXh0RmllbGQudHMiLCIuLi9zY3JpcHRzL1VJQ29yZS9VSUtleVZhbHVlU3RyaW5nRmlsdGVyLnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlOYXRpdmVTY3JvbGxWaWV3LnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlUYWJsZVZpZXcudHMiLCIuLi9zY3JpcHRzL1VJQ29yZS9VSUltYWdlVmlldy50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJVGV4dEZpZWxkLnRzIiwiLi4vc2NyaXB0cy9DdXN0b20gY29tcG9uZW50cy9TZWFyY2hhYmxlRHJvcGRvd25Sb3cudHMiLCIuLi9zY3JpcHRzL0N1c3RvbSBjb21wb25lbnRzL1NlYXJjaGFibGVEcm9wZG93bi50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJQWN0aW9uSW5kaWNhdG9yLnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlEYXRlVGltZUlucHV0LnRzIiwiLi4vc2NyaXB0cy9VSUNvcmUvVUlLZXlWYWx1ZVN0cmluZ1NvcnRlci50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJTGF5b3V0R3JpZC50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJU2Nyb2xsVmlldy50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJU2xpZGVTY3JvbGxlclZpZXcudHMiLCIuLi9zY3JpcHRzL1VJQ29yZS9VSVN0cmluZ0ZpbHRlci50cyIsIi4uL3NjcmlwdHMvVUlDb3JlL1VJVGV4dEFyZWEudHMiLCIuLi9zY3JpcHRzL1VJQ29yZS9VSVRpbWVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLFNBQVMsV0FBVztJQUNoQixPQUFPLEdBQUcsQ0FBQTtBQUNkLENBQUM7QUFFRCxJQUFJLEdBQUcsR0FBUSxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7SUFFdkYsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJO1FBRVosSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLFdBQVcsRUFBRTtZQUU1QixPQUFPLFVBQVUsSUFBSTtnQkFDakIsSUFBSSxJQUFJLElBQUksUUFBUSxFQUFFO29CQUNsQixPQUFPLENBQUMsQ0FBQTtpQkFDWDtnQkFDRCxJQUFJLElBQUksSUFBSSxRQUFRLEVBQUU7b0JBQ2xCLE9BQU8sRUFBRSxDQUFBO2lCQUNaO2dCQUNELE9BQU8sS0FBSyxDQUFBO1lBQ2hCLENBQUMsQ0FBQTtTQUVKO1FBRUQsSUFBSSxJQUFJLElBQUksVUFBVSxFQUFFO1lBRXBCLE9BQU8sU0FBUyxRQUFRO2dCQUNwQixPQUFPLEVBQUUsQ0FBQTtZQUNiLENBQUMsQ0FBQTtTQUVKO1FBRUQsT0FBTyxXQUFXLEVBQUUsQ0FBQTtJQUN4QixDQUFDO0lBRUQsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSztRQUNuQixPQUFPLFdBQVcsRUFBRSxDQUFBO0lBQ3hCLENBQUM7Q0FFSixDQUFDLENBQUE7QUFHRixTQUFTLFNBQVMsQ0FBSSxNQUFVO0lBRzVCLElBQUksTUFBTSxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUVqQyxJQUFJLE1BQU0sWUFBWSxNQUFNLElBQUksQ0FBQyxDQUFDLE1BQU0sWUFBWSxRQUFRLENBQUMsRUFBRTtRQUUzRCxNQUFNLEdBQUcsSUFBSSxLQUFLLENBQUMsTUFBb0IsRUFBRTtZQUVyQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUk7Z0JBRVosSUFBSSxJQUFJLElBQUksb0JBQW9CLEVBQUU7b0JBRTlCLE9BQU8sTUFBTSxDQUFBO2lCQUVoQjtnQkFHRCxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQTtnQkFFdkMsSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUU7b0JBRTNCLE9BQU8sU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFBO2lCQUUxQjtnQkFFRCxJQUFJLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUV6QixPQUFPLEtBQUssQ0FBQTtpQkFFZjtnQkFFRCxPQUFPLEdBQUcsQ0FBQTtZQUVkLENBQUM7U0FFSixDQUFDLENBQUE7S0FFTDtJQUVELE9BQU8sTUFBTSxDQUFBO0FBRWpCLENBQUM7QUFHRCxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUE7QUFDaEIsTUFBTSxFQUFFLEdBQUcsS0FBSyxDQUFBO0FBRWhCLFNBQVMsRUFBRSxDQUFDLE1BQU07SUFFZCxJQUFJLE1BQU0sSUFBSSxNQUFNLEtBQUssR0FBRyxFQUFFO1FBRTFCLE9BQU8sR0FBRyxDQUFBO0tBRWI7SUFFRCxPQUFPLEVBQUUsQ0FBQTtJQUVULG1DQUFtQztBQUV2QyxDQUFDO0FBRUQsU0FBUyxNQUFNLENBQUMsTUFBTTtJQUVsQixPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBRXRCLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxNQUFNO0lBRXRCLElBQUksTUFBTSxJQUFJLFNBQVMsRUFBRTtRQUVyQixPQUFPLEdBQUcsQ0FBQTtLQUViO0lBRUQsT0FBTyxFQUFFLENBQUE7QUFFYixDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUMsTUFBTTtJQUV4QixPQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBRTlCLENBQUM7QUFFRCxTQUFTLE1BQU0sQ0FBQyxNQUFNO0lBRWxCLElBQUksTUFBTSxLQUFLLEdBQUcsRUFBRTtRQUVoQixPQUFPLEdBQUcsQ0FBQTtLQUViO0lBRUQsT0FBTyxFQUFFLENBQUE7QUFFYixDQUFDO0FBRUQsU0FBUyxVQUFVLENBQUMsTUFBTTtJQUV0QixPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBRTFCLENBQUM7QUFHRCxTQUFTLFlBQVksQ0FBQyxNQUFNO0lBRXhCLE9BQU8sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQTtBQUVyRSxDQUFDO0FBRUQsU0FBUyxnQkFBZ0IsQ0FBQyxNQUFNO0lBRTVCLE9BQU8sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUE7QUFFaEMsQ0FBQztBQUdELFNBQVMsbUJBQW1CLENBQUMsS0FBYTtJQUN0QyxNQUFNLEVBQUUsR0FBRyxjQUFjLENBQUE7SUFDekIsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFBO0FBQ3pCLENBQUM7QUFHRCxTQUFTLFlBQVksQ0FBSSxHQUFHLE9BQVk7SUFFcEMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSztRQUV0RCxPQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUVyQixDQUFDLENBQUMsQ0FBQTtJQUVGLE9BQU8sTUFBTSxJQUFJLEdBQUcsQ0FBQTtBQUV4QixDQUFDO0FBRUQsU0FBUyxLQUFLLENBQUksR0FBRyxPQUFZO0lBRTdCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUs7UUFFdEQsT0FBTyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUE7SUFFckIsQ0FBQyxDQUFDLENBQUE7SUFFRixPQUFPLE1BQU0sSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFBO0FBRXpGLENBQUM7QUFHRCxTQUFTLE9BQU8sQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFO0lBRWxDLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQTtJQUNmLE1BQU0sVUFBVSxHQUFHLGdFQUFnRSxDQUFBO0lBRW5GLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUV2QyxNQUFNLEdBQUcsTUFBTSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUE7S0FFckY7SUFFRCxNQUFNLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQTtJQUU1QixPQUFPLE1BQU0sQ0FBQTtBQUVqQixDQUFDO0FBR0QsU0FBUyxRQUFRLENBQUksS0FBUTtJQUV6QixPQUFPLFVBQVUsR0FBRyxPQUFjO1FBRTlCLE9BQU8sS0FBSyxDQUFBO0lBRWhCLENBQUMsQ0FBQTtBQUVMLENBQUM7QUFtQkQsU0FBUyxFQUFFLENBQVUsS0FBVTtJQUUzQixJQUFJLFlBQVksR0FBRyxHQUFHLENBQUE7SUFDdEIsSUFBSSxZQUFZLEdBQUcsR0FBRyxDQUFBO0lBRXRCLE1BQU0sTUFBTSxHQUFRLFVBQVUsY0FBdUI7UUFDakQsWUFBWSxHQUFHLGNBQWMsQ0FBQTtRQUM3QixPQUFPLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQTtJQUNwQyxDQUFDLENBQUE7SUFHRCxNQUFNLENBQUMsa0JBQWtCLEdBQUc7UUFDeEIsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDWCxPQUFPLFlBQVksRUFBRSxDQUFBO1NBQ3hCO1FBQ0QsT0FBTyxZQUFZLEVBQUUsQ0FBQTtJQUN6QixDQUFDLENBQUE7SUFHRCxNQUFNLENBQUMsa0JBQWtCLENBQUMsT0FBTyxHQUFHLFVBQVUsVUFBZTtRQUV6RCxNQUFNLGNBQWMsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFzRSxDQUFBO1FBQzFHLFlBQVksR0FBRyxjQUFjLENBQUMsa0JBQWtCLENBQUE7UUFFaEQsTUFBTSx3Q0FBd0MsR0FBUTtZQUNsRCxPQUFPLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO1FBQ3RDLENBQUMsQ0FBQTtRQUNELHdDQUF3QyxDQUFDLE9BQU8sR0FBRyxjQUFjLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFBO1FBQzVGLHdDQUF3QyxDQUFDLElBQUksR0FBRyxjQUFjLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFBO1FBRXRGLGNBQWMsQ0FBQyxrQkFBa0IsR0FBRyx3Q0FBd0MsQ0FBQTtRQUU1RSxPQUFPLGNBQWMsQ0FBQTtJQUV6QixDQUFDLENBQUE7SUFHRCxNQUFNLENBQUMsa0JBQWtCLENBQUMsSUFBSSxHQUFHLFVBQVUsY0FBdUI7UUFDOUQsWUFBWSxHQUFHLGNBQWMsQ0FBQTtRQUM3QixPQUFPLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFBO0lBQ3RDLENBQUMsQ0FBQTtJQUdELE9BQU8sTUFBTSxDQUFBO0FBQ2pCLENBQUM7QUFJRCxhQUFhO0FBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUU7SUFFcEIsYUFBYTtJQUNiLE1BQU0sQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFBO0NBRTFCO0FBR0QsTUFBTSxRQUFRO0lBSVY7UUFFSSxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQTtRQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUE7SUFHL0IsQ0FBQztJQUVELElBQVcsS0FBSztRQUNaLE9BQVEsSUFBSSxDQUFDLFdBQW1CLENBQUE7SUFDcEMsQ0FBQztJQUdELElBQVcsVUFBVTtRQUVqQixPQUFRLElBQUksQ0FBQyxXQUFtQixDQUFDLFVBQVUsQ0FBQTtJQUUvQyxDQUFDO0lBRUQsSUFBVyxVQUFVLENBQUMsVUFBZTtRQUNoQyxJQUFJLENBQUMsV0FBbUIsQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO0lBQ3JELENBQUM7SUFNTSxNQUFNLENBQUMsVUFBVSxDQUFJLE1BQVM7UUFFakMsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDaEIsT0FBTyxHQUFHLENBQUE7U0FDYjtRQUVELElBQUksTUFBTSxZQUFZLFFBQVEsRUFBRTtZQUM1QixPQUFPLE1BQU0sQ0FBQTtTQUNoQjtRQUVELE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxRQUFRLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUVwRCxPQUFPLE1BQU0sQ0FBQTtJQUVqQixDQUFDO0lBR0QsYUFBYSxDQUFDLFdBQVc7UUFDckIsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQ25DLE9BQU8sR0FBRyxDQUFBO1NBQ2I7UUFDRCxLQUFLLElBQUksZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUU7WUFDL0csSUFBSSxnQkFBZ0IsSUFBSSxXQUFXLEVBQUU7Z0JBQ2pDLE9BQU8sR0FBRyxDQUFBO2FBQ2I7U0FDSjtRQUNELE9BQU8sRUFBRSxDQUFBO0lBQ2IsQ0FBQztJQUdELGVBQWUsQ0FBQyxXQUFnQjtRQUM1QixPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxXQUFXLENBQUMsQ0FBQTtJQUN0QyxDQUFDO0lBSUQsV0FBVyxDQUFDLEdBQVc7UUFDbkIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDcEIsQ0FBQztJQUVELGVBQWUsQ0FBQyxPQUFlO1FBQzNCLE9BQU8sUUFBUSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDbEQsQ0FBQztJQUVELE1BQU0sQ0FBQyxlQUFlLENBQUMsT0FBZSxFQUFFLE1BQVc7UUFFL0MsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFFakIsT0FBTyxNQUFNLENBQUM7U0FFakI7UUFFRCxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQy9CLElBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQTtRQUUxQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUVsQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFFbkIsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLEVBQUU7Z0JBRTdCLHFHQUFxRztnQkFFckcsYUFBYSxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7Z0JBRS9DLGdDQUFnQztnQkFFaEMsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7Z0JBRXBELE1BQU0sWUFBWSxHQUFHLGFBQWlDLENBQUE7Z0JBRXRELGFBQWEsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLFVBQVUsU0FBUyxFQUFFLEtBQUssRUFBRSxLQUFLO29CQUU5RCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxDQUFBO29CQUVwRSxPQUFPLE1BQU0sQ0FBQTtnQkFFakIsQ0FBQyxDQUFDLENBQUE7Z0JBRUYsTUFBSzthQUVSO1lBRUQsYUFBYSxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUNsQyxJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRTtnQkFDdkIsYUFBYSxHQUFHLEdBQUcsQ0FBQTthQUN0QjtTQUVKO1FBRUQsT0FBTyxhQUFhLENBQUE7SUFFeEIsQ0FBQztJQUVELGtCQUFrQixDQUFDLE9BQWUsRUFBRSxLQUFVLEVBQUUsVUFBVSxHQUFHLEdBQUc7UUFFNUQsT0FBTyxRQUFRLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUE7SUFFeEUsQ0FBQztJQUVELE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxPQUFlLEVBQUUsS0FBVSxFQUFFLGFBQWtCLEVBQUUsVUFBVTtRQUVqRixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQy9CLElBQUksV0FBVyxHQUFHLEVBQUUsQ0FBQTtRQUVwQixJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLO1lBQ3BDLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxFQUFFO2dCQUM5RCxhQUFhLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFBO2dCQUMxQixXQUFXLEdBQUcsR0FBRyxDQUFBO2dCQUNqQixPQUFNO2FBQ1Q7aUJBQ0ksSUFBSSxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUU7Z0JBQzVCLE9BQU07YUFDVDtZQUVELE1BQU0sa0JBQWtCLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQzdDLElBQUksWUFBWSxDQUFDLGtCQUFrQixDQUFDLElBQUksVUFBVSxFQUFFO2dCQUNoRCxhQUFhLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFBO2FBQzFCO1lBQ0QsYUFBYSxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QyxDQUFDLENBQUMsQ0FBQTtRQUVGLE9BQU8sV0FBVyxDQUFBO0lBRXRCLENBQUM7SUFNRCx1QkFBdUIsQ0FBQyxpQkFBc0M7UUFFMUQsT0FBTyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUVsQyxDQUFDO0lBRUQsd0JBQXdCLENBQUMsS0FBYSxFQUFFLGNBQXdCO1FBSTVELElBQUksT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsY0FBYyxDQUFDLENBQUE7SUFJMUMsQ0FBQztDQU1KO0FDeGRELGtDQUFrQztBQW1CbEMsTUFBTSxPQUFRLFNBQVEsUUFBUTtJQUcxQixZQUFtQixXQUFtQjtRQUVsQyxLQUFLLEVBQUUsQ0FBQTtRQUZRLGdCQUFXLEdBQVgsV0FBVyxDQUFRO1FBSWxDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFBO1FBQ3JCLElBQUksQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFBO0lBSTlCLENBQUM7SUFJRCxRQUFRO1FBQ0osT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFBO0lBQzNCLENBQUM7SUFFRCxNQUFNLEtBQUssUUFBUTtRQUNmLE9BQU8sSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDN0IsQ0FBQztJQUVELE1BQU0sS0FBSyxTQUFTO1FBQ2hCLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDOUIsQ0FBQztJQUVELE1BQU0sS0FBSyxVQUFVO1FBQ2pCLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0IsQ0FBQztJQUVELE1BQU0sS0FBSyxXQUFXO1FBQ2xCLE9BQU8sSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUE7SUFDaEMsQ0FBQztJQUVELE1BQU0sS0FBSyxVQUFVO1FBQ2pCLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0IsQ0FBQztJQUVELE1BQU0sS0FBSyxVQUFVO1FBQ2pCLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0IsQ0FBQztJQUVELE1BQU0sS0FBSyxVQUFVO1FBQ2pCLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUE7SUFDL0IsQ0FBQztJQUVELE1BQU0sS0FBSyxTQUFTO1FBQ2hCLE9BQU8sSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDOUIsQ0FBQztJQUVELE1BQU0sS0FBSyxjQUFjO1FBQ3JCLE9BQU8sSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELE1BQU0sS0FBSyxrQkFBa0I7UUFDekIsT0FBTyxJQUFJLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsTUFBTSxLQUFLLGdCQUFnQjtRQUN2QixPQUFPLElBQUksT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFBO0lBQ3JDLENBQUM7SUFFRCxNQUFNLEtBQUssY0FBYztRQUNyQixPQUFPLElBQUksT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBQzFCLENBQUM7SUFFRCxNQUFNLEtBQUssUUFBUTtRQUNmLE9BQU8sSUFBSSxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDMUIsQ0FBQztJQUlELE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBWTtRQUN6QixPQUFPO1lBQ0gsV0FBVyxFQUFFLFNBQVM7WUFDdEIsY0FBYyxFQUFFLFNBQVM7WUFDekIsTUFBTSxFQUFFLFNBQVM7WUFDakIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsZ0JBQWdCLEVBQUUsU0FBUztZQUMzQixNQUFNLEVBQUUsU0FBUztZQUNqQixZQUFZLEVBQUUsU0FBUztZQUN2QixPQUFPLEVBQUUsU0FBUztZQUNsQixXQUFXLEVBQUUsU0FBUztZQUN0QixXQUFXLEVBQUUsU0FBUztZQUN0QixZQUFZLEVBQUUsU0FBUztZQUN2QixXQUFXLEVBQUUsU0FBUztZQUN0QixPQUFPLEVBQUUsU0FBUztZQUNsQixnQkFBZ0IsRUFBRSxTQUFTO1lBQzNCLFVBQVUsRUFBRSxTQUFTO1lBQ3JCLFNBQVMsRUFBRSxTQUFTO1lBQ3BCLE1BQU0sRUFBRSxTQUFTO1lBQ2pCLFVBQVUsRUFBRSxTQUFTO1lBQ3JCLFVBQVUsRUFBRSxTQUFTO1lBQ3JCLGVBQWUsRUFBRSxTQUFTO1lBQzFCLFVBQVUsRUFBRSxTQUFTO1lBQ3JCLFdBQVcsRUFBRSxTQUFTO1lBQ3RCLFdBQVcsRUFBRSxTQUFTO1lBQ3RCLGFBQWEsRUFBRSxTQUFTO1lBQ3hCLGdCQUFnQixFQUFFLFNBQVM7WUFDM0IsWUFBWSxFQUFFLFNBQVM7WUFDdkIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsY0FBYyxFQUFFLFNBQVM7WUFDekIsZUFBZSxFQUFFLFNBQVM7WUFDMUIsZUFBZSxFQUFFLFNBQVM7WUFDMUIsZUFBZSxFQUFFLFNBQVM7WUFDMUIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsVUFBVSxFQUFFLFNBQVM7WUFDckIsYUFBYSxFQUFFLFNBQVM7WUFDeEIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsYUFBYSxFQUFFLFNBQVM7WUFDeEIsYUFBYSxFQUFFLFNBQVM7WUFDeEIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsTUFBTSxFQUFFLFNBQVM7WUFDakIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsTUFBTSxFQUFFLFNBQVM7WUFDakIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsYUFBYSxFQUFFLFNBQVM7WUFDeEIsVUFBVSxFQUFFLFNBQVM7WUFDckIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsVUFBVSxFQUFFLFNBQVM7WUFDckIsZUFBZSxFQUFFLFNBQVM7WUFDMUIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsY0FBYyxFQUFFLFNBQVM7WUFDekIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsc0JBQXNCLEVBQUUsU0FBUztZQUNqQyxXQUFXLEVBQUUsU0FBUztZQUN0QixZQUFZLEVBQUUsU0FBUztZQUN2QixXQUFXLEVBQUUsU0FBUztZQUN0QixhQUFhLEVBQUUsU0FBUztZQUN4QixlQUFlLEVBQUUsU0FBUztZQUMxQixjQUFjLEVBQUUsU0FBUztZQUN6QixnQkFBZ0IsRUFBRSxTQUFTO1lBQzNCLGdCQUFnQixFQUFFLFNBQVM7WUFDM0IsYUFBYSxFQUFFLFNBQVM7WUFDeEIsTUFBTSxFQUFFLFNBQVM7WUFDakIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsa0JBQWtCLEVBQUUsU0FBUztZQUM3QixZQUFZLEVBQUUsU0FBUztZQUN2QixjQUFjLEVBQUUsU0FBUztZQUN6QixjQUFjLEVBQUUsU0FBUztZQUN6QixnQkFBZ0IsRUFBRSxTQUFTO1lBQzNCLGlCQUFpQixFQUFFLFNBQVM7WUFDNUIsbUJBQW1CLEVBQUUsU0FBUztZQUM5QixpQkFBaUIsRUFBRSxTQUFTO1lBQzVCLGlCQUFpQixFQUFFLFNBQVM7WUFDNUIsY0FBYyxFQUFFLFNBQVM7WUFDekIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsVUFBVSxFQUFFLFNBQVM7WUFDckIsYUFBYSxFQUFFLFNBQVM7WUFDeEIsTUFBTSxFQUFFLFNBQVM7WUFDakIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsZUFBZSxFQUFFLFNBQVM7WUFDMUIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsZUFBZSxFQUFFLFNBQVM7WUFDMUIsZUFBZSxFQUFFLFNBQVM7WUFDMUIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsTUFBTSxFQUFFLFNBQVM7WUFDakIsTUFBTSxFQUFFLFNBQVM7WUFDakIsTUFBTSxFQUFFLFNBQVM7WUFDakIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsS0FBSyxFQUFFLFNBQVM7WUFDaEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsYUFBYSxFQUFFLFNBQVM7WUFDeEIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsVUFBVSxFQUFFLFNBQVM7WUFDckIsVUFBVSxFQUFFLFNBQVM7WUFDckIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsTUFBTSxFQUFFLFNBQVM7WUFDakIsYUFBYSxFQUFFLFNBQVM7WUFDeEIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsS0FBSyxFQUFFLFNBQVM7WUFDaEIsTUFBTSxFQUFFLFNBQVM7WUFDakIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsV0FBVyxFQUFFLFNBQVM7WUFDdEIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsT0FBTyxFQUFFLFNBQVM7WUFDbEIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsUUFBUSxFQUFFLFNBQVM7WUFDbkIsYUFBYSxFQUFFLFNBQVM7U0FDM0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQTtJQUN6QixDQUFDO0lBSUQsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFTO1FBQzVCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUNk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R0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFBO1NBQ3BFO1FBQ0QsSUFBSSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUNmLEdBQUcsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtTQUN0RTtRQUVELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUE7UUFDdEIsSUFBSSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRTtZQUNmLEdBQUcsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQTtTQUNwRTtRQUNELElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7WUFDZixHQUFHLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUE7U0FDdEU7UUFFRCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7UUFDdEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3RELE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FB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Q0FBQyxPQUFPLElBQUksRUFBRSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQTtTQUNwQjthQUNJO1lBQ0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFBO1NBQ3BCO1FBQ0QsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFBO0lBQ2pCLENBQUM7SUFFRCxVQUFVO1FBRU4sSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBRWQsYUFBYSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQTtZQUUvQixJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQTtTQUVwQjtJQUlMLENBQUM7Q0FNSiIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5pbEZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuaWxcbn1cblxudmFyIG5pbDogYW55ID0gbmV3IFByb3h5KE9iamVjdC5hc3NpZ24oTmlsRnVuY3Rpb24sIHsgXCJjbGFzc1wiOiBuaWwsIFwiY2xhc3NOYW1lXCI6IFwiTmlsXCIgfSksIHtcbiAgICBcbiAgICBnZXQodGFyZ2V0LCBuYW1lKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAobmFtZSA9PSBTeW1ib2wudG9QcmltaXRpdmUpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChoaW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGhpbnQgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGludCA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChuYW1lID09IFwidG9TdHJpbmdcIikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmlsRnVuY3Rpb24oKVxuICAgIH0sXG4gICAgXG4gICAgc2V0KHRhcmdldCwgbmFtZSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIE5pbEZ1bmN0aW9uKClcbiAgICB9XG4gICAgXG59KVxuXG5cbmZ1bmN0aW9uIHdyYXBJbk5pbDxUPihvYmplY3Q/OiBUKTogVCB7XG4gICAgXG4gICAgXG4gICAgdmFyIHJlc3VsdCA9IEZJUlNUX09SX05JTChvYmplY3QpXG4gICAgXG4gICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIE9iamVjdCAmJiAhKG9iamVjdCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkge1xuICAgICAgICBcbiAgICAgICAgcmVzdWx0ID0gbmV3IFByb3h5KG9iamVjdCBhcyBPYmplY3QgJiBULCB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSBcIndyYXBwZWRfbmlsX3RhcmdldFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IFJlZmxlY3QuZ2V0KHRhcmdldCwgbmFtZSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JhcEluTmlsKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKElTX05PVF9MSUtFX05VTEwodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBuaWxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICAgIFxufVxuXG5cbmNvbnN0IFlFUyA9IHRydWVcbmNvbnN0IE5PID0gZmFsc2VcblxuZnVuY3Rpb24gSVMob2JqZWN0KSB7XG4gICAgXG4gICAgaWYgKG9iamVjdCAmJiBvYmplY3QgIT09IG5pbCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5PXG4gICAgXG4gICAgLy9yZXR1cm4gKG9iamVjdCAhPSBuaWwgJiYgb2JqZWN0KTtcbiAgICBcbn1cblxuZnVuY3Rpb24gSVNfTk9UKG9iamVjdCkge1xuICAgIFxuICAgIHJldHVybiAhSVMob2JqZWN0KVxuICAgIFxufVxuXG5mdW5jdGlvbiBJU19ERUZJTkVEKG9iamVjdCkge1xuICAgIFxuICAgIGlmIChvYmplY3QgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gWUVTXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTk9cbiAgICBcbn1cblxuZnVuY3Rpb24gSVNfVU5ERUZJTkVEKG9iamVjdCkge1xuICAgIFxuICAgIHJldHVybiAhSVNfREVGSU5FRChvYmplY3QpXG4gICAgXG59XG5cbmZ1bmN0aW9uIElTX05JTChvYmplY3QpIHtcbiAgICBcbiAgICBpZiAob2JqZWN0ID09PSBuaWwpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBZRVNcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOT1xuICAgIFxufVxuXG5mdW5jdGlvbiBJU19OT1RfTklMKG9iamVjdCkge1xuICAgIFxuICAgIHJldHVybiAhSVNfTklMKG9iamVjdClcbiAgICBcbn1cblxuXG5mdW5jdGlvbiBJU19MSUtFX05VTEwob2JqZWN0KSB7XG4gICAgXG4gICAgcmV0dXJuIChJU19VTkRFRklORUQob2JqZWN0KSB8fCBJU19OSUwob2JqZWN0KSB8fCBvYmplY3QgPT0gbnVsbClcbiAgICBcbn1cblxuZnVuY3Rpb24gSVNfTk9UX0xJS0VfTlVMTChvYmplY3QpIHtcbiAgICBcbiAgICByZXR1cm4gIUlTX0xJS0VfTlVMTChvYmplY3QpXG4gICAgXG59XG5cblxuZnVuY3Rpb24gSVNfQU5fRU1BSUxfQUREUkVTUyhlbWFpbDogc3RyaW5nKSB7XG4gICAgY29uc3QgcmUgPSAvXFxTK0BcXFMrXFwuXFxTKy9cbiAgICByZXR1cm4gcmUudGVzdChlbWFpbClcbn1cblxuXG5mdW5jdGlvbiBGSVJTVF9PUl9OSUw8VD4oLi4ub2JqZWN0czogVFtdKTogVCB7XG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gb2JqZWN0cy5maW5kKGZ1bmN0aW9uIChvYmplY3QsIGluZGV4LCBhcnJheSkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIElTKG9iamVjdClcbiAgICAgICAgXG4gICAgfSlcbiAgICBcbiAgICByZXR1cm4gcmVzdWx0IHx8IG5pbFxuICAgIFxufVxuXG5mdW5jdGlvbiBGSVJTVDxUPiguLi5vYmplY3RzOiBUW10pOiBUIHtcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBvYmplY3RzLmZpbmQoZnVuY3Rpb24gKG9iamVjdCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gSVMob2JqZWN0KVxuICAgICAgICBcbiAgICB9KVxuICAgIFxuICAgIHJldHVybiByZXN1bHQgfHwgSUYoSVNfREVGSU5FRChvYmplY3RzLmxhc3RFbGVtZW50KSkoUkVUVVJORVIob2JqZWN0cy5sYXN0RWxlbWVudCkpKClcbiAgICBcbn1cblxuXG5mdW5jdGlvbiBNQUtFX0lEKHJhbmRvbVBhcnRMZW5ndGggPSAxNSkge1xuICAgIFxuICAgIHZhciByZXN1bHQgPSBcIlwiXG4gICAgY29uc3QgY2hhcmFjdGVycyA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIlxuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmFuZG9tUGFydExlbmd0aDsgaSsrKSB7XG4gICAgICAgIFxuICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzLmxlbmd0aCkpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZXN1bHQgPSByZXN1bHQgKyBEYXRlLm5vdygpXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICAgIFxufVxuXG5cbmZ1bmN0aW9uIFJFVFVSTkVSPFQ+KHZhbHVlOiBUKSB7XG4gICAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5vYmplY3RzOiBhbnlbXSkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuXG5cblxuXG50eXBlIFVJSUZCbG9ja1JlY2VpdmVyPFQ+ID0gKGZ1bmN0aW9uVG9DYWxsOiAoKSA9PiBhbnkpID0+IFVJSUZFdmFsdWF0b3I8VD47XG5cbnR5cGUgVUlJRkV2YWx1YXRvckJhc2U8VD4gPSAoKSA9PiBUO1xuXG5cbmludGVyZmFjZSBVSUlGRXZhbHVhdG9yPFQ+IGV4dGVuZHMgVUlJRkV2YWx1YXRvckJhc2U8VD4ge1xuICAgIFxuICAgIEVMU0VfSUY6IChvdGhlclZhbHVlOiBhbnkpID0+IFVJSUZCbG9ja1JlY2VpdmVyPFQ+O1xuICAgIEVMU0U6IChmdW5jdGlvblRvQ2FsbDogKCkgPT4gYW55KSA9PiBUO1xuICAgIFxufVxuXG5cbmZ1bmN0aW9uIElGPFQgPSBhbnk+KHZhbHVlOiBhbnkpOiBVSUlGQmxvY2tSZWNlaXZlcjxUPiB7XG4gICAgXG4gICAgdmFyIHRoZW5GdW5jdGlvbiA9IG5pbFxuICAgIHZhciBlbHNlRnVuY3Rpb24gPSBuaWxcbiAgICBcbiAgICBjb25zdCByZXN1bHQ6IGFueSA9IGZ1bmN0aW9uIChmdW5jdGlvblRvQ2FsbDogKCkgPT4gVCkge1xuICAgICAgICB0aGVuRnVuY3Rpb24gPSBmdW5jdGlvblRvQ2FsbFxuICAgICAgICByZXR1cm4gcmVzdWx0LmV2YWx1YXRlQ29uZGl0aW9uc1xuICAgIH1cbiAgICBcbiAgICBcbiAgICByZXN1bHQuZXZhbHVhdGVDb25kaXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoSVModmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhlbkZ1bmN0aW9uKClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxzZUZ1bmN0aW9uKClcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcmVzdWx0LmV2YWx1YXRlQ29uZGl0aW9ucy5FTFNFX0lGID0gZnVuY3Rpb24gKG90aGVyVmFsdWU6IGFueSkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZnVuY3Rpb25SZXN1bHQgPSBJRihvdGhlclZhbHVlKSBhcyAoVUlJRkJsb2NrUmVjZWl2ZXI8VD4gJiB7IGV2YWx1YXRlQ29uZGl0aW9uczogVUlJRkV2YWx1YXRvcjxUPiB9KVxuICAgICAgICBlbHNlRnVuY3Rpb24gPSBmdW5jdGlvblJlc3VsdC5ldmFsdWF0ZUNvbmRpdGlvbnNcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0RXZhbHVhdGVDb25kaXRpb25zRnVuY3Rpb246IGFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZXZhbHVhdGVDb25kaXRpb25zKClcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvblJlc3VsdEV2YWx1YXRlQ29uZGl0aW9uc0Z1bmN0aW9uLkVMU0VfSUYgPSBmdW5jdGlvblJlc3VsdC5ldmFsdWF0ZUNvbmRpdGlvbnMuRUxTRV9JRlxuICAgICAgICBmdW5jdGlvblJlc3VsdEV2YWx1YXRlQ29uZGl0aW9uc0Z1bmN0aW9uLkVMU0UgPSBmdW5jdGlvblJlc3VsdC5ldmFsdWF0ZUNvbmRpdGlvbnMuRUxTRVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb25SZXN1bHQuZXZhbHVhdGVDb25kaXRpb25zID0gZnVuY3Rpb25SZXN1bHRFdmFsdWF0ZUNvbmRpdGlvbnNGdW5jdGlvblxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uUmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICByZXN1bHQuZXZhbHVhdGVDb25kaXRpb25zLkVMU0UgPSBmdW5jdGlvbiAoZnVuY3Rpb25Ub0NhbGw6ICgpID0+IFQpIHtcbiAgICAgICAgZWxzZUZ1bmN0aW9uID0gZnVuY3Rpb25Ub0NhbGxcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5ldmFsdWF0ZUNvbmRpdGlvbnMoKVxuICAgIH1cbiAgICBcbiAgICBcbiAgICByZXR1cm4gcmVzdWx0XG59XG5cblxuXG4vLyBAdHMtaWdub3JlXG5pZiAoIXdpbmRvdy5BdXRvTGF5b3V0KSB7XG4gICAgXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHdpbmRvdy5BdXRvTGF5b3V0ID0gbmlsXG4gICAgXG59XG5cblxuY2xhc3MgVUlPYmplY3Qge1xuICAgIFxuICAgIF9jbGFzczogYW55XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJT2JqZWN0XG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IG5pbC5jbGFzc1xuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgY2xhc3MoKTogYW55IHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmNvbnN0cnVjdG9yIGFzIGFueSlcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcHVibGljIGdldCBzdXBlcmNsYXNzKCk6IGFueSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gKHRoaXMuY29uc3RydWN0b3IgYXMgYW55KS5zdXBlcmNsYXNzXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0IHN1cGVyY2xhc3Moc3VwZXJjbGFzczogYW55KSB7XG4gICAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIGFueSkuc3VwZXJjbGFzcyA9IHN1cGVyY2xhc3NcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgcHVibGljIHN0YXRpYyB3cmFwT2JqZWN0PFQ+KG9iamVjdDogVCk6IFVJT2JqZWN0ICYgVCB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKG9iamVjdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuaWxcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFVJT2JqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IE9iamVjdC5hc3NpZ24obmV3IFVJT2JqZWN0KCksIG9iamVjdClcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGlzS2luZE9mQ2xhc3MoY2xhc3NPYmplY3QpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNNZW1iZXJPZkNsYXNzKGNsYXNzT2JqZWN0KSkge1xuICAgICAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIHN1cGVyY2xhc3NPYmplY3QgPSB0aGlzLnN1cGVyY2xhc3M7IElTKHN1cGVyY2xhc3NPYmplY3QpOyBzdXBlcmNsYXNzT2JqZWN0ID0gc3VwZXJjbGFzc09iamVjdC5zdXBlcmNsYXNzKSB7XG4gICAgICAgICAgICBpZiAoc3VwZXJjbGFzc09iamVjdCA9PSBjbGFzc09iamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBZRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9cbiAgICB9XG4gICAgXG4gICAgXG4gICAgaXNNZW1iZXJPZkNsYXNzKGNsYXNzT2JqZWN0OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmNsYXNzID09IGNsYXNzT2JqZWN0KVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICB2YWx1ZUZvcktleShrZXk6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpc1trZXldXG4gICAgfVxuICAgIFxuICAgIHZhbHVlRm9yS2V5UGF0aChrZXlQYXRoOiBzdHJpbmcpOiBhbnkge1xuICAgICAgICByZXR1cm4gVUlPYmplY3QudmFsdWVGb3JLZXlQYXRoKGtleVBhdGgsIHRoaXMpXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyB2YWx1ZUZvcktleVBhdGgoa2V5UGF0aDogc3RyaW5nLCBvYmplY3Q6IGFueSk6IGFueSB7XG4gICAgXG4gICAgICAgIGlmIChJU19OT1Qoa2V5UGF0aCkpIHtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGtleXMgPSBrZXlQYXRoLnNwbGl0KFwiLlwiKVxuICAgICAgICB2YXIgY3VycmVudE9iamVjdCA9IG9iamVjdFxuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGtleS5zdWJzdHJpbmcoMCwgMikgPT0gXCJbXVwiKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBuZXh0IG9iamVjdCB3aWxsIGJlIGFuIGFycmF5IGFuZCB0aGUgcmVzdCBvZiB0aGUga2V5cyBuZWVkIHRvIGJlIHJ1biBmb3IgZWFjaCBvZiB0aGUgZWxlbWVudHNcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjdXJyZW50T2JqZWN0ID0gY3VycmVudE9iamVjdFtrZXkuc3Vic3RyaW5nKDIpXVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEN1cnJlbnRPYmplY3QgaXMgbm93IGFuIGFycmF5XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nS2V5UGF0aCA9IGtleXMuc2xpY2UoaSArIDEpLmpvaW4oXCIuXCIpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFycmF5ID0gY3VycmVudE9iamVjdCBhcyB1bmtub3duIGFzIGFueVtdXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY3VycmVudE9iamVjdCA9IGN1cnJlbnRBcnJheS5tYXAoZnVuY3Rpb24gKHN1Yk9iamVjdCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBVSU9iamVjdC52YWx1ZUZvcktleVBhdGgocmVtYWluaW5nS2V5UGF0aCwgc3ViT2JqZWN0KVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGN1cnJlbnRPYmplY3QgPSBjdXJyZW50T2JqZWN0W2tleV1cbiAgICAgICAgICAgIGlmIChJU19OT1QoY3VycmVudE9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50T2JqZWN0ID0gbmlsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRPYmplY3RcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldFZhbHVlRm9yS2V5UGF0aChrZXlQYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnksIGNyZWF0ZVBhdGggPSBZRVMpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBVSU9iamVjdC5zZXRWYWx1ZUZvcktleVBhdGgoa2V5UGF0aCwgdmFsdWUsIHRoaXMsIGNyZWF0ZVBhdGgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgc2V0VmFsdWVGb3JLZXlQYXRoKGtleVBhdGg6IHN0cmluZywgdmFsdWU6IGFueSwgY3VycmVudE9iamVjdDogYW55LCBjcmVhdGVQYXRoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBrZXlzID0ga2V5UGF0aC5zcGxpdChcIi5cIilcbiAgICAgICAgdmFyIGRpZFNldFZhbHVlID0gTk9cbiAgICAgICAgXG4gICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSBhcnJheS5sZW5ndGggLSAxICYmIElTX05PVF9MSUtFX05VTEwoY3VycmVudE9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50T2JqZWN0W2tleV0gPSB2YWx1ZVxuICAgICAgICAgICAgICAgIGRpZFNldFZhbHVlID0gWUVTXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChJU19OT1QoY3VycmVudE9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY3VycmVudE9iamVjdFZhbHVlID0gY3VycmVudE9iamVjdFtrZXldXG4gICAgICAgICAgICBpZiAoSVNfTElLRV9OVUxMKGN1cnJlbnRPYmplY3RWYWx1ZSkgJiYgY3JlYXRlUGF0aCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRPYmplY3Rba2V5XSA9IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50T2JqZWN0ID0gY3VycmVudE9iamVjdFtrZXldXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGlkU2V0VmFsdWVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHBlcmZvcm1GdW5jdGlvbldpdGhTZWxmKGZ1bmN0aW9uVG9QZXJmb3JtOiAoc2VsZjogdGhpcykgPT4gYW55KSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZnVuY3Rpb25Ub1BlcmZvcm0odGhpcylcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHBlcmZvcm1GdW5jdGlvbldpdGhEZWxheShkZWxheTogbnVtYmVyLCBmdW5jdGlvblRvQ2FsbDogRnVuY3Rpb24pIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgbmV3IFVJVGltZXIoZGVsYXksIE5PLCBmdW5jdGlvblRvQ2FsbClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJVSU9iamVjdC50c1wiLz5cblxuXG5cblxuXG5pbnRlcmZhY2UgVUlDb2xvckRlc2NyaXB0b3Ige1xuICAgIFxuICAgIHJlZDogbnVtYmVyO1xuICAgIGdyZWVuOiBudW1iZXI7XG4gICAgYmx1ZTogbnVtYmVyO1xuICAgIGFscGhhPzogbnVtYmVyO1xuICAgIFxufVxuXG5cblxuXG5cbmNsYXNzIFVJQ29sb3IgZXh0ZW5kcyBVSU9iamVjdCB7XG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IocHVibGljIHN0cmluZ1ZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlDb2xvclxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSU9iamVjdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nVmFsdWVcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGdldCByZWRDb2xvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVSUNvbG9yKFwicmVkXCIpXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgYmx1ZUNvbG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVJQ29sb3IoXCJibHVlXCIpXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgZ3JlZW5Db2xvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVSUNvbG9yKFwiZ3JlZW5cIilcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGdldCB5ZWxsb3dDb2xvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVSUNvbG9yKFwieWVsbG93XCIpXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgYmxhY2tDb2xvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVSUNvbG9yKFwiYmxhY2tcIilcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGdldCBicm93bkNvbG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVJQ29sb3IoXCJicm93blwiKVxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IHdoaXRlQ29sb3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVUlDb2xvcihcIndoaXRlXCIpXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgZ3JleUNvbG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVJQ29sb3IoXCJncmV5XCIpXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgbGlnaHRHcmV5Q29sb3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVUlDb2xvcihcImxpZ2h0Z3JleVwiKVxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IHRoZUNob3NlbkdyZXlDb2xvcigpe1xuICAgICAgICByZXR1cm4gbmV3IFVJQ29sb3IoXCIjZTFlMWUxXCIpO1xuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IHRyYW5zcGFyZW50Q29sb3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVUlDb2xvcihcInRyYW5zcGFyZW50XCIpXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgdW5kZWZpbmVkQ29sb3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVUlDb2xvcihcIlwiKVxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IG5pbENvbG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVJQ29sb3IoXCJcIilcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIG5hbWVUb0hleChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiYWxpY2VibHVlXCI6IFwiI2YwZjhmZlwiLFxuICAgICAgICAgICAgXCJhbnRpcXVld2hpdGVcIjogXCIjZmFlYmQ3XCIsXG4gICAgICAgICAgICBcImFxdWFcIjogXCIjMDBmZmZmXCIsXG4gICAgICAgICAgICBcImFxdWFtYXJpbmVcIjogXCIjN2ZmZmQ0XCIsXG4gICAgICAgICAgICBcImF6dXJlXCI6IFwiI2YwZmZmZlwiLFxuICAgICAgICAgICAgXCJiZWlnZVwiOiBcIiNmNWY1ZGNcIixcbiAgICAgICAgICAgIFwiYmlzcXVlXCI6IFwiI2ZmZTRjNFwiLFxuICAgICAgICAgICAgXCJibGFja1wiOiBcIiMwMDAwMDBcIixcbiAgICAgICAgICAgIFwiYmxhbmNoZWRhbG1vbmRcIjogXCIjZmZlYmNkXCIsXG4gICAgICAgICAgICBcImJsdWVcIjogXCIjMDAwMGZmXCIsXG4gICAgICAgICAgICBcImJsdWV2aW9sZXRcIjogXCIjOGEyYmUyXCIsXG4gICAgICAgICAgICBcImJyb3duXCI6IFwiI2E1MmEyYVwiLFxuICAgICAgICAgICAgXCJidXJseXdvb2RcIjogXCIjZGViODg3XCIsXG4gICAgICAgICAgICBcImNhZGV0Ymx1ZVwiOiBcIiM1ZjllYTBcIixcbiAgICAgICAgICAgIFwiY2hhcnRyZXVzZVwiOiBcIiM3ZmZmMDBcIixcbiAgICAgICAgICAgIFwiY2hvY29sYXRlXCI6IFwiI2QyNjkxZVwiLFxuICAgICAgICAgICAgXCJjb3JhbFwiOiBcIiNmZjdmNTBcIixcbiAgICAgICAgICAgIFwiY29ybmZsb3dlcmJsdWVcIjogXCIjNjQ5NWVkXCIsXG4gICAgICAgICAgICBcImNvcm5zaWxrXCI6IFwiI2ZmZjhkY1wiLFxuICAgICAgICAgICAgXCJjcmltc29uXCI6IFwiI2RjMTQzY1wiLFxuICAgICAgICAgICAgXCJjeWFuXCI6IFwiIzAwZmZmZlwiLFxuICAgICAgICAgICAgXCJkYXJrYmx1ZVwiOiBcIiMwMDAwOGJcIixcbiAgICAgICAgICAgIFwiZGFya2N5YW5cIjogXCIjMDA4YjhiXCIsXG4gICAgICAgICAgICBcImRhcmtnb2xkZW5yb2RcIjogXCIjYjg4NjBiXCIsXG4gICAgICAgICAgICBcImRhcmtncmF5XCI6IFwiI2E5YTlhOVwiLFxuICAgICAgICAgICAgXCJkYXJrZ3JlZW5cIjogXCIjMDA2NDAwXCIsXG4gICAgICAgICAgICBcImRhcmtraGFraVwiOiBcIiNiZGI3NmJcIixcbiAgICAgICAgICAgIFwiZGFya21hZ2VudGFcIjogXCIjOGIwMDhiXCIsXG4gICAgICAgICAgICBcImRhcmtvbGl2ZWdyZWVuXCI6IFwiIzU1NmIyZlwiLFxuICAgICAgICAgICAgXCJkYXJrb3JhbmdlXCI6IFwiI2ZmOGMwMFwiLFxuICAgICAgICAgICAgXCJkYXJrb3JjaGlkXCI6IFwiIzk5MzJjY1wiLFxuICAgICAgICAgICAgXCJkYXJrcmVkXCI6IFwiIzhiMDAwMFwiLFxuICAgICAgICAgICAgXCJkYXJrc2FsbW9uXCI6IFwiI2U5OTY3YVwiLFxuICAgICAgICAgICAgXCJkYXJrc2VhZ3JlZW5cIjogXCIjOGZiYzhmXCIsXG4gICAgICAgICAgICBcImRhcmtzbGF0ZWJsdWVcIjogXCIjNDgzZDhiXCIsXG4gICAgICAgICAgICBcImRhcmtzbGF0ZWdyYXlcIjogXCIjMmY0ZjRmXCIsXG4gICAgICAgICAgICBcImRhcmt0dXJxdW9pc2VcIjogXCIjMDBjZWQxXCIsXG4gICAgICAgICAgICBcImRhcmt2aW9sZXRcIjogXCIjOTQwMGQzXCIsXG4gICAgICAgICAgICBcImRlZXBwaW5rXCI6IFwiI2ZmMTQ5M1wiLFxuICAgICAgICAgICAgXCJkZWVwc2t5Ymx1ZVwiOiBcIiMwMGJmZmZcIixcbiAgICAgICAgICAgIFwiZGltZ3JheVwiOiBcIiM2OTY5NjlcIixcbiAgICAgICAgICAgIFwiZG9kZ2VyYmx1ZVwiOiBcIiMxZTkwZmZcIixcbiAgICAgICAgICAgIFwiZmlyZWJyaWNrXCI6IFwiI2IyMjIyMlwiLFxuICAgICAgICAgICAgXCJmbG9yYWx3aGl0ZVwiOiBcIiNmZmZhZjBcIixcbiAgICAgICAgICAgIFwiZm9yZXN0Z3JlZW5cIjogXCIjMjI4YjIyXCIsXG4gICAgICAgICAgICBcImZ1Y2hzaWFcIjogXCIjZmYwMGZmXCIsXG4gICAgICAgICAgICBcImdhaW5zYm9yb1wiOiBcIiNkY2RjZGNcIixcbiAgICAgICAgICAgIFwiZ2hvc3R3aGl0ZVwiOiBcIiNmOGY4ZmZcIixcbiAgICAgICAgICAgIFwiZ29sZFwiOiBcIiNmZmQ3MDBcIixcbiAgICAgICAgICAgIFwiZ29sZGVucm9kXCI6IFwiI2RhYTUyMFwiLFxuICAgICAgICAgICAgXCJncmF5XCI6IFwiIzgwODA4MFwiLFxuICAgICAgICAgICAgXCJncmVlblwiOiBcIiMwMDgwMDBcIixcbiAgICAgICAgICAgIFwiZ3JlZW55ZWxsb3dcIjogXCIjYWRmZjJmXCIsXG4gICAgICAgICAgICBcImhvbmV5ZGV3XCI6IFwiI2YwZmZmMFwiLFxuICAgICAgICAgICAgXCJob3RwaW5rXCI6IFwiI2ZmNjliNFwiLFxuICAgICAgICAgICAgXCJpbmRpYW5yZWQgXCI6IFwiI2NkNWM1Y1wiLFxuICAgICAgICAgICAgXCJpbmRpZ29cIjogXCIjNGIwMDgyXCIsXG4gICAgICAgICAgICBcIml2b3J5XCI6IFwiI2ZmZmZmMFwiLFxuICAgICAgICAgICAgXCJraGFraVwiOiBcIiNmMGU2OGNcIixcbiAgICAgICAgICAgIFwibGF2ZW5kZXJcIjogXCIjZTZlNmZhXCIsXG4gICAgICAgICAgICBcImxhdmVuZGVyYmx1c2hcIjogXCIjZmZmMGY1XCIsXG4gICAgICAgICAgICBcImxhd25ncmVlblwiOiBcIiM3Y2ZjMDBcIixcbiAgICAgICAgICAgIFwibGVtb25jaGlmZm9uXCI6IFwiI2ZmZmFjZFwiLFxuICAgICAgICAgICAgXCJsaWdodGJsdWVcIjogXCIjYWRkOGU2XCIsXG4gICAgICAgICAgICBcImxpZ2h0Y29yYWxcIjogXCIjZjA4MDgwXCIsXG4gICAgICAgICAgICBcImxpZ2h0Y3lhblwiOiBcIiNlMGZmZmZcIixcbiAgICAgICAgICAgIFwibGlnaHRnb2xkZW5yb2R5ZWxsb3dcIjogXCIjZmFmYWQyXCIsXG4gICAgICAgICAgICBcImxpZ2h0Z3JleVwiOiBcIiNkM2QzZDNcIixcbiAgICAgICAgICAgIFwibGlnaHRncmVlblwiOiBcIiM5MGVlOTBcIixcbiAgICAgICAgICAgIFwibGlnaHRwaW5rXCI6IFwiI2ZmYjZjMVwiLFxuICAgICAgICAgICAgXCJsaWdodHNhbG1vblwiOiBcIiNmZmEwN2FcIixcbiAgICAgICAgICAgIFwibGlnaHRzZWFncmVlblwiOiBcIiMyMGIyYWFcIixcbiAgICAgICAgICAgIFwibGlnaHRza3libHVlXCI6IFwiIzg3Y2VmYVwiLFxuICAgICAgICAgICAgXCJsaWdodHNsYXRlZ3JheVwiOiBcIiM3Nzg4OTlcIixcbiAgICAgICAgICAgIFwibGlnaHRzdGVlbGJsdWVcIjogXCIjYjBjNGRlXCIsXG4gICAgICAgICAgICBcImxpZ2h0eWVsbG93XCI6IFwiI2ZmZmZlMFwiLFxuICAgICAgICAgICAgXCJsaW1lXCI6IFwiIzAwZmYwMFwiLFxuICAgICAgICAgICAgXCJsaW1lZ3JlZW5cIjogXCIjMzJjZDMyXCIsXG4gICAgICAgICAgICBcImxpbmVuXCI6IFwiI2ZhZjBlNlwiLFxuICAgICAgICAgICAgXCJtYWdlbnRhXCI6IFwiI2ZmMDBmZlwiLFxuICAgICAgICAgICAgXCJtYXJvb25cIjogXCIjODAwMDAwXCIsXG4gICAgICAgICAgICBcIm1lZGl1bWFxdWFtYXJpbmVcIjogXCIjNjZjZGFhXCIsXG4gICAgICAgICAgICBcIm1lZGl1bWJsdWVcIjogXCIjMDAwMGNkXCIsXG4gICAgICAgICAgICBcIm1lZGl1bW9yY2hpZFwiOiBcIiNiYTU1ZDNcIixcbiAgICAgICAgICAgIFwibWVkaXVtcHVycGxlXCI6IFwiIzkzNzBkOFwiLFxuICAgICAgICAgICAgXCJtZWRpdW1zZWFncmVlblwiOiBcIiMzY2IzNzFcIixcbiAgICAgICAgICAgIFwibWVkaXVtc2xhdGVibHVlXCI6IFwiIzdiNjhlZVwiLFxuICAgICAgICAgICAgXCJtZWRpdW1zcHJpbmdncmVlblwiOiBcIiMwMGZhOWFcIixcbiAgICAgICAgICAgIFwibWVkaXVtdHVycXVvaXNlXCI6IFwiIzQ4ZDFjY1wiLFxuICAgICAgICAgICAgXCJtZWRpdW12aW9sZXRyZWRcIjogXCIjYzcxNTg1XCIsXG4gICAgICAgICAgICBcIm1pZG5pZ2h0Ymx1ZVwiOiBcIiMxOTE5NzBcIixcbiAgICAgICAgICAgIFwibWludGNyZWFtXCI6IFwiI2Y1ZmZmYVwiLFxuICAgICAgICAgICAgXCJtaXN0eXJvc2VcIjogXCIjZmZlNGUxXCIsXG4gICAgICAgICAgICBcIm1vY2Nhc2luXCI6IFwiI2ZmZTRiNVwiLFxuICAgICAgICAgICAgXCJuYXZham93aGl0ZVwiOiBcIiNmZmRlYWRcIixcbiAgICAgICAgICAgIFwibmF2eVwiOiBcIiMwMDAwODBcIixcbiAgICAgICAgICAgIFwib2xkbGFjZVwiOiBcIiNmZGY1ZTZcIixcbiAgICAgICAgICAgIFwib2xpdmVcIjogXCIjODA4MDAwXCIsXG4gICAgICAgICAgICBcIm9saXZlZHJhYlwiOiBcIiM2YjhlMjNcIixcbiAgICAgICAgICAgIFwib3JhbmdlXCI6IFwiI2ZmYTUwMFwiLFxuICAgICAgICAgICAgXCJvcmFuZ2VyZWRcIjogXCIjZmY0NTAwXCIsXG4gICAgICAgICAgICBcIm9yY2hpZFwiOiBcIiNkYTcwZDZcIixcbiAgICAgICAgICAgIFwicGFsZWdvbGRlbnJvZFwiOiBcIiNlZWU4YWFcIixcbiAgICAgICAgICAgIFwicGFsZWdyZWVuXCI6IFwiIzk4ZmI5OFwiLFxuICAgICAgICAgICAgXCJwYWxldHVycXVvaXNlXCI6IFwiI2FmZWVlZVwiLFxuICAgICAgICAgICAgXCJwYWxldmlvbGV0cmVkXCI6IFwiI2Q4NzA5M1wiLFxuICAgICAgICAgICAgXCJwYXBheWF3aGlwXCI6IFwiI2ZmZWZkNVwiLFxuICAgICAgICAgICAgXCJwZWFjaHB1ZmZcIjogXCIjZmZkYWI5XCIsXG4gICAgICAgICAgICBcInBlcnVcIjogXCIjY2Q4NTNmXCIsXG4gICAgICAgICAgICBcInBpbmtcIjogXCIjZmZjMGNiXCIsXG4gICAgICAgICAgICBcInBsdW1cIjogXCIjZGRhMGRkXCIsXG4gICAgICAgICAgICBcInBvd2RlcmJsdWVcIjogXCIjYjBlMGU2XCIsXG4gICAgICAgICAgICBcInB1cnBsZVwiOiBcIiM4MDAwODBcIixcbiAgICAgICAgICAgIFwicmVkXCI6IFwiI2ZmMDAwMFwiLFxuICAgICAgICAgICAgXCJyb3N5YnJvd25cIjogXCIjYmM4ZjhmXCIsXG4gICAgICAgICAgICBcInJveWFsYmx1ZVwiOiBcIiM0MTY5ZTFcIixcbiAgICAgICAgICAgIFwic2FkZGxlYnJvd25cIjogXCIjOGI0NTEzXCIsXG4gICAgICAgICAgICBcInNhbG1vblwiOiBcIiNmYTgwNzJcIixcbiAgICAgICAgICAgIFwic2FuZHlicm93blwiOiBcIiNmNGE0NjBcIixcbiAgICAgICAgICAgIFwic2VhZ3JlZW5cIjogXCIjMmU4YjU3XCIsXG4gICAgICAgICAgICBcInNlYXNoZWxsXCI6IFwiI2ZmZjVlZVwiLFxuICAgICAgICAgICAgXCJzaWVubmFcIjogXCIjYTA1MjJkXCIsXG4gICAgICAgICAgICBcInNpbHZlclwiOiBcIiNjMGMwYzBcIixcbiAgICAgICAgICAgIFwic2t5Ymx1ZVwiOiBcIiM4N2NlZWJcIixcbiAgICAgICAgICAgIFwic2xhdGVibHVlXCI6IFwiIzZhNWFjZFwiLFxuICAgICAgICAgICAgXCJzbGF0ZWdyYXlcIjogXCIjNzA4MDkwXCIsXG4gICAgICAgICAgICBcInNub3dcIjogXCIjZmZmYWZhXCIsXG4gICAgICAgICAgICBcInNwcmluZ2dyZWVuXCI6IFwiIzAwZmY3ZlwiLFxuICAgICAgICAgICAgXCJzdGVlbGJsdWVcIjogXCIjNDY4MmI0XCIsXG4gICAgICAgICAgICBcInRhblwiOiBcIiNkMmI0OGNcIixcbiAgICAgICAgICAgIFwidGVhbFwiOiBcIiMwMDgwODBcIixcbiAgICAgICAgICAgIFwidGhpc3RsZVwiOiBcIiNkOGJmZDhcIixcbiAgICAgICAgICAgIFwidG9tYXRvXCI6IFwiI2ZmNjM0N1wiLFxuICAgICAgICAgICAgXCJ0dXJxdW9pc2VcIjogXCIjNDBlMGQwXCIsXG4gICAgICAgICAgICBcInZpb2xldFwiOiBcIiNlZTgyZWVcIixcbiAgICAgICAgICAgIFwid2hlYXRcIjogXCIjZjVkZWIzXCIsXG4gICAgICAgICAgICBcIndoaXRlXCI6IFwiI2ZmZmZmZlwiLFxuICAgICAgICAgICAgXCJ3aGl0ZXNtb2tlXCI6IFwiI2Y1ZjVmNVwiLFxuICAgICAgICAgICAgXCJ5ZWxsb3dcIjogXCIjZmZmZjAwXCIsXG4gICAgICAgICAgICBcInllbGxvd2dyZWVuXCI6IFwiIzlhY2QzMlwiXG4gICAgICAgIH1bbmFtZS50b0xvd2VyQ2FzZSgpXVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgaGV4VG9EZXNjcmlwdG9yKGM6IHN0cmluZyk6IFVJQ29sb3JEZXNjcmlwdG9yIHtcbiAgICAgICAgaWYgKGNbMF0gPT09IFwiI1wiKSB7XG4gICAgICAgICAgICBjID0gYy5zdWJzdHIoMSlcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gcGFyc2VJbnQoYy5zbGljZSgwLCAyKSwgMTYpXG4gICAgICAgIGNvbnN0IGcgPSBwYXJzZUludChjLnNsaWNlKDIsIDQpLCAxNilcbiAgICAgICAgY29uc3QgYiA9IHBhcnNlSW50KGMuc2xpY2UoNCwgNiksIDE2KVxuICAgICAgICBjb25zdCBhID0gcGFyc2VJbnQoYy5zbGljZSg2LCA4KSwgMTYpXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB7IFwicmVkXCI6IHIsIFwiZ3JlZW5cIjogZywgXCJibHVlXCI6IGIsIFwiYWxwaGFcIjogYSB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgICAgICAvL3JldHVybiAncmdiKCcgKyByICsgJywnICsgZyArICcsJyArIGIgKyAnKSc7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgcmdiVG9EZXNjcmlwdG9yKGNvbG9yU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoY29sb3JTdHJpbmcuc3RhcnRzV2l0aChcInJnYmEoXCIpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbG9yU3RyaW5nID0gY29sb3JTdHJpbmcuc2xpY2UoNSwgY29sb3JTdHJpbmcubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY29sb3JTdHJpbmcuc3RhcnRzV2l0aChcInJnYihcIikpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29sb3JTdHJpbmcgPSBjb2xvclN0cmluZy5zbGljZSg0LCBjb2xvclN0cmluZy5sZW5ndGggLSAxKSArIFwiLCAwXCJcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IGNvbG9yU3RyaW5nLnNwbGl0KFwiLFwiKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBcInJlZFwiOiBOdW1iZXIoY29tcG9uZW50c1swXSksXG4gICAgICAgICAgICBcImdyZWVuXCI6IE51bWJlcihjb21wb25lbnRzWzFdKSxcbiAgICAgICAgICAgIFwiYmx1ZVwiOiBOdW1iZXIoY29tcG9uZW50c1syXSksXG4gICAgICAgICAgICBcImFscGhhXCI6IE51bWJlcihjb21wb25lbnRzWzNdKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBjb2xvckRlc2NyaXB0b3IoKTogVUlDb2xvckRlc2NyaXB0b3Ige1xuICAgICAgICBcbiAgICAgICAgdmFyIGRlc2NyaXB0b3JcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbG9ySEVYRnJvbU5hbWUgPSBVSUNvbG9yLm5hbWVUb0hleCh0aGlzLnN0cmluZ1ZhbHVlKVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuc3RyaW5nVmFsdWUuc3RhcnRzV2l0aChcInJnYlwiKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gVUlDb2xvci5yZ2JUb0Rlc2NyaXB0b3IodGhpcy5zdHJpbmdWYWx1ZSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbG9ySEVYRnJvbU5hbWUpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVzY3JpcHRvciA9IFVJQ29sb3IuaGV4VG9EZXNjcmlwdG9yKGNvbG9ySEVYRnJvbU5hbWUpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVzY3JpcHRvciA9IFVJQ29sb3IuaGV4VG9EZXNjcmlwdG9yKHRoaXMuc3RyaW5nVmFsdWUpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3JcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbG9yV2l0aFJlZChyZWQ6IG51bWJlcikge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSB0aGlzLmNvbG9yRGVzY3JpcHRvclxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFVJQ29sb3IoXCJyZ2JhKFwiICsgcmVkICsgXCIsXCIgKyBkZXNjcmlwdG9yLmdyZWVuICsgXCIsXCIgKyBkZXNjcmlwdG9yLmJsdWUgKyBcIixcIiArXG4gICAgICAgICAgICBkZXNjcmlwdG9yLmFscGhhICsgXCIpXCIpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBjb2xvcldpdGhHcmVlbihncmVlbjogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMuY29sb3JEZXNjcmlwdG9yXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlDb2xvcihcInJnYmEoXCIgKyBkZXNjcmlwdG9yLnJlZCArIFwiLFwiICsgZ3JlZW4gKyBcIixcIiArIGRlc2NyaXB0b3IuYmx1ZSArIFwiLFwiICtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IuYWxwaGEgKyBcIilcIilcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGNvbG9yV2l0aEJsdWUoYmx1ZTogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvciA9IHRoaXMuY29sb3JEZXNjcmlwdG9yXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlDb2xvcihcInJnYmEoXCIgKyBkZXNjcmlwdG9yLnJlZCArIFwiLFwiICsgZGVzY3JpcHRvci5ncmVlbiArIFwiLFwiICsgYmx1ZSArIFwiLFwiICtcbiAgICAgICAgICAgIGRlc2NyaXB0b3IuYWxwaGEgKyBcIilcIilcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGNvbG9yV2l0aEFscGhhKGFscGhhOiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy5jb2xvckRlc2NyaXB0b3JcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBVSUNvbG9yKFwicmdiYShcIiArIGRlc2NyaXB0b3IucmVkICsgXCIsXCIgKyBkZXNjcmlwdG9yLmdyZWVuICsgXCIsXCIgKyBkZXNjcmlwdG9yLmJsdWUgKyBcIixcIiArXG4gICAgICAgICAgICBhbHBoYSArIFwiKVwiKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGNvbG9yV2l0aFJHQkEocmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlciwgYWxwaGE6IG51bWJlciA9IDEpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlDb2xvcihcInJnYmEoXCIgKyByZWQgKyBcIixcIiArIGdyZWVuICsgXCIsXCIgKyBibHVlICsgXCIsXCIgKyBhbHBoYSArIFwiKVwiKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBjb2xvcldpdGhEZXNjcmlwdG9yKGRlc2NyaXB0b3I6IFVJQ29sb3JEZXNjcmlwdG9yKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFVJQ29sb3IoXCJyZ2JhKFwiICsgZGVzY3JpcHRvci5yZWQudG9GaXhlZCgwKSArIFwiLFwiICsgZGVzY3JpcHRvci5ncmVlbi50b0ZpeGVkKDApICsgXCIsXCIgK1xuICAgICAgICAgICAgZGVzY3JpcHRvci5ibHVlLnRvRml4ZWQoMCkgKyBcIixcIiArIHRoaXMuZGVmYXVsdEFscGhhVG9PbmUoZGVzY3JpcHRvci5hbHBoYSkgKyBcIilcIilcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHRBbHBoYVRvT25lKHZhbHVlID0gMSkge1xuICAgICAgICBpZiAodmFsdWUgIT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gMVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBjb2xvckJ5TXVsdGlwbHlpbmdSR0IobXVsdGlwbGllcjogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy5jb2xvckRlc2NyaXB0b3JcbiAgICAgICAgXG4gICAgICAgIGRlc2NyaXB0b3IucmVkID0gZGVzY3JpcHRvci5yZWQgKiBtdWx0aXBsaWVyXG4gICAgICAgIGRlc2NyaXB0b3IuZ3JlZW4gPSBkZXNjcmlwdG9yLmdyZWVuICogbXVsdGlwbGllclxuICAgICAgICBkZXNjcmlwdG9yLmJsdWUgPSBkZXNjcmlwdG9yLmJsdWUgKiBtdWx0aXBsaWVyXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBVSUNvbG9yLmNvbG9yV2l0aERlc2NyaXB0b3IoZGVzY3JpcHRvcilcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJT2JqZWN0LnRzXCIgLz5cblxuXG5cblxuY2xhc3MgVUlQb2ludCBleHRlbmRzIFVJT2JqZWN0IHtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgeDogbnVtYmVyLCBwdWJsaWMgeTogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJUG9pbnRcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlPYmplY3RcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVUlQb2ludCh0aGlzLngsIHRoaXMueSlcbiAgICB9XG4gICAgXG4gICAgXG4gICAgaXNFcXVhbFRvKHBvaW50OiBVSVBvaW50KSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9ICh0aGlzLnggPT0gcG9pbnQueCAmJiB0aGlzLnkgPT0gcG9pbnQueSlcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2NhbGUoem9vbTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHggPSB0aGlzLnhcbiAgICAgICAgY29uc3QgeSA9IHRoaXMueVxuICAgICAgICB0aGlzLnggPSB4ICogem9vbVxuICAgICAgICB0aGlzLnkgPSB5ICogem9vbVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBhZGQodjogVUlQb2ludCkge1xuICAgICAgICB0aGlzLnggPSB0aGlzLnggKyB2LnhcbiAgICAgICAgdGhpcy55ID0gdGhpcy55ICsgdi55XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICAgIFxuICAgIHN1YnRyYWN0KHY6IFVJUG9pbnQpIHtcbiAgICAgICAgdGhpcy54ID0gdGhpcy54IC0gdi54XG4gICAgICAgIHRoaXMueSA9IHRoaXMueSAtIHYueVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICBcbiAgICB0byhiOiBVSVBvaW50KSB7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzXG4gICAgICAgIGNvbnN0IGFiID0gYi5jb3B5KCkuYWRkKGEuY29weSgpLnNjYWxlKC0xKSlcbiAgICAgICAgcmV0dXJuIGFiXG4gICAgfVxuICAgIFxuICAgIHBvaW50V2l0aFgoeDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIHJlc3VsdC54ID0geFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHBvaW50V2l0aFkoeTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIHJlc3VsdC55ID0geVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHBvaW50QnlBZGRpbmdYKHg6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludFdpdGhYKHRoaXMueCArIHgpXG4gICAgfVxuICAgIFxuICAgIHBvaW50QnlBZGRpbmdZKHk6IG51bWJlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludFdpdGhZKHRoaXMueSArIHkpXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnlcbiAgICAgICAgcmVzdWx0ID0gTWF0aC5zcXJ0KHJlc3VsdClcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBkaWRDaGFuZ2UoYikge1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsbGJhY2sgdG8gYmUgc2V0IGJ5IGRlbGVnYXRlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vVUlQb2ludC50c1wiIC8+XG5cblxuXG5cblxuY2xhc3MgVUlSZWN0YW5nbGUgZXh0ZW5kcyBVSU9iamVjdCB7XG4gICAgX2lzQmVpbmdVcGRhdGVkOiBib29sZWFuXG4gICAgcmVjdGFuZ2xlUG9pbnREaWRDaGFuZ2U6IChiOiBhbnkpID0+IHZvaWRcbiAgICBtYXg6IFVJUG9pbnRcbiAgICBtaW46IFVJUG9pbnRcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIgPSAwLCB5OiBudW1iZXIgPSAwLCBoZWlnaHQ6IG51bWJlciA9IDAsIHdpZHRoOiBudW1iZXIgPSAwKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJUmVjdGFuZ2xlXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJT2JqZWN0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5taW4gPSBuZXcgVUlQb2ludChOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSlcbiAgICAgICAgdGhpcy5tYXggPSBuZXcgVUlQb2ludChOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMubWluLmRpZENoYW5nZSA9IHRoaXMucmVjdGFuZ2xlUG9pbnREaWRDaGFuZ2VcbiAgICAgICAgdGhpcy5tYXguZGlkQ2hhbmdlID0gdGhpcy5yZWN0YW5nbGVQb2ludERpZENoYW5nZVxuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNCZWluZ1VwZGF0ZWQgPSBOT1xuICAgICAgICBcbiAgICAgICAgdGhpcy5taW4gPSBuZXcgVUlQb2ludCh4LCB5KVxuICAgICAgICB0aGlzLm1heCA9IG5ldyBVSVBvaW50KHggKyB3aWR0aCwgeSArIGhlaWdodClcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19OSUwoaGVpZ2h0KSkge1xuICAgICAgICAgICAgdGhpcy5tYXgueSA9IGhlaWdodFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTklMKHdpZHRoKSkge1xuICAgICAgICAgICAgdGhpcy5tYXgueCA9IHdpZHRoXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb3B5KCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlSZWN0YW5nbGUodGhpcy54LCB0aGlzLnksIHRoaXMuaGVpZ2h0LCB0aGlzLndpZHRoKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIGlzRXF1YWxUbyhyZWN0YW5nbGU6IFVJUmVjdGFuZ2xlKSB7XG4gICAgXG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChJUyhyZWN0YW5nbGUpICYmIHRoaXMubWluLmlzRXF1YWxUbyhyZWN0YW5nbGUubWluKSAmJiB0aGlzLm1heC5pc0VxdWFsVG8ocmVjdGFuZ2xlLm1heCkpXG4gICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyB6ZXJvKCkge1xuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlSZWN0YW5nbGUoMCwgMCwgMCwgMClcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgY29udGFpbnNQb2ludChwb2ludDogVUlQb2ludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4ueCA8PSBwb2ludC54ICYmIHRoaXMubWluLnkgPD0gcG9pbnQueSAmJlxuICAgICAgICAgICAgcG9pbnQueCA8PSB0aGlzLm1heC54ICYmIHBvaW50LnkgPD0gdGhpcy5tYXgueVxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVCeUFkZGluZ1BvaW50KHBvaW50OiBVSVBvaW50KSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXBvaW50KSB7XG4gICAgICAgICAgICBwb2ludCA9IG5ldyBVSVBvaW50KDAsIDApXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmVnaW5VcGRhdGVzKClcbiAgICBcbiAgICAgICAgY29uc3QgbWluID0gdGhpcy5taW4uY29weSgpXG4gICAgICAgIGlmIChtaW4ueCA9PT0gbmlsKSB7XG4gICAgICAgICAgICBtaW4ueCA9IHRoaXMubWF4LnhcbiAgICAgICAgfVxuICAgICAgICBpZiAobWluLnkgPT09IG5pbCkge1xuICAgICAgICAgICAgbWluLnkgPSB0aGlzLm1heC55XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgbWF4ID0gdGhpcy5tYXguY29weSgpXG4gICAgICAgIGlmIChtYXgueCA9PT0gbmlsKSB7XG4gICAgICAgICAgICBtYXgueCA9IHRoaXMubWluLnhcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4LnkgPT09IG5pbCkge1xuICAgICAgICAgICAgbWF4LnkgPSB0aGlzLm1pbi55XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubWluLnggPSBNYXRoLm1pbihtaW4ueCwgcG9pbnQueClcbiAgICAgICAgdGhpcy5taW4ueSA9IE1hdGgubWluKG1pbi55LCBwb2ludC55KVxuICAgICAgICB0aGlzLm1heC54ID0gTWF0aC5tYXgobWF4LngsIHBvaW50LngpXG4gICAgICAgIHRoaXMubWF4LnkgPSBNYXRoLm1heChtYXgueSwgcG9pbnQueSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZmluaXNoVXBkYXRlcygpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgICBpZiAodGhpcy5tYXgueSA9PT0gbmlsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmlsXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubWF4LnkgLSB0aGlzLm1pbi55XG4gICAgfVxuICAgIFxuICAgIHNldCBoZWlnaHQoaGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5tYXgueSA9IHRoaXMubWluLnkgKyBoZWlnaHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgICBpZiAodGhpcy5tYXgueCA9PT0gbmlsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmlsXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubWF4LnggLSB0aGlzLm1pbi54XG4gICAgfVxuICAgIFxuICAgIHNldCB3aWR0aCh3aWR0aDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubWF4LnggPSB0aGlzLm1pbi54ICsgd2lkdGhcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbi54XG4gICAgfVxuICAgIFxuICAgIHNldCB4KHg6IG51bWJlcikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5iZWdpblVwZGF0ZXMoKVxuICAgIFxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGhcbiAgICAgICAgdGhpcy5taW4ueCA9IHhcbiAgICAgICAgdGhpcy5tYXgueCA9IHRoaXMubWluLnggKyB3aWR0aFxuICAgICAgICBcbiAgICAgICAgdGhpcy5maW5pc2hVcGRhdGVzKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCB5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4ueVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgeSh5OiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmVnaW5VcGRhdGVzKClcbiAgICBcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5oZWlnaHRcbiAgICAgICAgdGhpcy5taW4ueSA9IHlcbiAgICAgICAgdGhpcy5tYXgueSA9IHRoaXMubWluLnkgKyBoZWlnaHRcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZmluaXNoVXBkYXRlcygpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgdG9wTGVmdCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLm1pbi5jb3B5KClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCB0b3BSaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVSVBvaW50KHRoaXMubWF4LngsIHRoaXMueSlcbiAgICB9XG4gICAgXG4gICAgZ2V0IGJvdHRvbUxlZnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVUlQb2ludCh0aGlzLngsIHRoaXMubWF4LnkpXG4gICAgfVxuICAgIFxuICAgIGdldCBib3R0b21SaWdodCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLm1heC5jb3B5KClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBjZW50ZXIoKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubWluLmNvcHkoKS5hZGQodGhpcy5taW4udG8odGhpcy5tYXgpLnNjYWxlKDAuNSkpXG4gICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBjZW50ZXIoY2VudGVyOiBVSVBvaW50KSB7XG4gICAgXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuY2VudGVyLnRvKGNlbnRlcilcbiAgICAgICAgdGhpcy5vZmZzZXRCeVBvaW50KG9mZnNldClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIG9mZnNldEJ5UG9pbnQob2Zmc2V0OiBVSVBvaW50KSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1pbi5hZGQob2Zmc2V0KVxuICAgICAgICB0aGlzLm1heC5hZGQob2Zmc2V0KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbmNhdGVuYXRlV2l0aFJlY3RhbmdsZShyZWN0YW5nbGU6IFVJUmVjdGFuZ2xlKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZUJ5QWRkaW5nUG9pbnQocmVjdGFuZ2xlLmJvdHRvbVJpZ2h0KVxuICAgICAgICB0aGlzLnVwZGF0ZUJ5QWRkaW5nUG9pbnQocmVjdGFuZ2xlLnRvcExlZnQpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW50ZXJzZWN0aW9uUmVjdGFuZ2xlV2l0aFJlY3RhbmdsZShyZWN0YW5nbGU6IFVJUmVjdGFuZ2xlKTogVUlSZWN0YW5nbGUge1xuICAgIFxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNvcHkoKVxuICAgIFxuICAgICAgICByZXN1bHQuYmVnaW5VcGRhdGVzKClcbiAgICBcbiAgICAgICAgY29uc3QgbWluID0gcmVzdWx0Lm1pblxuICAgICAgICBpZiAobWluLnggPT09IG5pbCkge1xuICAgICAgICAgICAgbWluLnggPSByZWN0YW5nbGUubWF4LnggLSBNYXRoLm1pbihyZXN1bHQud2lkdGgsIHJlY3RhbmdsZS53aWR0aClcbiAgICAgICAgfVxuICAgICAgICBpZiAobWluLnkgPT09IG5pbCkge1xuICAgICAgICAgICAgbWluLnkgPSByZWN0YW5nbGUubWF4LnkgLSBNYXRoLm1pbihyZXN1bHQuaGVpZ2h0LCByZWN0YW5nbGUuaGVpZ2h0KVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IG1heCA9IHJlc3VsdC5tYXhcbiAgICAgICAgaWYgKG1heC54ID09PSBuaWwpIHtcbiAgICAgICAgICAgIG1heC54ID0gcmVjdGFuZ2xlLm1pbi54ICsgTWF0aC5taW4ocmVzdWx0LndpZHRoLCByZWN0YW5nbGUud2lkdGgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heC55ID09PSBuaWwpIHtcbiAgICAgICAgICAgIG1heC55ID0gcmVjdGFuZ2xlLm1pbi55ICsgTWF0aC5taW4ocmVzdWx0LmhlaWdodCwgcmVjdGFuZ2xlLmhlaWdodClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0Lm1pbi54ID0gTWF0aC5tYXgocmVzdWx0Lm1pbi54LCByZWN0YW5nbGUubWluLngpXG4gICAgICAgIHJlc3VsdC5taW4ueSA9IE1hdGgubWF4KHJlc3VsdC5taW4ueSwgcmVjdGFuZ2xlLm1pbi55KVxuICAgICAgICByZXN1bHQubWF4LnggPSBNYXRoLm1pbihyZXN1bHQubWF4LngsIHJlY3RhbmdsZS5tYXgueClcbiAgICAgICAgcmVzdWx0Lm1heC55ID0gTWF0aC5taW4ocmVzdWx0Lm1heC55LCByZWN0YW5nbGUubWF4LnkpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdC5oZWlnaHQgPCAwKSB7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBhdmVyYWdlWSA9ICh0aGlzLmNlbnRlci55ICsgcmVjdGFuZ2xlLmNlbnRlci55KSAqIDAuNVxuICAgICAgICAgICAgcmVzdWx0Lm1pbi55ID0gYXZlcmFnZVlcbiAgICAgICAgICAgIHJlc3VsdC5tYXgueSA9IGF2ZXJhZ2VZXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdC53aWR0aCA8IDApIHtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGF2ZXJhZ2VYID0gKHRoaXMuY2VudGVyLnggKyByZWN0YW5nbGUuY2VudGVyLngpICogMC41XG4gICAgICAgICAgICByZXN1bHQubWluLnggPSBhdmVyYWdlWFxuICAgICAgICAgICAgcmVzdWx0Lm1heC54ID0gYXZlcmFnZVhcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXN1bHQuZmluaXNoVXBkYXRlcygpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgYXJlYSgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5oZWlnaHQgKiB0aGlzLndpZHRoXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgaW50ZXJzZWN0c1dpdGhSZWN0YW5nbGUocmVjdGFuZ2xlOiBVSVJlY3RhbmdsZSkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuICh0aGlzLmludGVyc2VjdGlvblJlY3RhbmdsZVdpdGhSZWN0YW5nbGUocmVjdGFuZ2xlKS5hcmVhICE9IDApXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICAvLyBhZGQgc29tZSBzcGFjZSBhcm91bmQgdGhlIHJlY3RhbmdsZVxuICAgIHJlY3RhbmdsZVdpdGhJbnNldHMobGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyLCBib3R0b206IG51bWJlciwgdG9wOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jb3B5KClcbiAgICAgICAgcmVzdWx0Lm1pbi54ID0gdGhpcy5taW4ueCArIGxlZnRcbiAgICAgICAgcmVzdWx0Lm1heC54ID0gdGhpcy5tYXgueCAtIHJpZ2h0XG4gICAgICAgIHJlc3VsdC5taW4ueSA9IHRoaXMubWluLnkgKyB0b3BcbiAgICAgICAgcmVzdWx0Lm1heC55ID0gdGhpcy5tYXgueSAtIGJvdHRvbVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHJlY3RhbmdsZVdpdGhJbnNldChpbnNldDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVjdGFuZ2xlV2l0aEluc2V0cyhpbnNldCwgaW5zZXQsIGluc2V0LCBpbnNldClcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICByZWN0YW5nbGVXaXRoSGVpZ2h0KGhlaWdodDogbnVtYmVyLCBjZW50ZXJlZE9uUG9zaXRpb246IG51bWJlciA9IG5pbCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzTmFOKGNlbnRlcmVkT25Qb3NpdGlvbikpIHtcbiAgICAgICAgICAgIGNlbnRlcmVkT25Qb3NpdGlvbiA9IG5pbFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIHJlc3VsdC5oZWlnaHQgPSBoZWlnaHRcbiAgICAgICAgXG4gICAgICAgIGlmIChjZW50ZXJlZE9uUG9zaXRpb24gIT0gbmlsKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFuZ2UgPSBoZWlnaHQgLSB0aGlzLmhlaWdodFxuICAgICAgICAgICAgcmVzdWx0Lm9mZnNldEJ5UG9pbnQobmV3IFVJUG9pbnQoMCwgY2hhbmdlICogY2VudGVyZWRPblBvc2l0aW9uKS5zY2FsZSgtMSkpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHJlY3RhbmdsZVdpdGhXaWR0aCh3aWR0aDogbnVtYmVyLCBjZW50ZXJlZE9uUG9zaXRpb246IG51bWJlciA9IG5pbCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzTmFOKGNlbnRlcmVkT25Qb3NpdGlvbikpIHtcbiAgICAgICAgICAgIGNlbnRlcmVkT25Qb3NpdGlvbiA9IG5pbFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIHJlc3VsdC53aWR0aCA9IHdpZHRoXG4gICAgICAgIFxuICAgICAgICBpZiAoY2VudGVyZWRPblBvc2l0aW9uICE9IG5pbCkge1xuICAgICAgICAgICAgY29uc3QgY2hhbmdlID0gd2lkdGggLSB0aGlzLndpZHRoXG4gICAgICAgICAgICByZXN1bHQub2Zmc2V0QnlQb2ludChuZXcgVUlQb2ludChjaGFuZ2UgKiBjZW50ZXJlZE9uUG9zaXRpb24sIDApLnNjYWxlKC0xKSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcmVjdGFuZ2xlV2l0aEhlaWdodFJlbGF0aXZlVG9XaWR0aChoZWlnaHRSYXRpbzogbnVtYmVyID0gMSwgY2VudGVyZWRPblBvc2l0aW9uOiBudW1iZXIgPSBuaWwpIHtcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZWN0YW5nbGVXaXRoSGVpZ2h0KHRoaXMud2lkdGggKiBoZWlnaHRSYXRpbywgY2VudGVyZWRPblBvc2l0aW9uKVxuICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZWN0YW5nbGVXaXRoV2lkdGhSZWxhdGl2ZVRvSGVpZ2h0KHdpZHRoUmF0aW86IG51bWJlciA9IDEsIGNlbnRlcmVkT25Qb3NpdGlvbjogbnVtYmVyID0gbmlsKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVjdGFuZ2xlV2l0aFdpZHRoKHRoaXMuaGVpZ2h0ICogd2lkdGhSYXRpbywgY2VudGVyZWRPblBvc2l0aW9uKVxuICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZWN0YW5nbGVXaXRoWCh4OiBudW1iZXIsIGNlbnRlcmVkT25Qb3NpdGlvbjogbnVtYmVyID0gMCkge1xuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNvcHkoKVxuICAgICAgICByZXN1bHQueCA9IHggLSByZXN1bHQud2lkdGggKiBjZW50ZXJlZE9uUG9zaXRpb25cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHJlY3RhbmdsZVdpdGhZKHk6IG51bWJlciwgY2VudGVyZWRPblBvc2l0aW9uOiBudW1iZXIgPSAwKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIHJlc3VsdC55ID0geSAtIHJlc3VsdC5oZWlnaHQgKiBjZW50ZXJlZE9uUG9zaXRpb25cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHJlY3RhbmdsZUJ5QWRkaW5nWCh4OiBudW1iZXIpIHtcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jb3B5KClcbiAgICAgICAgcmVzdWx0LnggPSB0aGlzLnggKyB4XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZWN0YW5nbGVCeUFkZGluZ1koeTogbnVtYmVyKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIHJlc3VsdC55ID0gdGhpcy55ICsgeVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgcmVjdGFuZ2xlc0J5U3BsaXR0aW5nV2lkdGgoXG4gICAgICAgIHdlaWdodHM6IG51bWJlcltdLFxuICAgICAgICBwYWRkaW5nczogbnVtYmVyIHwgbnVtYmVyW10gPSAwLFxuICAgICAgICBhYnNvbHV0ZVdpZHRoczogbnVtYmVyIHwgbnVtYmVyW10gPSBuaWxcbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19OSUwocGFkZGluZ3MpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhZGRpbmdzID0gMVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghKHBhZGRpbmdzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhZGRpbmdzID0gW3BhZGRpbmdzXS5hcnJheUJ5UmVwZWF0aW5nKHdlaWdodHMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwYWRkaW5ncyA9IHBhZGRpbmdzLmFycmF5QnlUcmltbWluZ1RvTGVuZ3RoSWZMb25nZXIod2VpZ2h0cy5sZW5ndGggLSAxKVxuICAgICAgICBcbiAgICAgICAgaWYgKCEoYWJzb2x1dGVXaWR0aHMgaW5zdGFuY2VvZiBBcnJheSkgJiYgSVNfTk9UX05JTChhYnNvbHV0ZVdpZHRocykpIHtcbiAgICAgICAgICAgIGFic29sdXRlV2lkdGhzID0gW2Fic29sdXRlV2lkdGhzXS5hcnJheUJ5UmVwZWF0aW5nKHdlaWdodHMubGVuZ3RoKVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdDogVUlSZWN0YW5nbGVbXSA9IFtdXG4gICAgICAgIGNvbnN0IHN1bU9mV2VpZ2h0cyA9IHdlaWdodHMucmVkdWNlKGZ1bmN0aW9uIChhLCBiLCBpbmRleCkge1xuICAgICAgICAgICAgaWYgKElTX05PVF9OSUwoYWJzb2x1dGVXaWR0aHNbaW5kZXhdKSkge1xuICAgICAgICAgICAgICAgIGIgPSAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYSArIGJcbiAgICAgICAgfSwgMClcbiAgICAgICAgY29uc3Qgc3VtT2ZQYWRkaW5ncyA9IHBhZGRpbmdzLnN1bW1lZFZhbHVlXG4gICAgICAgIGNvbnN0IHN1bU9mQWJzb2x1dGVXaWR0aHMgPSAoYWJzb2x1dGVXaWR0aHMgYXMgbnVtYmVyW10pLnN1bW1lZFZhbHVlXG4gICAgICAgIGNvbnN0IHRvdGFsUmVsYXRpdmVXaWR0aCA9IHRoaXMud2lkdGggLSBzdW1PZlBhZGRpbmdzIC0gc3VtT2ZBYnNvbHV0ZVdpZHRoc1xuICAgICAgICB2YXIgcHJldmlvdXNDZWxsTWF4WCA9IHRoaXMueFxuICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICBcbiAgICAgICAgICAgIHZhciByZXN1bHRXaWR0aDogbnVtYmVyXG4gICAgICAgICAgICBpZiAoSVNfTk9UX05JTChhYnNvbHV0ZVdpZHRoc1tpXSkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXN1bHRXaWR0aCA9IGFic29sdXRlV2lkdGhzW2ldIHx8IDBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlc3VsdFdpZHRoID0gdG90YWxSZWxhdGl2ZVdpZHRoICogKHdlaWdodHNbaV0gLyBzdW1PZldlaWdodHMpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBjb25zdCByZWN0YW5nbGUgPSB0aGlzLnJlY3RhbmdsZVdpdGhXaWR0aChyZXN1bHRXaWR0aClcbiAgICBcbiAgICAgICAgICAgIHZhciBwYWRkaW5nID0gMFxuICAgICAgICAgICAgaWYgKHBhZGRpbmdzLmxlbmd0aCA+IGkgJiYgcGFkZGluZ3NbaV0pIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nID0gcGFkZGluZ3NbaV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVjdGFuZ2xlLnggPSBwcmV2aW91c0NlbGxNYXhYXG4gICAgICAgICAgICBwcmV2aW91c0NlbGxNYXhYID0gcmVjdGFuZ2xlLm1heC54ICsgcGFkZGluZ1xuICAgICAgICAgICAgLy9yZWN0YW5nbGUgPSByZWN0YW5nbGUucmVjdGFuZ2xlV2l0aEluc2V0cygwLCBwYWRkaW5nLCAwLCAwKTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJlY3RhbmdsZSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZWN0YW5nbGVzQnlTcGxpdHRpbmdIZWlnaHQoXG4gICAgICAgIHdlaWdodHM6IG51bWJlcltdLFxuICAgICAgICBwYWRkaW5nczogbnVtYmVyIHwgbnVtYmVyW10gPSAwLFxuICAgICAgICBhYnNvbHV0ZUhlaWdodHM6IG51bWJlciB8IG51bWJlcltdID0gbmlsXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTklMKHBhZGRpbmdzKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYWRkaW5ncyA9IDFcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIShwYWRkaW5ncyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYWRkaW5ncyA9IFtwYWRkaW5nc10uYXJyYXlCeVJlcGVhdGluZyh3ZWlnaHRzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcGFkZGluZ3MgPSBwYWRkaW5ncy5hcnJheUJ5VHJpbW1pbmdUb0xlbmd0aElmTG9uZ2VyKHdlaWdodHMubGVuZ3RoIC0gMSlcbiAgICAgICAgXG4gICAgICAgIGlmICghKGFic29sdXRlSGVpZ2h0cyBpbnN0YW5jZW9mIEFycmF5KSAmJiBJU19OT1RfTklMKGFic29sdXRlSGVpZ2h0cykpIHtcbiAgICAgICAgICAgIGFic29sdXRlSGVpZ2h0cyA9IFthYnNvbHV0ZUhlaWdodHNdLmFycmF5QnlSZXBlYXRpbmcod2VpZ2h0cy5sZW5ndGgpXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0OiBVSVJlY3RhbmdsZVtdID0gW11cbiAgICAgICAgY29uc3Qgc3VtT2ZXZWlnaHRzID0gd2VpZ2h0cy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoSVNfTk9UX05JTChhYnNvbHV0ZUhlaWdodHNbaW5kZXhdKSkge1xuICAgICAgICAgICAgICAgIGIgPSAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYSArIGJcbiAgICAgICAgfSwgMClcbiAgICAgICAgY29uc3Qgc3VtT2ZQYWRkaW5ncyA9IHBhZGRpbmdzLnN1bW1lZFZhbHVlXG4gICAgICAgIGNvbnN0IHN1bU9mQWJzb2x1dGVIZWlnaHRzID0gKGFic29sdXRlSGVpZ2h0cyBhcyBudW1iZXJbXSkuc3VtbWVkVmFsdWVcbiAgICAgICAgY29uc3QgdG90YWxSZWxhdGl2ZUhlaWdodCA9IHRoaXMuaGVpZ2h0IC0gc3VtT2ZQYWRkaW5ncyAtIHN1bU9mQWJzb2x1dGVIZWlnaHRzXG4gICAgICAgIHZhciBwcmV2aW91c0NlbGxNYXhZID0gdGhpcy55XG4gICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2VpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdEhlaWdodDogbnVtYmVyXG4gICAgICAgICAgICBpZiAoSVNfTk9UX05JTChhYnNvbHV0ZUhlaWdodHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmVzdWx0SGVpZ2h0ID0gYWJzb2x1dGVIZWlnaHRzW2ldIHx8IDBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlc3VsdEhlaWdodCA9IHRvdGFsUmVsYXRpdmVIZWlnaHQgKiAod2VpZ2h0c1tpXSAvIHN1bU9mV2VpZ2h0cylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlY3RhbmdsZSA9IHRoaXMucmVjdGFuZ2xlV2l0aEhlaWdodChyZXN1bHRIZWlnaHQpXG4gICAgXG4gICAgICAgICAgICB2YXIgcGFkZGluZyA9IDBcbiAgICAgICAgICAgIGlmIChwYWRkaW5ncy5sZW5ndGggPiBpICYmIHBhZGRpbmdzW2ldKSB7XG4gICAgICAgICAgICAgICAgcGFkZGluZyA9IHBhZGRpbmdzW2ldXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlY3RhbmdsZS55ID0gcHJldmlvdXNDZWxsTWF4WVxuICAgICAgICAgICAgcHJldmlvdXNDZWxsTWF4WSA9IHJlY3RhbmdsZS5tYXgueSArIHBhZGRpbmdcbiAgICAgICAgICAgIC8vcmVjdGFuZ2xlID0gcmVjdGFuZ2xlLnJlY3RhbmdsZVdpdGhJbnNldHMoMCwgMCwgcGFkZGluZywgMCk7XG4gICAgICAgICAgICByZXN1bHQucHVzaChyZWN0YW5nbGUpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHJlY3RhbmdsZXNCeUVxdWFsbHlTcGxpdHRpbmdXaWR0aChudW1iZXJPZkZyYW1lczogbnVtYmVyLCBwYWRkaW5nOiBudW1iZXIgPSAwKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdDogVUlSZWN0YW5nbGVbXSA9IFtdXG4gICAgICAgIGNvbnN0IHRvdGFsUGFkZGluZyA9IHBhZGRpbmcgKiAobnVtYmVyT2ZGcmFtZXMgLSAxKVxuICAgICAgICBjb25zdCByZXN1bHRXaWR0aCA9ICh0aGlzLndpZHRoIC0gdG90YWxQYWRkaW5nKSAvIG51bWJlck9mRnJhbWVzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZGcmFtZXM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcmVjdGFuZ2xlID0gdGhpcy5yZWN0YW5nbGVXaXRoV2lkdGgocmVzdWx0V2lkdGgsIGkgLyAobnVtYmVyT2ZGcmFtZXMgLSAxKSlcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJlY3RhbmdsZSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHJlY3RhbmdsZXNCeUVxdWFsbHlTcGxpdHRpbmdIZWlnaHQobnVtYmVyT2ZGcmFtZXM6IG51bWJlciwgcGFkZGluZzogbnVtYmVyID0gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQ6IFVJUmVjdGFuZ2xlW10gPSBbXVxuICAgICAgICBjb25zdCB0b3RhbFBhZGRpbmcgPSBwYWRkaW5nICogKG51bWJlck9mRnJhbWVzIC0gMSlcbiAgICAgICAgY29uc3QgcmVzdWx0SGVpZ2h0ID0gKHRoaXMuaGVpZ2h0IC0gdG90YWxQYWRkaW5nKSAvIG51bWJlck9mRnJhbWVzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZGcmFtZXM7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcmVjdGFuZ2xlID0gdGhpcy5yZWN0YW5nbGVXaXRoSGVpZ2h0KHJlc3VsdEhlaWdodCwgaSAvIChudW1iZXJPZkZyYW1lcyAtIDEpKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2gocmVjdGFuZ2xlKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZGlzdHJpYnV0ZVZpZXdzQWxvbmdXaWR0aChcbiAgICAgICAgdmlld3M6IFVJVmlld1tdLFxuICAgICAgICB3ZWlnaHRzOiBudW1iZXIgfCBudW1iZXJbXSA9IDEsXG4gICAgICAgIHBhZGRpbmdzPzogbnVtYmVyIHwgbnVtYmVyW10sXG4gICAgICAgIGFic29sdXRlV2lkdGhzPzogbnVtYmVyIHwgbnVtYmVyW11cbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIGlmICghKHdlaWdodHMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgIHdlaWdodHMgPSBbd2VpZ2h0c10uYXJyYXlCeVJlcGVhdGluZyh2aWV3cy5sZW5ndGgpXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgZnJhbWVzID0gdGhpcy5yZWN0YW5nbGVzQnlTcGxpdHRpbmdXaWR0aCh3ZWlnaHRzLCBwYWRkaW5ncywgYWJzb2x1dGVXaWR0aHMpXG4gICAgXG4gICAgICAgIGZyYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFtZSwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICB2aWV3c1tpbmRleF0uZnJhbWUgPSBmcmFtZVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGRpc3RyaWJ1dGVWaWV3c0Fsb25nSGVpZ2h0KFxuICAgICAgICB2aWV3czogVUlWaWV3W10sXG4gICAgICAgIHdlaWdodHM6IG51bWJlciB8IG51bWJlcltdID0gMSxcbiAgICAgICAgcGFkZGluZ3M/OiBudW1iZXIgfCBudW1iZXJbXSxcbiAgICAgICAgYWJzb2x1dGVIZWlnaHRzPzogbnVtYmVyIHwgbnVtYmVyW11cbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIGlmICghKHdlaWdodHMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgIHdlaWdodHMgPSBbd2VpZ2h0c10uYXJyYXlCeVJlcGVhdGluZyh2aWV3cy5sZW5ndGgpXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgZnJhbWVzID0gdGhpcy5yZWN0YW5nbGVzQnlTcGxpdHRpbmdIZWlnaHQod2VpZ2h0cywgcGFkZGluZ3MsIGFic29sdXRlSGVpZ2h0cylcbiAgICBcbiAgICAgICAgZnJhbWVzLmZvckVhY2goZnVuY3Rpb24gKGZyYW1lLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIHZpZXdzW2luZGV4XS5mcmFtZSA9IGZyYW1lXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZGlzdHJpYnV0ZVZpZXdzRXF1YWxseUFsb25nV2lkdGgodmlld3M6IFVJVmlld1tdLCBwYWRkaW5nOiBudW1iZXIpIHtcbiAgICBcbiAgICAgICAgY29uc3QgZnJhbWVzID0gdGhpcy5yZWN0YW5nbGVzQnlFcXVhbGx5U3BsaXR0aW5nV2lkdGgodmlld3MubGVuZ3RoLCBwYWRkaW5nKVxuICAgIFxuICAgICAgICBmcmFtZXMuZm9yRWFjaChmdW5jdGlvbiAoZnJhbWUsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgdmlld3NbaW5kZXhdLmZyYW1lID0gZnJhbWVcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBkaXN0cmlidXRlVmlld3NFcXVhbGx5QWxvbmdIZWlnaHQodmlld3M6IFVJVmlld1tdLCBwYWRkaW5nOiBudW1iZXIpIHtcbiAgICBcbiAgICAgICAgY29uc3QgZnJhbWVzID0gdGhpcy5yZWN0YW5nbGVzQnlFcXVhbGx5U3BsaXR0aW5nSGVpZ2h0KHZpZXdzLmxlbmd0aCwgcGFkZGluZylcbiAgICBcbiAgICAgICAgZnJhbWVzLmZvckVhY2goZnVuY3Rpb24gKGZyYW1lLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIHZpZXdzW2luZGV4XS5mcmFtZSA9IGZyYW1lXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgcmVjdGFuZ2xlRm9yTmV4dFJvdyhwYWRkaW5nOiBudW1iZXIgPSAwLCBoZWlnaHQgPSB0aGlzLmhlaWdodCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlY3RhbmdsZVdpdGhZKHRoaXMubWF4LnkgKyBwYWRkaW5nKVxuICAgICAgICBpZiAoaGVpZ2h0ICE9IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXN1bHQuaGVpZ2h0ID0gaGVpZ2h0XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICByZWN0YW5nbGVGb3JOZXh0Q29sdW1uKHBhZGRpbmc6IG51bWJlciA9IDAsIHdpZHRoID0gdGhpcy53aWR0aCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlY3RhbmdsZVdpdGhYKHRoaXMubWF4LnggKyBwYWRkaW5nKVxuICAgICAgICBpZiAod2lkdGggIT0gdGhpcy53aWR0aCkge1xuICAgICAgICAgICAgcmVzdWx0LndpZHRoID0gd2lkdGhcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHJlY3RhbmdsZUZvclByZXZpb3VzUm93KHBhZGRpbmc6IG51bWJlciA9IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZWN0YW5nbGVXaXRoWSh0aGlzLm1pbi55IC0gdGhpcy5oZWlnaHQgLSBwYWRkaW5nKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHJlY3RhbmdsZUZvclByZXZpb3VzQ29sdW1uKHBhZGRpbmc6IG51bWJlciA9IDApIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZWN0YW5nbGVXaXRoWCh0aGlzLm1pbi54IC0gdGhpcy53aWR0aCAtIHBhZGRpbmcpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgLy8gQm91bmRpbmcgYm94XG4gICAgc3RhdGljIGJvdW5kaW5nQm94Rm9yUG9pbnRzKHBvaW50cykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlSZWN0YW5nbGUoKVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnVwZGF0ZUJ5QWRkaW5nUG9pbnQocG9pbnRzW2ldKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgYmVnaW5VcGRhdGVzKCkge1xuICAgICAgICB0aGlzLl9pc0JlaW5nVXBkYXRlZCA9IFlFU1xuICAgIH1cbiAgICBcbiAgICBmaW5pc2hVcGRhdGVzKCkge1xuICAgICAgICB0aGlzLl9pc0JlaW5nVXBkYXRlZCA9IE5PXG4gICAgICAgIHRoaXMuZGlkQ2hhbmdlKClcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZGlkQ2hhbmdlKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsbGJhY2sgdG8gYmUgc2V0IGJ5IGRlbGVnYXRlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBfcmVjdGFuZ2xlUG9pbnREaWRDaGFuZ2UoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuX2lzQmVpbmdVcGRhdGVkKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZGlkQ2hhbmdlKClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9hdXRvbGF5b3V0L3NyYy9BdXRvTGF5b3V0LmpzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJT2JqZWN0LnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJQ29sb3IudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vVUlSZWN0YW5nbGUudHNcIiAvPlxuXG4vL2ltcG9ydCBBdHRyaWJ1dGUgZnJvbSBcIi4uL2F1dG9sYXlvdXQvc3JjL0F0dHJpYnV0ZVwiO1xuXG4vL2ltcG9ydCBBdXRvTGF5b3V0IGZyb20gXCIuLi9hdXRvbGF5b3V0L3NyYy9BdXRvTGF5b3V0XCI7XG5cblxuXG5cblxuZGVjbGFyZSBtb2R1bGUgQXV0b0xheW91dCB7XG4gICAgXG4gICAgXG4gICAgY2xhc3MgQ29uc3RyYWludCB7XG4gICAgICAgIFxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGNsYXNzIFZpZXcge1xuICAgICAgICBcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBjbGFzcyBWaXN1YWxGb3JtYXQge1xuICAgICAgICBcbiAgICAgICAgc3RhdGljIHBhcnNlKGFyZzA6IGFueSwgYXJnMTogYW55KTogYW55O1xuICAgICAgICBcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBlbnVtIEF0dHJpYnV0ZSB7XG4gICAgICAgIFxuICAgICAgICBMRUZULCBSSUdIVCwgQk9UVE9NLCBUT1AsIENFTlRFUlgsIENFTlRFUlksIFdJRFRILCBIRUlHSFQsIFpJTkRFWCwgVkFSSUFCTEUsIE5PVEFOQVRUUklCVVRFXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBlbnVtIFJlbGF0aW9uIHtcbiAgICAgICAgXG4gICAgICAgIEVRVSwgTEVRLCBHRVFcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cbmludGVyZmFjZSBMb29zZU9iamVjdCB7XG4gICAgW2tleTogc3RyaW5nXTogYW55XG59XG5cblxuaW50ZXJmYWNlIENvbnRyb2xFdmVudFRhcmdldHNPYmplY3Qge1xuICAgIFxuICAgIFtrZXk6IHN0cmluZ106IEZ1bmN0aW9uW107XG4gICAgXG59XG5cblxuaW50ZXJmYWNlIFVJVmlld0Jyb2FkY2FzdEV2ZW50IHtcbiAgICBcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICB9XG4gICAgXG59XG5cblxuXG50eXBlIFVJVmlld0FkZENvbnRyb2xFdmVudFRhcmdldE9iamVjdDxUIGV4dGVuZHMgdHlwZW9mIFVJVmlldy5jb250cm9sRXZlbnQ+ID0ge1xuICAgIFxuICAgIFtLIGluIGtleW9mIFRdOiAoKHNlbmRlcjogVUlWaWV3LCBldmVudDogRXZlbnQpID0+IHZvaWQpICYgUGFydGlhbDxVSVZpZXdBZGRDb250cm9sRXZlbnRUYXJnZXRPYmplY3Q8VD4+XG4gICAgXG59XG5cblxuXG5cblxuY2xhc3MgVUlWaWV3IGV4dGVuZHMgVUlPYmplY3Qge1xuICAgIFxuICAgIF9uYXRpdmVTZWxlY3Rpb25FbmFibGVkOiBib29sZWFuID0gWUVTXG4gICAgX3Nob3VsZExheW91dDogYm9vbGVhblxuICAgIF9VSVRhYmxlVmlld1Jvd0luZGV4OiBudW1iZXJcbiAgICBfVUlUYWJsZVZpZXdSZXVzYWJpbGl0eUlkZW50aWZpZXI6IGFueVxuICAgIF9VSVZpZXdJbnRyaW5zaWNUZW1wb3JhcnlXaWR0aDogc3RyaW5nXG4gICAgX1VJVmlld0ludHJpbnNpY1RlbXBvcmFyeUhlaWdodDogc3RyaW5nXG4gICAgX2VuYWJsZWQ6IGJvb2xlYW4gPSBZRVNcbiAgICBfZnJhbWU6IGFueVxuICAgIF9iYWNrZ3JvdW5kQ29sb3I6IFVJQ29sb3IgPSBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3JcbiAgICBcbiAgICBfdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCAmIExvb3NlT2JqZWN0XG4gICAgXG4gICAgX2lubmVySFRNTEtleTogc3RyaW5nXG4gICAgX2RlZmF1bHRJbm5lckhUTUw6IHN0cmluZ1xuICAgIF9wYXJhbWV0ZXJzOiB7IFt4OiBzdHJpbmddOiAoc3RyaW5nIHwgVUlMb2NhbGl6ZWRUZXh0T2JqZWN0KSB9XG4gICAgXG4gICAgX2xvY2FsaXplZFRleHRPYmplY3Q6IFVJTG9jYWxpemVkVGV4dE9iamVjdCA9IG5pbFxuICAgIFxuICAgIF9jb250cm9sRXZlbnRUYXJnZXRzOiBDb250cm9sRXZlbnRUYXJnZXRzT2JqZWN0ID0ge30gLy97IFwiUG9pbnRlckRvd25cIjogRnVuY3Rpb25bXTsgXCJQb2ludGVyTW92ZVwiOiBGdW5jdGlvbltdOyBcIlBvaW50ZXJMZWF2ZVwiOiBGdW5jdGlvbltdOyBcIlBvaW50ZXJFbnRlclwiOiBGdW5jdGlvbltdOyBcIlBvaW50ZXJVcEluc2lkZVwiOiBGdW5jdGlvbltdOyBcIlBvaW50ZXJVcFwiOiBGdW5jdGlvbltdOyBcIlBvaW50ZXJIb3ZlclwiOiBGdW5jdGlvbltdOyB9O1xuICAgIF9mcmFtZVRyYW5zZm9ybTogc3RyaW5nXG4gICAgX3ZpZXdDb250cm9sbGVyTGF5b3V0RnVuY3Rpb246ICgpID0+IHZvaWQgPSBuaWxcbiAgICBfZGlkTGF5b3V0U3Vidmlld3NEZWxlZ2F0ZUZ1bmN0aW9uOiAoKSA9PiB2b2lkXG4gICAgX2RpZFJlY2VpdmVCcm9hZGNhc3RFdmVudERlbGVnYXRlRnVuY3Rpb246IChldmVudDogVUlWaWV3QnJvYWRjYXN0RXZlbnQpID0+IHZvaWRcbiAgICBfdXBkYXRlTGF5b3V0RnVuY3Rpb246IGFueVxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfY29uc3RyYWludHM6IGFueVtdIC8vQXV0b0xheW91dC5Db25zdHJhaW50W107XG4gICAgc3VwZXJ2aWV3OiBVSVZpZXdcbiAgICBzdWJ2aWV3czogVUlWaWV3W11cbiAgICBfc3R5bGVDbGFzc2VzOiBhbnlbXVxuICAgIF9pc0hpZGRlbjogYm9vbGVhbiA9IE5PXG4gICAgXG4gICAgcGF1c2VzUG9pbnRlckV2ZW50czogYm9vbGVhbiA9IE5PXG4gICAgc3RvcHNQb2ludGVyRXZlbnRQcm9wYWdhdGlvbjogYm9vbGVhbiA9IFlFU1xuICAgIF9pc1BvaW50ZXJJbnNpZGU6IGJvb2xlYW5cbiAgICBfaXNQb2ludGVyVmFsaWQ6IGJvb2xlYW5cbiAgICBfaW5pdGlhbFBvaW50ZXJQb3NpdGlvbjogVUlQb2ludFxuICAgIF9oYXNQb2ludGVyRHJhZ2dlZDogYm9vbGVhblxuICAgIF9wb2ludGVyRHJhZ1RocmVzaG9sZCA9IDJcbiAgICBcbiAgICBpZ25vcmVzVG91Y2hlczogYm9vbGVhbiA9IE5PXG4gICAgaWdub3Jlc01vdXNlOiBib29sZWFuID0gTk9cbiAgICBcbiAgICBcbiAgICBzdGF0aWMgX1VJVmlld0luZGV4OiBudW1iZXIgPSAtMVxuICAgIF9VSVZpZXdJbmRleDogbnVtYmVyXG4gICAgXG4gICAgc3RhdGljIF92aWV3c1RvTGF5b3V0OiBVSVZpZXdbXSA9IFtdXG4gICAgXG4gICAgZm9yY2VJbnRyaW5zaWNTaXplWmVybzogYm9vbGVhbiA9IE5PXG4gICAgX3RvdWNoRXZlbnRUaW1lOiBudW1iZXJcbiAgICBcbiAgICBzdGF0aWMgX3BhZ2VTY2FsZSA9IDFcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZWxlbWVudElEOiBzdHJpbmcgPSAoXCJVSVZpZXdcIiArXG4gICAgICAgICAgICBVSVZpZXcubmV4dEluZGV4KSxcbiAgICAgICAgdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCAmIExvb3NlT2JqZWN0ID0gbnVsbCxcbiAgICAgICAgZWxlbWVudFR5cGU6IHN0cmluZyA9IG51bGwsXG4gICAgICAgIGluaXRWaWV3RGF0YT86IGFueVxuICAgICkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBVSVZpZXdcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlPYmplY3RcbiAgICAgICAgXG4gICAgICAgIC8vIEluc3RhbmNlIHZhcmlhYmxlc1xuICAgICAgICBcbiAgICAgICAgVUlWaWV3Ll9VSVZpZXdJbmRleCA9IFVJVmlldy5uZXh0SW5kZXhcbiAgICAgICAgdGhpcy5fVUlWaWV3SW5kZXggPSBVSVZpZXcuX1VJVmlld0luZGV4XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zdHlsZUNsYXNzZXMgPSBbXVxuICAgICAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHlsZUNsYXNzZXNcIiwgeyBnZXQ6IHRoaXMuc3R5bGVDbGFzc2VzLCBzZXQ6IHRoaXMuc2V0U3R5bGVDbGFzc2VzIH0pO1xuICAgICAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHlsZUNsYXNzTmFtZVwiLCB7IGdldDogdGhpcy5zdHlsZUNsYXNzTmFtZSB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2luaXRWaWV3SFRNTEVsZW1lbnQoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQsIGVsZW1lbnRUeXBlKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdWJ2aWV3cyA9IFtdXG4gICAgICAgIHRoaXMuc3VwZXJ2aWV3ID0gbmlsXG4gICAgICAgIFxuICAgICAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbGVtZW50SURcIiwgeyBnZXQ6IHRoaXMuZWxlbWVudElEIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uc3RyYWludHNcIiwgeyBnZXQ6IHRoaXMuY29uc3RyYWludHMsIHNldDogdGhpcy5zZXRDb25zdHJhaW50cyB9KTtcbiAgICAgICAgdGhpcy5fY29uc3RyYWludHMgPSBbXVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fdXBkYXRlTGF5b3V0RnVuY3Rpb24gPSBuaWxcbiAgICAgICAgXG4gICAgICAgIC8vT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYmFja2dyb3VuZENvbG9yXCIsIHsgZ2V0OiB0aGlzLmJhY2tncm91bmRDb2xvciwgc2V0OiB0aGlzLnNldEJhY2tncm91bmRDb2xvciB9KTtcbiAgICAgICAgLy90aGlzLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFscGhhXCIsIHsgZ2V0OiB0aGlzLmFscGhhLCBzZXQ6IHRoaXMuc2V0QWxwaGEgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmFtZVwiLCB7IGdldDogdGhpcy5mcmFtZSwgc2V0OiB0aGlzLnNldEZyYW1lIH0pO1xuICAgICAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZHNcIiwgeyBnZXQ6IHRoaXMuYm91bmRzLCBzZXQ6IHRoaXMuc2V0Qm91bmRzIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidXNlckludGVyYWN0aW9uRW5hYmxlZFwiLCB7IGdldDogdGhpcy51c2VySW50ZXJhY3Rpb25FbmFibGVkLCBzZXQ6IHRoaXMuc2V0VXNlckludGVyYWN0aW9uRW5hYmxlZCB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIHRoaXMuX2NvbnRyb2xFdmVudFRhcmdldHMgPSB7XG4gICAgICAgIC8vICAgICBcIlBvaW50ZXJEb3duXCI6IFtdLFxuICAgICAgICAvLyAgICAgXCJQb2ludGVyTW92ZVwiOiBbXSxcbiAgICAgICAgLy8gICAgIFwiUG9pbnRlckxlYXZlXCI6IFtdLFxuICAgICAgICAvLyAgICAgXCJQb2ludGVyRW50ZXJcIjogW10sXG4gICAgICAgIC8vICAgICBcIlBvaW50ZXJVcEluc2lkZVwiOiBbXSxcbiAgICAgICAgLy8gICAgIFwiUG9pbnRlclVwXCI6IFtdLFxuICAgICAgICAvLyAgICAgXCJQb2ludGVySG92ZXJcIjogW11cbiAgICAgICAgLy8gfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fZGlkTGF5b3V0U3Vidmlld3NEZWxlZ2F0ZUZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9mcmFtZVRyYW5zZm9ybSA9IFwiXCJcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5pdFZpZXcodGhpcy52aWV3SFRNTEVsZW1lbnQuaWQsIHRoaXMudmlld0hUTUxFbGVtZW50LCBpbml0Vmlld0RhdGEpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pbml0Vmlld0NTU1NlbGVjdG9yc0lmTmVlZGVkKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2xvYWRVSUV2ZW50cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGdldCBuZXh0SW5kZXgoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gVUlWaWV3Ll9VSVZpZXdJbmRleCArIDFcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgcGFnZUhlaWdodCgpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5XG4gICAgICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgYm9keS5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICBib2R5Lm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgIGh0bWwuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgaHRtbC5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICBodG1sLm9mZnNldEhlaWdodFxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gaGVpZ2h0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IHBhZ2VXaWR0aCgpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5XG4gICAgICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5tYXgoYm9keS5zY3JvbGxXaWR0aCwgYm9keS5vZmZzZXRXaWR0aCwgaHRtbC5jbGllbnRXaWR0aCwgaHRtbC5zY3JvbGxXaWR0aCwgaHRtbC5vZmZzZXRXaWR0aClcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB3aWR0aFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW5pdFZpZXcoZWxlbWVudElEOiBzdHJpbmcsIHZpZXdIVE1MRWxlbWVudDogSFRNTEVsZW1lbnQsIGluaXRWaWV3RGF0YT86IGFueSkge1xuICAgIFxuICAgIFxuICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjZW50ZXJJbkNvbnRhaW5lcigpIHtcbiAgICAgICAgdGhpcy5zdHlsZS5sZWZ0ID0gXCI1MCVcIlxuICAgICAgICB0aGlzLnN0eWxlLnRvcCA9IFwiNTAlXCJcbiAgICAgICAgdGhpcy5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtNTAlKVwiXG4gICAgfVxuICAgIFxuICAgIGNlbnRlclhJbkNvbnRhaW5lcigpIHtcbiAgICAgICAgdGhpcy5zdHlsZS5sZWZ0ID0gXCI1MCVcIlxuICAgICAgICB0aGlzLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWCgtNTAlKVwiXG4gICAgfVxuICAgIFxuICAgIGNlbnRlcllJbkNvbnRhaW5lcigpIHtcbiAgICAgICAgdGhpcy5zdHlsZS50b3AgPSBcIjUwJVwiXG4gICAgICAgIHRoaXMuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVZKC01MCUpXCJcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgX2luaXRWaWV3SFRNTEVsZW1lbnQoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQsIGVsZW1lbnRUeXBlID0gXCJkaXZcIikge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmICghSVMoZWxlbWVudFR5cGUpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVsZW1lbnRUeXBlID0gXCJkaXZcIlxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghSVModmlld0hUTUxFbGVtZW50KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoZWxlbWVudElELCBlbGVtZW50VHlwZSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIlxuICAgICAgICAgICAgdGhpcy5zdHlsZS5tYXJnaW4gPSBcIjBcIlxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdIVE1MRWxlbWVudCA9IHZpZXdIVE1MRWxlbWVudFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChJUyhlbGVtZW50SUQpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuaWQgPSBlbGVtZW50SURcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5vYmV5QXV0b2xheW91dCA9IFlFU1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuVUlWaWV3ID0gdGhpc1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRTdHlsZUNsYXNzKHRoaXMuc3R5bGVDbGFzc05hbWUpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBzZXQgbmF0aXZlU2VsZWN0aW9uRW5hYmxlZChzZWxlY3RhYmxlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX25hdGl2ZVNlbGVjdGlvbkVuYWJsZWQgPSBzZWxlY3RhYmxlXG4gICAgICAgIGlmICghc2VsZWN0YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5jc3NUZXh0ID0gdGhpcy5zdHlsZS5jc3NUZXh0ICtcbiAgICAgICAgICAgICAgICBcIiAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IG5vbmU7IC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgLW1zLXVzZXItc2VsZWN0OiBub25lOyB1c2VyLXNlbGVjdDogbm9uZTtcIlxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5jc3NUZXh0ID0gdGhpcy5zdHlsZS5jc3NUZXh0ICtcbiAgICAgICAgICAgICAgICBcIiAtd2Via2l0LXRvdWNoLWNhbGxvdXQ6IHRleHQ7IC13ZWJraXQtdXNlci1zZWxlY3Q6IHRleHQ7IC1raHRtbC11c2VyLXNlbGVjdDogdGV4dDsgLW1vei11c2VyLXNlbGVjdDogdGV4dDsgLW1zLXVzZXItc2VsZWN0OiB0ZXh0OyB1c2VyLXNlbGVjdDogdGV4dDtcIlxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBuYXRpdmVTZWxlY3Rpb25FbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmF0aXZlU2VsZWN0aW9uRW5hYmxlZFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgc3R5bGVDbGFzc05hbWUoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBcIlVJQ29yZV9VSVZpZXdfXCIgKyB0aGlzLmNsYXNzLm5hbWVcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIF9pbml0Vmlld0NTU1NlbGVjdG9yc0lmTmVlZGVkKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmNsYXNzLl9hcmVWaWV3Q1NTU2VsZWN0b3JzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbml0Vmlld1N0eWxlU2VsZWN0b3JzKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jbGFzcy5fYXJlVmlld0NTU1NlbGVjdG9yc0luaXRpYWxpemVkID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgaW5pdFZpZXdTdHlsZVNlbGVjdG9ycygpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIE92ZXJyaWRlIHRoaXMgaW4gYSBzdWJjbGFzc1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgaW5pdFN0eWxlU2VsZWN0b3Ioc2VsZWN0b3IsIHN0eWxlKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdHlsZVJ1bGVzID0gVUlWaWV3LmdldFN0eWxlUnVsZXMoc2VsZWN0b3IpXG4gICAgICAgIFxuICAgICAgICBpZiAoIXN0eWxlUnVsZXMpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgVUlWaWV3LmNyZWF0ZVN0eWxlU2VsZWN0b3Ioc2VsZWN0b3IsIHN0eWxlKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGNyZWF0ZUVsZW1lbnQoZWxlbWVudElELCBlbGVtZW50VHlwZSkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElEKVxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50VHlwZSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgdmlld0hUTUxFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlld0hUTUxFbGVtZW50XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgZWxlbWVudElEKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld0hUTUxFbGVtZW50LmlkXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXRJbm5lckhUTUwoa2V5OiBzdHJpbmcsIGRlZmF1bHRTdHJpbmc6IHN0cmluZywgcGFyYW1ldGVycz86IHsgW3g6IHN0cmluZ106IHN0cmluZyB8IFVJTG9jYWxpemVkVGV4dE9iamVjdCB9KSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pbm5lckhUTUxLZXkgPSBrZXlcbiAgICAgICAgdGhpcy5fZGVmYXVsdElubmVySFRNTCA9IGRlZmF1bHRTdHJpbmdcbiAgICAgICAgdGhpcy5fcGFyYW1ldGVycyA9IHBhcmFtZXRlcnNcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxhbmd1YWdlTmFtZSA9IFVJQ29yZS5sYW5ndWFnZVNlcnZpY2UuY3VycmVudExhbmd1YWdlS2V5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFVJQ29yZS5sYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yS2V5KGtleSwgbGFuZ3VhZ2VOYW1lLCBkZWZhdWx0U3RyaW5nLCBwYXJhbWV0ZXJzKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5pbm5lckhUTUwgPSByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIF9zZXRJbm5lckhUTUxGcm9tS2V5SWZQb3NzaWJsZSgpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9pbm5lckhUTUxLZXkgJiYgdGhpcy5fZGVmYXVsdElubmVySFRNTCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNldElubmVySFRNTCh0aGlzLl9pbm5lckhUTUxLZXksIHRoaXMuX2RlZmF1bHRJbm5lckhUTUwsIHRoaXMuX3BhcmFtZXRlcnMpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgX3NldElubmVySFRNTEZyb21Mb2NhbGl6ZWRUZXh0T2JqZWN0SWZQb3NzaWJsZSgpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChJUyh0aGlzLl9sb2NhbGl6ZWRUZXh0T2JqZWN0KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmlubmVySFRNTCA9IFVJQ29yZS5sYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yQ3VycmVudExhbmd1YWdlKHRoaXMuX2xvY2FsaXplZFRleHRPYmplY3QpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IGxvY2FsaXplZFRleHRPYmplY3QoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fbG9jYWxpemVkVGV4dE9iamVjdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2V0IGxvY2FsaXplZFRleHRPYmplY3QobG9jYWxpemVkVGV4dE9iamVjdDogVUlMb2NhbGl6ZWRUZXh0T2JqZWN0KSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9sb2NhbGl6ZWRUZXh0T2JqZWN0ID0gbG9jYWxpemVkVGV4dE9iamVjdFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2V0SW5uZXJIVE1MRnJvbUxvY2FsaXplZFRleHRPYmplY3RJZlBvc3NpYmxlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBpbm5lckhUTUwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdIVE1MRWxlbWVudC5pbm5lckhUTUxcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc2V0IGlubmVySFRNTChpbm5lckhUTUwpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmlubmVySFRNTCAhPSBpbm5lckhUTUwpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuaW5uZXJIVE1MID0gRklSU1QoaW5uZXJIVE1MLCBcIlwiKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHNldCBob3ZlclRleHQoaG92ZXJUZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgaG92ZXJUZXh0KVxuICAgIH1cbiAgICBcbiAgICBnZXQgaG92ZXJUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3SFRNTEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGl0bGVcIilcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IHNjcm9sbFNpemUoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlSZWN0YW5nbGUoMCwgMCwgdGhpcy52aWV3SFRNTEVsZW1lbnQuc2Nyb2xsSGVpZ2h0LCB0aGlzLnZpZXdIVE1MRWxlbWVudC5zY3JvbGxXaWR0aClcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBkaWFsb2dWaWV3KCk6IFVJRGlhbG9nVmlldyB7XG4gICAgICAgIGlmICghSVModGhpcy5zdXBlcnZpZXcpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmlsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVJRGlhbG9nVmlldykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cGVydmlldy5kaWFsb2dWaWV3XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IHJvb3RWaWV3KCk6IFVJVmlldyB7XG4gICAgICAgIGlmIChJUyh0aGlzLnN1cGVydmlldykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1cGVydmlldy5yb290Vmlld1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHB1YmxpYyBzZXQgZW5hYmxlZChlbmFibGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2VuYWJsZWQgPSBlbmFibGVkXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRFbmFibGVkU3RhdGUoKVxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgZ2V0IGVuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVkXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50RW5hYmxlZFN0YXRlKCkge1xuICAgICAgICB0aGlzLmhpZGRlbiA9ICF0aGlzLmVuYWJsZWRcbiAgICAgICAgdGhpcy51c2VySW50ZXJhY3Rpb25FbmFibGVkID0gdGhpcy5lbmFibGVkXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHB1YmxpYyBnZXQgdGFiSW5kZXgoKTogbnVtYmVyIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy52aWV3SFRNTEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIikpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBwdWJsaWMgc2V0IHRhYkluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlld0hUTUxFbGVtZW50LnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiXCIgKyBpbmRleClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBzdHlsZUNsYXNzZXMoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fc3R5bGVDbGFzc2VzXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgc3R5bGVDbGFzc2VzKHN0eWxlQ2xhc3Nlcykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc3R5bGVDbGFzc2VzID0gc3R5bGVDbGFzc2VzXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBoYXNTdHlsZUNsYXNzKHN0eWxlQ2xhc3MpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIFRoaXMgaXMgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnNcbiAgICAgICAgaWYgKCFJUyhzdHlsZUNsYXNzKSkge1xuICAgICAgICAgICAgcmV0dXJuIE5PXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zdHlsZUNsYXNzZXMuaW5kZXhPZihzdHlsZUNsYXNzKVxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgYWRkU3R5bGVDbGFzcyhzdHlsZUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICghSVMoc3R5bGVDbGFzcykpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuaGFzU3R5bGVDbGFzcyhzdHlsZUNsYXNzKSkge1xuICAgICAgICAgICAgdGhpcy5fc3R5bGVDbGFzc2VzLnB1c2goc3R5bGVDbGFzcylcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcmVtb3ZlU3R5bGVDbGFzcyhzdHlsZUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIFRoaXMgaXMgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnNcbiAgICAgICAgaWYgKCFJUyhzdHlsZUNsYXNzKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zdHlsZUNsYXNzZXMuaW5kZXhPZihzdHlsZUNsYXNzKVxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0eWxlQ2xhc3Nlcy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBmaW5kVmlld1dpdGhFbGVtZW50SUQoZWxlbWVudElEOiBzdHJpbmcpOiBVSVZpZXcge1xuICAgICAgICBjb25zdCB2aWV3SFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SUQpXG4gICAgICAgIGlmIChJU19OT1Qodmlld0hUTUxFbGVtZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIG5pbFxuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdmlld0hUTUxFbGVtZW50LlVJVmlld1xuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBjcmVhdGVTdHlsZVNlbGVjdG9yKHNlbGVjdG9yLCBzdHlsZSkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuXG4gICAgICAgIFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmICghZG9jdW1lbnQuc3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIikubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgc3R5bGVTaGVldFxuICAgICAgICB2YXIgbWVkaWFUeXBlXG4gICAgICAgIFxuICAgICAgICBpZiAoZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGw6IGFueSA9IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBtZWRpYSA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLm1lZGlhXG4gICAgICAgICAgICAgICAgbWVkaWFUeXBlID0gdHlwZW9mIG1lZGlhXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1lZGlhVHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVkaWEgYXMgYW55ID09PSBcIlwiIHx8ICgobWVkaWEgYXMgYW55KS5pbmRleE9mKFwic2NyZWVuXCIpICE9PSAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1lZGlhVHlwZSA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZWRpYS5tZWRpYVRleHQgPT09IFwiXCIgfHwgKG1lZGlhLm1lZGlhVGV4dC5pbmRleE9mKFwic2NyZWVuXCIpICE9PSAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3R5bGVTaGVldCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHR5cGVvZiBzdHlsZVNoZWV0ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBjb25zdCBzdHlsZVNoZWV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKVxuICAgICAgICAgICAgc3R5bGVTaGVldEVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIlxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHN0eWxlU2hlZXRFbGVtZW50KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1lZGlhVHlwZSA9IHR5cGVvZiBzdHlsZVNoZWV0Lm1lZGlhXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChtZWRpYVR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGVTaGVldC5ydWxlc1tpXS5zZWxlY3RvclRleHQgJiYgc3R5bGVTaGVldC5ydWxlc1tpXS5zZWxlY3RvclRleHQudG9Mb3dlckNhc2UoKSA9PVxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvci50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQucnVsZXNbaV0uc3R5bGUuY3NzVGV4dCA9IHN0eWxlXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0eWxlU2hlZXQuYWRkUnVsZShzZWxlY3Rvciwgc3R5bGUpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWVkaWFUeXBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzdHlsZVNoZWV0TGVuZ3RoID0gMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN0eWxlU2hlZXRMZW5ndGggPSAoc3R5bGVTaGVldC5jc3NSdWxlcykgPyBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aCA6IDBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZVNoZWV0TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc3R5bGVTaGVldC5jc3NSdWxlc1tpXS5zZWxlY3RvclRleHQgJiYgc3R5bGVTaGVldC5jc3NSdWxlc1tpXS5zZWxlY3RvclRleHQudG9Mb3dlckNhc2UoKSA9PVxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvci50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQuY3NzUnVsZXNbaV0uc3R5bGUuY3NzVGV4dCA9IHN0eWxlXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0eWxlU2hlZXQuaW5zZXJ0UnVsZShzZWxlY3RvciArIFwie1wiICsgc3R5bGUgKyBcIn1cIiwgc3R5bGVTaGVldExlbmd0aClcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0U3R5bGVSdWxlcyhzZWxlY3Rvcikge1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSBzZWxlY3Rvci50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlU2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXSBhcyBhbnlcbiAgICAgICAgICAgIHZhciBzdHlsZVJ1bGVzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3R5bGVSdWxlcyA9IHN0eWxlU2hlZXQuY3NzUnVsZXMgPyBzdHlsZVNoZWV0LmNzc1J1bGVzIDogc3R5bGVTaGVldC5ydWxlc1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlUnVsZXNcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgc3R5bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdIVE1MRWxlbWVudC5zdHlsZVxuICAgIH1cbiAgICBcbiAgICBnZXQgY29tcHV0ZWRTdHlsZSgpIHtcbiAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUodGhpcy52aWV3SFRNTEVsZW1lbnQpXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgaGlkZGVuKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNIaWRkZW5cbiAgICB9XG4gICAgXG4gICAgXG4gICAgcHVibGljIHNldCBoaWRkZW4odjogYm9vbGVhbikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNIaWRkZW4gPSB2XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5faXNIaWRkZW4pIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCJcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgc2V0IHBhZ2VTY2FsZShzY2FsZTogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICBVSVZpZXcuX3BhZ2VTY2FsZSA9IHNjYWxlXG4gICAgICAgIFxuICAgICAgICBjb25zdCB6b29tID0gc2NhbGVcbiAgICAgICAgY29uc3Qgd2lkdGggPSAxMDAgLyB6b29tXG4gICAgICAgIGNvbnN0IHZpZXdIVE1MRWxlbWVudCA9IFVJQ29yZS5tYWluLnJvb3RWaWV3Q29udHJvbGxlci52aWV3LnZpZXdIVE1MRWxlbWVudFxuICAgICAgICB2aWV3SFRNTEVsZW1lbnQuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gXCJsZWZ0IHRvcFwiXG4gICAgICAgIHZpZXdIVE1MRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKFwiICsgem9vbSArIFwiKVwiXG4gICAgICAgIHZpZXdIVE1MRWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCIlXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXQgcGFnZVNjYWxlKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIFVJVmlldy5fcGFnZVNjYWxlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjYWxjdWxhdGVBbmRTZXRWaWV3RnJhbWUoKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgdGhpcyBtZXRob2QgdG8gY2FsY3VsYXRlIHRoZSBmcmFtZSBmb3IgdGhlIHZpZXcgaXRzZWxmXG4gICAgICAgIFxuICAgICAgICAvLyBUaGlzIGNhbiBiZSB1c2VkIHdoZW4gYWRkaW5nIHN1YnZpZXdzIHRvIGV4aXN0aW5nIHZpZXdzIGxpa2UgYnV0dG9uc1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgcHVibGljIGdldCBmcmFtZSgpOiBVSVJlY3RhbmdsZSB7XG4gICAgICAgIFxuICAgICAgICAvLyB2YXIgcmVzdWx0ID0gbmV3IFVJUmVjdGFuZ2xlKDEgKiB0aGlzLnZpZXdIVE1MRWxlbWVudC5vZmZzZXRMZWZ0LCAxICogdGhpcy52aWV3SFRNTEVsZW1lbnQub2Zmc2V0VG9wLCAxICogdGhpcy52aWV3SFRNTEVsZW1lbnQub2Zmc2V0SGVpZ2h0LCAxICogdGhpcy52aWV3SFRNTEVsZW1lbnQub2Zmc2V0V2lkdGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gcmVzdWx0LnpJbmRleCA9IDEgKiB0aGlzLnN0eWxlLnpJbmRleDtcbiAgICAgICAgXG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9mcmFtZVxuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVJUmVjdGFuZ2xlKDEgKiB0aGlzLnZpZXdIVE1MRWxlbWVudC5vZmZzZXRMZWZ0LCAxICogdGhpcy52aWV3SFRNTEVsZW1lbnQub2Zmc2V0VG9wLCAxICpcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5vZmZzZXRIZWlnaHQsIDEgKiB0aGlzLnZpZXdIVE1MRWxlbWVudC5vZmZzZXRXaWR0aClcbiAgICAgICAgICAgIHJlc3VsdC56SW5kZXggPSAwXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5jb3B5KClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzZXQgZnJhbWUocmVjdGFuZ2xlOiBVSVJlY3RhbmdsZSkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTKHJlY3RhbmdsZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RnJhbWUocmVjdGFuZ2xlKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXRGcmFtZShyZWN0YW5nbGUsIHpJbmRleCA9IDAsIHBlcmZvcm1VbmNoZWNrZWRMYXlvdXQgPSBOTykge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZnJhbWUgfHwgbmV3IFVJUmVjdGFuZ2xlKG5pbCwgbmlsLCBuaWwsIG5pbClcbiAgICAgICAgXG4gICAgICAgIGlmICh6SW5kZXggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZWN0YW5nbGUuekluZGV4ID0gekluZGV4XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZnJhbWUgPSByZWN0YW5nbGVcbiAgICAgICAgXG4gICAgICAgIC8vIFRoaXMgaXMgdXNlbGVzcyBiZWNhdXNlIGZyYW1lcyBhcmUgY29waWVkXG4gICAgICAgIC8vIGZyYW1lLmRpZENoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gICAgIC8vIERvIG5vdGhpbmdcbiAgICAgICAgLy8gfVxuICAgICAgICAvLyByZWN0YW5nbGUuZGlkQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgICAgdGhpcy5mcmFtZSA9IHJlY3RhbmdsZTtcbiAgICAgICAgLy8gfS5iaW5kKHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZyYW1lICYmIGZyYW1lLmlzRXF1YWxUbyhyZWN0YW5nbGUpICYmICFwZXJmb3JtVW5jaGVja2VkTGF5b3V0KSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFVJVmlldy5fc2V0QWJzb2x1dGVTaXplQW5kUG9zaXRpb24oXG4gICAgICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudCxcbiAgICAgICAgICAgIHJlY3RhbmdsZS50b3BMZWZ0LngsXG4gICAgICAgICAgICByZWN0YW5nbGUudG9wTGVmdC55LFxuICAgICAgICAgICAgcmVjdGFuZ2xlLndpZHRoLFxuICAgICAgICAgICAgcmVjdGFuZ2xlLmhlaWdodCxcbiAgICAgICAgICAgIHJlY3RhbmdsZS56SW5kZXhcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmIChmcmFtZS5oZWlnaHQgIT0gcmVjdGFuZ2xlLmhlaWdodCB8fCBmcmFtZS53aWR0aCAhPSByZWN0YW5nbGUud2lkdGggfHwgcGVyZm9ybVVuY2hlY2tlZExheW91dCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5ib3VuZHNEaWRDaGFuZ2UoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL3RoaXMubGF5b3V0U3Vidmlld3MoKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBib3VuZHMoKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzdWx0OiBVSVJlY3RhbmdsZVxuICAgICAgICBcbiAgICAgICAgLy8gaWYgKElTX05PVCh0aGlzLl9mcmFtZSkgJiYgdGhpcy5zdHlsZS5oZWlnaHQgPT0gXCJcIiAmJiB0aGlzLnN0eWxlLndpZHRoICA9PSBcIlwiICYmIHRoaXMuc3R5bGUubGVmdCA9PSBcIlwiICYmIHRoaXMuc3R5bGUucmlnaHQgPT0gXCJcIiAmJiB0aGlzLnN0eWxlLmJvdHRvbSA9PSBcIlwiICYmIHRoaXMuc3R5bGUudG9wID09IFwiXCIpIHtcbiAgICAgICAgXG4gICAgICAgIC8vICAgICByZXN1bHQgPSBuZXcgVUlSZWN0YW5nbGUoMCwgMCwgMCwgMClcbiAgICAgICAgXG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gZWxzZVxuICAgICAgICBpZiAoSVNfTk9UKHRoaXMuX2ZyYW1lKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgVUlSZWN0YW5nbGUoMCwgMCwgMSAqIHRoaXMudmlld0hUTUxFbGVtZW50Lm9mZnNldEhlaWdodCwgMSAqIHRoaXMudmlld0hUTUxFbGVtZW50Lm9mZnNldFdpZHRoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuZnJhbWUuY29weSgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3VsdC54ID0gMFxuICAgICAgICAgICAgcmVzdWx0LnkgPSAwXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2V0IGJvdW5kcyhyZWN0YW5nbGUpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5mcmFtZVxuICAgICAgICBcbiAgICAgICAgdGhpcy5mcmFtZSA9IG5ldyBVSVJlY3RhbmdsZShmcmFtZS50b3BMZWZ0LngsIGZyYW1lLnRvcExlZnQueSwgcmVjdGFuZ2xlLmhlaWdodCwgcmVjdGFuZ2xlLndpZHRoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgYm91bmRzRGlkQ2hhbmdlKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXRQb3NpdGlvbihcbiAgICAgICAgbGVmdDogbnVtYmVyIHwgc3RyaW5nID0gbmlsLFxuICAgICAgICByaWdodDogbnVtYmVyIHwgc3RyaW5nID0gbmlsLFxuICAgICAgICBib3R0b206IG51bWJlciB8IHN0cmluZyA9IG5pbCxcbiAgICAgICAgdG9wOiBudW1iZXIgfCBzdHJpbmcgPSBuaWwsXG4gICAgICAgIGhlaWdodDogbnVtYmVyIHwgc3RyaW5nID0gbmlsLFxuICAgICAgICB3aWR0aDogbnVtYmVyIHwgc3RyaW5nID0gbmlsXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmV2aW91c0JvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJsZWZ0XCIsIGxlZnQpXG4gICAgICAgIHRoaXMuc2V0U3R5bGVQcm9wZXJ0eShcInJpZ2h0XCIsIHJpZ2h0KVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJib3R0b21cIiwgYm90dG9tKVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJ0b3BcIiwgdG9wKVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIGlmIChib3VuZHMuaGVpZ2h0ICE9IHByZXZpb3VzQm91bmRzLmhlaWdodCB8fCBib3VuZHMud2lkdGggIT0gcHJldmlvdXNCb3VuZHMud2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICAgICAgdGhpcy5ib3VuZHNEaWRDaGFuZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXRTaXplcyhoZWlnaHQ/OiBudW1iZXIgfCBzdHJpbmcsIHdpZHRoPzogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmV2aW91c0JvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIGlmIChib3VuZHMuaGVpZ2h0ICE9IHByZXZpb3VzQm91bmRzLmhlaWdodCB8fCBib3VuZHMud2lkdGggIT0gcHJldmlvdXNCb3VuZHMud2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICAgICAgdGhpcy5ib3VuZHNEaWRDaGFuZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXRNaW5TaXplcyhoZWlnaHQ/OiBudW1iZXIgfCBzdHJpbmcsIHdpZHRoPzogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmV2aW91c0JvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtaW5IZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtaW5XaWR0aFwiLCB3aWR0aClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIGlmIChib3VuZHMuaGVpZ2h0ICE9IHByZXZpb3VzQm91bmRzLmhlaWdodCB8fCBib3VuZHMud2lkdGggIT0gcHJldmlvdXNCb3VuZHMud2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICAgICAgdGhpcy5ib3VuZHNEaWRDaGFuZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXRNYXhTaXplcyhoZWlnaHQ/OiBudW1iZXIgfCBzdHJpbmcsIHdpZHRoPzogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmV2aW91c0JvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtYXhIZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtYXhXaWR0aFwiLCB3aWR0aClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIGlmIChib3VuZHMuaGVpZ2h0ICE9IHByZXZpb3VzQm91bmRzLmhlaWdodCB8fCBib3VuZHMud2lkdGggIT0gcHJldmlvdXNCb3VuZHMud2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICAgICAgdGhpcy5ib3VuZHNEaWRDaGFuZ2UoKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXRNYXJnaW4obWFyZ2luPzogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmV2aW91c0JvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtYXJnaW5cIiwgbWFyZ2luKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICAgICAgaWYgKGJvdW5kcy5oZWlnaHQgIT0gcHJldmlvdXNCb3VuZHMuaGVpZ2h0IHx8IGJvdW5kcy53aWR0aCAhPSBwcmV2aW91c0JvdW5kcy53aWR0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgICAgICB0aGlzLmJvdW5kc0RpZENoYW5nZSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldE1hcmdpbnMobGVmdD86IG51bWJlciB8IHN0cmluZywgcmlnaHQ/OiBudW1iZXIgfCBzdHJpbmcsIGJvdHRvbT86IG51bWJlciB8IHN0cmluZywgdG9wPzogbnVtYmVyIHwgc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmV2aW91c0JvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtYXJnaW5MZWZ0XCIsIGxlZnQpXG4gICAgICAgIHRoaXMuc2V0U3R5bGVQcm9wZXJ0eShcIm1hcmdpblJpZ2h0XCIsIHJpZ2h0KVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtYXJnaW5Cb3R0b21cIiwgYm90dG9tKVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJtYXJnaW5Ub3BcIiwgdG9wKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICAgICAgaWYgKGJvdW5kcy5oZWlnaHQgIT0gcHJldmlvdXNCb3VuZHMuaGVpZ2h0IHx8IGJvdW5kcy53aWR0aCAhPSBwcmV2aW91c0JvdW5kcy53aWR0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgICAgICB0aGlzLmJvdW5kc0RpZENoYW5nZSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldFBhZGRpbmcocGFkZGluZz86IG51bWJlciB8IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJldmlvdXNCb3VuZHMgPSB0aGlzLmJvdW5kc1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRTdHlsZVByb3BlcnR5KFwicGFkZGluZ1wiLCBwYWRkaW5nKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICAgICAgaWYgKGJvdW5kcy5oZWlnaHQgIT0gcHJldmlvdXNCb3VuZHMuaGVpZ2h0IHx8IGJvdW5kcy53aWR0aCAhPSBwcmV2aW91c0JvdW5kcy53aWR0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgICAgICB0aGlzLmJvdW5kc0RpZENoYW5nZSgpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldFBhZGRpbmdzKGxlZnQ/OiBudW1iZXIgfCBzdHJpbmcsIHJpZ2h0PzogbnVtYmVyIHwgc3RyaW5nLCBib3R0b20/OiBudW1iZXIgfCBzdHJpbmcsIHRvcD86IG51bWJlciB8IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJldmlvdXNCb3VuZHMgPSB0aGlzLmJvdW5kc1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRTdHlsZVByb3BlcnR5KFwicGFkZGluZ0xlZnRcIiwgbGVmdClcbiAgICAgICAgdGhpcy5zZXRTdHlsZVByb3BlcnR5KFwicGFkZGluZ1JpZ2h0XCIsIHJpZ2h0KVxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJwYWRkaW5nQm90dG9tXCIsIGJvdHRvbSlcbiAgICAgICAgdGhpcy5zZXRTdHlsZVByb3BlcnR5KFwicGFkZGluZ1RvcFwiLCB0b3ApXG4gICAgICAgIFxuICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmJvdW5kc1xuICAgICAgICBpZiAoYm91bmRzLmhlaWdodCAhPSBwcmV2aW91c0JvdW5kcy5oZWlnaHQgfHwgYm91bmRzLndpZHRoICE9IHByZXZpb3VzQm91bmRzLndpZHRoKSB7XG4gICAgICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgICAgIHRoaXMuYm91bmRzRGlkQ2hhbmdlKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0Qm9yZGVyKFxuICAgICAgICByYWRpdXM6IG51bWJlciB8IHN0cmluZyA9IG5pbCxcbiAgICAgICAgd2lkdGg6IG51bWJlciB8IHN0cmluZyA9IDEsXG4gICAgICAgIGNvbG9yOiBVSUNvbG9yID0gVUlDb2xvci5ibGFja0NvbG9yLFxuICAgICAgICBzdHlsZTogc3RyaW5nID0gXCJzb2xpZFwiXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJib3JkZXJTdHlsZVwiLCBzdHlsZSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0U3R5bGVQcm9wZXJ0eShcImJvcmRlclJhZGl1c1wiLCByYWRpdXMpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFN0eWxlUHJvcGVydHkoXCJib3JkZXJDb2xvclwiLCBjb2xvci5zdHJpbmdWYWx1ZSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0U3R5bGVQcm9wZXJ0eShcImJvcmRlcldpZHRoXCIsIHdpZHRoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0U3R5bGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWU6IHN0cmluZywgdmFsdWU/OiBudW1iZXIgfCBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoSVNfTklMKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKElTX0RFRklORUQodmFsdWUpICYmICh2YWx1ZSBhcyBOdW1iZXIpLmlzQU51bWJlcikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gXCJcIiArICh2YWx1ZSBhcyBudW1iZXIpLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdHlsZVtwcm9wZXJ0eU5hbWVdID0gdmFsdWVcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coZXhjZXB0aW9uKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgdXNlckludGVyYWN0aW9uRW5hYmxlZCgpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9ICh0aGlzLnN0eWxlLnBvaW50ZXJFdmVudHMgIT0gXCJub25lXCIpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgdXNlckludGVyYWN0aW9uRW5hYmxlZCh1c2VySW50ZXJhY3Rpb25FbmFibGVkKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAodXNlckludGVyYWN0aW9uRW5hYmxlZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCJcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgYmFja2dyb3VuZENvbG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2dyb3VuZENvbG9yXG4gICAgfVxuICAgIFxuICAgIHNldCBiYWNrZ3JvdW5kQ29sb3IoYmFja2dyb3VuZENvbG9yOiBVSUNvbG9yKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yLnN0cmluZ1ZhbHVlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgYWxwaGEoKSB7XG4gICAgICAgIHJldHVybiAxICogKHRoaXMuc3R5bGUub3BhY2l0eSBhcyBhbnkpXG4gICAgfVxuICAgIFxuICAgIHNldCBhbHBoYShhbHBoYSkge1xuICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSBcIlwiICsgYWxwaGFcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGFuaW1hdGVWaWV3T3JWaWV3c1dpdGhEdXJhdGlvbkRlbGF5QW5kRnVuY3Rpb24oXG4gICAgICAgIHZpZXdPclZpZXdzOiBVSVZpZXcgfCBIVE1MRWxlbWVudCB8IFVJVmlld1tdIHwgSFRNTEVsZW1lbnRbXSxcbiAgICAgICAgZHVyYXRpb246IG51bWJlcixcbiAgICAgICAgZGVsYXk6IG51bWJlcixcbiAgICAgICAgdGltaW5nU3R5bGUgPSBcImN1YmljLWJlemllcigwLjI1LDAuMSwwLjI1LDEpXCIsXG4gICAgICAgIHRyYW5zZm9ybUZ1bmN0aW9uOiBGdW5jdGlvbixcbiAgICAgICAgdHJhbnNpdGlvbmNvbXBsZXRpb25GdW5jdGlvbjogRnVuY3Rpb25cbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBjYWxsVHJhbnNpdGlvbmNvbXBsZXRpb25GdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgKHRyYW5zaXRpb25jb21wbGV0aW9uRnVuY3Rpb24gfHwgbmlsKSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAodmlld09yVmlld3MgYXMgVUlWaWV3W10pLmZvckVhY2goZnVuY3Rpb24gKHZpZXcsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZpZXcuYW5pbWF0aW9uRGlkRmluaXNoKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19GSVJFRk9YKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggZG9lcyBub3QgZmlyZSB0aGUgdHJhbnNpdGlvbiBjb21wbGV0aW9uIGV2ZW50IHByb3Blcmx5XG4gICAgICAgICAgICBuZXcgVUlPYmplY3QoKS5wZXJmb3JtRnVuY3Rpb25XaXRoRGVsYXkoZGVsYXkgKyBkdXJhdGlvbiwgY2FsbFRyYW5zaXRpb25jb21wbGV0aW9uRnVuY3Rpb24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoISh2aWV3T3JWaWV3cyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgdmlld09yVmlld3MgPSBbdmlld09yVmlld3NdIGFzIGFueVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0cmFuc2l0aW9uU3R5bGVzID0gW11cbiAgICAgICAgY29uc3QgdHJhbnNpdGlvbkR1cmF0aW9ucyA9IFtdXG4gICAgICAgIGNvbnN0IHRyYW5zaXRpb25EZWxheXMgPSBbXVxuICAgICAgICBjb25zdCB0cmFuc2l0aW9uVGltaW5ncyA9IFtdXG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICh2aWV3T3JWaWV3cyBhcyBhbnkpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB2aWV3ID0gdmlld09yVmlld3NbaV1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHZpZXcudmlld0hUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmlldyA9IHZpZXcudmlld0hUTUxFbGVtZW50XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZpZXcuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgdHJhbnNpdGlvbkRpZEZpbmlzaCwgdHJ1ZSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJhbnNpdGlvblN0eWxlcy5wdXNoKHZpZXcuc3R5bGUudHJhbnNpdGlvbilcbiAgICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbnMucHVzaCh2aWV3LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbilcbiAgICAgICAgICAgIHRyYW5zaXRpb25EZWxheXMucHVzaCh2aWV3LnN0eWxlLnRyYW5zaXRpb25EZWxheSlcbiAgICAgICAgICAgIHRyYW5zaXRpb25UaW1pbmdzLnB1c2godmlldy5zdHlsZS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvbiA9IFwiYWxsXCJcbiAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gXCJcIiArIGR1cmF0aW9uICsgXCJzXCJcbiAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gXCJcIiArIGRlbGF5ICsgXCJzXCJcbiAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uID0gdGltaW5nU3R5bGVcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRyYW5zZm9ybUZ1bmN0aW9uKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0cmFuc2l0aW9uT2JqZWN0ID0ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcImZpbmlzaEltbWVkaWF0ZWx5XCI6IGZpbmlzaFRyYW5zaXRpb25JbW1lZGlhdGVseSxcbiAgICAgICAgICAgIFwiZGlkRmluaXNoXCI6IHRyYW5zaXRpb25EaWRGaW5pc2hNYW51YWxseSxcbiAgICAgICAgICAgIFwidmlld3NcIjogdmlld09yVmlld3MsXG4gICAgICAgICAgICBcInJlZ2lzdHJhdGlvblRpbWVcIjogRGF0ZS5ub3coKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGZpbmlzaFRyYW5zaXRpb25JbW1lZGlhdGVseSgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHZpZXdPclZpZXdzIGFzIGFueSkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IHZpZXdPclZpZXdzW2ldXG4gICAgICAgICAgICAgICAgaWYgKHZpZXcudmlld0hUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcgPSB2aWV3LnZpZXdIVE1MRWxlbWVudFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LnN0eWxlLnRyYW5zaXRpb24gPSBcImFsbFwiXG4gICAgICAgICAgICAgICAgdmlldy5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBcIlwiICsgZHVyYXRpb24gKyBcInNcIlxuICAgICAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gXCJcIiArIGRlbGF5ICsgXCJzXCJcbiAgICAgICAgICAgICAgICB2aWV3LnN0eWxlLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uU3R5bGVzW2ldXG4gICAgICAgICAgICAgICAgdmlldy5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSB0cmFuc2l0aW9uRHVyYXRpb25zW2ldXG4gICAgICAgICAgICAgICAgdmlldy5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSB0cmFuc2l0aW9uRGVsYXlzW2ldXG4gICAgICAgICAgICAgICAgdmlldy5zdHlsZS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24gPSB0cmFuc2l0aW9uVGltaW5nc1tpXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB0cmFuc2l0aW9uRGlkRmluaXNoKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgdmlldyA9IGV2ZW50LnNyY0VsZW1lbnRcbiAgICAgICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpZXcudmlld0hUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmlldyA9IHZpZXcudmlld0hUTUxFbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aWV3LnN0eWxlLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uU3R5bGVzW2ldXG4gICAgICAgICAgICB2aWV3LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IHRyYW5zaXRpb25EdXJhdGlvbnNbaV1cbiAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gdHJhbnNpdGlvbkRlbGF5c1tpXVxuICAgICAgICAgICAgdmlldy5zdHlsZS50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24gPSB0cmFuc2l0aW9uVGltaW5nc1tpXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYWxsVHJhbnNpdGlvbmNvbXBsZXRpb25GdW5jdGlvbigpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZpZXcucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgdHJhbnNpdGlvbkRpZEZpbmlzaCwgdHJ1ZSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiB0cmFuc2l0aW9uRGlkRmluaXNoTWFudWFsbHkoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICh2aWV3T3JWaWV3cyBhcyBhbnkpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSB2aWV3T3JWaWV3c1tpXVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh2aWV3LnZpZXdIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3ID0gdmlldy52aWV3SFRNTEVsZW1lbnRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmlldy5zdHlsZS50cmFuc2l0aW9uID0gdHJhbnNpdGlvblN0eWxlc1tpXVxuICAgICAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gdHJhbnNpdGlvbkR1cmF0aW9uc1tpXVxuICAgICAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gdHJhbnNpdGlvbkRlbGF5c1tpXVxuICAgICAgICAgICAgICAgIHZpZXcuc3R5bGUudHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uID0gdHJhbnNpdGlvblRpbWluZ3NbaV1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsIHRyYW5zaXRpb25EaWRGaW5pc2gsIHRydWUpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uT2JqZWN0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBhbmltYXRpb25EaWRGaW5pc2goKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBfdHJhbnNmb3JtQXR0cmlidXRlID0gKChcInRyYW5zZm9ybVwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkgPyBcInRyYW5zZm9ybVwiIDogdW5kZWZpbmVkKSB8fFxuICAgICAgICAoKFwiLXdlYmtpdC10cmFuc2Zvcm1cIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpID8gXCItd2Via2l0LXRyYW5zZm9ybVwiIDogXCJ1bmRlZmluZWRcIikgfHxcbiAgICAgICAgKChcIi1tb3otdHJhbnNmb3JtXCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKSA/IFwiLW1vei10cmFuc2Zvcm1cIiA6IFwidW5kZWZpbmVkXCIpIHx8XG4gICAgICAgICgoXCItbXMtdHJhbnNmb3JtXCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKSA/IFwiLW1zLXRyYW5zZm9ybVwiIDogXCJ1bmRlZmluZWRcIikgfHxcbiAgICAgICAgKChcIi1vLXRyYW5zZm9ybVwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSkgPyBcIi1vLXRyYW5zZm9ybVwiIDogXCJ1bmRlZmluZWRcIilcbiAgICBcbiAgICBzdGF0aWMgX3NldEFic29sdXRlU2l6ZUFuZFBvc2l0aW9uKGVsZW1lbnQsIGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgekluZGV4ID0gMCkge1xuICAgICAgICBcbiAgICAgICAgLy8gaWYgKCFVSVZpZXcuX3RyYW5zZm9ybUF0dHJpYnV0ZSkge1xuICAgICAgICBcbiAgICAgICAgLy8gICAgIFVJVmlldy5fdHJhbnNmb3JtQXR0cmlidXRlID0gKCgndHJhbnNmb3JtJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpID8gJ3RyYW5zZm9ybScgOiB1bmRlZmluZWQpO1xuICAgICAgICAvLyAgICAgVUlWaWV3Ll90cmFuc2Zvcm1BdHRyaWJ1dGUgPSBVSVZpZXcuX3RyYW5zZm9ybUF0dHJpYnV0ZSB8fCAoKCctd2Via2l0LXRyYW5zZm9ybScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKSA/ICctd2Via2l0LXRyYW5zZm9ybScgOiAndW5kZWZpbmVkJyk7XG4gICAgICAgIC8vICAgICBVSVZpZXcuX3RyYW5zZm9ybUF0dHJpYnV0ZSA9IFVJVmlldy5fdHJhbnNmb3JtQXR0cmlidXRlIHx8ICgoJy1tb3otdHJhbnNmb3JtJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpID8gJy1tb3otdHJhbnNmb3JtJyA6ICd1bmRlZmluZWQnKTtcbiAgICAgICAgLy8gICAgIFVJVmlldy5fdHJhbnNmb3JtQXR0cmlidXRlID0gVUlWaWV3Ll90cmFuc2Zvcm1BdHRyaWJ1dGUgfHwgKCgnLW1zLXRyYW5zZm9ybScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlKSA/ICctbXMtdHJhbnNmb3JtJyA6ICd1bmRlZmluZWQnKTtcbiAgICAgICAgLy8gICAgIFVJVmlldy5fdHJhbnNmb3JtQXR0cmlidXRlID0gVUlWaWV3Ll90cmFuc2Zvcm1BdHRyaWJ1dGUgfHwgKCgnLW8tdHJhbnNmb3JtJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpID8gJy1vLXRyYW5zZm9ybScgOiAndW5kZWZpbmVkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIUlTKGVsZW1lbnQpIHx8ICFlbGVtZW50Lm9iZXlBdXRvbGF5b3V0ICYmICFlbGVtZW50LmdldEF0dHJpYnV0ZShcIm9iZXlBdXRvbGF5b3V0XCIpKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGVsZW1lbnQuaWQgPT0gXCJtYWluVmlld1wiKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGFzZCA9IDFcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoSVMoaGVpZ2h0KSkge1xuICAgICAgICAgICAgaGVpZ2h0ID0gaGVpZ2h0LmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoSVMod2lkdGgpKSB7XG4gICAgICAgICAgICB3aWR0aCA9IHdpZHRoLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgc3RyID0gZWxlbWVudC5zdHlsZS5jc3NUZXh0XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmcmFtZVRyYW5zZm9ybSA9IFVJVmlldy5fdHJhbnNmb3JtQXR0cmlidXRlICsgXCI6IHRyYW5zbGF0ZTNkKFwiICsgKDEgKiBsZWZ0KS5pbnRlZ2VyVmFsdWUgKyBcInB4LCBcIiArXG4gICAgICAgICAgICAoMSAqIHRvcCkuaW50ZWdlclZhbHVlICsgXCJweCwgXCIgKyB6SW5kZXguaW50ZWdlclZhbHVlICsgXCJweClcIlxuICAgICAgICBcbiAgICAgICAgaWYgKGVsZW1lbnQuVUlWaWV3KSB7XG4gICAgICAgICAgICBzdHIgPSBzdHIgKyBmcmFtZVRyYW5zZm9ybSArIFwiO1wiXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LlVJVmlldy5fZnJhbWVUcmFuc2Zvcm0gPSBmcmFtZVRyYW5zZm9ybVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoaGVpZ2h0ID09IG5pbCkge1xuICAgICAgICAgICAgc3RyID0gc3RyICsgXCIgaGVpZ2h0OiB1bnNldDtcIlxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RyID0gc3RyICsgXCIgaGVpZ2h0OlwiICsgaGVpZ2h0ICsgXCI7XCJcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHdpZHRoID09IG5pbCkge1xuICAgICAgICAgICAgc3RyID0gc3RyICsgXCIgd2lkdGg6IHVuc2V0O1wiXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHIgPSBzdHIgKyBcIiB3aWR0aDpcIiArIHdpZHRoICsgXCI7XCJcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGVsZW1lbnQuaWQgPT0gXCJtYWluVmlld1wiKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGFzZCA9IDFcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBlbGVtZW50LnN0eWxlLmNzc1RleHQgPSBlbGVtZW50LnN0eWxlLmNzc1RleHQgKyBzdHJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBwZXJmb3JtQXV0b0xheW91dChwYXJlbnRFbGVtZW50LCB2aXN1YWxGb3JtYXRBcnJheSwgY29uc3RyYWludHNBcnJheSkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgQXV0b0xheW91dC5WaWV3KClcbiAgICAgICAgXG4gICAgICAgIGlmIChJUyh2aXN1YWxGb3JtYXRBcnJheSkgJiYgSVModmlzdWFsRm9ybWF0QXJyYXkubGVuZ3RoKSkge1xuICAgICAgICAgICAgdmlldy5hZGRDb25zdHJhaW50cyhBdXRvTGF5b3V0LlZpc3VhbEZvcm1hdC5wYXJzZSh2aXN1YWxGb3JtYXRBcnJheSwgeyBleHRlbmRlZDogdHJ1ZSB9KSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKElTKGNvbnN0cmFpbnRzQXJyYXkpICYmIElTKGNvbnN0cmFpbnRzQXJyYXkubGVuZ3RoKSkge1xuICAgICAgICAgICAgdmlldy5hZGRDb25zdHJhaW50cyhjb25zdHJhaW50c0FycmF5KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IHt9XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB2aWV3LnN1YlZpZXdzKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdmlldy5zdWJWaWV3cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBuaWxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsga2V5KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiRXJyb3Igb2NjdXJyZWQgXCIgKyBlcnJvcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICYmICFlbGVtZW50Lm9iZXlBdXRvbGF5b3V0ICYmICFlbGVtZW50LmdldEF0dHJpYnV0ZShcIm9iZXlBdXRvbGF5b3V0XCIpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gZWxlbWVudC5jbGFzc05hbWUgPyBcIiBhYnNcIiA6IFwiYWJzXCJcbiAgICAgICAgICAgICAgICBlbGVtZW50c1trZXldID0gZWxlbWVudFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBwYXJlbnRVSVZpZXcgPSBuaWxcbiAgICAgICAgXG4gICAgICAgIGlmIChwYXJlbnRFbGVtZW50LlVJVmlldykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYXJlbnRVSVZpZXcgPSBwYXJlbnRFbGVtZW50LlVJVmlld1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHVwZGF0ZUxheW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZpZXcuc2V0U2l6ZShcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID8gcGFyZW50RWxlbWVudC5jbGllbnRXaWR0aCA6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQgPyBwYXJlbnRFbGVtZW50LmNsaWVudEhlaWdodCA6IHdpbmRvdy5pbm5lckhlaWdodFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgZm9yIChrZXkgaW4gdmlldy5zdWJWaWV3cykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICghdmlldy5zdWJWaWV3cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YlZpZXcgPSB2aWV3LnN1YlZpZXdzW2tleV1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBVSVZpZXcuX3NldEFic29sdXRlU2l6ZUFuZFBvc2l0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlZpZXcubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlZpZXcudG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViVmlldy53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlZpZXcuaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhcmVudFVJVmlldy5kaWRMYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdXBkYXRlTGF5b3V0KClcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUxheW91dFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIHJ1bkZ1bmN0aW9uQmVmb3JlTmV4dEZyYW1lKHN0ZXA6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19TQUZBUkkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGEgbWljcm90YXNrXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKHN0ZXApXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBzY2hlZHVsZUxheW91dFZpZXdzSWZOZWVkZWQoKSB7XG4gICAgICAgIFxuICAgICAgICBVSVZpZXcucnVuRnVuY3Rpb25CZWZvcmVOZXh0RnJhbWUoVUlWaWV3LmxheW91dFZpZXdzSWZOZWVkZWQpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzdGF0aWMgbGF5b3V0Vmlld3NJZk5lZWRlZCgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBVSVZpZXcuX3ZpZXdzVG9MYXlvdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBVSVZpZXcuX3ZpZXdzVG9MYXlvdXRbaV1cbiAgICAgICAgICAgIHZpZXcubGF5b3V0SWZOZWVkZWQoKVxuICAgICAgICB9XG4gICAgICAgIFVJVmlldy5fdmlld3NUb0xheW91dCA9IFtdXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldE5lZWRzTGF5b3V0KCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3Nob3VsZExheW91dCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3Nob3VsZExheW91dCA9IFlFU1xuICAgICAgICBcbiAgICAgICAgLy8gUmVnaXN0ZXIgdmlldyBmb3IgbGF5b3V0IGJlZm9yZSBuZXh0IGZyYW1lXG4gICAgICAgIFVJVmlldy5fdmlld3NUb0xheW91dC5wdXNoKHRoaXMpXG4gICAgICAgIFxuICAgICAgICBpZiAoVUlWaWV3Ll92aWV3c1RvTGF5b3V0Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBVSVZpZXcuc2NoZWR1bGVMYXlvdXRWaWV3c0lmTmVlZGVkKClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IG5lZWRzTGF5b3V0KCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3VsZExheW91dFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgbGF5b3V0SWZOZWVkZWQoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuX3Nob3VsZExheW91dCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3Nob3VsZExheW91dCA9IE5PXG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmxheW91dFN1YnZpZXdzKClcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coZXhjZXB0aW9uKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGxheW91dFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3Nob3VsZExheW91dCA9IE5PXG4gICAgICAgIFxuICAgICAgICAvLyBBdXRvbGF5b3V0XG4gICAgICAgIC8vd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX3VwZGF0ZUxheW91dEZ1bmN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuY29uc3RyYWludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxheW91dEZ1bmN0aW9uID0gVUlWaWV3LnBlcmZvcm1BdXRvTGF5b3V0KHRoaXMudmlld0hUTUxFbGVtZW50LCBudWxsLCB0aGlzLmNvbnN0cmFpbnRzKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5fdXBkYXRlTGF5b3V0RnVuY3Rpb24gPSB0aGlzLmxheW91dFN1YnZpZXdzLmJpbmQodGhpcyk7XG4gICAgICAgIFxuICAgICAgICAvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl91cGRhdGVMYXlvdXRGdW5jdGlvbik7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl92aWV3Q29udHJvbGxlckxheW91dEZ1bmN0aW9uKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYXBwbHlDbGFzc2VzQW5kU3R5bGVzKClcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJ2aWV3cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzdWJ2aWV3ID0gdGhpcy5zdWJ2aWV3c1tpXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzdWJ2aWV3LmNhbGN1bGF0ZUFuZFNldFZpZXdGcmFtZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vc3Vidmlldy5sYXlvdXRTdWJ2aWV3cygpO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlkTGF5b3V0U3Vidmlld3MoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgYXBwbHlDbGFzc2VzQW5kU3R5bGVzKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvL3ZhciBjbGFzc2VzU3RyaW5nID0gXCJcIjtcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdHlsZUNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgc3R5bGVDbGFzcyA9IHRoaXMuc3R5bGVDbGFzc2VzW2ldXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzdHlsZUNsYXNzKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuY2xhc3NMaXN0LmFkZChzdHlsZUNsYXNzKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9jbGFzc2VzU3RyaW5nID0gY2xhc3Nlc1N0cmluZyArIFwiIFwiICsgc3R5bGVDbGFzcztcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy90aGlzLnZpZXdIVE1MRWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc2VzU3RyaW5nO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBkaWRMYXlvdXRTdWJ2aWV3cygpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2RpZExheW91dFN1YnZpZXdzRGVsZWdhdGVGdW5jdGlvbigpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgY29uc3RyYWludHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb25zdHJhaW50c1xuICAgIH1cbiAgICBcbiAgICBzZXQgY29uc3RyYWludHMoY29uc3RyYWludHMpIHtcbiAgICAgICAgdGhpcy5fY29uc3RyYWludHMgPSBjb25zdHJhaW50c1xuICAgIH1cbiAgICBcbiAgICBhZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29uc3RyYWludHMucHVzaChjb25zdHJhaW50KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgYWRkQ29uc3RyYWludHNXaXRoVmlzdWFsRm9ybWF0KHZpc3VhbEZvcm1hdEFycmF5KSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50cy5jb25jYXQoQXV0b0xheW91dC5WaXN1YWxGb3JtYXQucGFyc2UoXG4gICAgICAgICAgICB2aXN1YWxGb3JtYXRBcnJheSxcbiAgICAgICAgICAgIHsgZXh0ZW5kZWQ6IHRydWUgfVxuICAgICAgICApKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGNvbnN0cmFpbnRXaXRoVmlldyh2aWV3LCBhdHRyaWJ1dGUsIHJlbGF0aW9uLCB0b1ZpZXcsIHRvQXR0cmlidXRlLCBtdWx0aXBsaWVyLCBjb25zdGFudCwgcHJpb3JpdHkpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBVSVZpZXdPYmplY3QgPSBuaWxcbiAgICAgICAgdmFyIHZpZXdJRCA9IG51bGxcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIGlmICh2aWV3LmlzS2luZE9mQ2xhc3MgJiYgdmlldy5pc0tpbmRPZkNsYXNzKFVJVmlldykpIHtcbiAgICAgICAgICAgICAgICBVSVZpZXdPYmplY3QgPSB2aWV3XG4gICAgICAgICAgICAgICAgdmlldyA9IHZpZXcudmlld0hUTUxFbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aWV3SUQgPSB2aWV3LmlkXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciB0b1VJVmlld09iamVjdCA9IG5pbFxuICAgICAgICB2YXIgdG9WaWV3SUQgPSBudWxsXG4gICAgICAgIGlmICh0b1ZpZXcpIHtcbiAgICAgICAgICAgIGlmICh0b1ZpZXcuaXNLaW5kT2ZDbGFzcyAmJiB2aWV3LmlzS2luZE9mQ2xhc3MoVUlWaWV3KSkge1xuICAgICAgICAgICAgICAgIHRvVUlWaWV3T2JqZWN0ID0gdG9WaWV3XG4gICAgICAgICAgICAgICAgdG9WaWV3ID0gdG9WaWV3LnZpZXdIVE1MRWxlbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9WaWV3SUQgPSB0b1ZpZXcuaWRcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY29uc3RyYWludCA9IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmlldzE6IHZpZXdJRCxcbiAgICAgICAgICAgIGF0dHIxOiBhdHRyaWJ1dGUsXG4gICAgICAgICAgICByZWxhdGlvbjogcmVsYXRpb24sXG4gICAgICAgICAgICB2aWV3MjogdG9WaWV3SUQsXG4gICAgICAgICAgICBhdHRyMjogdG9BdHRyaWJ1dGUsXG4gICAgICAgICAgICBtdWx0aXBsaWVyOiBtdWx0aXBsaWVyLFxuICAgICAgICAgICAgY29uc3RhbnQ6IGNvbnN0YW50LFxuICAgICAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBjb25zdHJhaW50QXR0cmlidXRlID0ge1xuICAgICAgICBcbiAgICAgICAgXCJsZWZ0XCI6IEF1dG9MYXlvdXQuQXR0cmlidXRlLkxFRlQsXG4gICAgICAgIFwicmlnaHRcIjogQXV0b0xheW91dC5BdHRyaWJ1dGUuUklHSFQsXG4gICAgICAgIFwiYm90dG9tXCI6IEF1dG9MYXlvdXQuQXR0cmlidXRlLkJPVFRPTSxcbiAgICAgICAgXCJ0b3BcIjogQXV0b0xheW91dC5BdHRyaWJ1dGUuVE9QLFxuICAgICAgICBcImNlbnRlclhcIjogQXV0b0xheW91dC5BdHRyaWJ1dGUuQ0VOVEVSWCxcbiAgICAgICAgXCJjZW50ZXJZXCI6IEF1dG9MYXlvdXQuQXR0cmlidXRlLkNFTlRFUlksXG4gICAgICAgIFwiaGVpZ2h0XCI6IEF1dG9MYXlvdXQuQXR0cmlidXRlLkhFSUdIVCxcbiAgICAgICAgXCJ3aWR0aFwiOiBBdXRvTGF5b3V0LkF0dHJpYnV0ZS5XSURUSCxcbiAgICAgICAgXCJ6SW5kZXhcIjogQXV0b0xheW91dC5BdHRyaWJ1dGUuWklOREVYLFxuICAgICAgICAvLyBOb3Qgc3VyZSB3aGF0IHRoZXNlIGFyZSBmb3JcbiAgICAgICAgXCJjb25zdGFudFwiOiBBdXRvTGF5b3V0LkF0dHJpYnV0ZS5OT1RBTkFUVFJJQlVURSxcbiAgICAgICAgXCJ2YXJpYWJsZVwiOiBBdXRvTGF5b3V0LkF0dHJpYnV0ZS5WQVJJQUJMRVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGNvbnN0cmFpbnRSZWxhdGlvbiA9IHtcbiAgICAgICAgXG4gICAgICAgIFwiZXF1YWxcIjogQXV0b0xheW91dC5SZWxhdGlvbi5FUVUsXG4gICAgICAgIFwibGVzc1RoYW5PckVxdWFsXCI6IEF1dG9MYXlvdXQuUmVsYXRpb24uTEVRLFxuICAgICAgICBcImdyZWF0ZXJUaGFuT3JFcXVhbFwiOiBBdXRvTGF5b3V0LlJlbGF0aW9uLkdFUVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3Vidmlld1dpdGhJRCh2aWV3SUQpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzdWx0SFRNTEVsZW1lbnQgPSBuaWxcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3VsdEhUTUxFbGVtZW50ID0gdGhpcy52aWV3SFRNTEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIiArIHZpZXdJRClcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3VsdEhUTUxFbGVtZW50ICYmIHJlc3VsdEhUTUxFbGVtZW50LlVJVmlldykge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdEhUTUxFbGVtZW50LlVJVmlld1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuaWxcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgcmVjdGFuZ2xlQ29udGFpbmluZ1N1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2VudGVyID0gdGhpcy5ib3VuZHMuY2VudGVyXG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVJUmVjdGFuZ2xlKGNlbnRlci54LCBjZW50ZXIueSwgMCwgMClcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJ2aWV3cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzdWJ2aWV3ID0gdGhpcy5zdWJ2aWV3c1tpXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZnJhbWUgPSBzdWJ2aWV3LmZyYW1lXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlY3RhbmdsZUNvbnRhaW5pbmdTdWJ2aWV3cyA9IHN1YnZpZXcucmVjdGFuZ2xlQ29udGFpbmluZ1N1YnZpZXdzKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZnJhbWUgPSBmcmFtZS5jb25jYXRlbmF0ZVdpdGhSZWN0YW5nbGUocmVjdGFuZ2xlQ29udGFpbmluZ1N1YnZpZXdzKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0ZW5hdGVXaXRoUmVjdGFuZ2xlKGZyYW1lKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGhhc1N1YnZpZXcodmlldzogVUlWaWV3KSB7XG4gICAgICAgIFxuICAgICAgICAvLyBUaGlzIGlzIGZvciBwZXJmb3JtYW5jZSByZWFzb25zXG4gICAgICAgIGlmICghSVModmlldykpIHtcbiAgICAgICAgICAgIHJldHVybiBOT1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vidmlld3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YnZpZXcgPSB0aGlzLnN1YnZpZXdzW2ldXG4gICAgICAgICAgICBpZiAoc3VidmlldyA9PSB2aWV3KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1xuICAgIH1cbiAgICBcbiAgICBnZXQgdmlld0JlbG93VGhpc1ZpZXcoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdDogVUlWaWV3ID0gKHRoaXMudmlld0hUTUxFbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgYXMgYW55IHx8IHt9KS5VSVZpZXdcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICBnZXQgdmlld0Fib3ZlVGhpc1ZpZXcoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdDogVUlWaWV3ID0gKHRoaXMudmlld0hUTUxFbGVtZW50Lm5leHRFbGVtZW50U2libGluZyBhcyBhbnkgfHwge30pLlVJVmlld1xuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIGFkZFN1YnZpZXcodmlldzogVUlWaWV3LCBhYm92ZVZpZXc/OiBVSVZpZXcpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5oYXNTdWJ2aWV3KHZpZXcpICYmIElTKHZpZXcpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZpZXcud2lsbE1vdmVUb1N1cGVydmlldyh0aGlzKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoSVMoYWJvdmVWaWV3KSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlld0hUTUxFbGVtZW50Lmluc2VydEJlZm9yZSh2aWV3LnZpZXdIVE1MRWxlbWVudCwgYWJvdmVWaWV3LnZpZXdIVE1MRWxlbWVudC5uZXh0U2libGluZylcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnZpZXdzLmluc2VydEVsZW1lbnRBdEluZGV4KHRoaXMuc3Vidmlld3MuaW5kZXhPZihhYm92ZVZpZXcpLCB2aWV3KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuYXBwZW5kQ2hpbGQodmlldy52aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJ2aWV3cy5wdXNoKHZpZXcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aWV3LmRpZE1vdmVUb1N1cGVydmlldyh0aGlzKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5zdXBlcnZpZXcgJiYgdGhpcy5pc01lbWJlck9mVmlld1RyZWUpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2aWV3LmJyb2FkY2FzdEV2ZW50SW5TdWJ0cmVlKHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFVJVmlldy5icm9hZGNhc3RFdmVudE5hbWUuQWRkZWRUb1ZpZXdUcmVlLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBuaWxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgYWRkU3Vidmlld3Modmlld3M6IFVJVmlld1tdKSB7XG4gICAgICAgIHZpZXdzLmZvckVhY2goZnVuY3Rpb24gKHRoaXM6IFVJVmlldywgdmlldzogVUlWaWV3LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU3Vidmlldyh2aWV3KVxuICAgICAgICB9LCB0aGlzKVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBtb3ZlVG9Cb3R0b21PZlN1cGVydmlldygpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChJUyh0aGlzLnN1cGVydmlldykpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYm90dG9tVmlldyA9IHRoaXMuc3VwZXJ2aWV3LnN1YnZpZXdzLmZpcnN0RWxlbWVudFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYm90dG9tVmlldyA9PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc3VwZXJ2aWV3LnN1YnZpZXdzLnJlbW92ZUVsZW1lbnQodGhpcylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdXBlcnZpZXcuc3Vidmlld3MuaW5zZXJ0RWxlbWVudEF0SW5kZXgoMCwgdGhpcylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdXBlcnZpZXcudmlld0hUTUxFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLnZpZXdIVE1MRWxlbWVudCwgYm90dG9tVmlldy52aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIG1vdmVUb1RvcE9mU3VwZXJ2aWV3KCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTKHRoaXMuc3VwZXJ2aWV3KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0b3BWaWV3ID0gdGhpcy5zdXBlcnZpZXcuc3Vidmlld3MubGFzdEVsZW1lbnRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRvcFZpZXcgPT0gdGhpcykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN1cGVydmlldy5zdWJ2aWV3cy5yZW1vdmVFbGVtZW50KHRoaXMpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc3VwZXJ2aWV3LnN1YnZpZXdzLnB1c2godGhpcylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdXBlcnZpZXcudmlld0hUTUxFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudmlld0hUTUxFbGVtZW50KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICByZW1vdmVGcm9tU3VwZXJ2aWV3KCkge1xuICAgICAgICBpZiAoSVModGhpcy5zdXBlcnZpZXcpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZm9yRWFjaFZpZXdJblN1YnRyZWUoZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2aWV3LmJsdXIoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnN1cGVydmlldy5zdWJ2aWV3cy5pbmRleE9mKHRoaXMpXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3VwZXJ2aWV3LnN1YnZpZXdzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICAgICAgICB0aGlzLnN1cGVydmlldy52aWV3SFRNTEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy52aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5zdXBlcnZpZXcgPSBuaWxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmJyb2FkY2FzdEV2ZW50SW5TdWJ0cmVlKHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFVJVmlldy5icm9hZGNhc3RFdmVudE5hbWUuUmVtb3ZlZEZyb21WaWV3VHJlZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczogbmlsXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgXG4gICAgd2lsbEFwcGVhcigpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgd2lsbE1vdmVUb1N1cGVydmlldyhzdXBlcnZpZXc6IFVJVmlldykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2V0SW5uZXJIVE1MRnJvbUtleUlmUG9zc2libGUoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2V0SW5uZXJIVE1MRnJvbUxvY2FsaXplZFRleHRPYmplY3RJZlBvc3NpYmxlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGRpZE1vdmVUb1N1cGVydmlldyhzdXBlcnZpZXc6IFVJVmlldykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zdXBlcnZpZXcgPSBzdXBlcnZpZXdcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHdhc0FkZGVkVG9WaWV3VHJlZSgpIHtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHdhc1JlbW92ZWRGcm9tVmlld1RyZWUoKSB7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgaXNNZW1iZXJPZlZpZXdUcmVlKCkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMudmlld0hUTUxFbGVtZW50XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBlbGVtZW50OyBpID0gaSkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50RWxlbWVudCAmJiBlbGVtZW50LnBhcmVudEVsZW1lbnQgPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBZRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTk9cbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IGFsbFN1cGVydmlld3MoKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdXG4gICAgICAgIHZhciB2aWV3OiBVSVZpZXcgPSB0aGlzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBJUyh2aWV3KTsgaSA9IGkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZpZXcpXG4gICAgICAgICAgICB2aWV3ID0gdmlldy5zdXBlcnZpZXdcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldE5lZWRzTGF5b3V0T25BbGxTdXBlcnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hbGxTdXBlcnZpZXdzLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uICh2aWV3OiBVSVZpZXcsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2aWV3LnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc2V0TmVlZHNMYXlvdXRVcFRvUm9vdFZpZXcoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0T25BbGxTdXBlcnZpZXdzKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5mb2N1cygpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBibHVyKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuYmx1cigpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBfbG9hZFVJRXZlbnRzKCkge1xuICAgICAgICBcbiAgICAgICAgLy90aGlzLnZpZXdIVE1MRWxlbWVudCA9IG5pbDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlzVG91Y2hFdmVudENsYXNzRGVmaW5lZDogYm9vbGVhbiA9IE5PIHx8ICh3aW5kb3cgYXMgYW55KS5Ub3VjaEV2ZW50XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYXVzZUV2ZW50ID0gKGV2ZW50OiBFdmVudCwgZm9yY2VkID0gTk8pID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMucGF1c2VzUG9pbnRlckV2ZW50cyB8fCBmb3JjZWQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChldmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWVcbiAgICAgICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24gJiYgdGhpcy5zdG9wc1BvaW50ZXJFdmVudFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBvbk1vdXNlRG93biA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoKHRoaXMuaWdub3Jlc1RvdWNoZXMgJiYgaXNUb3VjaEV2ZW50Q2xhc3NEZWZpbmVkICYmIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkgfHxcbiAgICAgICAgICAgICAgICAoKHRoaXMuaWdub3Jlc01vdXNlIHx8IChJUyh0aGlzLl90b3VjaEV2ZW50VGltZSkgJiYgKERhdGUubm93KCkgLSB0aGlzLl90b3VjaEV2ZW50VGltZSkgPiA1MDApKSAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJEb3duLCBldmVudClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5faXNQb2ludGVySW5zaWRlID0gWUVTXG4gICAgICAgICAgICB0aGlzLl9pc1BvaW50ZXJWYWxpZCA9IFlFU1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbFBvaW50ZXJQb3NpdGlvbiA9IG5ldyBVSVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpXG4gICAgICAgICAgICBpZiAoaXNUb3VjaEV2ZW50Q2xhc3NEZWZpbmVkICYmIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX3RvdWNoRXZlbnRUaW1lID0gRGF0ZS5ub3coKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2luaXRpYWxQb2ludGVyUG9zaXRpb24gPSBuZXcgVUlQb2ludChldmVudC50b3VjaGVzWzBdLmNsaWVudFgsIGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBvblRvdWNoQ2FuY2VsKGV2ZW50KVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX3RvdWNoRXZlbnRUaW1lID0gbmlsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcGF1c2VFdmVudChldmVudClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9oYXNQb2ludGVyRHJhZ2dlZCA9IE5PXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgb25Ub3VjaFN0YXJ0ID0gb25Nb3VzZURvd24gYXMgYW55XG4gICAgICAgIFxuICAgICAgICBjb25zdCBvbm1vdXNldXAgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pc1BvaW50ZXJWYWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoKHRoaXMuaWdub3Jlc1RvdWNoZXMgJiYgaXNUb3VjaEV2ZW50Q2xhc3NEZWZpbmVkICYmIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5pZ25vcmVzTW91c2UgJiYgZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5faXNQb2ludGVySW5zaWRlKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgb25Qb2ludGVyVXBJbnNpZGUoZXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9oYXNQb2ludGVyRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlclRhcCwgZXZlbnQpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhpcyBoYXMgdG8gYmUgc2VudCBhZnRlciB0aGUgbW9yZSBzcGVjaWZpYyBldmVudCBzbyB0aGF0IFVJQnV0dG9uIGNhbiBpZ25vcmUgaXQgd2hlbiBub3QgaGlnaGxpZ2h0ZWRcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJVcCwgZXZlbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhdXNlRXZlbnQoZXZlbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgb25Ub3VjaEVuZCA9IG9ubW91c2V1cFxuICAgICAgICBcbiAgICAgICAgLy8gZnVuY3Rpb24gb25Nb3VzZUVudGVyKGV2ZW50KSB7XG4gICAgICAgIFxuICAgICAgICAvLyAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlckVudGVyLCBldmVudCk7XG4gICAgICAgIFxuICAgICAgICAvLyAgICAgdGhpcy5faXNQb2ludGVySW5zaWRlID0gWUVTO1xuICAgICAgICBcbiAgICAgICAgLy8gICAgIHBhdXNlRXZlbnQoZXZlbnQpO1xuICAgICAgICBcbiAgICAgICAgLy8gfVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgb25tb3VzZW91dCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoKHRoaXMuaWdub3Jlc1RvdWNoZXMgJiYgaXNUb3VjaEV2ZW50Q2xhc3NEZWZpbmVkICYmIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5pZ25vcmVzTW91c2UgJiYgZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyTGVhdmUsIGV2ZW50KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9pc1BvaW50ZXJJbnNpZGUgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYXVzZUV2ZW50KGV2ZW50KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9uVG91Y2hMZWF2ZSA9IG9ubW91c2VvdXRcbiAgICAgICAgXG4gICAgICAgIHZhciBvblRvdWNoQ2FuY2VsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNQb2ludGVyVmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCh0aGlzLmlnbm9yZXNUb3VjaGVzICYmIGlzVG91Y2hFdmVudENsYXNzRGVmaW5lZCAmJiBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMuaWdub3Jlc01vdXNlICYmIGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5faXNQb2ludGVyVmFsaWQgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyQ2FuY2VsLCBldmVudClcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9ubW91c2VvdmVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICgodGhpcy5pZ25vcmVzVG91Y2hlcyAmJiBpc1RvdWNoRXZlbnRDbGFzc0RlZmluZWQgJiYgZXZlbnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KSB8fFxuICAgICAgICAgICAgICAgICh0aGlzLmlnbm9yZXNNb3VzZSAmJiBldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJIb3ZlciwgZXZlbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2lzUG9pbnRlckluc2lkZSA9IFlFU1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9pc1BvaW50ZXJWYWxpZCA9IFlFU1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYXVzZUV2ZW50KGV2ZW50KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9uTW91c2VNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNQb2ludGVyVmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCh0aGlzLmlnbm9yZXNUb3VjaGVzICYmIGlzVG91Y2hFdmVudENsYXNzRGVmaW5lZCAmJiBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMuaWdub3Jlc01vdXNlICYmIGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKElTX05PVCh0aGlzLl9pbml0aWFsUG9pbnRlclBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2luaXRpYWxQb2ludGVyUG9zaXRpb24gPSBuZXcgVUlQb2ludChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmV3IFVJUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSkudG8odGhpcy5faW5pdGlhbFBvaW50ZXJQb3NpdGlvbikubGVuZ3RoID5cbiAgICAgICAgICAgICAgICB0aGlzLl9wb2ludGVyRHJhZ1RocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc1BvaW50ZXJEcmFnZ2VkID0gWUVTXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlck1vdmUsIGV2ZW50KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYXVzZUV2ZW50KGV2ZW50KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9uVG91Y2hNb3ZlID0gZnVuY3Rpb24gKGV2ZW50OiBUb3VjaEV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNQb2ludGVyVmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCh0aGlzLmlnbm9yZXNUb3VjaGVzICYmIGlzVG91Y2hFdmVudENsYXNzRGVmaW5lZCAmJiBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMuaWdub3Jlc01vdXNlICYmIGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG9uVG91Y2hab29tKGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG5ldyBVSVBvaW50KHRvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFkpLnRvKHRoaXMuX2luaXRpYWxQb2ludGVyUG9zaXRpb24pLmxlbmd0aCA+XG4gICAgICAgICAgICAgICAgdGhpcy5fcG9pbnRlckRyYWdUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9oYXNQb2ludGVyRHJhZ2dlZCA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1BvaW50ZXJJbnNpZGUgJiYgdGhpcy52aWV3SFRNTEVsZW1lbnQgIT1cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFkpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5faXNQb2ludGVySW5zaWRlID0gTk9cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyTGVhdmUsIGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJNb3ZlLCBldmVudClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9wYXVzZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBvblRvdWNoWm9vbSA9IGZ1bmN0aW9uIG9uVG91Y2hab29tKGV2ZW50OiBUb3VjaEV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShVSVZpZXcuY29udHJvbEV2ZW50Lk11bHRpcGxlVG91Y2hlcywgZXZlbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdmFyIG9uUG9pbnRlclVwSW5zaWRlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBwYXVzZUV2ZW50KGV2ZW50KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVXBJbnNpZGUsIGV2ZW50KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBldmVudEtleUlzRW50ZXIoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlICE9PSAxMykge1xuICAgICAgICAgICAgICAgIHJldHVybiBOT1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBldmVudEtleUlzVGFiKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gOSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBOT1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBldmVudEtleUlzRXNjKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChcImtleVwiIGluIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKGV2ZW50LmtleSA9PSBcIkVzY2FwZVwiIHx8IGV2ZW50LmtleSA9PSBcIkVzY1wiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKGV2ZW50LmtleUNvZGUgPT0gMjcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGV2ZW50S2V5SXNMZWZ0KGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSAhPSBcIjM3XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTk9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBZRVNcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gZXZlbnRLZXlJc1JpZ2h0KGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSAhPSBcIjM5XCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTk9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBZRVNcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gZXZlbnRLZXlJc0Rvd24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlICE9IFwiNDBcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBOT1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBldmVudEtleUlzVXAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlICE9IFwiMzhcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBOT1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFlFU1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBvbktleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV2ZW50S2V5SXNFbnRlcihldmVudCkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlWaWV3LmNvbnRyb2xFdmVudC5FbnRlckRvd24sIGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXZlbnRLZXlJc0VzYyhldmVudCkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlWaWV3LmNvbnRyb2xFdmVudC5Fc2NEb3duLCBldmVudClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGV2ZW50S2V5SXNUYWIoZXZlbnQpICYmIHRoaXMuX2NvbnRyb2xFdmVudFRhcmdldHMuVGFiRG93biAmJiB0aGlzLl9jb250cm9sRXZlbnRUYXJnZXRzLlRhYkRvd24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuVGFiRG93biwgZXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcGF1c2VFdmVudChldmVudCwgWUVTKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXZlbnRLZXlJc0xlZnQoZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuTGVmdEFycm93RG93biwgZXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChldmVudEtleUlzUmlnaHQoZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuUmlnaHRBcnJvd0Rvd24sIGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXZlbnRLZXlJc0Rvd24oZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuRG93bkFycm93RG93biwgZXZlbnQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChldmVudEtleUlzVXAoZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuVXBBcnJvd0Rvd24sIGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgb25LZXlVcCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXZlbnRLZXlJc0VudGVyKGV2ZW50KSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShVSVZpZXcuY29udHJvbEV2ZW50LkVudGVyVXAsIGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9uZm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShVSVZpZXcuY29udHJvbEV2ZW50LkZvY3VzLCBldmVudClcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9uYmx1ciA9IGZ1bmN0aW9uIChldmVudDogRXZlbnQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVmlldy5jb250cm9sRXZlbnQuQmx1ciwgZXZlbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gTW91c2UgYW5kIHRvdWNoIHN0YXJ0IGV2ZW50c1xuICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQub25tb3VzZWRvd24gPSBvbk1vdXNlRG93bi5iaW5kKHRoaXMpXG4gICAgICAgIHRoaXMuX3ZpZXdIVE1MRWxlbWVudC5vbnRvdWNoc3RhcnQgPSBvblRvdWNoU3RhcnQuYmluZCh0aGlzKVxuICAgICAgICAvLyB0aGlzLnZpZXdIVE1MRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIG9uTW91c2VEb3duLmJpbmQodGhpcyksIGZhbHNlKVxuICAgICAgICAvLyB0aGlzLnZpZXdIVE1MRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0LmJpbmQodGhpcyksIGZhbHNlKVxuICAgICAgICAvLyAvL3RoaXMudmlld0hUTUxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIG9uTW91c2VFbnRlci5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNb3VzZSBhbmQgdG91Y2ggbW92ZSBldmVudHNcbiAgICAgICAgdGhpcy5fdmlld0hUTUxFbGVtZW50Lm9ubW91c2Vtb3ZlID0gb25Nb3VzZU1vdmUuYmluZCh0aGlzKVxuICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQub250b3VjaG1vdmUgPSBvblRvdWNoTW92ZS5iaW5kKHRoaXMpXG4gICAgICAgIC8vIHRoaXMudmlld0hUTUxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgb25Nb3VzZU1vdmUuYmluZCh0aGlzKSwgZmFsc2UpXG4gICAgICAgIC8vIHRoaXMudmlld0hUTUxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLmJpbmQodGhpcyksIGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgLy90aGlzLnZpZXdIVE1MRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLCBvbm1vdXNld2hlZWwuYmluZCh0aGlzKSwgZmFsc2UpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQub25tb3VzZW92ZXIgPSBvbm1vdXNlb3Zlci5iaW5kKHRoaXMpXG4gICAgICAgIC8vIHRoaXMudmlld0hUTUxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgb25tb3VzZW92ZXIuYmluZCh0aGlzKSwgZmFsc2UpXG4gICAgICAgIFxuICAgICAgICAvLyBNb3VzZSBhbmQgdG91Y2ggZW5kIGV2ZW50c1xuICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQub25tb3VzZXVwID0gb25tb3VzZXVwLmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5fdmlld0hUTUxFbGVtZW50Lm9udG91Y2hlbmQgPSBvblRvdWNoRW5kLmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5fdmlld0hUTUxFbGVtZW50Lm9udG91Y2hjYW5jZWwgPSBvblRvdWNoQ2FuY2VsLmJpbmQodGhpcylcbiAgICAgICAgLy8gdGhpcy52aWV3SFRNTEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgb25tb3VzZXVwLmJpbmQodGhpcyksIGZhbHNlKVxuICAgICAgICAvLyB0aGlzLnZpZXdIVE1MRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQuYmluZCh0aGlzKSwgZmFsc2UpXG4gICAgICAgIC8vIHRoaXMudmlld0hUTUxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgb25Ub3VjaENhbmNlbC5iaW5kKHRoaXMpLCBmYWxzZSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3ZpZXdIVE1MRWxlbWVudC5vbm1vdXNlb3V0ID0gb25tb3VzZW91dC5iaW5kKHRoaXMpXG4gICAgICAgIC8vIHRoaXMudmlld0hUTUxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBvbm1vdXNlb3V0LmJpbmQodGhpcyksIGZhbHNlKVxuICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobGVhdmVcIiwgb25Ub3VjaExlYXZlLmJpbmQodGhpcyksIGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy52aWV3SFRNTEVsZW1lbnQub25rZXlkb3duID0gb25rZXlkb3duXG4gICAgICAgIC8vIHRoaXMudmlld0hUTUxFbGVtZW50Lm9ua2V5dXAgPSBvbmtleXVwXG4gICAgICAgIHRoaXMuX3ZpZXdIVE1MRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBvbktleURvd24sIGZhbHNlKVxuICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIG9uS2V5VXAsIGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgLy8gRm9jdXMgZXZlbnRzXG4gICAgICAgIHRoaXMuX3ZpZXdIVE1MRWxlbWVudC5vbmZvY3VzID0gb25mb2N1c1xuICAgICAgICB0aGlzLl92aWV3SFRNTEVsZW1lbnQub25ibHVyID0gb25ibHVyXG4gICAgICAgIC8vIHRoaXMudmlld0hUTUxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBvbmZvY3VzLCB0cnVlKVxuICAgICAgICAvLyB0aGlzLnZpZXdIVE1MRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBvbmJsdXIsIHRydWUpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgcHVibGljIHN0YXRpYyBjb250cm9sRXZlbnQgPSB7XG4gICAgICAgIFxuICAgICAgICBcIlBvaW50ZXJEb3duXCI6IFwiUG9pbnRlckRvd25cIixcbiAgICAgICAgXCJQb2ludGVyTW92ZVwiOiBcIlBvaW50ZXJNb3ZlXCIsXG4gICAgICAgIFwiUG9pbnRlckxlYXZlXCI6IFwiUG9pbnRlckxlYXZlXCIsXG4gICAgICAgIFwiUG9pbnRlckVudGVyXCI6IFwiUG9pbnRlckVudGVyXCIsXG4gICAgICAgIFwiUG9pbnRlclVwSW5zaWRlXCI6IFwiUG9pbnRlclVwSW5zaWRlXCIsXG4gICAgICAgIFwiUG9pbnRlclRhcFwiOiBcIlBvaW50ZXJUYXBcIixcbiAgICAgICAgXCJQb2ludGVyVXBcIjogXCJQb2ludGVyVXBcIixcbiAgICAgICAgXCJNdWx0aXBsZVRvdWNoZXNcIjogXCJQb2ludGVyWm9vbVwiLFxuICAgICAgICBcIlBvaW50ZXJDYW5jZWxcIjogXCJQb2ludGVyQ2FuY2VsXCIsXG4gICAgICAgIFwiUG9pbnRlckhvdmVyXCI6IFwiUG9pbnRlckhvdmVyXCIsXG4gICAgICAgIFwiRW50ZXJEb3duXCI6IFwiRW50ZXJEb3duXCIsXG4gICAgICAgIFwiRW50ZXJVcFwiOiBcIkVudGVyVXBcIixcbiAgICAgICAgXCJFc2NEb3duXCI6IFwiRXNjRG93blwiLFxuICAgICAgICBcIlRhYkRvd25cIjogXCJUYWJEb3duXCIsXG4gICAgICAgIFwiTGVmdEFycm93RG93blwiOiBcIkxlZnRBcnJvd0Rvd25cIixcbiAgICAgICAgXCJSaWdodEFycm93RG93blwiOiBcIlJpZ2h0QXJyb3dEb3duXCIsXG4gICAgICAgIFwiRG93bkFycm93RG93blwiOiBcIkRvd25BcnJvd0Rvd25cIixcbiAgICAgICAgXCJVcEFycm93RG93blwiOiBcIlVwQXJyb3dEb3duXCIsXG4gICAgICAgIFwiRm9jdXNcIjogXCJGb2N1c1wiLFxuICAgICAgICBcIkJsdXJcIjogXCJCbHVyXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGNvbnRyb2xFdmVudCA9IFVJVmlldy5jb250cm9sRXZlbnRcbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgYWRkQ29udHJvbEV2ZW50VGFyZ2V0KCkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXZlbnRLZXlzID0gW11cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQ6IFVJVmlld0FkZENvbnRyb2xFdmVudFRhcmdldE9iamVjdDx0eXBlb2YgVUlWaWV3LmNvbnRyb2xFdmVudD4gPSBuZXcgUHJveHkoXG4gICAgICAgICAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyBhbnkpLmNvbnRyb2xFdmVudCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50S2V5cy5wdXNoKGtleSlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6ICh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBldmVudEtleXMucHVzaChrZXkpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoZXZlbnRLZXlzLCB2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhldmVudEtleXM6IHN0cmluZ1tdLCB0YXJnZXRGdW5jdGlvbjogKHNlbmRlcjogVUlWaWV3LCBldmVudDogRXZlbnQpID0+IHZvaWQpIHtcbiAgICAgICAgXG4gICAgICAgIGV2ZW50S2V5cy5mb3JFYWNoKGZ1bmN0aW9uICh0aGlzOiBVSVZpZXcsIGtleTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBhcnJheTogc3RyaW5nW10pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoa2V5LCB0YXJnZXRGdW5jdGlvbilcbiAgICAgICAgICAgIFxuICAgICAgICB9LCB0aGlzKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KGV2ZW50S2V5OiBzdHJpbmcsIHRhcmdldEZ1bmN0aW9uOiAoc2VuZGVyOiBVSVZpZXcsIGV2ZW50OiBFdmVudCkgPT4gdm9pZCkge1xuICAgICAgICBcbiAgICAgICAgdmFyIHRhcmdldHMgPSB0aGlzLl9jb250cm9sRXZlbnRUYXJnZXRzW2V2ZW50S2V5XVxuICAgICAgICBcbiAgICAgICAgaWYgKCF0YXJnZXRzKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0YXJnZXRzID0gW11cbiAgICAgICAgICAgIHRoaXMuX2NvbnRyb2xFdmVudFRhcmdldHNbZXZlbnRLZXldID0gdGFyZ2V0c1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGFyZ2V0cy5pbmRleE9mKHRhcmdldEZ1bmN0aW9uKSA9PSAtMSkge1xuICAgICAgICAgICAgdGFyZ2V0cy5wdXNoKHRhcmdldEZ1bmN0aW9uKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZW1vdmVUYXJnZXRGb3JDb250cm9sRXZlbnQoZXZlbnRLZXk6IHN0cmluZywgdGFyZ2V0RnVuY3Rpb246IChzZW5kZXI6IFVJVmlldywgZXZlbnQ6IEV2ZW50KSA9PiB2b2lkKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSB0aGlzLl9jb250cm9sRXZlbnRUYXJnZXRzW2V2ZW50S2V5XVxuICAgICAgICBpZiAoIXRhcmdldHMpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGFyZ2V0cy5pbmRleE9mKHRhcmdldEZ1bmN0aW9uKVxuICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgIHRhcmdldHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJlbW92ZVRhcmdldEZvckNvbnRyb2xFdmVudHMoZXZlbnRLZXlzOiBzdHJpbmdbXSwgdGFyZ2V0RnVuY3Rpb246IChzZW5kZXI6IFVJVmlldywgZXZlbnQ6IEV2ZW50KSA9PiB2b2lkKSB7XG4gICAgICAgIFxuICAgICAgICBldmVudEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5yZW1vdmVUYXJnZXRGb3JDb250cm9sRXZlbnQoa2V5LCB0YXJnZXRGdW5jdGlvbilcbiAgICAgICAgICAgIFxuICAgICAgICB9LCB0aGlzKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2VuZENvbnRyb2xFdmVudEZvcktleShldmVudEtleTogc3RyaW5nLCBuYXRpdmVFdmVudDogRXZlbnQpIHtcbiAgICAgICAgdmFyIHRhcmdldHMgPSB0aGlzLl9jb250cm9sRXZlbnRUYXJnZXRzW2V2ZW50S2V5XVxuICAgICAgICBpZiAoIXRhcmdldHMpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRhcmdldHMgPSB0YXJnZXRzLmNvcHkoKVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaV1cbiAgICAgICAgICAgIHRhcmdldCh0aGlzLCBuYXRpdmVFdmVudClcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgYnJvYWRjYXN0RXZlbnROYW1lID0ge1xuICAgICAgICBcbiAgICAgICAgXCJMYW5ndWFnZUNoYW5nZWRcIjogXCJMYW5ndWFnZUNoYW5nZWRcIixcbiAgICAgICAgXCJSZW1vdmVkRnJvbVZpZXdUcmVlXCI6IFwiUmVtb3ZlZEZyb21WaWV3VHJlZVwiLFxuICAgICAgICBcIkFkZGVkVG9WaWV3VHJlZVwiOiBcIkFkZGVkVG9WaWV3VHJlZVwiLFxuICAgICAgICBcIlBhZ2VEaWRTY3JvbGxcIjogXCJQYWdlRGlkU2Nyb2xsXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGJyb2FkY2FzdEV2ZW50SW5TdWJ0cmVlKGV2ZW50OiBVSVZpZXdCcm9hZGNhc3RFdmVudCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5mb3JFYWNoVmlld0luU3VidHJlZShmdW5jdGlvbiAodmlldykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2aWV3LmRpZFJlY2VpdmVCcm9hZGNhc3RFdmVudChldmVudClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHZpZXcuX2RpZFJlY2VpdmVCcm9hZGNhc3RFdmVudERlbGVnYXRlRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2aWV3Ll9kaWRSZWNlaXZlQnJvYWRjYXN0RXZlbnREZWxlZ2F0ZUZ1bmN0aW9uKGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50KGV2ZW50OiBVSVZpZXdCcm9hZGNhc3RFdmVudCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50Lm5hbWUgPT0gVUlWaWV3LmJyb2FkY2FzdEV2ZW50TmFtZS5QYWdlRGlkU2Nyb2xsKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2lzUG9pbnRlclZhbGlkID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZXZlbnQubmFtZSA9PSBVSVZpZXcuYnJvYWRjYXN0RXZlbnROYW1lLkFkZGVkVG9WaWV3VHJlZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLndhc0FkZGVkVG9WaWV3VHJlZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50Lm5hbWUgPT0gVUlWaWV3LmJyb2FkY2FzdEV2ZW50TmFtZS5SZW1vdmVkRnJvbVZpZXdUcmVlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMud2FzUmVtb3ZlZEZyb21WaWV3VHJlZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50Lm5hbWUgPT0gVUlWaWV3LmJyb2FkY2FzdEV2ZW50TmFtZS5MYW5ndWFnZUNoYW5nZWQgfHwgZXZlbnQubmFtZSA9PVxuICAgICAgICAgICAgVUlWaWV3LmJyb2FkY2FzdEV2ZW50TmFtZS5BZGRlZFRvVmlld1RyZWUpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc2V0SW5uZXJIVE1MRnJvbUtleUlmUG9zc2libGUoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9zZXRJbm5lckhUTUxGcm9tTG9jYWxpemVkVGV4dE9iamVjdElmUG9zc2libGUoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZm9yRWFjaFZpZXdJblN1YnRyZWUoZnVuY3Rpb25Ub0NhbGw6ICh2aWV3OiBVSVZpZXcpID0+IHZvaWQpIHtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uVG9DYWxsKHRoaXMpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN1YnZpZXdzLmZvckVhY2goZnVuY3Rpb24gKHN1YnZpZXcsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzdWJ2aWV3LmZvckVhY2hWaWV3SW5TdWJ0cmVlKGZ1bmN0aW9uVG9DYWxsKVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICByZWN0YW5nbGVJblZpZXcocmVjdGFuZ2xlOiBVSVJlY3RhbmdsZSwgdmlldzogVUlWaWV3KSB7XG4gICAgICAgIGlmICghdmlldy5pc01lbWJlck9mVmlld1RyZWUgfHwgIXRoaXMuaXNNZW1iZXJPZlZpZXdUcmVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmlsXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZpZXdDbGllbnRSZWN0YW5nbGUgPSB2aWV3LnZpZXdIVE1MRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBjb25zdCB2aWV3TG9jYXRpb24gPSBuZXcgVUlQb2ludCh2aWV3Q2xpZW50UmVjdGFuZ2xlLmxlZnQsIHZpZXdDbGllbnRSZWN0YW5nbGUudG9wKVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2VsZkNsaWVudFJlY3RhbmdsZSA9IHRoaXMudmlld0hUTUxFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICAgIGNvbnN0IHNlbGZMb2NhdGlvbiA9IG5ldyBVSVBvaW50KHNlbGZDbGllbnRSZWN0YW5nbGUubGVmdCwgc2VsZkNsaWVudFJlY3RhbmdsZS50b3ApXG4gICAgICAgIFxuICAgICAgICBjb25zdCBvZmZzZXRQb2ludCA9IHNlbGZMb2NhdGlvbi5zdWJ0cmFjdCh2aWV3TG9jYXRpb24pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVjdGFuZ2xlLmNvcHkoKS5vZmZzZXRCeVBvaW50KG9mZnNldFBvaW50KVxuICAgIH1cbiAgICBcbiAgICByZWN0YW5nbGVGcm9tVmlldyhyZWN0YW5nbGU6IFVJUmVjdGFuZ2xlLCB2aWV3OiBVSVZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHZpZXcucmVjdGFuZ2xlSW5WaWV3KHJlY3RhbmdsZSwgdGhpcylcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW50cmluc2ljQ29udGVudFNpemVXaXRoQ29uc3RyYWludHMoY29uc3RyYWluaW5nSGVpZ2h0OiBudW1iZXIgPSAwLCBjb25zdHJhaW5pbmdXaWR0aDogbnVtYmVyID0gMCkge1xuICAgICAgICBcbiAgICAgICAgLy8gVGhpcyB3b3JrcyBidXQgaXMgc2xvd1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFVJUmVjdGFuZ2xlKDAsIDAsIDAsIDApXG4gICAgICAgIGlmICh0aGlzLnJvb3RWaWV3LmZvcmNlSW50cmluc2ljU2l6ZVplcm8pIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHRlbXBvcmFyaWx5SW5WaWV3VHJlZSA9IE5PXG4gICAgICAgIHZhciBub2RlQWJvdmVUaGlzVmlldzogTm9kZVxuICAgICAgICBpZiAoIXRoaXMuaXNNZW1iZXJPZlZpZXdUcmVlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMudmlld0hUTUxFbGVtZW50KVxuICAgICAgICAgICAgdGVtcG9yYXJpbHlJblZpZXdUcmVlID0gWUVTXG4gICAgICAgICAgICBub2RlQWJvdmVUaGlzVmlldyA9IHRoaXMudmlld0hUTUxFbGVtZW50Lm5leHRTaWJsaW5nXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuc3R5bGUuaGVpZ2h0XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5zdHlsZS53aWR0aFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSBcIlwiICsgY29uc3RyYWluaW5nSGVpZ2h0XG4gICAgICAgIHRoaXMuc3R5bGUud2lkdGggPSBcIlwiICsgY29uc3RyYWluaW5nV2lkdGhcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5zdHlsZS5sZWZ0XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy5zdHlsZS5yaWdodFxuICAgICAgICBjb25zdCBib3R0b20gPSB0aGlzLnN0eWxlLmJvdHRvbVxuICAgICAgICBjb25zdCB0b3AgPSB0aGlzLnN0eWxlLnRvcFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5sZWZ0ID0gXCJcIlxuICAgICAgICB0aGlzLnN0eWxlLnJpZ2h0ID0gXCJcIlxuICAgICAgICB0aGlzLnN0eWxlLmJvdHRvbSA9IFwiXCJcbiAgICAgICAgdGhpcy5zdHlsZS50b3AgPSBcIlwiXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0SGVpZ2h0ID0gdGhpcy52aWV3SFRNTEVsZW1lbnQuc2Nyb2xsSGVpZ2h0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3Qgd2hpdGVTcGFjZSA9IHRoaXMuc3R5bGUud2hpdGVTcGFjZVxuICAgICAgICB0aGlzLnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiXG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHRXaWR0aCA9IHRoaXMudmlld0hUTUxFbGVtZW50LnNjcm9sbFdpZHRoXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLndoaXRlU3BhY2UgPSB3aGl0ZVNwYWNlXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0XG4gICAgICAgIHRoaXMuc3R5bGUud2lkdGggPSB3aWR0aFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5sZWZ0ID0gbGVmdFxuICAgICAgICB0aGlzLnN0eWxlLnJpZ2h0ID0gcmlnaHRcbiAgICAgICAgdGhpcy5zdHlsZS5ib3R0b20gPSBib3R0b21cbiAgICAgICAgdGhpcy5zdHlsZS50b3AgPSB0b3BcbiAgICAgICAgXG4gICAgICAgIGlmICh0ZW1wb3JhcmlseUluVmlld1RyZWUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy52aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgICAgICBpZiAodGhpcy5zdXBlcnZpZXcpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZUFib3ZlVGhpc1ZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXBlcnZpZXcudmlld0hUTUxFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLnZpZXdIVE1MRWxlbWVudCwgbm9kZUFib3ZlVGhpc1ZpZXcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1cGVydmlldy52aWV3SFRNTEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXN1bHQuaGVpZ2h0ID0gcmVzdWx0SGVpZ2h0XG4gICAgICAgIHJlc3VsdC53aWR0aCA9IHJlc3VsdFdpZHRoXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW50cmluc2ljQ29udGVudFdpZHRoKGNvbnN0cmFpbmluZ0hlaWdodDogbnVtYmVyID0gMCk6IG51bWJlciB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmludHJpbnNpY0NvbnRlbnRTaXplV2l0aENvbnN0cmFpbnRzKGNvbnN0cmFpbmluZ0hlaWdodCkud2lkdGhcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGludHJpbnNpY0NvbnRlbnRIZWlnaHQoY29uc3RyYWluaW5nV2lkdGg6IG51bWJlciA9IDApOiBudW1iZXIge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5pbnRyaW5zaWNDb250ZW50U2l6ZVdpdGhDb25zdHJhaW50cyh1bmRlZmluZWQsIGNvbnN0cmFpbmluZ1dpZHRoKS5oZWlnaHRcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBpbnRyaW5zaWNDb250ZW50U2l6ZSgpOiBVSVJlY3RhbmdsZSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmlsXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJQ29yZS9VSVZpZXcudHNcIiAvPlxuXG5cblxuXG5jbGFzcyBCb3R0b21CYXJWaWV3IGV4dGVuZHMgVUlWaWV3IHtcbiAgICBcbiAgICAvL2xhYmVsOiBVSVRleHRWaWV3O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcihlbGVtZW50SUQpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IEJvdHRvbUJhclZpZXdcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQ6IHN0cmluZywgdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuaW5pdFZpZXcoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IFVJQ29sb3IuY29sb3JXaXRoUkdCQSg1MCwgNTAsIDUwKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRJbm5lckhUTUwoXCJib3R0b21CYXJDb250ZW50XCIsIFwiYm90dG9tQmFyQ29udGVudFwiKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIHRoaXMubGFiZWwgPSBuZXcgVUlUZXh0VmlldyhcIkJvdHRvbUJhckxhYmVsXCIpO1xuICAgICAgICAvLyB0aGlzLmxhYmVsLnNldFRleHQoXCJib3R0b21CYXJMYWJlbFRleHRcIixcIkJvdHRvbSBiYXIgZm9yIGNvbnRhY3QgaW5mb3JtYXRpb24gYW5kIHN1Y2hcIik7XG4gICAgICAgIC8vIHRoaXMubGFiZWwudGV4dENvbG9yID0gVUlDb2xvci53aGl0ZUNvbG9yO1xuICAgICAgICAvLyB0aGlzLmxhYmVsLnRleHRBbGlnbm1lbnQgPSBVSVRleHRWaWV3LnRleHRBbGlnbm1lbnQuY2VudGVyO1xuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy5hZGRTdWJ2aWV3KHRoaXMubGFiZWwpO1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICAvL3RoaXMubGFiZWwuY2VudGVySW5Db250YWluZXIoKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiaWYgKFwicmVtb3ZlRWxlbWVudEF0SW5kZXhcIiBpbiBBcnJheS5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBcbiAgICAoQXJyYXkucHJvdG90eXBlIGFzIGFueSkucmVtb3ZlRWxlbWVudEF0SW5kZXggPSBmdW5jdGlvbiAodGhpczogQXJyYXk8YW55PiwgaW5kZXg6IG51bWJlcikge1xuICAgICAgICBcbiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIFxuICAgIHJlbW92ZUVsZW1lbnRBdEluZGV4KGluZGV4OiBudW1iZXIpO1xuICAgIFxufVxuXG5cbmlmIChcInJlbW92ZUVsZW1lbnRcIiBpbiBBcnJheS5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBcbiAgICAoQXJyYXkucHJvdG90eXBlIGFzIGFueSkucmVtb3ZlRWxlbWVudCA9IGZ1bmN0aW9uICh0aGlzOiBBcnJheTxhbnk+LCBlbGVtZW50KSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnRBdEluZGV4KHRoaXMuaW5kZXhPZihlbGVtZW50KSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxufVxuXG5cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gICAgXG4gICAgcmVtb3ZlRWxlbWVudChlbGVtZW50OiBUKTtcbiAgICBcbn1cblxuXG5pZiAoXCJpbnNlcnRFbGVtZW50QXRJbmRleFwiIGluIEFycmF5LnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIChBcnJheS5wcm90b3R5cGUgYXMgYW55KS5pbnNlcnRFbGVtZW50QXRJbmRleCA9IGZ1bmN0aW9uICh0aGlzOiBBcnJheTxhbnk+LCBpbmRleDogbnVtYmVyLCBlbGVtZW50OiBhbnkpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDw9IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc3BsaWNlKGluZGV4LCAwLCBlbGVtZW50KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxufVxuXG5cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gICAgXG4gICAgaW5zZXJ0RWxlbWVudEF0SW5kZXgoaW5kZXg6IG51bWJlciwgZWxlbWVudDogVCk7XG4gICAgXG59XG5cblxuaWYgKFwicmVwbGFjZUVsZW1lbnRBdEluZGV4XCIgaW4gQXJyYXkucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgKEFycmF5LnByb3RvdHlwZSBhcyBhbnkpLnJlcGxhY2VFbGVtZW50QXRJbmRleCA9IGZ1bmN0aW9uICh0aGlzOiBBcnJheTxhbnk+LCBpbmRleDogbnVtYmVyLCBlbGVtZW50OiBhbnkpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVtb3ZlRWxlbWVudEF0SW5kZXgoaW5kZXgpXG4gICAgICAgIHRoaXMuaW5zZXJ0RWxlbWVudEF0SW5kZXgoaW5kZXgsIGVsZW1lbnQpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIFxuICAgIHJlcGxhY2VFbGVtZW50QXRJbmRleChpbmRleDogbnVtYmVyLCBlbGVtZW50OiBUKTtcbiAgICBcbn1cblxuXG5pZiAoXCJjb250YWluc1wiIGluIEFycmF5LnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIChBcnJheS5wcm90b3R5cGUgYXMgYW55KS5jb250YWlucyA9IGZ1bmN0aW9uICh0aGlzOiBBcnJheTxhbnk+LCBlbGVtZW50KSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSAodGhpcy5pbmRleE9mKGVsZW1lbnQpICE9IC0xKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuaWYgKFwiY29udGFpbnNBbnlcIiBpbiBBcnJheS5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBcbiAgICAoQXJyYXkucHJvdG90eXBlIGFzIGFueSkuY29udGFpbnNBbnkgPSBmdW5jdGlvbiAodGhpczogQXJyYXk8YW55PiwgZWxlbWVudHM6IGFueVtdKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmFueU1hdGNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50cy5jb250YWlucyhlbGVtZW50KVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG59XG5cblxuaW50ZXJmYWNlIEFycmF5PFQ+IHtcbiAgICBcbiAgICBjb250YWlucyhlbGVtZW50OiBUKTogYm9vbGVhbjtcbiAgICBcbiAgICBjb250YWluc0FueShlbGVtZW50OiBUW10pOiBib29sZWFuO1xuICAgIFxufVxuXG5BcnJheS5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIHRoaXMpO1xufTtcblxuQXJyYXkucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLm1pbi5hcHBseShudWxsLCB0aGlzKTtcbn07XG5cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gICAgXG4gICAgcmVhZG9ubHkgc3VtbWVkVmFsdWU6IFQ7XG4gICAgXG4gICAgbWF4KCk6IG51bWJlcjtcbiAgICBtaW4oKTogbnVtYmVyO1xuICAgIFxuICAgIFxufVxuXG5cbmlmIChcImFueU1hdGNoXCIgaW4gQXJyYXkucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgKEFycmF5LnByb3RvdHlwZSBhcyBhbnkpLmFueU1hdGNoID0gZnVuY3Rpb24gKFxuICAgICAgICB0aGlzOiBBcnJheTxhbnk+LFxuICAgICAgICBmdW5jdGlvblRvQ2FsbDogKHZhbHVlOiBhbnksIGluZGV4OiBudW1iZXIsIGFycmF5OiBhbnlbXSkgPT4gYm9vbGVhblxuICAgICkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKHRoaXMuZmluZEluZGV4KGZ1bmN0aW9uVG9DYWxsKSA+IC0xKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG59XG5cbmlmIChcIm5vbmVNYXRjaFwiIGluIEFycmF5LnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIChBcnJheS5wcm90b3R5cGUgYXMgYW55KS5ub25lTWF0Y2ggPSBmdW5jdGlvbiAoXG4gICAgICAgIHRoaXM6IEFycmF5PGFueT4sXG4gICAgICAgIGZ1bmN0aW9uVG9DYWxsOiAodmFsdWU6IGFueSwgaW5kZXg6IG51bWJlciwgYXJyYXk6IGFueVtdKSA9PiBib29sZWFuXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSAodGhpcy5maW5kSW5kZXgoZnVuY3Rpb25Ub0NhbGwpID09IC0xKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG59XG5cbmlmIChcImFsbE1hdGNoXCIgaW4gQXJyYXkucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgKEFycmF5LnByb3RvdHlwZSBhcyBhbnkpLmFsbE1hdGNoID0gZnVuY3Rpb24gKFxuICAgICAgICB0aGlzOiBBcnJheTxhbnk+LFxuICAgICAgICBmdW5jdGlvblRvQ2FsbDogKHZhbHVlOiBhbnksIGluZGV4OiBudW1iZXIsIGFycmF5OiBhbnlbXSkgPT4gYm9vbGVhblxuICAgICkge1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gcmV2ZXJzZWRGdW5jdGlvbih2YWx1ZTogYW55LCBpbmRleDogbnVtYmVyLCBhcnJheTogYW55W10pIHtcbiAgICAgICAgICAgIHJldHVybiAhZnVuY3Rpb25Ub0NhbGwodmFsdWUsIGluZGV4LCBhcnJheSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKHRoaXMuZmluZEluZGV4KHJldmVyc2VkRnVuY3Rpb24pID09IC0xKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG59XG5cblxuaW50ZXJmYWNlIEFycmF5PFQ+IHtcbiAgICBcbiAgICBhbnlNYXRjaChwcmVkaWNhdGU6ICh2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgb2JqOiBUW10pID0+IGJvb2xlYW4pOiBib29sZWFuXG4gICAgXG4gICAgbm9uZU1hdGNoKHByZWRpY2F0ZTogKHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBvYmo6IFRbXSkgPT4gYm9vbGVhbik6IGJvb2xlYW5cbiAgICBcbiAgICBhbGxNYXRjaChwcmVkaWNhdGU6ICh2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgb2JqOiBUW10pID0+IGJvb2xlYW4pOiBib29sZWFuXG4gICAgXG59XG5cblxuaWYgKFwiZ3JvdXBlZEJ5XCIgaW4gQXJyYXkucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgQXJyYXkucHJvdG90eXBlLmdyb3VwZWRCeSA9IGZ1bmN0aW9uICh0aGlzOiBBcnJheTxhbnk+LCBmdW5jUHJvcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgdmFsKSB7XG4gICAgICAgICAgICAoYWNjW2Z1bmNQcm9wKHZhbCldID0gYWNjW2Z1bmNQcm9wKHZhbCldIHx8IFtdKS5wdXNoKHZhbClcbiAgICAgICAgICAgIHJldHVybiBhY2NcbiAgICAgICAgfSwge30pXG4gICAgfVxuICAgIFxufVxuXG5cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gICAgXG4gICAgZ3JvdXBlZEJ5KGtleUZ1bmN0aW9uOiAoaXRlbTogVCkgPT4gYW55KTogeyBba2V5OiBzdHJpbmddOiBBcnJheTxUPiB9O1xuICAgIFxufVxuXG5cbmlmIChcImZpcnN0RWxlbWVudFwiIGluIEFycmF5LnByb3RvdHlwZSA9PSBOTykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwiZmlyc3RFbGVtZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBmaXJzdEVsZW1lbnQodGhpczogQXJyYXk8YW55Pikge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpc1swXVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0aGlzOiBBcnJheTxhbnk+LCBlbGVtZW50OiBhbnkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoKGVsZW1lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzWzBdID0gZWxlbWVudFxuICAgICAgICB9XG4gICAgfSlcbn1cblxuaWYgKFwibGFzdEVsZW1lbnRcIiBpbiBBcnJheS5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcImxhc3RFbGVtZW50XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBsYXN0RWxlbWVudCh0aGlzOiBBcnJheTxhbnk+KSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzW3RoaXMubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodGhpczogQXJyYXk8YW55PiwgZWxlbWVudDogYW55KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHVzaChlbGVtZW50KVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1t0aGlzLmxlbmd0aCAtIDFdID0gZWxlbWVudFxuICAgICAgICB9XG4gICAgfSlcbn1cblxuaWYgKFwiZXZlcnlFbGVtZW50XCIgaW4gQXJyYXkucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgXCJldmVyeUVsZW1lbnRcIiwge1xuICAgICAgICBcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBldmVyeUVsZW1lbnQodGhpczogQXJyYXk8YW55Pikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgdmFsdWVLZXlzID0gW11cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0RnVuY3Rpb24gPSAob2JqZWN0cykgPT4ge1xuICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcCgoZWxlbWVudCwgaW5kZXgsIGFycmF5KSA9PiB7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudEZ1bmN0aW9uID0gKFVJT2JqZWN0LnZhbHVlRm9yS2V5UGF0aCh2YWx1ZUtleXMuam9pbihcIi5cIiksIGVsZW1lbnQpIGFzIEZ1bmN0aW9uKS5iaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdHNcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRGdW5jdGlvbigpXG4gICAgICAgIFxuICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgUHJveHkoXG4gICAgICAgICAgICAgICAgdGFyZ2V0RnVuY3Rpb24sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiAodGFyZ2V0LCBrZXksIHJlY2VpdmVyKSA9PiB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IFwiVUlfZWxlbWVudFZhbHVlc1wiKSB7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcCgoZWxlbWVudCwgaW5kZXgsIGFycmF5KSA9PiBVSU9iamVjdC52YWx1ZUZvcktleVBhdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlS2V5cy5qb2luKFwiLlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUtleXMucHVzaChrZXkpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQ6ICh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlS2V5cy5wdXNoKGtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JFYWNoKChlbGVtZW50LCBpbmRleCwgYXJyYXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVSU9iamVjdC5zZXRWYWx1ZUZvcktleVBhdGgodmFsdWVLZXlzLmpvaW4oXCIuXCIpLCB2YWx1ZSwgZWxlbWVudCwgWUVTKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHRoaXM6IEFycmF5PGFueT4sIGVsZW1lbnQ6IGFueSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzW2ldID0gZWxlbWVudFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSlcbiAgICBcbn1cblxuXG50eXBlIFVJRXZlcnlFbGVtZW50SXRlbTxUPiA9IHtcbiAgICBcbiAgICBbUCBpbiBrZXlvZiBUXTogVUlFdmVyeUVsZW1lbnRJdGVtPFRbUF0+XG4gICAgXG59ICYge1xuICAgIFxuICAgIFVJX2VsZW1lbnRWYWx1ZXM/OiBUW107XG4gICAgXG59ICYgVFxuXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIFxuICAgIGZpcnN0RWxlbWVudDogVDtcbiAgICBsYXN0RWxlbWVudDogVDtcbiAgICBcbiAgICBldmVyeUVsZW1lbnQ6IFVJRXZlcnlFbGVtZW50SXRlbTxUPjtcbiAgICBcbn1cblxuXG5pZiAoXCJjb3B5XCIgaW4gQXJyYXkucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgKEFycmF5LnByb3RvdHlwZSBhcyBhbnkpLmNvcHkgPSBmdW5jdGlvbiAodGhpczogQXJyYXk8YW55Pikge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zbGljZSgwKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIFxuICAgIGNvcHkoKTogQXJyYXk8VD47XG4gICAgXG59XG5cblxuaWYgKFwiYXJyYXlCeVJlcGVhdGluZ1wiIGluIEFycmF5LnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIChBcnJheS5wcm90b3R5cGUgYXMgYW55KS5hcnJheUJ5UmVwZWF0aW5nID0gZnVuY3Rpb24gKHRoaXM6IEFycmF5PGFueT4sIG51bWJlck9mUmVwZXRpdGlvbnM6IG51bWJlcikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mUmVwZXRpdGlvbnM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChlbGVtZW50KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxufVxuXG5cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gICAgXG4gICAgYXJyYXlCeVJlcGVhdGluZyhudW1iZXJPZlJlcGV0aXRpb25zOiBudW1iZXIpOiBBcnJheTxUPjtcbiAgICBcbn1cblxuXG5pZiAoXCJhcnJheUJ5VHJpbW1pbmdUb0xlbmd0aElmTG9uZ2VyXCIgaW4gQXJyYXkucHJvdG90eXBlID09IE5PKSB7XG4gICAgKEFycmF5LnByb3RvdHlwZSBhcyBhbnkpLmFycmF5QnlUcmltbWluZ1RvTGVuZ3RoSWZMb25nZXIgPSBmdW5jdGlvbiAodGhpczogQXJyYXk8YW55PiwgbWF4TGVuZ3RoOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW11cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXhMZW5ndGggJiYgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXNbaV0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbn1cblxuXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIFxuICAgIGFycmF5QnlUcmltbWluZ1RvTGVuZ3RoSWZMb25nZXIobWF4TGVuZ3RoOiBudW1iZXIpOiBBcnJheTxUPjtcbiAgICBcbn1cblxuXG5pZiAoXCJzdW1tZWRWYWx1ZVwiIGluIEFycmF5LnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwic3VtbWVkVmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIHN1bW1lZFZhbHVlKHRoaXM6IEFycmF5PGFueT4pIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEgKyBiXG4gICAgICAgICAgICB9LCAwKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9XG4gICAgfSlcbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIFxuICAgIHJlYWRvbmx5IHN1bW1lZFZhbHVlOiBUO1xuICAgIFxufVxuXG5cbi8vIFdhcm4gaWYgb3ZlcnJpZGluZyBleGlzdGluZyBtZXRob2RcbmlmIChcImlzRXF1YWxUb0FycmF5XCIgaW4gQXJyYXkucHJvdG90eXBlID09IFlFUykge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJPdmVycmlkaW5nIGV4aXN0aW5nIEFycmF5LnByb3RvdHlwZS5pc0VxdWFsVG9BcnJheS4gUG9zc2libGUgY2F1c2VzOiBOZXcgQVBJIGRlZmluZXMgdGhlIG1ldGhvZCwgdGhlcmUncyBhIGZyYW1ld29yayBjb25mbGljdCBvciB5b3UndmUgZ290IGRvdWJsZSBpbmNsdXNpb25zIGluIHlvdXIgY29kZS5cIilcbn1cbi8vIGF0dGFjaCB0aGUgLmVxdWFscyBtZXRob2QgdG8gQXJyYXkncyBwcm90b3R5cGUgdG8gY2FsbCBpdCBvbiBhbnkgYXJyYXlcbkFycmF5LnByb3RvdHlwZS5pc0VxdWFsVG9BcnJheSA9IGZ1bmN0aW9uIChhcnJheTogYW55W10sIGtleVBhdGg/OiBzdHJpbmcpIHtcbiAgICBcbiAgICAvLyBpZiB0aGUgb3RoZXIgYXJyYXkgaXMgYSBmYWxzeSB2YWx1ZSwgcmV0dXJuXG4gICAgaWYgKCFhcnJheSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgXG4gICAgLy8gY29tcGFyZSBsZW5ndGhzIC0gY2FuIHNhdmUgYSBsb3Qgb2YgdGltZSBcbiAgICBpZiAodGhpcy5sZW5ndGggIT0gYXJyYXkubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBcbiAgICB2YXIgaSA9IDBcbiAgICBjb25zdCBsID0gdGhpcy5sZW5ndGhcbiAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBuZXN0ZWQgYXJyYXlzXG4gICAgICAgIGlmICh0aGlzW2ldIGluc3RhbmNlb2YgQXJyYXkgJiYgYXJyYXlbaV0gaW5zdGFuY2VvZiBBcnJheSAmJiAha2V5UGF0aCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICAgIGlmICghdGhpc1tpXS5pc0VxdWFsVG9BcnJheShhcnJheVtpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleVBhdGggJiYgVUlPYmplY3QudmFsdWVGb3JLZXlQYXRoKGtleVBhdGgsIHRoaXNbaV0pICE9IFVJT2JqZWN0LnZhbHVlRm9yS2V5UGF0aChrZXlQYXRoLCBhcnJheVtpXSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzW2ldICE9IGFycmF5W2ldKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFdhcm5pbmcgLSB0d28gZGlmZmVyZW50IG9iamVjdCBpbnN0YW5jZXMgd2lsbCBuZXZlciBiZSBlcXVhbDoge3g6MjB9ICE9IHt4OjIwfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWVcbiAgICBcbn1cblxuLy8gSGlkZSBtZXRob2QgZnJvbSBmb3ItaW4gbG9vcHNcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIFwiaXNFcXVhbFRvQXJyYXlcIiwgeyBlbnVtZXJhYmxlOiBmYWxzZSB9KVxuXG5cbmludGVyZmFjZSBBcnJheTxUPiB7XG4gICAgXG4gICAgaXNFcXVhbFRvQXJyYXkoYXJyYXk6IEFycmF5PFQ+LCBrZXlQYXRoPzogc3RyaW5nKTogYm9vbGVhbjtcbiAgICBcbn1cblxuXG5cbmlmIChcImZvckVhY2hcIiBpbiBPYmplY3QucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgKE9iamVjdC5wcm90b3R5cGUgYXMgYW55KS5mb3JFYWNoID0gZnVuY3Rpb24gKHRoaXM6IE9iamVjdCwgY2FsbGJhY2tGdW5jdGlvbjogKHZhbHVlOiBhbnksIGtleTogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKVxuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICBjYWxsYmFja0Z1bmN0aW9uKHRoaXNba2V5XSwga2V5KVxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgfVxuICAgIFxuICAgIC8vIEhpZGUgbWV0aG9kIGZyb20gZm9yLWluIGxvb3BzXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5wcm90b3R5cGUsIFwiZm9yRWFjaFwiLCB7IGVudW1lcmFibGU6IGZhbHNlIH0pXG4gICAgXG59XG5cblxuaW50ZXJmYWNlIE9iamVjdCB7XG4gICAgXG4gICAgZm9yRWFjaChjYWxsYmFja0Z1bmN0aW9uOiAodmFsdWU6IGFueSwga2V5OiBzdHJpbmcpID0+IHZvaWQpOiB2b2lkO1xuICAgIFxufVxuXG5cbmlmIChcImFsbFZhbHVlc1wiIGluIE9iamVjdC5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgXCJhbGxWYWx1ZXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0aGlzOiBPYmplY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFtdXG4gICAgICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlOiBhbnkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5cbmludGVyZmFjZSBPYmplY3Qge1xuICAgIFxuICAgIHJlYWRvbmx5IGFsbFZhbHVlczogQXJyYXk8YW55PjtcbiAgICBcbn1cblxuXG5pZiAoXCJhbGxLZXlzXCIgaW4gT2JqZWN0LnByb3RvdHlwZSA9PSBOTykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QucHJvdG90eXBlLCBcImFsbEtleXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0aGlzOiBPYmplY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC5rZXlzKHRoaXMpXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5cbmludGVyZmFjZSBPYmplY3Qge1xuICAgIFxuICAgIHJlYWRvbmx5IGFsbEtleXM6IHN0cmluZ1tdO1xuICAgIFxufVxuXG5cbmlmIChcIm9iamVjdEJ5Q29weWluZ1ZhbHVlc1JlY3Vyc2l2ZWx5RnJvbU9iamVjdFwiIGluIE9iamVjdC5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBcbiAgICAoT2JqZWN0LnByb3RvdHlwZSBhcyBhbnkpLm9iamVjdEJ5Q29weWluZ1ZhbHVlc1JlY3Vyc2l2ZWx5RnJvbU9iamVjdCA9IGZ1bmN0aW9uICh0aGlzOiBPYmplY3QsIG9iamVjdDogYW55KSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gaXNBbk9iamVjdChpdGVtOiBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShpdGVtKSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gbWVyZ2VSZWN1cnNpdmVseSh0YXJnZXQ6IGFueSwgc291cmNlOiBhbnkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGFyZ2V0KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaXNBbk9iamVjdCh0YXJnZXQpICYmIGlzQW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBbk9iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCEoa2V5IGluIHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIE9iamVjdC5hc3NpZ24ob3V0cHV0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gbWVyZ2VSZWN1cnNpdmVseSh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob3V0cHV0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lcmdlUmVjdXJzaXZlbHkodGhpcywgb2JqZWN0KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgLy8gSGlkZSBtZXRob2QgZnJvbSBmb3ItaW4gbG9vcHNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgXCJvYmplY3RCeUNvcHlpbmdWYWx1ZXNSZWN1cnNpdmVseUZyb21PYmplY3RcIiwgeyBlbnVtZXJhYmxlOiBmYWxzZSB9KVxuICAgIFxufVxuXG5pZiAoXCJjb3B5VmFsdWVzUmVjdXJzaXZlbHlGcm9tT2JqZWN0XCIgaW4gT2JqZWN0LnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIChPYmplY3QucHJvdG90eXBlIGFzIGFueSkuY29weVZhbHVlc1JlY3Vyc2l2ZWx5RnJvbU9iamVjdCA9IGZ1bmN0aW9uICh0aGlzOiBPYmplY3QsIG9iamVjdDogYW55KSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gaXNBbk9iamVjdChpdGVtOiBhbnkpIHtcbiAgICAgICAgICAgIHJldHVybiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShpdGVtKSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gbWVyZ2VSZWN1cnNpdmVseSh0YXJnZXQ6IGFueSwgc291cmNlOiBhbnkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaXNBbk9iamVjdCh0YXJnZXQpICYmIGlzQW5PYmplY3Qoc291cmNlKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNBbk9iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCEoa2V5IGluIHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIE9iamVjdC5hc3NpZ24ob3V0cHV0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtrZXldID0gbWVyZ2VSZWN1cnNpdmVseSh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ob3V0cHV0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1lcmdlUmVjdXJzaXZlbHkodGhpcywgb2JqZWN0KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgLy8gSGlkZSBtZXRob2QgZnJvbSBmb3ItaW4gbG9vcHNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgXCJjb3B5VmFsdWVzUmVjdXJzaXZlbHlGcm9tT2JqZWN0XCIsIHsgZW51bWVyYWJsZTogZmFsc2UgfSlcbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgT2JqZWN0IHtcbiAgICBcbiAgICAvLyBvYmplY3RCeUNvcHlpbmdWYWx1ZXNSZWN1cnNpdmVseUZyb21PYmplY3Q8VD4ob2JqZWN0OiBUKTogdGhpcyAmIFQ7XG4gICAgY29weVZhbHVlc1JlY3Vyc2l2ZWx5RnJvbU9iamVjdChvYmplY3Q6IFBhcnRpYWw8dGhpcz4pOiB0aGlzO1xuICAgIFxufVxuXG5pbnRlcmZhY2UgVUlPYmplY3Qge1xuICAgXG4gICAvLyBvYmplY3RCeUNvcHlpbmdWYWx1ZXNSZWN1cnNpdmVseUZyb21PYmplY3Q8VD4ob2JqZWN0OiBUKTogdGhpcyAmIFQ7XG4gICAgY29weVZhbHVlc1JlY3Vyc2l2ZWx5RnJvbU9iamVjdChvYmplY3Q6IFJlY3Vyc2l2ZVBhcnRpYWw8dGhpcz4pOiB0aGlzO1xuICAgIFxufVxuXG5cblxuaWYgKFwiY29udGFpbnNcIiBpbiBTdHJpbmcucHJvdG90eXBlID09IE5PKSB7XG4gICAgXG4gICAgKFN0cmluZy5wcm90b3R5cGUgYXMgYW55KS5jb250YWlucyA9IGZ1bmN0aW9uICh0aGlzOiBTdHJpbmcsIHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKHRoaXMuaW5kZXhPZihzdHJpbmcpICE9IC0xKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgU3RyaW5nIHtcbiAgICBcbiAgICBjb250YWlucyhzdHJpbmcpOiBib29sZWFuO1xuICAgIFxufVxuXG5cbmlmIChcImNhcGl0YWxpemVkU3RyaW5nXCIgaW4gU3RyaW5nLnByb3RvdHlwZSA9PSBOTykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYmplY3QucHJvdG90eXBlLCBcImNhcGl0YWxpemVkU3RyaW5nXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAodGhpczogU3RyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGhpcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5cbmludGVyZmFjZSBTdHJpbmcge1xuICAgIFxuICAgIHJlYWRvbmx5IGNhcGl0YWxpemVkU3RyaW5nOiBzdHJpbmc7XG4gICAgXG59XG5cblxuaWYgKFwibnVtZXJpY2FsVmFsdWVcIiBpbiBTdHJpbmcucHJvdG90eXBlID09IE5PKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsIFwibnVtZXJpY2FsVmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIG51bWVyaWNhbFZhbHVlKHRoaXM6IHN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gTnVtYmVyKHRoaXMpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5cbmludGVyZmFjZSBTdHJpbmcge1xuICAgIFxuICAgIHJlYWRvbmx5IG51bWVyaWNhbFZhbHVlOiBudW1iZXI7XG4gICAgXG59XG5cblxuaWYgKFwiaXNBU3RyaW5nXCIgaW4gU3RyaW5nLnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIChTdHJpbmcucHJvdG90eXBlIGFzIGFueSkuaXNBU3RyaW5nID0gWUVTXG4gICAgXG59XG5cblxuaW50ZXJmYWNlIFN0cmluZyB7XG4gICAgXG4gICAgaXNBU3RyaW5nOiBib29sZWFuO1xuICAgIFxufVxuXG5cbmlmIChcImlzQU51bWJlclwiIGluIE51bWJlci5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBcbiAgICAoTnVtYmVyLnByb3RvdHlwZSBhcyBhbnkpLmlzQU51bWJlciA9IFlFU1xuICAgIFxufVxuXG5cbmludGVyZmFjZSBOdW1iZXIge1xuICAgIFxuICAgIGlzQU51bWJlcjogYm9vbGVhbjtcbiAgICBcbn1cblxuXG5cblxuXG5pZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiBOdW1iZXIucHJvdG90eXBlID09IE5PKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE51bWJlci5wcm90b3R5cGUsIFwiaW50ZWdlclZhbHVlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAodGhpczogbnVtYmVyKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZUludChcIlwiICsgKE1hdGgucm91bmQodGhpcykgKyAwLjUpKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9XG4gICAgfSlcbn1cblxuXG5pbnRlcmZhY2UgTnVtYmVyIHtcbiAgICBcbiAgICByZWFkb25seSBpbnRlZ2VyVmFsdWU6IG51bWJlcjtcbiAgICBcbn1cblxuXG5cbmNsYXNzIFByaW1pdGl2ZU51bWJlciB7XG4gICAgXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHN0YXRpYyBbU3ltYm9sLmhhc0luc3RhbmNlXSh4KSB7XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbn1cblxuXG5pZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiBCb29sZWFuLnByb3RvdHlwZSA9PSBOTykge1xuICAgIFxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCb29sZWFuLnByb3RvdHlwZSwgXCJpbnRlZ2VyVmFsdWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0aGlzOiBib29sZWFuKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gMFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9KVxuICAgIFxufVxuXG5cbmludGVyZmFjZSBCb29sZWFuIHtcbiAgICBcbiAgICByZWFkb25seSBpbnRlZ2VyVmFsdWU6IG51bWJlcjtcbiAgICBcbn1cblxuXG5pZiAoXCJkYXRlU3RyaW5nXCIgaW4gRGF0ZS5wcm90b3R5cGUgPT0gTk8pIHtcbiAgICBcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0ZS5wcm90b3R5cGUsIFwiZGF0ZVN0cmluZ1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZGF0ZVN0cmluZyh0aGlzOiBEYXRlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IChcIjBcIiArIHRoaXMuZ2V0RGF0ZSgpKS5zbGljZSgtMikgKyBcIi1cIiArIChcIjBcIiArICh0aGlzLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsgXCItXCIgK1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RnVsbFllYXIoKSArIFwiIFwiICsgKFwiMFwiICsgdGhpcy5nZXRIb3VycygpKS5zbGljZSgtMikgKyBcIjpcIiArXG4gICAgICAgICAgICAgICAgKFwiMFwiICsgdGhpcy5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuaW50ZXJmYWNlIERhdGUge1xuICAgIFxuICAgIHJlYWRvbmx5IGRhdGVTdHJpbmc6IHN0cmluZztcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJT2JqZWN0LnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9VSUNvcmUvVUlDb3JlRXh0ZW5zaW9ucy50c1wiIC8+XG5cblxuXG5cblxuaW50ZXJmYWNlIENCU29ja2V0Q2FsbGJhY2tIb2xkZXJNZXNzYWdlRGVzY3JpcHRvciB7XG4gICAgXG4gICAga2V5OiBzdHJpbmc7XG4gICAgbWVzc2FnZToge1xuICAgICAgICBpZGVudGlmaWVyOiBzdHJpbmc7XG4gICAgICAgIGluUmVzcG9uc2VUb0lkZW50aWZpZXI/OiBzdHJpbmc7XG4gICAgICAgIGtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzPzogYm9vbGVhbjtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc2VudEF0VGltZTogbnVtYmVyO1xuICAgIFxuICAgIC8vY29tcGxldGlvblRyaWdnZXJlZDogYm9vbGVhbjtcbiAgICBcbiAgICBtZXNzYWdlRGF0YUhhc2g6IHN0cmluZztcbiAgICBcbiAgICByZXNwb25zZURhdGFIYXNoPzogc3RyaW5nO1xuICAgIFxuICAgIG1haW5SZXNwb25zZVJlY2VpdmVkOiBib29sZWFuO1xuICAgIFxuICAgIGFueU1haW5SZXNwb25zZVJlY2VpdmVkOiBib29sZWFuO1xuICAgIFxuICAgIGNvbXBsZXRpb25Qb2xpY3k6IHN0cmluZztcbiAgICBjb21wbGV0aW9uRnVuY3Rpb246IENCU29ja2V0TWVzc2FnZWNvbXBsZXRpb25GdW5jdGlvbjtcbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgQ0JTb2NrZXRDYWxsYmFja0hvbGRlclN0b3JlZFJlc3BvbnNlT2JqZWN0IHtcbiAgICBcbiAgICBtZXNzYWdlS2V5OiBzdHJpbmc7XG4gICAgbWVzc2FnZURhdGE6IGFueTtcbiAgICBtZXNzYWdlRGF0YUhhc2g6IHN0cmluZztcbiAgICBcbn1cblxuXG5cblxuY2xhc3MgQ0JTb2NrZXRDYWxsYmFja0hvbGRlciBleHRlbmRzIFVJT2JqZWN0IHtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBtZXNzYWdlRGVzY3JpcHRvcnM6IHtcbiAgICAgICAgXG4gICAgICAgIFt4OiBzdHJpbmddOiBDQlNvY2tldENhbGxiYWNrSG9sZGVyTWVzc2FnZURlc2NyaXB0b3JbXVxuICAgICAgICBcbiAgICB9ID0ge31cbiAgICBcbiAgICBoYW5kbGVyczoge1xuICAgICAgICBbeDogc3RyaW5nXTogQ0JTb2NrZXRNZXNzYWdlSGFuZGxlckZ1bmN0aW9uW11cbiAgICB9ID0ge31cbiAgICBcbiAgICBvbmV0aW1lSGFuZGxlcnM6IHtcbiAgICAgICAgW3g6IHN0cmluZ106IENCU29ja2V0TWVzc2FnZUhhbmRsZXJGdW5jdGlvbltdXG4gICAgfSA9IHt9XG4gICAgXG4gICAga2V5c0ZvcklkZW50aWZpZXJzOiB7XG4gICAgICAgIFxuICAgICAgICBbeDogc3RyaW5nXTogc3RyaW5nXG4gICAgICAgIFxuICAgIH0gPSB7fVxuICAgIFxuICAgIFxuICAgIGlzVmFsaWQgPSBZRVNcbiAgICBfc3RvcmVhYmxlUmVzcG9uc2VLZXlzOiBzdHJpbmdbXVxuICAgIF9zdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnk6IHtcbiAgICAgICAgXG4gICAgICAgIFt4OiBzdHJpbmddOiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGhhc2g6IHN0cmluZyxcbiAgICAgICAgICAgIHZhbGlkaXR5RGF0ZTogbnVtYmVyXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgX3ZlcmlmaWVkUmVzcG9uc2VIYXNoZXNEaWN0aW9uYXJ5OiB7XG4gICAgICAgIFxuICAgICAgICBbeDogc3RyaW5nXTogYm9vbGVhblxuICAgICAgICBcbiAgICB9ID0ge31cbiAgICBcbiAgICBfc29ja2V0Q2xpZW50OiBDQlNvY2tldENsaWVudFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKHNvY2tldENsaWVudDogQ0JTb2NrZXRDbGllbnQsIHByZXZpb3VzQ2FsbGJhY2tIb2xkZXI/OiBDQlNvY2tldENhbGxiYWNrSG9sZGVyKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc29ja2V0Q2xpZW50ID0gc29ja2V0Q2xpZW50XG4gICAgICAgIFxuICAgICAgICBpZiAoSVMocHJldmlvdXNDYWxsYmFja0hvbGRlcikpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycyA9IHByZXZpb3VzQ2FsbGJhY2tIb2xkZXIuaGFuZGxlcnNcbiAgICAgICAgICAgIHRoaXMuX3ZlcmlmaWVkUmVzcG9uc2VIYXNoZXNEaWN0aW9uYXJ5ID0gcHJldmlvdXNDYWxsYmFja0hvbGRlci5fdmVyaWZpZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgdHJpZ2dlckRpc2Nvbm5lY3RIYW5kbGVycygpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubWVzc2FnZURlc2NyaXB0b3JzLmZvckVhY2goZnVuY3Rpb24gKGRlc2NyaXB0b3I6IENCU29ja2V0Q2FsbGJhY2tIb2xkZXJNZXNzYWdlRGVzY3JpcHRvciwga2V5OiBzdHJpbmcpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IubWFpblJlc3BvbnNlUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmNvbXBsZXRpb25GdW5jdGlvbihDQlNvY2tldENsaWVudC5kaXNjb25uZWN0aW9uTWVzc2FnZSwgbmlsKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICByZWdpc3RlckhhbmRsZXIoa2V5OiBzdHJpbmcsIGhhbmRsZXJGdW5jdGlvbjogQ0JTb2NrZXRNZXNzYWdlSGFuZGxlckZ1bmN0aW9uKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmhhbmRsZXJzW2tleV0pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc1trZXldID0gW11cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmhhbmRsZXJzW2tleV0ucHVzaChoYW5kbGVyRnVuY3Rpb24pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHJlZ2lzdGVyT25ldGltZUhhbmRsZXIoa2V5OiBzdHJpbmcsIGhhbmRsZXJGdW5jdGlvbjogQ0JTb2NrZXRNZXNzYWdlSGFuZGxlckZ1bmN0aW9uKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLm9uZXRpbWVIYW5kbGVyc1trZXldKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMub25ldGltZUhhbmRsZXJzW2tleV0gPSBbXVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMub25ldGltZUhhbmRsZXJzW2tleV0ucHVzaChoYW5kbGVyRnVuY3Rpb24pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBzdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnkoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHRoaXMuX3N0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc3RvcmVkUmVzcG9uc2VIYXNoZXNEaWN0aW9uYXJ5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbXCJDQlNvY2tldFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVwiXSB8fCBcInt9XCIpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RvcmVkUmVzcG9uc2VIYXNoT2JqZWN0Rm9yS2V5KHJlcXVlc3RLZXk6IHN0cmluZywgcmVxdWVzdERhdGFIYXNoOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZUtleSA9IHRoaXMua2V5Rm9yUmVxdWVzdEtleUFuZFJlcXVlc3REYXRhSGFzaChyZXF1ZXN0S2V5LCByZXF1ZXN0RGF0YUhhc2gpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBoYXNoT2JqZWN0ID0gdGhpcy5zdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnlbbG9jYWxTdG9yYWdlS2V5XVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gRklSU1QoaGFzaE9iamVjdCwge30gYXMgYW55KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdG9yZWRSZXNwb25zZUZvcktleShyZXF1ZXN0S2V5OiBzdHJpbmcsIHJlcXVlc3REYXRhSGFzaDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBsb2NhbFN0b3JhZ2VLZXkgPSB0aGlzLmtleUZvclJlcXVlc3RLZXlBbmRSZXF1ZXN0RGF0YUhhc2gocmVxdWVzdEtleSwgcmVxdWVzdERhdGFIYXNoKVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RvcmVkT2JqZWN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbbG9jYWxTdG9yYWdlS2V5XSB8fCBcInt9XCIpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc3RvcmVkT2JqZWN0LnJlc3BvbnNlTWVzc2FnZURhdGFcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGtleUZvclJlcXVlc3RLZXlBbmRSZXF1ZXN0RGF0YUhhc2gocmVxdWVzdEtleTogc3RyaW5nLCByZXF1ZXN0RGF0YUhhc2g6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gXCJfQ0JTQ0hfTFNfa2V5X1wiICsgcmVxdWVzdEtleSArIFwiX1wiICsgcmVxdWVzdERhdGFIYXNoXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdG9yZVJlc3BvbnNlKFxuICAgICAgICByZXF1ZXN0S2V5OiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3REYXRhSGFzaDogc3RyaW5nLFxuICAgICAgICByZXNwb25zZU1lc3NhZ2U6IENCU29ja2V0TWVzc2FnZTxhbnk+LFxuICAgICAgICByZXNwb25zZURhdGFIYXNoOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3BvbnNlTWVzc2FnZS5jYW5CZVN0b3JlZEFzUmVzcG9uc2UgfHxcbiAgICAgICAgICAgIChJU19OT1QocmVzcG9uc2VNZXNzYWdlLm1lc3NhZ2VEYXRhKSAmJiBJU19OT1QocmVzcG9uc2VNZXNzYWdlLm1lc3NhZ2VEYXRhSGFzaCkpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBsb2NhbFN0b3JhZ2VLZXkgPSB0aGlzLmtleUZvclJlcXVlc3RLZXlBbmRSZXF1ZXN0RGF0YUhhc2gocmVxdWVzdEtleSwgcmVxdWVzdERhdGFIYXNoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHZhciB2YWxpZGl0eURhdGU6IG51bWJlclxuICAgICAgICBcbiAgICAgICAgaWYgKHJlc3BvbnNlTWVzc2FnZS5yZXNwb25zZVZhbGlkaXR5RHVyYXRpb24pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFsaWRpdHlEYXRlID0gRGF0ZS5ub3coKSArIHJlc3BvbnNlTWVzc2FnZS5yZXNwb25zZVZhbGlkaXR5RHVyYXRpb25cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnkgPSB0aGlzLnN0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVxuICAgICAgICBzdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnlbbG9jYWxTdG9yYWdlS2V5XSA9IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaGFzaDogcmVzcG9uc2VEYXRhSGFzaCxcbiAgICAgICAgICAgIHZhbGlkaXR5RGF0ZTogdmFsaWRpdHlEYXRlXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zYXZlSW5Mb2NhbFN0b3JhZ2UobG9jYWxTdG9yYWdlS2V5LCB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZURhdGE6IHJlc3BvbnNlTWVzc2FnZS5tZXNzYWdlRGF0YSxcbiAgICAgICAgICAgIHJlc3BvbnNlSGFzaDogcmVzcG9uc2VEYXRhSGFzaFxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zYXZlU3RvcmVkUmVzcG9uc2VIYXNoZXNEaWN0aW9uYXJ5KHN0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHByaXZhdGUgc2F2ZVN0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeShzdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnk6IHsgW3g6IHN0cmluZ106IHsgaGFzaDogc3RyaW5nOyB2YWxpZGl0eURhdGU6IG51bWJlcjsgfTsgfSkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zYXZlSW5Mb2NhbFN0b3JhZ2UoXCJDQlNvY2tldFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVwiLCBzdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnkpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzYXZlSW5Mb2NhbFN0b3JhZ2Uoa2V5OiBzdHJpbmcsIG9iamVjdDogYW55KSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RyaW5nVG9TYXZlID0gSlNPTi5zdHJpbmdpZnkob2JqZWN0KVxuICAgICAgICBcbiAgICAgICAgaWYgKHN0cmluZ1RvU2F2ZSAhPSBsb2NhbFN0b3JhZ2Vba2V5XSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Vba2V5XSA9IHN0cmluZ1RvU2F2ZVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzb2NrZXRTaG91bGRTZW5kTWVzc2FnZShcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIG1lc3NhZ2U6IENCU29ja2V0TWVzc2FnZTxhbnk+LFxuICAgICAgICBjb21wbGV0aW9uUG9saWN5OiBzdHJpbmcsXG4gICAgICAgIGNvbXBsZXRpb25GdW5jdGlvbjogQ0JTb2NrZXRNZXNzYWdlY29tcGxldGlvbkZ1bmN0aW9uXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHZhciByZXN1bHQgPSBZRVNcbiAgICAgICAgXG4gICAgICAgIHZhciB0cmlnZ2VyU3RvcmVkUmVzcG9uc2VJbW1lZGlhdGVseSA9IE5PXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBtZXNzYWdlRGF0YUhhc2ggPSBvYmplY3RIYXNoKG1lc3NhZ2UubWVzc2FnZURhdGEgfHwgbmlsKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGVzY3JpcHRvcktleSA9IFwic29ja2V0TWVzc2FnZURlc2NyaXB0b3JfXCIgKyBrZXkgKyBtZXNzYWdlRGF0YUhhc2hcbiAgICAgICAgXG4gICAgICAgIHRoaXMubWVzc2FnZURlc2NyaXB0b3JzW2Rlc2NyaXB0b3JLZXldID0gKHRoaXMubWVzc2FnZURlc2NyaXB0b3JzW2Rlc2NyaXB0b3JLZXldIHx8IFtdKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGhhc2hPYmplY3QgPSB0aGlzLnN0b3JlZFJlc3BvbnNlSGFzaE9iamVjdEZvcktleShrZXksIG1lc3NhZ2VEYXRhSGFzaClcbiAgICAgICAgbWVzc2FnZS5zdG9yZWRSZXNwb25zZUhhc2ggPSBoYXNoT2JqZWN0Lmhhc2hcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKGNvbXBsZXRpb25Qb2xpY3kgPT0gQ0JTb2NrZXRDbGllbnQuY29tcGxldGlvblBvbGljeS5maXJzdCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yc0ZvcktleSA9ICh0aGlzLm1lc3NhZ2VEZXNjcmlwdG9yc1tkZXNjcmlwdG9yS2V5XSB8fCBbXSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmdEZXNjcmlwdG9yID0gZGVzY3JpcHRvcnNGb3JLZXkuZmluZChmdW5jdGlvbiAoZGVzY3JpcHRvciwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChkZXNjcmlwdG9yLm1lc3NhZ2VEYXRhSGFzaCA9PSBtZXNzYWdlRGF0YUhhc2gpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobWF0Y2hpbmdEZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gTk9cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tcGxldGlvblBvbGljeSA9PSBDQlNvY2tldENsaWVudC5jb21wbGV0aW9uUG9saWN5LnN0b3JlZE9yRmlyc3QpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRvcnNGb3JLZXkgPSAodGhpcy5tZXNzYWdlRGVzY3JpcHRvcnNbZGVzY3JpcHRvcktleV0gfHwgW10pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nRGVzY3JpcHRvciA9IGRlc2NyaXB0b3JzRm9yS2V5LmZpbmQoZnVuY3Rpb24gKGRlc2NyaXB0b3IsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoZGVzY3JpcHRvci5tZXNzYWdlRGF0YUhhc2ggPT0gbWVzc2FnZURhdGFIYXNoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkUmVzcG9uc2UgPSBJUyhtZXNzYWdlLnN0b3JlZFJlc3BvbnNlSGFzaClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoaW5nRGVzY3JpcHRvciB8fFxuICAgICAgICAgICAgICAgIChzdG9yZWRSZXNwb25zZSAmJiB0aGlzLl92ZXJpZmllZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVttZXNzYWdlLnN0b3JlZFJlc3BvbnNlSGFzaF0pKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gTk9cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0cmlnZ2VyU3RvcmVkUmVzcG9uc2VJbW1lZGlhdGVseSA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjb21wbGV0aW9uUG9saWN5ID09IENCU29ja2V0Q2xpZW50LmNvbXBsZXRpb25Qb2xpY3kuZmlyc3RPbmx5KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3JzRm9yS2V5ID0gKHRoaXMubWVzc2FnZURlc2NyaXB0b3JzW2Rlc2NyaXB0b3JLZXldIHx8IFtdKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZ0Rlc2NyaXB0b3IgPSBkZXNjcmlwdG9yc0ZvcktleS5maW5kKGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGRlc2NyaXB0b3IubWVzc2FnZURhdGFIYXNoID09IG1lc3NhZ2VEYXRhSGFzaClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChtYXRjaGluZ0Rlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gTk9cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKGhhc2hPYmplY3QgJiYgaGFzaE9iamVjdC5oYXNoICYmIGhhc2hPYmplY3QudmFsaWRpdHlEYXRlICYmIG1lc3NhZ2Uuc3RvcmVkUmVzcG9uc2VIYXNoICYmXG4gICAgICAgICAgICB0aGlzLl92ZXJpZmllZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVttZXNzYWdlLnN0b3JlZFJlc3BvbnNlSGFzaF0gJiYgaGFzaE9iamVjdC52YWxpZGl0eURhdGUgPlxuICAgICAgICAgICAgRGF0ZS5ub3coKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXN1bHQgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cmlnZ2VyU3RvcmVkUmVzcG9uc2VJbW1lZGlhdGVseSA9IFlFU1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoSVMoY29tcGxldGlvbkZ1bmN0aW9uKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VEZXNjcmlwdG9yc1tkZXNjcmlwdG9yS2V5XS5wdXNoKHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBtZXNzYWdlLmlkZW50aWZpZXIsXG4gICAgICAgICAgICAgICAgICAgIGluUmVzcG9uc2VUb0lkZW50aWZpZXI6IG1lc3NhZ2UuaW5SZXNwb25zZVRvSWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICAgICAga2VlcFdhaXRpbmdGb3JSZXNwb25zZXM6IG1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXNcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZW50QXRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vY29tcGxldGlvblRyaWdnZXJlZDogTk8sXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbWVzc2FnZURhdGFIYXNoOiBtZXNzYWdlRGF0YUhhc2gsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbWFpblJlc3BvbnNlUmVjZWl2ZWQ6IE5PLFxuICAgICAgICAgICAgICAgIGFueU1haW5SZXNwb25zZVJlY2VpdmVkOiBOTyxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uUG9saWN5OiBjb21wbGV0aW9uUG9saWN5LFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25GdW5jdGlvbjogY29tcGxldGlvbkZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmtleXNGb3JJZGVudGlmaWVyc1ttZXNzYWdlLmlkZW50aWZpZXJdID0gZGVzY3JpcHRvcktleVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodHJpZ2dlclN0b3JlZFJlc3BvbnNlSW1tZWRpYXRlbHkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zb2NrZXREaWRSZWNlaXZlTWVzc2FnZUZvcktleShcbiAgICAgICAgICAgICAgICBDQlNvY2tldENsaWVudC5yZXNwb25zZU1lc3NhZ2VLZXksXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogbmlsLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRGF0YTogbmlsLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaW5SZXNwb25zZVRvSWRlbnRpZmllcjogbWVzc2FnZS5pZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdXNlU3RvcmVkUmVzcG9uc2U6IFlFU1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG5pbFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGRlZmF1bHRNdWx0aXBsZU1lc3NhZ2Vjb21wbGV0aW9uRnVuY3Rpb24ocmVzcG9uc2VNZXNzYWdlczogYW55W10sIGNhbGxjb21wbGV0aW9uRnVuY3Rpb25zOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIGNhbGxjb21wbGV0aW9uRnVuY3Rpb25zKClcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc29ja2V0V2lsbFNlbmRNdWx0aXBsZU1lc3NhZ2UoXG4gICAgICAgIG1lc3NhZ2VUb1NlbmQ6IENCU29ja2V0TXVsdGlwbGVNZXNzYWdlLFxuICAgICAgICBjb21wbGV0aW9uRnVuY3Rpb246IENCU29ja2V0TXVsdGlwbGVNZXNzYWdlY29tcGxldGlvbkZ1bmN0aW9uID0gQ0JTb2NrZXRDYWxsYmFja0hvbGRlci5kZWZhdWx0TXVsdGlwbGVNZXNzYWdlY29tcGxldGlvbkZ1bmN0aW9uXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGtleSA9IENCU29ja2V0Q2xpZW50Lm11bHRpcGxlTWVzc2FnZUtleVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgbWVzc2FnZURhdGFIYXNoID0gb2JqZWN0SGFzaChtZXNzYWdlVG9TZW5kLm1lc3NhZ2VEYXRhIHx8IG5pbClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3JLZXkgPSBcInNvY2tldE1lc3NhZ2VEZXNjcmlwdG9yX1wiICsga2V5ICsgbWVzc2FnZURhdGFIYXNoXG4gICAgICAgIFxuICAgICAgICB0aGlzLm1lc3NhZ2VEZXNjcmlwdG9yc1tkZXNjcmlwdG9yS2V5XSA9ICh0aGlzLm1lc3NhZ2VEZXNjcmlwdG9yc1tkZXNjcmlwdG9yS2V5XSB8fCBbXSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBtZXNzYWdlVG9TZW5kLnN0b3JlZFJlc3BvbnNlSGFzaCA9IHRoaXMuc3RvcmVkUmVzcG9uc2VIYXNoT2JqZWN0Rm9yS2V5KGtleSwgbWVzc2FnZURhdGFIYXNoKS5oYXNoXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5tZXNzYWdlRGVzY3JpcHRvcnNbZGVzY3JpcHRvcktleV0ucHVzaCh7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IG1lc3NhZ2VUb1NlbmQuaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBpblJlc3BvbnNlVG9JZGVudGlmaWVyOiBtZXNzYWdlVG9TZW5kLmluUmVzcG9uc2VUb0lkZW50aWZpZXIsXG4gICAgICAgICAgICAgICAga2VlcFdhaXRpbmdGb3JSZXNwb25zZXM6IG1lc3NhZ2VUb1NlbmQua2VlcFdhaXRpbmdGb3JSZXNwb25zZXNcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNlbnRBdFRpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vY29tcGxldGlvblRyaWdnZXJlZDogTk8sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWVzc2FnZURhdGFIYXNoOiBtZXNzYWdlRGF0YUhhc2gsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1haW5SZXNwb25zZVJlY2VpdmVkOiBOTyxcbiAgICAgICAgICAgIGFueU1haW5SZXNwb25zZVJlY2VpdmVkOiBOTyxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb21wbGV0aW9uUG9saWN5OiBDQlNvY2tldENsaWVudC5jb21wbGV0aW9uUG9saWN5LmRpcmVjdE9ubHksXG4gICAgICAgICAgICBjb21wbGV0aW9uRnVuY3Rpb246IGZ1bmN0aW9uIChcbiAgICAgICAgICAgICAgICB0aGlzOiBDQlNvY2tldENhbGxiYWNrSG9sZGVyLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZTogQ0JTb2NrZXRNdWx0aXBsZU1lc3NhZ2VPYmplY3RbXSxcbiAgICAgICAgICAgICAgICByZXNwb25kV2l0aE1lc3NhZ2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25GdW5jdGlvbihcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNZXNzYWdlLm1hcChmdW5jdGlvbiAobWVzc2FnZU9iamVjdCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UubWVzc2FnZURhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IENCU29ja2V0Q2FsbGJhY2tIb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlJlY2VpdmVkIG11bHRpcGxlIG1lc3NhZ2UgcmVzcG9uc2Ugd2l0aCBsZW5ndGggb2YgXCIgKyByZXNwb25zZU1lc3NhZ2UubGVuZ3RoICsgXCIuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIGFsbCBjb21wbGV0aW9uIGZ1bmN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNZXNzYWdlLmZvckVhY2goZnVuY3Rpb24gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXM6IENCU29ja2V0Q2FsbGJhY2tIb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZU9iamVjdDogQ0JTb2NrZXRNdWx0aXBsZU1lc3NhZ2VPYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheTogQ0JTb2NrZXRNdWx0aXBsZU1lc3NhZ2VPYmplY3RbXVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc29ja2V0Q2xpZW50LmRpZFJlY2VpdmVNZXNzYWdlRm9yS2V5KG1lc3NhZ2VPYmplY3Qua2V5LCBtZXNzYWdlT2JqZWN0Lm1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMua2V5c0ZvcklkZW50aWZpZXJzW21lc3NhZ2VUb1NlbmQuaWRlbnRpZmllcl0gPSBkZXNjcmlwdG9yS2V5XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc29ja2V0RGlkUmVjZWl2ZU1lc3NhZ2VGb3JLZXkoXG4gICAgICAgIGtleTogc3RyaW5nLFxuICAgICAgICBtZXNzYWdlOiBDQlNvY2tldE1lc3NhZ2U8YW55PixcbiAgICAgICAgc2VuZFJlc3BvbnNlRnVuY3Rpb246IENCU29ja2V0TWVzc2FnZVNlbmRSZXNwb25zZUZ1bmN0aW9uXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGwgc3RhdGljIGhhbmRsZXJzXG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzW2tleV0pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc1trZXldLmZvckVhY2goZnVuY3Rpb24gKFxuICAgICAgICAgICAgICAgIHRoaXM6IENCU29ja2V0Q2FsbGJhY2tIb2xkZXIsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogQ0JTb2NrZXRNZXNzYWdlSGFuZGxlckZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgIGFycmF5XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBoYW5kbGVyKG1lc3NhZ2UubWVzc2FnZURhdGEsIHNlbmRSZXNwb25zZUZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLm9uZXRpbWVIYW5kbGVyc1trZXldKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMub25ldGltZUhhbmRsZXJzW2tleV0uZm9yRWFjaChmdW5jdGlvbiAoXG4gICAgICAgICAgICAgICAgdGhpczogQ0JTb2NrZXRDYWxsYmFja0hvbGRlcixcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiBDQlNvY2tldE1lc3NhZ2VIYW5kbGVyRnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgYXJyYXlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGhhbmRsZXIobWVzc2FnZS5tZXNzYWdlRGF0YSwgc2VuZFJlc3BvbnNlRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm9uZXRpbWVIYW5kbGVyc1trZXldXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBUZW1wb3JhcnkgcmVzcG9uc2UgaGFuZGxlcnMgYXJlIGV2YWx1YXRlZCBoZXJlXG4gICAgICAgIGlmIChtZXNzYWdlLmluUmVzcG9uc2VUb0lkZW50aWZpZXIgJiZcbiAgICAgICAgICAgIChDQlNvY2tldENsaWVudC5yZXNwb25zZU1lc3NhZ2VLZXkgPT0ga2V5IHx8IENCU29ja2V0Q2xpZW50Lm11bHRpcGxlTWVzc2FnZUtleSA9PSBrZXkpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbmQgZGVzY3JpcHRvcnMgZm9yIHRoZSBrZXkgb2YgdGhlIG1lc3NhZ2UgdGhhdCBpcyBiZWluZyByZXNwb25kZWQgdG9cbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3JLZXkgPSB0aGlzLmtleXNGb3JJZGVudGlmaWVyc1ttZXNzYWdlLmluUmVzcG9uc2VUb0lkZW50aWZpZXJdXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yc0ZvcktleSA9ICh0aGlzLm1lc3NhZ2VEZXNjcmlwdG9yc1tkZXNjcmlwdG9yS2V5XSB8fCBbXSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmluZCByZXNwb25zZSBkYXRhIGhhc2ggdG8gY2hlY2sgZm9yIGRpZmZlcmVuY2VzXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZURhdGFIYXNoID0gbWVzc2FnZS5tZXNzYWdlRGF0YUhhc2hcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVtb3ZlIGlkZW50aWZpZXIgZnJvbSBkaWN0aW9uYXJ5XG4gICAgICAgICAgICBpZiAoIW1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5rZXlzRm9ySWRlbnRpZmllcnNbbWVzc2FnZS5pblJlc3BvbnNlVG9JZGVudGlmaWVyXVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm1lc3NhZ2VEZXNjcmlwdG9yc1tkZXNjcmlwdG9yS2V5XVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIGNhbGwgY29tcGxldGlvbiBmdW5jdGlvblxuICAgICAgICAgICAgY29uc3QgY2FsbENvbXBsZXRpb25GdW5jdGlvbiA9IChkZXNjcmlwdG9yLCBzdG9yZWRSZXNwb25zZUNvbmRpdGlvbiA9IE5PKSA9PiB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VEYXRhID0gbWVzc2FnZS5tZXNzYWdlRGF0YVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlLnVzZVN0b3JlZFJlc3BvbnNlICYmIHN0b3JlZFJlc3BvbnNlQ29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRGF0YSA9IHRoaXMuc3RvcmVkUmVzcG9uc2VGb3JLZXkoZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IubWVzc2FnZURhdGFIYXNoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VIYXNoID0gdGhpcy5zdG9yZWRSZXNwb25zZUhhc2hPYmplY3RGb3JLZXkoXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IubWVzc2FnZURhdGFIYXNoXG4gICAgICAgICAgICAgICAgICAgICkuaGFzaFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWxTdG9yYWdlS2V5ID0gdGhpcy5rZXlGb3JSZXF1ZXN0S2V5QW5kUmVxdWVzdERhdGFIYXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvci5rZXksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLm1lc3NhZ2VEYXRhSGFzaFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5yZXNwb25zZVZhbGlkaXR5RHVyYXRpb24gJiYgdGhpcy5zdG9yZWRSZXNwb25zZUhhc2hlc0RpY3Rpb25hcnlbbG9jYWxTdG9yYWdlS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVtsb2NhbFN0b3JhZ2VLZXldLnZhbGlkaXR5RGF0ZSA9IERhdGUubm93KCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzcG9uc2VWYWxpZGl0eUR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZVN0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeSh0aGlzLnN0b3JlZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl92ZXJpZmllZFJlc3BvbnNlSGFzaGVzRGljdGlvbmFyeVtyZXNwb25zZUhhc2hdID0gWUVTXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIHN0b3JlZCByZXNwb25zZS5cIilcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENhbGwgY29tcGxldGlvbkZ1bmN0aW9uIGFuZCBzZXQgcmVzcG9uc2UgZGF0YSBoYXNoXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRvci5jb21wbGV0aW9uRnVuY3Rpb24obWVzc2FnZURhdGEsIHNlbmRSZXNwb25zZUZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IucmVzcG9uc2VEYXRhSGFzaCA9IHJlc3BvbnNlRGF0YUhhc2hcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZXNjcmlwdG9yc0ZvcktleS5jb3B5KCkuZm9yRWFjaChmdW5jdGlvbiAoXG4gICAgICAgICAgICAgICAgdGhpczogQ0JTb2NrZXRDYWxsYmFja0hvbGRlcixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiBDQlNvY2tldENhbGxiYWNrSG9sZGVyTWVzc2FnZURlc2NyaXB0b3IsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgICAgICAgICBhcnJheTogQ0JTb2NrZXRDYWxsYmFja0hvbGRlck1lc3NhZ2VEZXNjcmlwdG9yW11cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICgoZGVzY3JpcHRvci5jb21wbGV0aW9uUG9saWN5ID09IENCU29ja2V0Q2xpZW50LmNvbXBsZXRpb25Qb2xpY3kuZGlyZWN0T25seSAmJlxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLm1lc3NhZ2UuaWRlbnRpZmllciA9PSBtZXNzYWdlLmluUmVzcG9uc2VUb0lkZW50aWZpZXIpIHx8IGRlc2NyaXB0b3IuY29tcGxldGlvblBvbGljeSA9PVxuICAgICAgICAgICAgICAgICAgICBDQlNvY2tldENsaWVudC5jb21wbGV0aW9uUG9saWN5LmZpcnN0IHx8IGRlc2NyaXB0b3IuY29tcGxldGlvblBvbGljeSA9PVxuICAgICAgICAgICAgICAgICAgICBDQlNvY2tldENsaWVudC5jb21wbGV0aW9uUG9saWN5LmZpcnN0T25seSB8fCBkZXNjcmlwdG9yLmNvbXBsZXRpb25Qb2xpY3kgPT1cbiAgICAgICAgICAgICAgICAgICAgQ0JTb2NrZXRDbGllbnQuY29tcGxldGlvblBvbGljeS5zdG9yZWRPckZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsaW5nIGNvbXBsZXRpb24gZnVuY3Rpb24gYW5kIHJlbW92aW5nIGRlc2NyaXB0b3JcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5rZWVwV2FpdGluZ0ZvclJlc3BvbnNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlUmVzcG9uc2UoZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IubWVzc2FnZURhdGFIYXNoLCBtZXNzYWdlLCByZXNwb25zZURhdGFIYXNoKVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc0ZvcktleS5yZW1vdmVFbGVtZW50KGRlc2NyaXB0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZUZ1bmN0aW9uLnJlc3BvbmRpbmdUb01haW5SZXNwb25zZSA9IFlFU1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNhbGxDb21wbGV0aW9uRnVuY3Rpb24oZGVzY3JpcHRvciwgIW1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXNjcmlwdG9yLmNvbXBsZXRpb25Qb2xpY3kgPT0gQ0JTb2NrZXRDbGllbnQuY29tcGxldGlvblBvbGljeS5hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGxpbmcgY29tcGxldGlvbiBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICBjYWxsQ29tcGxldGlvbkZ1bmN0aW9uKGRlc2NyaXB0b3IsICFtZXNzYWdlLmtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFya2luZyBkZXNjcmlwdG9yIGFzIGhhdmluZyBiZWVuIHJlc3BvbmRlZCB0b1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5SZXNwb25zZVRvSWRlbnRpZmllciA9PSBkZXNjcmlwdG9yLm1lc3NhZ2UuaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZUZ1bmN0aW9uLnJlc3BvbmRpbmdUb01haW5SZXNwb25zZSA9IFlFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IubWFpblJlc3BvbnNlUmVjZWl2ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc0ZvcktleS5yZW1vdmVFbGVtZW50KGRlc2NyaXB0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuYW55TWFpblJlc3BvbnNlUmVjZWl2ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlc2NyaXB0b3IuY29tcGxldGlvblBvbGljeSA9PSBDQlNvY2tldENsaWVudC5jb21wbGV0aW9uUG9saWN5LmFsbERpZmZlcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbGluZyBjb21wbGV0aW9uRnVuY3Rpb24gaWYgbWVzc2FnZURhdGEgaXMgZGlmZmVyZW50IGZyb20gcHJldmlvdXNcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IucmVzcG9uc2VEYXRhSGFzaCAhPSByZXNwb25zZURhdGFIYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxDb21wbGV0aW9uRnVuY3Rpb24oZGVzY3JpcHRvciwgIW1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFya2luZyBkZXNjcmlwdG9yIGFzIGhhdmluZyBiZWVuIHJlc3BvbmRlZCB0b1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaW5SZXNwb25zZVRvSWRlbnRpZmllciA9PSBkZXNjcmlwdG9yLm1lc3NhZ2UuaWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZUZ1bmN0aW9uLnJlc3BvbmRpbmdUb01haW5SZXNwb25zZSA9IFlFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IubWFpblJlc3BvbnNlUmVjZWl2ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc0ZvcktleS5yZW1vdmVFbGVtZW50KGRlc2NyaXB0b3IpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuYW55TWFpblJlc3BvbnNlUmVjZWl2ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXNjcmlwdG9yLmNvbXBsZXRpb25Qb2xpY3kgPT0gQ0JTb2NrZXRDbGllbnQuY29tcGxldGlvblBvbGljeS5sYXN0ICYmXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IubWVzc2FnZS5pZGVudGlmaWVyID09IG1lc3NhZ2UuaW5SZXNwb25zZVRvSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLmtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmtpbmcgZGVzY3JpcHRvciBhcyBoYXZpbmcgYmVlbiByZXNwb25kZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IubWFpblJlc3BvbnNlUmVjZWl2ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuYW55TWFpblJlc3BvbnNlUmVjZWl2ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlRnVuY3Rpb24ucmVzcG9uZGluZ1RvTWFpblJlc3BvbnNlID0gWUVTXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvci5jb21wbGV0aW9uRnVuY3Rpb24obWVzc2FnZS5tZXNzYWdlRGF0YSwgc2VuZFJlc3BvbnNlRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVzY3JpcHRvci5jb21wbGV0aW9uUG9saWN5ID09IENCU29ja2V0Q2xpZW50LmNvbXBsZXRpb25Qb2xpY3kuZmlyc3RBbmRMYXN0IHx8XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29tcGxldGlvblBvbGljeSA9PSBDQlNvY2tldENsaWVudC5jb21wbGV0aW9uUG9saWN5LmZpcnN0QW5kTGFzdElmRGlmZmVyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBjYWxsaW5nIGNvbXBsZXRpb25GdW5jdGlvbiBvbmNlIGFzIGEgZmlyc3QgcmVzcG9uc2UgY2FsbFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZXNjcmlwdG9yLmFueU1haW5SZXNwb25zZVJlY2VpdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbENvbXBsZXRpb25GdW5jdGlvbihkZXNjcmlwdG9yLCAhbWVzc2FnZS5rZWVwV2FpdGluZ0ZvclJlc3BvbnNlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFya2luZyBkZXNjcmlwdG9yIGFzIGhhdmluZyBiZWVuIHJlc3BvbmRlZCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IubWVzc2FnZS5pZGVudGlmaWVyID09IG1lc3NhZ2UuaW5SZXNwb25zZVRvSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IubWFpblJlc3BvbnNlUmVjZWl2ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2VGdW5jdGlvbi5yZXNwb25kaW5nVG9NYWluUmVzcG9uc2UgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvci5hbnlNYWluUmVzcG9uc2VSZWNlaXZlZCA9IFlFU1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVzY3JpcHRvci5tZXNzYWdlLmlkZW50aWZpZXIgPT0gbWVzc2FnZS5pblJlc3BvbnNlVG9JZGVudGlmaWVyICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29tcGxldGlvbkZ1bmN0aW9uKG1lc3NhZ2UubWVzc2FnZURhdGEsIHNlbmRSZXNwb25zZUZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIExhc3QgbWVzc2FnZSBjb21wbGV0aW9uIHBvbGljaWVzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGFsbFJlc3BvbnNlc1JlY2VpdmVkID0gZGVzY3JpcHRvcnNGb3JLZXkuYWxsTWF0Y2goZnVuY3Rpb24gKGRlc2NyaXB0b3JPYmplY3QsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdG9yT2JqZWN0Lm1haW5SZXNwb25zZVJlY2VpdmVkXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZXNjcmlwdG9yc0ZvcktleS5jb3B5KCkuZm9yRWFjaChmdW5jdGlvbiAoXG4gICAgICAgICAgICAgICAgdGhpczogQ0JTb2NrZXRDYWxsYmFja0hvbGRlcixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdG9yOiBDQlNvY2tldENhbGxiYWNrSG9sZGVyTWVzc2FnZURlc2NyaXB0b3IsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgICAgICAgICBhcnJheTogQ0JTb2NrZXRDYWxsYmFja0hvbGRlck1lc3NhZ2VEZXNjcmlwdG9yW11cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICgoZGVzY3JpcHRvci5jb21wbGV0aW9uUG9saWN5ID09IENCU29ja2V0Q2xpZW50LmNvbXBsZXRpb25Qb2xpY3kubGFzdCB8fFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLmNvbXBsZXRpb25Qb2xpY3kgPT0gQ0JTb2NrZXRDbGllbnQuY29tcGxldGlvblBvbGljeS5maXJzdEFuZExhc3QpICYmXG4gICAgICAgICAgICAgICAgICAgIGFsbFJlc3BvbnNlc1JlY2VpdmVkICYmICFtZXNzYWdlLmtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsaW5nIGNvbXBsZXRpb25GdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICBjYWxsQ29tcGxldGlvbkZ1bmN0aW9uKGRlc2NyaXB0b3IsICFtZXNzYWdlLmtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW5pbmcgdXBcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvcnNGb3JLZXkucmVtb3ZlRWxlbWVudChkZXNjcmlwdG9yKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVzY3JpcHRvci5jb21wbGV0aW9uUG9saWN5ID09IENCU29ja2V0Q2xpZW50LmNvbXBsZXRpb25Qb2xpY3kuZmlyc3RBbmRMYXN0SWZEaWZmZXJlbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgYWxsUmVzcG9uc2VzUmVjZWl2ZWQgJiYgIW1lc3NhZ2Uua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGxpbmcgY29tcGxldGlvbkZ1bmN0aW9uIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzY3JpcHRvci5yZXNwb25zZURhdGFIYXNoICE9IHJlc3BvbnNlRGF0YUhhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbENvbXBsZXRpb25GdW5jdGlvbihkZXNjcmlwdG9yLCAhbWVzc2FnZS5rZWVwV2FpdGluZ0ZvclJlc3BvbnNlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbmluZyB1cFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yc0ZvcktleS5yZW1vdmVFbGVtZW50KGRlc2NyaXB0b3IpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3NvY2tldC5pby1jbGllbnQuZGV2LmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1VJQ29yZS9VSU9iamVjdC50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJQ29yZUV4dGVuc2lvbnMudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NCQ29yZS50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9DQlNvY2tldENhbGxiYWNrSG9sZGVyLnRzXCIgLz5cblxuXG5kZWNsYXJlIGludGVyZmFjZSBDQlNvY2tldENsaWVudE1lc3NhZ2VUb0JlU2VudCB7XG4gICAgXG4gICAga2V5OiBzdHJpbmc7XG4gICAgbWVzc2FnZTogYW55O1xuICAgIFxuICAgIGluUmVzcG9uc2VUb01lc3NhZ2U6IENCU29ja2V0TWVzc2FnZTxhbnk+O1xuICAgIGtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzOiBib29sZWFuO1xuICAgIFxuICAgIGlzQm91bmRUb1VzZXJXaXRoSUQ6IHN0cmluZztcbiAgICBcbiAgICBjb21wbGV0aW9uUG9saWN5OiBzdHJpbmc7XG4gICAgXG4gICAgZGlkU2VuZEZ1bmN0aW9uPzogKCkgPT4gdm9pZDtcbiAgICBcbiAgICBjb21wbGV0aW9uOiBDQlNvY2tldE1lc3NhZ2Vjb21wbGV0aW9uRnVuY3Rpb247XG4gICAgXG59XG5cblxuZGVjbGFyZSBpbnRlcmZhY2UgQ0JTb2NrZXRDbGllbnRFcnJvck1lc3NhZ2Uge1xuICAgIFxuICAgIF9pc0NCU29ja2V0RXJyb3JNZXNzYWdlOiBib29sZWFuO1xuICAgIFxuICAgIG1lc3NhZ2VEYXRhOiBhbnk7XG4gICAgXG59XG5cblxuXG5cblxuZnVuY3Rpb24gSVNfU09DS0VUX0VSUk9SKG9iamVjdDogYW55KTogb2JqZWN0IGlzIENCU29ja2V0Q2xpZW50RXJyb3JNZXNzYWdlIHtcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSAoSVMob2JqZWN0KSAmJiBvYmplY3QuX2lzQ0JTb2NrZXRFcnJvck1lc3NhZ2UpXG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdFxuICAgIFxufVxuXG5mdW5jdGlvbiBJU19OT1RfU09DS0VUX0VSUk9SKG9iamVjdDogYW55KSB7XG4gICAgXG4gICAgcmV0dXJuICFJU19TT0NLRVRfRVJST1Iob2JqZWN0KVxuICAgIFxufVxuXG5cblxuXG5cbmNsYXNzIENCU29ja2V0Q2xpZW50IGV4dGVuZHMgVUlPYmplY3Qge1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIF9zb2NrZXQgPSBpbygpXG4gICAgX2lzQ29ubmVjdGlvbkVzdGFibGlzaGVkID0gTk9cbiAgICBcbiAgICBfY29sbGVjdE1lc3NhZ2VzVG9TZW5kTGF0ZXIgPSBOT1xuICAgIFxuICAgIF9tZXNzYWdlc1RvQmVTZW50OiBDQlNvY2tldENsaWVudE1lc3NhZ2VUb0JlU2VudFtdID0gW11cbiAgICBcbiAgICBzdGF0aWMgX3NoYXJlZEluc3RhbmNlOiBDQlNvY2tldENsaWVudFxuICAgIFxuICAgIF9jb3JlOiBDQkNvcmVcbiAgICBcbiAgICBfc3Vic2NyaWJlZEtleXM6IHtcbiAgICAgICAgW3g6IHN0cmluZ106IGJvb2xlYW5cbiAgICB9ID0ge31cbiAgICBcbiAgICBfY2FsbGJhY2tIb2xkZXIgPSBuZXcgQ0JTb2NrZXRDYWxsYmFja0hvbGRlcih0aGlzKVxuICAgIFxuICAgIHN0YXRpYyByZXNwb25zZU1lc3NhZ2VLZXkgPSBcIkNCU29ja2V0UmVzcG9uc2VNZXNzYWdlXCJcbiAgICBzdGF0aWMgbXVsdGlwbGVNZXNzYWdlS2V5ID0gXCJDQlNvY2tldE11bHRpcGxlTWVzc2FnZVwiXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGRpc2Nvbm5lY3Rpb25NZXNzYWdlOiBDQlNvY2tldENsaWVudEVycm9yTWVzc2FnZSA9IHtcbiAgICAgICAgXG4gICAgICAgIF9pc0NCU29ja2V0RXJyb3JNZXNzYWdlOiBZRVMsXG4gICAgICAgIFxuICAgICAgICBtZXNzYWdlRGF0YTogXCJTZXJ2ZXIgZGlzY29ubmVjdGVkXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGNvcmU6IENCQ29yZSkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gQ0JTb2NrZXRDbGllbnRcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlPYmplY3RcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NvcmUgPSBjb3JlXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLnNvY2tldC5vbihcImNvbm5lY3RcIiwgZnVuY3Rpb24gKHRoaXM6IENCU29ja2V0Q2xpZW50LCBzb2NrZXQ6IFNvY2tldElPLlNvY2tldCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNvY2tldC5pbyBjb25uZWN0ZWQgdG8gc2VydmVyLiBjbGllbnRJRCA9IFwiICsgc29ja2V0ICsgXCIsIHNvY2tldElEID0gXCIgKyBzb2NrZXQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZUlkZW50aWZpZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkluc3RhbmNlSWRlbnRpZmllclwiKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoSVNfTk9UKGluc3RhbmNlSWRlbnRpZmllcikpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXIgPSBNQUtFX0lEKClcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkluc3RhbmNlSWRlbnRpZmllclwiLCBpbnN0YW5jZUlkZW50aWZpZXIpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGhhbmRzaGFrZU1lc3NhZ2U6IENCU29ja2V0SGFuZHNoYWtlSW5pdE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG51bGwsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBpbnN0YW5jZUlkZW50aWZpZXJcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChcIkNCU29ja2V0SGFuZHNoYWtlSW5pdE1lc3NhZ2VcIiwge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IE1BS0VfSUQoKSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlRGF0YTogaGFuZHNoYWtlTWVzc2FnZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNvY2tldC5vbihcbiAgICAgICAgICAgIFwiQ0JTb2NrZXRIYW5kc2hha2VSZXNwb25zZU1lc3NhZ2VcIixcbiAgICAgICAgICAgIGZ1bmN0aW9uICh0aGlzOiBDQlNvY2tldENsaWVudCwgbWVzc2FnZTogQ0JTb2NrZXRNZXNzYWdlPENCU29ja2V0SGFuZHNoYWtlUmVzcG9uc2VNZXNzYWdlPikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGlvbkVzdGFibGlzaGVkID0gbWVzc2FnZS5tZXNzYWdlRGF0YS5hY2NlcHRlZFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5tZXNzYWdlRGF0YS5hY2NlcHRlZCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTb2NrZXRJTyBjb25uZWN0aW9uIGZhaWxlZC5cIilcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNvY2tldElPIGNvbm5lY3Rpb24gaGFuZHNoYWtlIGNvbXBsZXRlZC5cIilcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrSG9sZGVyID0gbmV3IENCU29ja2V0Q2FsbGJhY2tIb2xkZXIodGhpcywgdGhpcy5fY2FsbGJhY2tIb2xkZXIpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kVW5zZW50TWVzc2FnZXMoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5zb2NrZXQub24oXCJkaXNjb25uZWN0XCIsIGZ1bmN0aW9uICh0aGlzOiBDQlNvY2tldENsaWVudCwgc29ja2V0OiBTb2NrZXRJTy5Tb2NrZXQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTb2NrZXQuaW8gZGlzY29ubmVjdGVkIGZyb20gc2VydmVyLiBjbGllbnRJRCA9IFwiICsgc29ja2V0ICsgXCIuXCIpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2lzQ29ubmVjdGlvbkVzdGFibGlzaGVkID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tIb2xkZXIuaXNWYWxpZCA9IE5PXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrSG9sZGVyLnRyaWdnZXJEaXNjb25uZWN0SGFuZGxlcnMoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc29ja2V0Lm9uKFwiQ0JQZXJmb3JtUmVjb25uZWN0XCIsIGZ1bmN0aW9uICh0aGlzOiBDQlNvY2tldENsaWVudCwgbWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBlcmZvcm1pbmcgc29ja2V0IHJlY29ubmVjdGlvbi5cIilcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29yZS5yZWxvYWRTb2NrZXRDb25uZWN0aW9uKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhbGVydChtZXNzYWdlKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc29ja2V0Lm9uKFxuICAgICAgICAgICAgQ0JTb2NrZXRDbGllbnQucmVzcG9uc2VNZXNzYWdlS2V5LFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IENCU29ja2V0Q2xpZW50LCBtZXNzYWdlOiBDQlNvY2tldE1lc3NhZ2U8YW55Pikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZGlkUmVjZWl2ZU1lc3NhZ2VGb3JLZXkoQ0JTb2NrZXRDbGllbnQucmVzcG9uc2VNZXNzYWdlS2V5LCBtZXNzYWdlKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NvY2tldC5vbihcbiAgICAgICAgICAgIENCU29ja2V0Q2xpZW50Lm11bHRpcGxlTWVzc2FnZUtleSxcbiAgICAgICAgICAgIChtZXNzYWdlOiBDQlNvY2tldE1lc3NhZ2U8Q0JTb2NrZXRNdWx0aXBsZU1lc3NhZ2VPYmplY3RbXT4pID0+IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIFwiICsgbWVzc2FnZS5tZXNzYWdlRGF0YS5sZW5ndGggKyBcIiBtZXNzYWdlcy5cIilcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmRpZFJlY2VpdmVNZXNzYWdlRm9yS2V5KENCU29ja2V0Q2xpZW50Lm11bHRpcGxlTWVzc2FnZUtleSwgbWVzc2FnZSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHNvY2tldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NvY2tldFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjYW5jZWxVbnNlbnRNZXNzYWdlcyhtZXNzYWdlc1RvQ2FuY2VsOiBDQlNvY2tldENsaWVudE1lc3NhZ2VUb0JlU2VudFtdKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9tZXNzYWdlc1RvQmVTZW50ID0gdGhpcy5fbWVzc2FnZXNUb0JlU2VudC5maWx0ZXIoZnVuY3Rpb24gKFxuICAgICAgICAgICAgdGhpczogQ0JTb2NrZXRDbGllbnQsXG4gICAgICAgICAgICBtZXNzYWdlT2JqZWN0OiBDQlNvY2tldENsaWVudE1lc3NhZ2VUb0JlU2VudCxcbiAgICAgICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgICAgICBhcnJheTogQ0JTb2NrZXRDbGllbnRNZXNzYWdlVG9CZVNlbnRbXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiAhbWVzc2FnZXNUb0NhbmNlbC5jb250YWlucyhtZXNzYWdlT2JqZWN0KVxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzZW5kVW5zZW50TWVzc2FnZXMocmVjZWl2ZVJlc3BvbnNlc1RvZ2V0aGVyID0gTk8sIGNvbXBsZXRpb24/OiBDQlNvY2tldE11bHRpcGxlTWVzc2FnZWNvbXBsZXRpb25GdW5jdGlvbikge1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLl9pc0Nvbm5lY3Rpb25Fc3RhYmxpc2hlZCB8fCB0aGlzLl9jb2xsZWN0TWVzc2FnZXNUb1NlbmRMYXRlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBncm91cGVkTWVzc2FnZXM6IENCU29ja2V0TXVsdGlwbGVNZXNzYWdlT2JqZWN0PGFueT5bXSA9IFtdXG4gICAgICAgIGNvbnN0IGRpZFNlbmRGdW5jdGlvbnM6ICgoKSA9PiB2b2lkKVtdID0gW11cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9tZXNzYWdlc1RvQmVTZW50LmNvcHkoKS5mb3JFYWNoKGZ1bmN0aW9uIChcbiAgICAgICAgICAgIHRoaXM6IENCU29ja2V0Q2xpZW50LFxuICAgICAgICAgICAgbWVzc2FnZVRvQmVTZW50T2JqZWN0OiBDQlNvY2tldENsaWVudE1lc3NhZ2VUb0JlU2VudCxcbiAgICAgICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgICAgICBhcnJheTogQ0JTb2NrZXRDbGllbnRNZXNzYWdlVG9CZVNlbnRbXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzQ29ubmVjdGlvbkVzdGFibGlzaGVkKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlVG9CZVNlbnRPYmplY3QubWVzc2FnZVxuICAgICAgICAgICAgICAgIGlmIChJU19OT1QobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgaWRlbnRpZmllciA9IE1BS0VfSUQoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSBtZXNzYWdlVG9CZVNlbnRPYmplY3QuY29tcGxldGlvblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VPYmplY3Q6IENCU29ja2V0TWVzc2FnZTxhbnk+ID0ge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZURhdGE6IG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgICAgICAgICAgICAgIGtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzOiBtZXNzYWdlVG9CZVNlbnRPYmplY3Qua2VlcFdhaXRpbmdGb3JSZXNwb25zZXMsXG4gICAgICAgICAgICAgICAgICAgIGluUmVzcG9uc2VUb0lkZW50aWZpZXI6IG1lc3NhZ2VUb0JlU2VudE9iamVjdC5pblJlc3BvbnNlVG9NZXNzYWdlLmlkZW50aWZpZXJcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFNlbmRNZXNzYWdlID0gdGhpcy5fY2FsbGJhY2tIb2xkZXIuc29ja2V0U2hvdWxkU2VuZE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VUb0JlU2VudE9iamVjdC5rZXksXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VUb0JlU2VudE9iamVjdC5jb21wbGV0aW9uUG9saWN5LFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChzaG91bGRTZW5kTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwZWRNZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBtZXNzYWdlVG9CZVNlbnRPYmplY3Qua2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZU9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGlkU2VuZEZ1bmN0aW9ucy5wdXNoKG1lc3NhZ2VUb0JlU2VudE9iamVjdC5kaWRTZW5kRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX21lc3NhZ2VzVG9CZVNlbnQgPSBbXVxuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVChncm91cGVkTWVzc2FnZXMubGVuZ3RoKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZ3JvdXBlZE1lc3NhZ2VzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2VuZGluZyAxIHVuc2VudCBtZXNzYWdlLlwiKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VuZGluZyBcIiArIGdyb3VwZWRNZXNzYWdlcy5sZW5ndGggKyBcIiB1bnNlbnQgbWVzc2FnZXMuXCIpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZXNzYWdlT2JqZWN0OiBDQlNvY2tldE11bHRpcGxlTWVzc2FnZSA9IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWVzc2FnZURhdGE6IGdyb3VwZWRNZXNzYWdlcyxcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IE1BS0VfSUQoKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2hvdWxkR3JvdXBSZXNwb25zZXM6IHJlY2VpdmVSZXNwb25zZXNUb2dldGhlclxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vaWYgKHJlY2VpdmVSZXNwb25zZXNUb2dldGhlcikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tIb2xkZXIuc29ja2V0V2lsbFNlbmRNdWx0aXBsZU1lc3NhZ2UobWVzc2FnZU9iamVjdCwgY29tcGxldGlvbilcbiAgICAgICAgXG4gICAgICAgIC8vfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChDQlNvY2tldENsaWVudC5tdWx0aXBsZU1lc3NhZ2VLZXksIG1lc3NhZ2VPYmplY3QpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgZGlkU2VuZEZ1bmN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkaWRTZW5kRnVuY3Rpb24sIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgZGlkU2VuZEZ1bmN0aW9uKClcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBjb21wbGV0aW9uUG9saWN5ID0ge1xuICAgICAgICBcbiAgICAgICAgXCJhbGxcIjogXCJhbGxcIixcbiAgICAgICAgXCJhbGxEaWZmZXJlbnRcIjogXCJhbGxEaWZmZXJlbnRcIixcbiAgICAgICAgXCJmaXJzdFwiOiBcImZpcnN0XCIsXG4gICAgICAgIFwibGFzdFwiOiBcImxhc3RcIixcbiAgICAgICAgXCJmaXJzdEFuZExhc3RcIjogXCJmaXJzdEFuZExhc3RcIixcbiAgICAgICAgXCJmaXJzdEFuZExhc3RJZkRpZmZlcmVudFwiOiBcImZpcnN0QW5kTGFzdElmRGlmZmVyZW50XCIsXG4gICAgICAgIFwiZGlyZWN0T25seVwiOiBcImRpcmVjdE9ubHlcIixcbiAgICAgICAgXCJmaXJzdE9ubHlcIjogXCJmaXJzdE9ubHlcIixcbiAgICAgICAgXCJzdG9yZWRPckZpcnN0XCI6IFwic3RvcmVkT3JGaXJzdFwiXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZW5kVXNlckJvdW5kTWVzc2FnZUZvcktleVdpdGhQb2xpY3koXG4gICAgICAgIGtleTogc3RyaW5nLFxuICAgICAgICBtZXNzYWdlOiBhbnksXG4gICAgICAgIGNvbXBsZXRpb25Qb2xpY3k6IHN0cmluZyxcbiAgICAgICAgY29tcGxldGlvbj86IENCU29ja2V0TWVzc2FnZWNvbXBsZXRpb25GdW5jdGlvblxuICAgICkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlRm9yS2V5KGtleSwgbWVzc2FnZSwgdW5kZWZpbmVkLCBOTywgY29tcGxldGlvblBvbGljeSwgWUVTLCBuaWwsIGNvbXBsZXRpb24pXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZW5kVXNlckJvdW5kTWVzc2FnZUZvcktleShrZXk6IHN0cmluZywgbWVzc2FnZTogYW55LCBjb21wbGV0aW9uPzogQ0JTb2NrZXRNZXNzYWdlY29tcGxldGlvbkZ1bmN0aW9uKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zZW5kTWVzc2FnZUZvcktleShrZXksIG1lc3NhZ2UsIHVuZGVmaW5lZCwgTk8sIHVuZGVmaW5lZCwgWUVTLCBuaWwsIGNvbXBsZXRpb24pXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZW5kTWVzc2FnZUZvcktleVdpdGhQb2xpY3koXG4gICAgICAgIGtleTogc3RyaW5nLFxuICAgICAgICBtZXNzYWdlOiBhbnksXG4gICAgICAgIGNvbXBsZXRpb25Qb2xpY3k6IHN0cmluZyxcbiAgICAgICAgY29tcGxldGlvbj86IENCU29ja2V0TWVzc2FnZWNvbXBsZXRpb25GdW5jdGlvblxuICAgICkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlRm9yS2V5KGtleSwgbWVzc2FnZSwgdW5kZWZpbmVkLCBOTywgY29tcGxldGlvblBvbGljeSwgTk8sIG5pbCwgY29tcGxldGlvbilcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNlbmRNZXNzYWdlRm9yS2V5KGtleTogc3RyaW5nLCBtZXNzYWdlOiBhbnksIGNvbXBsZXRpb24/OiBDQlNvY2tldE1lc3NhZ2Vjb21wbGV0aW9uRnVuY3Rpb24pIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlRm9yS2V5KGtleSwgbWVzc2FnZSwgdW5kZWZpbmVkLCBOTywgdW5kZWZpbmVkLCBOTywgbmlsLCBjb21wbGV0aW9uKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcmVzdWx0Rm9yTWVzc2FnZUZvcktleShrZXk6IHN0cmluZywgbWVzc2FnZTogYW55LCBjb21wbGV0aW9uUG9saWN5Pzogc3RyaW5nLCBpc1VzZXJCb3VuZCA9IE5PLCBpbnRlcm1lZGlhdGVSZXN1bHRNZXNzYWdlRnVuY3Rpb24gPSBuaWwpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBQcm9taXNlPHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzcG9uc2VNZXNzYWdlOiBhbnksXG4gICAgICAgICAgICByZXN1bHQ6IGFueSxcbiAgICAgICAgICAgIGVycm9yUmVzdWx0OiBhbnksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3BvbmRXaXRoTWVzc2FnZTogQ0JTb2NrZXRNZXNzYWdlU2VuZFJlc3BvbnNlRnVuY3Rpb25cbiAgICAgICAgICAgIFxuICAgICAgICB9PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlRm9yS2V5KFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBOTyxcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uUG9saWN5LFxuICAgICAgICAgICAgICAgIGlzVXNlckJvdW5kLFxuICAgICAgICAgICAgICAgIG5pbCxcbiAgICAgICAgICAgICAgICAocmVzcG9uc2VNZXNzYWdlLCByZXNwb25kV2l0aE1lc3NhZ2UpID0+IHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRXaXRoTWVzc2FnZS5yZXNwb25kaW5nVG9NYWluUmVzcG9uc2UpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZU1lc3NhZ2U6IHJlc3BvbnNlTWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IElGKElTX05PVF9TT0NLRVRfRVJST1IocmVzcG9uc2VNZXNzYWdlKSkoKCkgPT4gcmVzcG9uc2VNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5FTFNFKFJFVFVSTkVSKHVuZGVmaW5lZCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yUmVzdWx0OiBJRihJU19TT0NLRVRfRVJST1IocmVzcG9uc2VNZXNzYWdlKSkoKCkgPT4gcmVzcG9uc2VNZXNzYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5FTFNFKFJFVFVSTkVSKHVuZGVmaW5lZCkpLFxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25kV2l0aE1lc3NhZ2U6IHJlc3BvbmRXaXRoTWVzc2FnZVxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGludGVybWVkaWF0ZVJlc3VsdE1lc3NhZ2VGdW5jdGlvbihyZXNwb25zZU1lc3NhZ2UsIHJlc3BvbmRXaXRoTWVzc2FnZSlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBfc2VuZE1lc3NhZ2VGb3JLZXkoXG4gICAgICAgIGtleTogc3RyaW5nLFxuICAgICAgICBtZXNzYWdlOiBhbnksXG4gICAgICAgIGluUmVzcG9uc2VUb01lc3NhZ2U6IENCU29ja2V0TWVzc2FnZTxhbnk+ID0ge30gYXMgYW55LFxuICAgICAgICBrZWVwTWVzc2FnZUNvbm5lY3Rpb25PcGVuID0gTk8sXG4gICAgICAgIGNvbXBsZXRpb25Qb2xpY3kgPSBDQlNvY2tldENsaWVudC5jb21wbGV0aW9uUG9saWN5LmRpcmVjdE9ubHksXG4gICAgICAgIGlzVXNlckJvdW5kID0gTk8sXG4gICAgICAgIGRpZFNlbmRGdW5jdGlvbjogKCkgPT4gdm9pZCA9IG5pbCxcbiAgICAgICAgY29tcGxldGlvbjogQ0JTb2NrZXRNZXNzYWdlY29tcGxldGlvbkZ1bmN0aW9uID0gbmlsXG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTklMKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX2lzQ29ubmVjdGlvbkVzdGFibGlzaGVkICYmICF0aGlzLl9jb2xsZWN0TWVzc2FnZXNUb1NlbmRMYXRlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBpZGVudGlmaWVyID0gTUFLRV9JRCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VPYmplY3Q6IENCU29ja2V0TWVzc2FnZTxhbnk+ID0ge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VEYXRhOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgICAgICAgICAga2VlcFdhaXRpbmdGb3JSZXNwb25zZXM6IGtlZXBNZXNzYWdlQ29ubmVjdGlvbk9wZW4sXG4gICAgICAgICAgICAgICAgaW5SZXNwb25zZVRvSWRlbnRpZmllcjogaW5SZXNwb25zZVRvTWVzc2FnZS5pZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFNlbmRNZXNzYWdlID0gdGhpcy5fY2FsbGJhY2tIb2xkZXIuc29ja2V0U2hvdWxkU2VuZE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VPYmplY3QsXG4gICAgICAgICAgICAgICAgY29tcGxldGlvblBvbGljeSxcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzaG91bGRTZW5kTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuc29ja2V0LmVtaXQoa2V5LCBtZXNzYWdlT2JqZWN0KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkaWRTZW5kRnVuY3Rpb24oKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX21lc3NhZ2VzVG9CZVNlbnQucHVzaCh7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBpblJlc3BvbnNlVG9NZXNzYWdlOiBpblJlc3BvbnNlVG9NZXNzYWdlLFxuICAgICAgICAgICAgICAgIGtlZXBXYWl0aW5nRm9yUmVzcG9uc2VzOiBrZWVwTWVzc2FnZUNvbm5lY3Rpb25PcGVuLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Qb2xpY3k6IGNvbXBsZXRpb25Qb2xpY3ksXG4gICAgICAgICAgICAgICAgaXNCb3VuZFRvVXNlcldpdGhJRDogbnVsbCxcbiAgICAgICAgICAgICAgICBkaWRTZW5kRnVuY3Rpb246IGRpZFNlbmRGdW5jdGlvbixcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uOiBjb21wbGV0aW9uXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWVzc2FnZXNUb0JlU2VudC5sYXN0RWxlbWVudFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHNlbmRNZXNzYWdlc0FzR3JvdXAoZnVuY3Rpb25Ub0NhbGw6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbGxlY3RNZXNzYWdlc1RvU2VuZExhdGVyID0gdGhpcy5fY29sbGVjdE1lc3NhZ2VzVG9TZW5kTGF0ZXJcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NvbGxlY3RNZXNzYWdlc1RvU2VuZExhdGVyID0gWUVTXG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvblRvQ2FsbCgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jb2xsZWN0TWVzc2FnZXNUb1NlbmRMYXRlciA9IGNvbGxlY3RNZXNzYWdlc1RvU2VuZExhdGVyXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNlbmRVbnNlbnRNZXNzYWdlcygpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZW5kQW5kUmVjZWl2ZU1lc3NhZ2VzQXNHcm91cChmdW5jdGlvblRvQ2FsbDogKCkgPT4gdm9pZCwgY29tcGxldGlvbj86IENCU29ja2V0TXVsdGlwbGVNZXNzYWdlY29tcGxldGlvbkZ1bmN0aW9uKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb2xsZWN0TWVzc2FnZXNUb1NlbmRMYXRlciA9IHRoaXMuX2NvbGxlY3RNZXNzYWdlc1RvU2VuZExhdGVyXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jb2xsZWN0TWVzc2FnZXNUb1NlbmRMYXRlciA9IFlFU1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb25Ub0NhbGwoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY29sbGVjdE1lc3NhZ2VzVG9TZW5kTGF0ZXIgPSBjb2xsZWN0TWVzc2FnZXNUb1NlbmRMYXRlclxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZW5kVW5zZW50TWVzc2FnZXMoWUVTLCBjb21wbGV0aW9uKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZGlkUmVjZWl2ZU1lc3NhZ2VGb3JLZXkoa2V5OiBzdHJpbmcsIG1lc3NhZ2U6IENCU29ja2V0TWVzc2FnZTxhbnk+KSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2VuZFJlc3BvbnNlRnVuY3Rpb246IENCU29ja2V0TWVzc2FnZVNlbmRSZXNwb25zZUZ1bmN0aW9uID0gZnVuY3Rpb24gKFxuICAgICAgICAgICAgdGhpczogQ0JTb2NrZXRDbGllbnQsXG4gICAgICAgICAgICByZXNwb25zZU1lc3NhZ2U6IGFueSxcbiAgICAgICAgICAgIGNvbXBsZXRpb246IENCU29ja2V0TWVzc2FnZWNvbXBsZXRpb25GdW5jdGlvblxuICAgICAgICApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc2VuZE1lc3NhZ2VGb3JLZXkoXG4gICAgICAgICAgICAgICAgQ0JTb2NrZXRDbGllbnQucmVzcG9uc2VNZXNzYWdlS2V5LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIE5PLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBOTyxcbiAgICAgICAgICAgICAgICBuaWwsXG4gICAgICAgICAgICAgICAgY29tcGxldGlvblxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKSBhcyBhbnlcbiAgICAgICAgXG4gICAgICAgIHNlbmRSZXNwb25zZUZ1bmN0aW9uLnNlbmRJbnRlcm1lZGlhdGVSZXNwb25zZSA9IGZ1bmN0aW9uIChcbiAgICAgICAgICAgIHRoaXM6IENCU29ja2V0Q2xpZW50LFxuICAgICAgICAgICAgdXBkYXRlTWVzc2FnZTogYW55LFxuICAgICAgICAgICAgY29tcGxldGlvbjogQ0JTb2NrZXRNZXNzYWdlY29tcGxldGlvbkZ1bmN0aW9uXG4gICAgICAgICkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9zZW5kTWVzc2FnZUZvcktleShcbiAgICAgICAgICAgICAgICBDQlNvY2tldENsaWVudC5yZXNwb25zZU1lc3NhZ2VLZXksXG4gICAgICAgICAgICAgICAgdXBkYXRlTWVzc2FnZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIFlFUyxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgTk8sXG4gICAgICAgICAgICAgICAgbmlsLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNlbmRVc2VyQm91bmRSZXNwb25zZUZ1bmN0aW9uOiBDQlNvY2tldE1lc3NhZ2VTZW5kUmVzcG9uc2VGdW5jdGlvbiA9IGZ1bmN0aW9uIChcbiAgICAgICAgICAgIHRoaXM6IENCU29ja2V0Q2xpZW50LFxuICAgICAgICAgICAgcmVzcG9uc2VNZXNzYWdlOiBhbnksXG4gICAgICAgICAgICBjb21wbGV0aW9uOiBDQlNvY2tldE1lc3NhZ2Vjb21wbGV0aW9uRnVuY3Rpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlRm9yS2V5KFxuICAgICAgICAgICAgICAgIENCU29ja2V0Q2xpZW50LnJlc3BvbnNlTWVzc2FnZUtleSxcbiAgICAgICAgICAgICAgICByZXNwb25zZU1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBOTyxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgWUVTLFxuICAgICAgICAgICAgICAgIG5pbCxcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpIGFzIGFueVxuICAgICAgICBcbiAgICAgICAgc2VuZFVzZXJCb3VuZFJlc3BvbnNlRnVuY3Rpb24uc2VuZEludGVybWVkaWF0ZVJlc3BvbnNlID0gZnVuY3Rpb24gKFxuICAgICAgICAgICAgdGhpczogQ0JTb2NrZXRDbGllbnQsXG4gICAgICAgICAgICB1cGRhdGVNZXNzYWdlOiBhbnksXG4gICAgICAgICAgICBjb21wbGV0aW9uOiBDQlNvY2tldE1lc3NhZ2Vjb21wbGV0aW9uRnVuY3Rpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3NlbmRNZXNzYWdlRm9yS2V5KFxuICAgICAgICAgICAgICAgIENCU29ja2V0Q2xpZW50LnJlc3BvbnNlTWVzc2FnZUtleSxcbiAgICAgICAgICAgICAgICB1cGRhdGVNZXNzYWdlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgWUVTLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBZRVMsXG4gICAgICAgICAgICAgICAgbmlsLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19TT0NLRVRfRVJST1IobWVzc2FnZS5tZXNzYWdlRGF0YSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDQlNvY2tldENsaWVudCBkaWQgcmVjZWl2ZSBlcnJvciBtZXNzYWdlLlwiKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLm1lc3NhZ2VEYXRhKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tIb2xkZXIuc29ja2V0RGlkUmVjZWl2ZU1lc3NhZ2VGb3JLZXkoa2V5LCBtZXNzYWdlLCBzZW5kUmVzcG9uc2VGdW5jdGlvbilcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGFkZFRhcmdldEZvck1lc3NhZ2VzRm9yS2V5cyhrZXlzOiBzdHJpbmdbXSwgaGFuZGxlckZ1bmN0aW9uOiBDQlNvY2tldE1lc3NhZ2VIYW5kbGVyRnVuY3Rpb24pIHtcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uICh0aGlzOiBDQlNvY2tldENsaWVudCwga2V5OiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIGFycmF5OiBzdHJpbmdbXSkge1xuICAgICAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JNZXNzYWdlc0ZvcktleShrZXksIGhhbmRsZXJGdW5jdGlvbilcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBhZGRUYXJnZXRGb3JNZXNzYWdlc0ZvcktleShrZXk6IHN0cmluZywgaGFuZGxlckZ1bmN0aW9uOiBDQlNvY2tldE1lc3NhZ2VIYW5kbGVyRnVuY3Rpb24pIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrSG9sZGVyLnJlZ2lzdGVySGFuZGxlcihrZXksIGhhbmRsZXJGdW5jdGlvbilcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19OT1QodGhpcy5fc3Vic2NyaWJlZEtleXNba2V5XSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc29ja2V0Lm9uKGtleSwgZnVuY3Rpb24gKHRoaXM6IENCU29ja2V0Q2xpZW50LCBtZXNzYWdlOiBDQlNvY2tldE1lc3NhZ2U8YW55Pikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZGlkUmVjZWl2ZU1lc3NhZ2VGb3JLZXkoa2V5LCBtZXNzYWdlKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmVkS2V5c1trZXldID0gdHJ1ZVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgYWRkVGFyZ2V0Rm9yT25lTWVzc2FnZUZvcktleShrZXk6IHN0cmluZywgaGFuZGxlckZ1bmN0aW9uOiBDQlNvY2tldE1lc3NhZ2VIYW5kbGVyRnVuY3Rpb24pIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrSG9sZGVyLnJlZ2lzdGVyT25ldGltZUhhbmRsZXIoa2V5LCBoYW5kbGVyRnVuY3Rpb24pXG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHRoaXMuX3N1YnNjcmliZWRLZXlzW2tleV0pKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3NvY2tldC5vbihrZXksIGZ1bmN0aW9uICh0aGlzOiBDQlNvY2tldENsaWVudCwgbWVzc2FnZTogQ0JTb2NrZXRNZXNzYWdlPGFueT4pIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmRpZFJlY2VpdmVNZXNzYWdlRm9yS2V5KGtleSwgbWVzc2FnZSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlZEtleXNba2V5XSA9IHRydWVcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cbmNvbnN0IFNvY2tldENsaWVudDogU29ja2V0Q2xpZW50ID0gbmV3IFByb3h5KHsgXCJuYW1lXCI6IFwiU29ja2V0Q2xpZW50XCIgfSwge1xuICAgIFxuICAgIGdldCh0YXJnZXQsIGtleSkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKFxuICAgICAgICAgICAgbWVzc2FnZURhdGEsXG4gICAgICAgICAgICBjb21wbGV0aW9uUG9saWN5LFxuICAgICAgICAgICAgaXNVc2VyQm91bmQsXG4gICAgICAgICAgICBpbnRlcm1lZGlhdGVSZXN1bHRGdW5jdGlvblxuICAgICAgICApID0+IENCQ29yZS5zaGFyZWRJbnN0YW5jZS5zb2NrZXRDbGllbnQucmVzdWx0Rm9yTWVzc2FnZUZvcktleShcbiAgICAgICAgICAgIGtleSBhcyBzdHJpbmcsXG4gICAgICAgICAgICBtZXNzYWdlRGF0YSxcbiAgICAgICAgICAgIGNvbXBsZXRpb25Qb2xpY3ksXG4gICAgICAgICAgICBpc1VzZXJCb3VuZCxcbiAgICAgICAgICAgIGludGVybWVkaWF0ZVJlc3VsdEZ1bmN0aW9uXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG59KSBhcyBhbnlcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0N1c3RvbSBjb21wb25lbnRzL0NCU29ja2V0Q2xpZW50LnRzXCIgLz5cblxuXG5cblxuXG5jbGFzcyBDQkNvcmUgZXh0ZW5kcyBVSU9iamVjdCB7XG5cblxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBfc2hhcmVkSW5zdGFuY2U6IENCQ29yZVxuXG4gICAgX3NvY2tldENsaWVudDogQ0JTb2NrZXRDbGllbnQgPSBuZXcgQ0JTb2NrZXRDbGllbnQodGhpcylcblxuXG4gICAgX2Z1bmN0aW9uc1RvQ2FsbEZvckVhY2hTb2NrZXRDbGllbnQ6ICgoKSA9PiB2b2lkKVtdID0gW11cblxuXG5cblxuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgc3VwZXIoKVxuXG4gICAgICAgIHRoaXMuX2NsYXNzID0gQ0JDb3JlXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJT2JqZWN0XG5cblxuXG5cblxuICAgIH1cblxuXG5cblxuXG4gICAgc3RhdGljIGdldCBzaGFyZWRJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKCFDQkNvcmUuX3NoYXJlZEluc3RhbmNlKSB7XG4gICAgICAgICAgICBDQkNvcmUuX3NoYXJlZEluc3RhbmNlID0gbmV3IENCQ29yZSgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENCQ29yZS5fc2hhcmVkSW5zdGFuY2VcbiAgICB9XG5cblxuXG5cbiAgICBicm9hZGNhc3RNZXNzYWdlSW5Sb290Vmlld1RyZWUobWVzc2FnZTogVUlWaWV3QnJvYWRjYXN0RXZlbnQpIHtcblxuICAgICAgICAoVUlDb3JlLm1haW4ucm9vdFZpZXdDb250cm9sbGVyIGFzIFVJVmlld0NvbnRyb2xsZXIpLnZpZXcuYnJvYWRjYXN0RXZlbnRJblN1YnRyZWUobWVzc2FnZSlcblxuICAgIH1cblxuXG5cblxuICAgIGdldCBzb2NrZXRDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zb2NrZXRDbGllbnRcbiAgICB9XG5cblxuXG5cblxuXG4gICAgc2V0IGxhbmd1YWdlS2V5KGxhbmd1YWdlS2V5OiBzdHJpbmcpIHtcblxuICAgICAgICBpZiAoSVNfTk9UKGxhbmd1YWdlS2V5KSkge1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIkNCTGFuZ3VhZ2VLZXlcIilcblxuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJDQkxhbmd1YWdlS2V5XCIsIEpTT04uc3RyaW5naWZ5KGxhbmd1YWdlS2V5KSlcblxuICAgICAgICB0aGlzLmRpZFNldExhbmd1YWdlS2V5KClcblxuICAgIH1cblxuICAgIGdldCBsYW5ndWFnZUtleSgpIHtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBGSVJTVChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkNCTGFuZ3VhZ2VLZXlcIiksIExhbmd1YWdlU2VydmljZS5kZWZhdWx0TGFuZ3VhZ2VLZXkpLnJlcGxhY2UoXG4gICAgICAgICAgICBcIlxcXCJcIixcbiAgICAgICAgICAgIFwiXCJcbiAgICAgICAgKS5yZXBsYWNlKFwiXFxcIlwiLCBcIlwiKVxuXG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuXG4gICAgfVxuXG4gICAgZGlkU2V0TGFuZ3VhZ2VLZXkoKSB7XG5cbiAgICAgICAgVUlSb3V0ZS5jdXJyZW50Um91dGUucm91dGVXaXRoQ29tcG9uZW50KFxuICAgICAgICAgICAgXCJzZXR0aW5nc1wiLFxuICAgICAgICAgICAgeyBcImxhbmd1YWdlXCI6IHRoaXMubGFuZ3VhZ2VLZXkgfSxcbiAgICAgICAgICAgIFlFU1xuICAgICAgICApLmFwcGx5QnlSZXBsYWNpbmdDdXJyZW50Um91dGVJbkhpc3RvcnkoKVxuXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHJlYWRUZXh0RmlsZUZyb21VUkwoZmlsZVVSTDogc3RyaW5nKSB7XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG4gICAgICAgICAgICB2YXIgcmF3RmlsZSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgcmF3RmlsZS5vcGVuKFwiR0VUXCIsIGZpbGVVUkwsIGZhbHNlKTtcbiAgICAgICAgICAgIHJhd0ZpbGUub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHJhd0ZpbGUucmVhZHlTdGF0ZSA9PT0gNCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdGaWxlLnN0YXR1cyA9PT0gMjAwIHx8IHJhd0ZpbGUuc3RhdHVzID09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsbFRleHQgPSByYXdGaWxlLnJlc3BvbnNlVGV4dDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhbGxUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZWplY3QocmF3RmlsZS5yZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmF3RmlsZS5zZW5kKG51bGwpO1xuXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgfVxuICAgIFxuICAgIHJlbG9hZFNvY2tldENvbm5lY3Rpb24oKSB7XG5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLnNvY2tldENsaWVudC5zb2NrZXQuZGlzY29ubmVjdCgpXG5cblxuXG4gICAgICAgIHRoaXMuX3NvY2tldENsaWVudCA9IG5ldyBDQlNvY2tldENsaWVudCh0aGlzKVxuICAgICAgICB0aGlzLl9zb2NrZXRDbGllbnQuX21lc3NhZ2VzVG9CZVNlbnQgPSBbXVxuXG4gICAgICAgIHRoaXMuX2Z1bmN0aW9uc1RvQ2FsbEZvckVhY2hTb2NrZXRDbGllbnQuZm9yRWFjaChmdW5jdGlvbiAoZnVuY3Rpb25Ub0NhbGwsIGluZGV4LCBhcnJheSkge1xuXG4gICAgICAgICAgICBmdW5jdGlvblRvQ2FsbCgpXG5cbiAgICAgICAgfSlcblxuXG5cbiAgICB9XG5cblxuICAgIGNhbGxGdW5jdGlvbkZvckVhY2hTb2NrZXRDbGllbnQoZnVuY3Rpb25Ub0NhbGw6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5fZnVuY3Rpb25zVG9DYWxsRm9yRWFjaFNvY2tldENsaWVudC5wdXNoKGZ1bmN0aW9uVG9DYWxsKVxuICAgICAgICBmdW5jdGlvblRvQ2FsbCgpXG4gICAgfVxuXG5cblxuXG5cbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSVZpZXcudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vVUlPYmplY3QudHNcIiAvPlxuXG5cblxuXG5cbmNsYXNzIFVJVmlld0NvbnRyb2xsZXIgZXh0ZW5kcyBVSU9iamVjdCB7XG4gICAgXG4gICAgXG4gICAgcGFyZW50Vmlld0NvbnRyb2xsZXI6IFVJVmlld0NvbnRyb2xsZXJcbiAgICBjaGlsZFZpZXdDb250cm9sbGVyczogVUlWaWV3Q29udHJvbGxlcltdXG4gICAgX1VJVmlld0NvbnRyb2xsZXJfY29uc3RydWN0b3JBcmd1bWVudHM6IHsgXCJ2aWV3XCI6IFVJVmlldzsgfVxuICAgIHN0YXRpYyByZWFkb25seSByb3V0ZUNvbXBvbmVudE5hbWU6IHN0cmluZztcbiAgICBzdGF0aWMgcmVhZG9ubHkgUGFyYW1ldGVySWRlbnRpZmllck5hbWU6IGFueTtcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgdmlldzogVUlWaWV3KSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5sb2FkSW50cm9zcGVjdGlvblZhcmlhYmxlcygpXG4gICAgICAgIHRoaXMuX1VJVmlld0NvbnRyb2xsZXJfY29uc3RydWN0b3JBcmd1bWVudHMgPSB7IFwidmlld1wiOiB2aWV3IH1cbiAgICAgICAgdGhpcy5faW5pdEluc3RhbmNlVmFyaWFibGVzKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMubG9hZFN1YnZpZXdzKClcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3Q29uc3RyYWludHMoKVxuICAgICAgICB0aGlzLnVwZGF0ZVZpZXdTdHlsZXMoKVxuICAgICAgICB0aGlzLl9sYXlvdXRWaWV3U3Vidmlld3MoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBsb2FkSW50cm9zcGVjdGlvblZhcmlhYmxlcygpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlWaWV3Q29udHJvbGxlclxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSU9iamVjdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIF9pbml0SW5zdGFuY2VWYXJpYWJsZXMoKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuX1VJVmlld0NvbnRyb2xsZXJfY29uc3RydWN0b3JBcmd1bWVudHMudmlld1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3Ll92aWV3Q29udHJvbGxlckxheW91dEZ1bmN0aW9uID0gdGhpcy5sYXlvdXRWaWV3c01hbnVhbGx5LmJpbmQodGhpcylcbiAgICAgICAgdGhpcy52aWV3Ll9kaWRMYXlvdXRTdWJ2aWV3c0RlbGVnYXRlRnVuY3Rpb24gPSB0aGlzLnZpZXdEaWRMYXlvdXRTdWJ2aWV3cy5iaW5kKHRoaXMpXG4gICAgICAgIHRoaXMudmlldy5fZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50RGVsZWdhdGVGdW5jdGlvbiA9IHRoaXMudmlld0RpZFJlY2VpdmVCcm9hZGNhc3RFdmVudC5iaW5kKHRoaXMpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmNoaWxkVmlld0NvbnRyb2xsZXJzID0gW11cbiAgICAgICAgdGhpcy5wYXJlbnRWaWV3Q29udHJvbGxlciA9IG5pbFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBoYW5kbGVSb3V0ZVJlY3Vyc2l2ZWx5KHJvdXRlOiBVSVJvdXRlKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmhhbmRsZVJvdXRlKHJvdXRlKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5jaGlsZFZpZXdDb250cm9sbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb250cm9sbGVyLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyb3V0ZS5pc0hhbmRsZWQpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmhhbmRsZVJvdXRlUmVjdXJzaXZlbHkocm91dGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGhhbmRsZVJvdXRlKHJvdXRlOiBVSVJvdXRlKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGxvYWRTdWJ2aWV3cygpIHtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgdmlld1dpbGxBcHBlYXIoKSB7XG4gICAgXG4gICAgXG4gICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGFzeW5jIHZpZXdEaWRBcHBlYXIoKSB7XG4gICAgXG4gICAgXG4gICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGFzeW5jIHZpZXdXaWxsRGlzYXBwZWFyKCkge1xuICAgIFxuICAgIFxuICAgIFxuICAgIH1cbiAgICBcbiAgICBhc3luYyB2aWV3RGlkRGlzYXBwZWFyKCkge1xuICAgIFxuICAgIFxuICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICB1cGRhdGVWaWV3Q29uc3RyYWludHMoKSB7XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZVZpZXdTdHlsZXMoKSB7XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgfVxuICAgIFxuICAgIGxheW91dFZpZXdzTWFudWFsbHkoKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIF9sYXlvdXRWaWV3U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXcubGF5b3V0U3Vidmlld3MoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3RGlkTGF5b3V0U3Vidmlld3MoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgdmlld0RpZExheW91dFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy5jaGlsZFZpZXdDb250cm9sbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb250cm9sbGVyLCBpbmRleCwgY29udHJvbGxlcnMpIHtcbiAgICAgICAgXG4gICAgICAgIC8vICAgICBjb250cm9sbGVyLl9sYXlvdXRWaWV3U3Vidmlld3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHZpZXdEaWRSZWNlaXZlQnJvYWRjYXN0RXZlbnQoZXZlbnQ6IFVJVmlld0Jyb2FkY2FzdEV2ZW50KSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGhhc0NoaWxkVmlld0NvbnRyb2xsZXIodmlld0NvbnRyb2xsZXIpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIFRoaXMgaXMgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnNcbiAgICAgICAgaWYgKCFJUyh2aWV3Q29udHJvbGxlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBOT1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRWaWV3Q29udHJvbGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkVmlld0NvbnRyb2xsZXIgPSB0aGlzLmNoaWxkVmlld0NvbnRyb2xsZXJzW2ldXG4gICAgXG4gICAgICAgICAgICBpZiAoY2hpbGRWaWV3Q29udHJvbGxlciA9PSB2aWV3Q29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBZRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTk9cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGFkZENoaWxkVmlld0NvbnRyb2xsZXIodmlld0NvbnRyb2xsZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc0NoaWxkVmlld0NvbnRyb2xsZXIodmlld0NvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgICB2aWV3Q29udHJvbGxlci53aWxsTW92ZVRvUGFyZW50Vmlld0NvbnRyb2xsZXIodGhpcylcbiAgICAgICAgICAgIHRoaXMuY2hpbGRWaWV3Q29udHJvbGxlcnMucHVzaCh2aWV3Q29udHJvbGxlcilcbiAgICAgICAgICAgIC8vdGhpcy52aWV3LmFkZFN1YnZpZXcodmlld0NvbnRyb2xsZXIudmlldyk7XG4gICAgICAgICAgICAvL3ZpZXdDb250cm9sbGVyLmRpZE1vdmVUb1BhcmVudFZpZXdDb250cm9sbGVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIHJlbW92ZUZyb21QYXJlbnRWaWV3Q29udHJvbGxlcigpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcmVudFZpZXdDb250cm9sbGVyLmNoaWxkVmlld0NvbnRyb2xsZXJzLmluZGV4T2YodGhpcylcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50Vmlld0NvbnRyb2xsZXIuY2hpbGRWaWV3Q29udHJvbGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgLy90aGlzLnZpZXcucmVtb3ZlRnJvbVN1cGVydmlldygpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRWaWV3Q29udHJvbGxlciA9IG5pbFxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHdpbGxNb3ZlVG9QYXJlbnRWaWV3Q29udHJvbGxlcihwYXJlbnRWaWV3Q29udHJvbGxlcikge1xuICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBkaWRNb3ZlVG9QYXJlbnRWaWV3Q29udHJvbGxlcihwYXJlbnRWaWV3Q29udHJvbGxlcikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5wYXJlbnRWaWV3Q29udHJvbGxlciA9IHBhcmVudFZpZXdDb250cm9sbGVyXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZW1vdmVDaGlsZFZpZXdDb250cm9sbGVyKGNvbnRyb2xsZXI6IFVJVmlld0NvbnRyb2xsZXIpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnRyb2xsZXIudmlld1dpbGxEaXNhcHBlYXIoKVxuICAgICAgICBpZiAoSVMoY29udHJvbGxlci5wYXJlbnRWaWV3Q29udHJvbGxlcikpIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIucmVtb3ZlRnJvbVBhcmVudFZpZXdDb250cm9sbGVyKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoSVMoY29udHJvbGxlci52aWV3KSkge1xuICAgICAgICAgICAgY29udHJvbGxlci52aWV3LnJlbW92ZUZyb21TdXBlcnZpZXcoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIudmlld0RpZERpc2FwcGVhcigpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBhZGRDaGlsZFZpZXdDb250cm9sbGVySW5Db250YWluZXIoY29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciwgY29udGFpbmVyVmlldzogVUlWaWV3KSB7XG4gICAgICAgIFxuICAgICAgICBjb250cm9sbGVyLnZpZXdXaWxsQXBwZWFyKClcbiAgICAgICAgdGhpcy5hZGRDaGlsZFZpZXdDb250cm9sbGVyKGNvbnRyb2xsZXIpXG4gICAgICAgIGNvbnRhaW5lclZpZXcuYWRkU3Vidmlldyhjb250cm9sbGVyLnZpZXcpXG4gICAgICAgIGNvbnRyb2xsZXIuZGlkTW92ZVRvUGFyZW50Vmlld0NvbnRyb2xsZXIodGhpcylcbiAgICAgICAgY29udHJvbGxlci52aWV3RGlkQXBwZWFyKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGFkZENoaWxkVmlld0NvbnRyb2xsZXJJbkRpYWxvZ1ZpZXcoY29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciwgZGlhbG9nVmlldzogVUlEaWFsb2dWaWV3KSB7XG4gICAgICAgIFxuICAgICAgICBjb250cm9sbGVyLnZpZXdXaWxsQXBwZWFyKClcbiAgICAgICAgdGhpcy5hZGRDaGlsZFZpZXdDb250cm9sbGVyKGNvbnRyb2xsZXIpXG4gICAgICAgIGRpYWxvZ1ZpZXcudmlldyA9IGNvbnRyb2xsZXIudmlld1xuICAgICAgICBcbiAgICAgICAgdmFyIG9yaWdpbmFsRGlzbWlzc0Z1bmN0aW9uID0gZGlhbG9nVmlldy5kaXNtaXNzLmJpbmQoZGlhbG9nVmlldylcbiAgICAgICAgXG4gICAgICAgIGRpYWxvZ1ZpZXcuZGlzbWlzcyA9IGFuaW1hdGVkID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3JpZ2luYWxEaXNtaXNzRnVuY3Rpb24oYW5pbWF0ZWQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGRWaWV3Q29udHJvbGxlcihjb250cm9sbGVyKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnRyb2xsZXIuZGlkTW92ZVRvUGFyZW50Vmlld0NvbnRyb2xsZXIodGhpcylcbiAgICAgICAgY29udHJvbGxlci52aWV3RGlkQXBwZWFyKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiVUlWaWV3LnRzXCIvPlxuXG5cblxuXG5cbmNsYXNzIFVJRGlhbG9nVmlldzxWaWV3VHlwZSBleHRlbmRzIFVJVmlldyA9IFVJVmlldz4gZXh0ZW5kcyBVSVZpZXcge1xuICAgIFxuICAgIFxuICAgIFxuICAgIF92aWV3OiBWaWV3VHlwZSA9IG5pbFxuICAgIFxuICAgIF9hcHBlYXJlZEFuaW1hdGVkOiBib29sZWFuXG4gICAgXG4gICAgYW5pbWF0aW9uRHVyYXRpb246IG51bWJlciA9IDAuMjVcbiAgICBcbiAgICBfekluZGV4OiBudW1iZXIgPSAxMDBcbiAgICBcbiAgICBpc1Zpc2libGU6IGJvb2xlYW4gPSBOT1xuICAgIFxuICAgIGRpc21pc3Nlc09uVGFwT3V0c2lkZSA9IFlFU1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRD86IHN0cmluZywgdmlld0hUTUxFbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBzdXBlcihlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KFxuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVGFwLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFVJRGlhbG9nVmlldywgc2VuZGVyOiBVSVZpZXcsIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZGlkRGV0ZWN0VGFwT3V0c2lkZShzZW5kZXIsIGV2ZW50KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gVUlDb2xvci5jb2xvcldpdGhSR0JBKDAsIDEwLCAyNSkuY29sb3JXaXRoQWxwaGEoMC43NSkgLy9DQkNvbG9yLnByaW1hcnlDb250ZW50Q29sb3IuY29sb3JXaXRoQWxwaGEoMC43NSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuekluZGV4ID0gdGhpcy5fekluZGV4XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBkaWREZXRlY3RUYXBPdXRzaWRlKHNlbmRlcjogVUlWaWV3LCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGhpcy52aWV3SFRNTEVsZW1lbnQgJiYgdGhpcy5kaXNtaXNzZXNPblRhcE91dHNpZGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcyh0aGlzLl9hcHBlYXJlZEFuaW1hdGVkKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgekluZGV4KHpJbmRleDogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl96SW5kZXggPSB6SW5kZXhcbiAgICAgICAgdGhpcy5zdHlsZS56SW5kZXggPSBcIlwiICsgekluZGV4XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgekluZGV4KCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3pJbmRleFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0IHZpZXcodmlldzogVmlld1R5cGUpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3ZpZXcucmVtb3ZlRnJvbVN1cGVydmlldygpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl92aWV3ID0gdmlld1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRTdWJ2aWV3KHZpZXcpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBnZXQgdmlldygpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl92aWV3XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICB3aWxsQXBwZWFyKGFuaW1hdGVkOiBib29sZWFuID0gTk8pIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbmltYXRlZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gXCJcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy5fZnJhbWUgPSBudWxsXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBhbmltYXRlQXBwZWFyaW5nKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5vcGFjaXR5ID0gXCIxXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGFuaW1hdGVEaXNhcHBlYXJpbmcoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLm9wYWNpdHkgPSBcIjBcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc2hvd0luVmlldyhjb250YWluZXJWaWV3OiBVSVZpZXcsIGFuaW1hdGVkOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgYW5pbWF0ZWQgPSAoYW5pbWF0ZWQgJiYgIUlTX0ZJUkVGT1gpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9hcHBlYXJlZEFuaW1hdGVkID0gYW5pbWF0ZWRcbiAgICAgICAgXG4gICAgICAgIHRoaXMud2lsbEFwcGVhcihhbmltYXRlZClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb250YWluZXJWaWV3LmFkZFN1YnZpZXcodGhpcylcbiAgICAgICAgXG4gICAgICAgIGlmIChhbmltYXRlZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmxheW91dFN1YnZpZXdzKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgVUlWaWV3LmFuaW1hdGVWaWV3T3JWaWV3c1dpdGhEdXJhdGlvbkRlbGF5QW5kRnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVBcHBlYXJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG5pbFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBZRVNcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHNob3dJblJvb3RWaWV3KGFuaW1hdGVkOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNob3dJblZpZXcoVUlDb3JlLm1haW4ucm9vdFZpZXdDb250cm9sbGVyLnZpZXcsIGFuaW1hdGVkKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZGlzbWlzcyhhbmltYXRlZD86IGJvb2xlYW4pIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBhbmltYXRlZCA9IChhbmltYXRlZCAmJiAhSVNfRklSRUZPWClcbiAgICAgICAgXG4gICAgICAgIGlmIChhbmltYXRlZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYW5pbWF0ZWQgPSB0aGlzLl9hcHBlYXJlZEFuaW1hdGVkXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFVJVmlldy5hbmltYXRlVmlld09yVmlld3NXaXRoRHVyYXRpb25EZWxheUFuZEZ1bmN0aW9uKFxuICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVEaXNhcHBlYXJpbmcoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlID09IE5PKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVN1cGVydmlldygpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21TdXBlcnZpZXcoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gTk9cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGRpZFJlY2VpdmVCcm9hZGNhc3RFdmVudChldmVudDogVUlWaWV3QnJvYWRjYXN0RXZlbnQpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmRpZFJlY2VpdmVCcm9hZGNhc3RFdmVudChldmVudClcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudC5uYW1lID09IFVJQ29yZS5icm9hZGNhc3RFdmVudE5hbWUuV2luZG93RGlkUmVzaXplKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGxheW91dFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmICghSVModGhpcy52aWV3KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvL3RoaXMuZnJhbWUgPSB0aGlzLnN1cGVydmlldy5ib3VuZHM7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKDAsIDAsIDAsIDAsIDAsIFwiMTAwJVwiKVxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKDAsIDAsIDAsIDAsIFVJVmlldy5wYWdlSGVpZ2h0LCBcIjEwMCVcIilcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgICAgIFxuICAgICAgICBjb25zdCBtYXJnaW4gPSAyMFxuICAgICAgICBcbiAgICAgICAgLy90aGlzLnZpZXcuY2VudGVySW5Db250YWluZXIoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlldy5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIlxuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy52aWV3LnN0eWxlLm1heEhlaWdodCA9IFwiXCIgKyAoYm91bmRzLmhlaWdodCAtIG1hcmdpbiAqIDIpLmludGVnZXJWYWx1ZSArIFwicHhcIjtcbiAgICAgICAgLy8gdGhpcy52aWV3LnN0eWxlLm1heFdpZHRoID0gXCJcIiArIChib3VuZHMud2lkdGggLSBtYXJnaW4gKiAyKS5pbnRlZ2VyVmFsdWUgKyBcInB4XCI7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyB2YXIgdmlld0ludHJpbnNpY1JlY3RhbmdsZSA9IHRoaXMudmlldy5pbnRyaW5zaWNDb250ZW50U2l6ZSgpO1xuICAgICAgICAvLyB0aGlzLnZpZXcuZnJhbWUgPSBuZXcgVUlSZWN0YW5nbGUoKGJvdW5kcy53aWR0aCAtIHZpZXdJbnRyaW5zaWNSZWN0YW5nbGUud2lkdGgpKjAuNSwgIClcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJVmlldy50c1wiIC8+XG5cblxuXG5cblxuY2xhc3MgVUlCYXNlQnV0dG9uIGV4dGVuZHMgVUlWaWV3IHtcbiAgICBcbiAgICBfc2VsZWN0ZWQ6IGJvb2xlYW4gPSBOT1xuICAgIF9oaWdobGlnaHRlZDogYm9vbGVhbiA9IE5PXG4gICAgXG4gICAgX2lzUG9pbnRlckluc2lkZTogYm9vbGVhblxuICAgIFxuICAgIFxuICAgIF9pc1RvZ2dsZWFibGU6IGJvb2xlYW4gPSBOT1xuICAgIF9ob3ZlcmVkOiBib29sZWFuXG4gICAgX2ZvY3VzZWQ6IGJvb2xlYW5cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ6IHN0cmluZywgZWxlbWVudFR5cGU/OiBzdHJpbmcsIGluaXRWaWV3RGF0YT86IGFueSkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCBuaWwsIGVsZW1lbnRUeXBlLCBpbml0Vmlld0RhdGEpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJQnV0dG9uXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJVmlld1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pbml0Vmlld1N0YXRlQ29udHJvbCgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0Vmlld1N0YXRlQ29udHJvbCgpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2xhc3Muc3VwZXJjbGFzcyA9IFVJVmlld1xuICAgICAgICBcbiAgICAgICAgLy8gSW5zdGFuY2UgdmFyaWFibGVzXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNQb2ludGVySW5zaWRlID0gTk9cbiAgICBcbiAgICBcbiAgICAgICAgY29uc3Qgc2V0SG92ZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuaG92ZXJlZCA9IFlFU1xuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVySG92ZXIsIHNldEhvdmVyZWQpXG4gICAgXG4gICAgICAgIGNvbnN0IHNldE5vdEhvdmVyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFxuICAgICAgICAgICAgdGhpcy5ob3ZlcmVkID0gTk9cbiAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgIFxuICAgICAgICB0aGlzLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyTGVhdmUsIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlckNhbmNlbCwgVUlWaWV3LmNvbnRyb2xFdmVudC5NdWx0aXBsZVRvdWNoZXNcbiAgICAgICAgXSwgc2V0Tm90SG92ZXJlZClcbiAgICBcbiAgICBcbiAgICAgICAgdmFyIGhpZ2hsaWdodGluZ1RpbWVcbiAgICAgICAgY29uc3Qgc2V0SGlnaGxpZ2h0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodGVkID0gWUVTXG4gICAgICAgICAgICBoaWdobGlnaHRpbmdUaW1lID0gRGF0ZS5ub3coKVxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyRG93biwgc2V0SGlnaGxpZ2h0ZWQpXG4gICAgICAgIHRoaXMuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlckVudGVyLCBzZXRIaWdobGlnaHRlZClcbiAgICBcbiAgICAgICAgY29uc3Qgc2V0Tm90SGlnaGxpZ2h0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodGVkID0gTk9cbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIGNvbnN0IHNldE5vdEhpZ2hsaWdodGVkV2l0aE1pbmltdW1EdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IG1pbmltdW1EdXJhdGlvbkluTWlsbGlzZWNvbmRzID0gNTBcbiAgICAgICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIGhpZ2hsaWdodGluZ1RpbWVcbiAgICAgICAgICAgIGlmIChtaW5pbXVtRHVyYXRpb25Jbk1pbGxpc2Vjb25kcyA8IGVsYXBzZWRUaW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRlZCA9IE5PXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRlZCA9IE5PXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCBtaW5pbXVtRHVyYXRpb25Jbk1pbGxpc2Vjb25kcyAtIGVsYXBzZWRUaW1lKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnRzKFtcbiAgICAgICAgICAgIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlckxlYXZlLCBVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJDYW5jZWwsIFVJVmlldy5jb250cm9sRXZlbnQuTXVsdGlwbGVUb3VjaGVzXG4gICAgICAgIF0sIHNldE5vdEhpZ2hsaWdodGVkKVxuICAgICAgICB0aGlzLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudChVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJVcCwgc2V0Tm90SGlnaGxpZ2h0ZWRXaXRoTWluaW11bUR1cmF0aW9uKVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGVudGVyIGtleSBwcmVzc1xuICAgICAgICB0aGlzLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudChVSVZpZXcuY29udHJvbEV2ZW50LkVudGVyRG93biwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRIaWdobGlnaHRlZCgpXG4gICAgICAgICAgICBzZXROb3RIaWdobGlnaHRlZFdpdGhNaW5pbXVtRHVyYXRpb24oKVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoXG4gICAgICAgICAgICBVSVZpZXcuY29udHJvbEV2ZW50LkZvY3VzLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFVJQmFzZUJ1dHRvbiwgc2VuZGVyOiBVSVZpZXcsIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZCA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KFxuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5CbHVyLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFVJQmFzZUJ1dHRvbiwgc2VuZGVyOiBVSVZpZXcsIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZCA9IE5PXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRTdGF0ZSgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhdXNlc1BvaW50ZXJFdmVudHMgPSBZRVNcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IDFcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCJcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5zdHlsZS5vdXRsaW5lID0gXCJub25lXCI7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb25FbmFibGVkID0gTk9cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5FbnRlckRvd24sIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBVSUJhc2VCdXR0b24sIHNlbmRlciwgZXZlbnQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUb2dnbGVhYmxlKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWxlY3RlZFN0YXRlKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgcHVibGljIHNldCBob3ZlcmVkKGhvdmVyZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faG92ZXJlZCA9IGhvdmVyZWRcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBob3ZlcmVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faG92ZXJlZFxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0IGhpZ2hsaWdodGVkKGhpZ2hsaWdodGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2hpZ2hsaWdodGVkID0gaGlnaGxpZ2h0ZWRcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBoaWdobGlnaHRlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpZ2hsaWdodGVkXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzZXQgZm9jdXNlZChmb2N1c2VkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2ZvY3VzZWQgPSBmb2N1c2VkXG4gICAgICAgIGlmIChmb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmx1cigpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBmb2N1c2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9jdXNlZFxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0IHNlbGVjdGVkKHNlbGVjdGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkID0gc2VsZWN0ZWRcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBzZWxlY3RlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U3RhdGUoKSB7XG4gICAgXG4gICAgICAgIHZhciB1cGRhdGVGdW5jdGlvbjogRnVuY3Rpb24gPSB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JOb3JtYWxTdGF0ZVxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCAmJiB0aGlzLmhpZ2hsaWdodGVkKSB7XG4gICAgICAgICAgICB1cGRhdGVGdW5jdGlvbiA9IHRoaXMudXBkYXRlQ29udGVudEZvclNlbGVjdGVkQW5kSGlnaGxpZ2h0ZWRTdGF0ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZ1bmN0aW9uID0gdGhpcy51cGRhdGVDb250ZW50Rm9yU2VsZWN0ZWRTdGF0ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZm9jdXNlZCkge1xuICAgICAgICAgICAgdXBkYXRlRnVuY3Rpb24gPSB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JGb2N1c2VkU3RhdGVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhpZ2hsaWdodGVkKSB7XG4gICAgICAgICAgICB1cGRhdGVGdW5jdGlvbiA9IHRoaXMudXBkYXRlQ29udGVudEZvckhpZ2hsaWdodGVkU3RhdGVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhvdmVyZWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZ1bmN0aW9uID0gdGhpcy51cGRhdGVDb250ZW50Rm9ySG92ZXJlZFN0YXRlXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghSVModXBkYXRlRnVuY3Rpb24pKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IFVJQ29sb3IubmlsQ29sb3JcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZUZ1bmN0aW9uLmNhbGwodGhpcylcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvck5vcm1hbFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9ySG92ZXJlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yTm9ybWFsU3RhdGUoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvckZvY3VzZWRTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckhvdmVyZWRTdGF0ZSgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9ySGlnaGxpZ2h0ZWRTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvclNlbGVjdGVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JTZWxlY3RlZEFuZEhpZ2hsaWdodGVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JTZWxlY3RlZFN0YXRlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldCBlbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmVuYWJsZWQgPSBlbmFibGVkXG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50RW5hYmxlZFN0YXRlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBlbmFibGVkKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHN1cGVyLmVuYWJsZWRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50RW5hYmxlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5hbHBoYSA9IDFcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWxwaGEgPSAwLjVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy51c2VySW50ZXJhY3Rpb25FbmFibGVkID0gdGhpcy5lbmFibGVkXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBhZGRTdHlsZUNsYXNzKHN0eWxlQ2xhc3NOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmFkZFN0eWxlQ2xhc3Moc3R5bGVDbGFzc05hbWUpXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5zdHlsZUNsYXNzTmFtZSAhPSBzdHlsZUNsYXNzTmFtZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U3RhdGUuY2FsbCh0aGlzKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGRpZFJlY2VpdmVCcm9hZGNhc3RFdmVudChldmVudDogVUlWaWV3QnJvYWRjYXN0RXZlbnQpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmRpZFJlY2VpdmVCcm9hZGNhc3RFdmVudChldmVudClcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudC5uYW1lID09IFVJVmlldy5icm9hZGNhc3RFdmVudE5hbWUuUGFnZURpZFNjcm9sbCB8fCBldmVudC5uYW1lID09XG4gICAgICAgICAgICBVSVZpZXcuYnJvYWRjYXN0RXZlbnROYW1lLkFkZGVkVG9WaWV3VHJlZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmhvdmVyZWQgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodGVkID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICB0b2dnbGVTZWxlY3RlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAhdGhpcy5zZWxlY3RlZFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBpc1RvZ2dsZWFibGUoaXNUb2dnbGVhYmxlOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc1RvZ2dsZWFibGUgPSBpc1RvZ2dsZWFibGVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBpc1RvZ2dsZWFibGUoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5faXNUb2dnbGVhYmxlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBsYXlvdXRTdWJ2aWV3cygpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2VuZENvbnRyb2xFdmVudEZvcktleShldmVudEtleTogc3RyaW5nLCBuYXRpdmVFdmVudDogRXZlbnQpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudEtleSA9PSBVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJVcEluc2lkZSAmJiAhdGhpcy5oaWdobGlnaHRlZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEbyBub3Qgc2VuZCB0aGUgZXZlbnQgaW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAvL3N1cGVyLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoZXZlbnRLZXksIG5hdGl2ZUV2ZW50KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGFzZCA9IDFcbiAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3VwZXIuc2VuZENvbnRyb2xFdmVudEZvcktleShldmVudEtleSwgbmF0aXZlRXZlbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGdldEV2ZW50Q29vcmRpbmF0ZXNJbkRvY3VtZW50KHRvdWNoT3JNb3VzZUV2ZW50KSB7XG4gICAgICAgIC8vIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbFxuICAgICAgICB2YXIgcG9zeCA9IDBcbiAgICAgICAgdmFyIHBvc3kgPSAwXG4gICAgICAgIHZhciBlID0gdG91Y2hPck1vdXNlRXZlbnRcbiAgICAgICAgaWYgKCFlKSB7XG4gICAgICAgICAgICBlID0gd2luZG93LmV2ZW50XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUucGFnZVggfHwgZS5wYWdlWSkge1xuICAgICAgICAgICAgcG9zeCA9IGUucGFnZVhcbiAgICAgICAgICAgIHBvc3kgPSBlLnBhZ2VZXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZS5jbGllbnRYIHx8IGUuY2xpZW50WSkge1xuICAgICAgICAgICAgcG9zeCA9IGUuY2xpZW50WCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdFxuICAgICAgICAgICAgICAgICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnRcbiAgICAgICAgICAgIHBvc3kgPSBlLmNsaWVudFkgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcFxuICAgICAgICAgICAgICAgICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxuICAgICAgICB9XG4gICAgICAgIC8vIHBvc3ggYW5kIHBvc3kgY29udGFpbiB0aGUgbW91c2UgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGRvY3VtZW50XG4gICAgXG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0geyBcInhcIjogcG9zeCwgXCJ5XCI6IHBvc3kgfVxuICAgIFxuICAgICAgICByZXR1cm4gY29vcmRpbmF0ZXNcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBnZXRFbGVtZW50UG9zaXRpb25JbkRvY3VtZW50KGVsKSB7XG4gICAgICAgIC8vaHR0cHM6Ly93d3cua2lydXBhLmNvbS9odG1sNS9nZXR0aW5nX21vdXNlX2NsaWNrX3Bvc2l0aW9uLmh0bVxuICAgICAgICB2YXIgeFBvc2l0aW9uID0gMFxuICAgICAgICB2YXIgeVBvc2l0aW9uID0gMFxuICAgIFxuICAgICAgICB3aGlsZSAoZWwpIHtcbiAgICAgICAgICAgIGlmIChlbC50YWdOYW1lID09IFwiQk9EWVwiKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ29vcmRpbmF0ZXMgaW4gZG9jdW1lbnQgYXJlIGNvb3JkaW5hdGVzIGluIGJvZHksIHRoZXJlZm9yZSBzdWJ0cmFjdGluZyB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBib2R5IGlzIG5vdCBuZWVkZWRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyAgICAgIC8vIGRlYWwgd2l0aCBicm93c2VyIHF1aXJrcyB3aXRoIGJvZHkvd2luZG93L2RvY3VtZW50IGFuZCBwYWdlIHNjcm9sbFxuICAgICAgICAgICAgICAgIC8vICAgICAgdmFyIHhTY3JvbGxQb3MgPSBlbC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIC8vICAgICAgdmFyIHlTY3JvbGxQb3MgPSBlbC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgICAgeFBvc2l0aW9uICs9IChlbC5vZmZzZXRMZWZ0IC0geFNjcm9sbFBvcyArIGVsLmNsaWVudExlZnQpO1xuICAgICAgICAgICAgICAgIC8vICAgICAgeVBvc2l0aW9uICs9IChlbC5vZmZzZXRUb3AgLSB5U2Nyb2xsUG9zICsgZWwuY2xpZW50VG9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHhQb3NpdGlvbiArPSAoZWwub2Zmc2V0TGVmdCAtIGVsLnNjcm9sbExlZnQgKyBlbC5jbGllbnRMZWZ0KVxuICAgICAgICAgICAgICAgIHlQb3NpdGlvbiArPSAoZWwub2Zmc2V0VG9wIC0gZWwuc2Nyb2xsVG9wICsgZWwuY2xpZW50VG9wKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlbCA9IGVsLm9mZnNldFBhcmVudFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB4UG9zaXRpb24sXG4gICAgICAgICAgICB5OiB5UG9zaXRpb25cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgY29udmVydENvb3JkaW5hdGVzRnJvbURvY3VtZW50VG9FbGVtZW50KHgsIHksIGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudFBvc2l0aW9uSW5Eb2N1bWVudCA9IHRoaXMuZ2V0RWxlbWVudFBvc2l0aW9uSW5Eb2N1bWVudChlbGVtZW50KVxuICAgICAgICBjb25zdCBjb29yZGluYXRlc0luRWxlbWVudCA9IHsgXCJ4XCI6IHggLSBlbGVtZW50UG9zaXRpb25JbkRvY3VtZW50LngsIFwieVwiOiB5IC0gZWxlbWVudFBvc2l0aW9uSW5Eb2N1bWVudC55IH1cbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGVzSW5FbGVtZW50XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBnZXRFdmVudENvb3JkaW5hdGVzSW5FbGVtZW50KHRvdWNoT3JNb3VzZUV2ZW50LCBlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzSW5Eb2N1bWVudCA9IHRoaXMuZ2V0RXZlbnRDb29yZGluYXRlc0luRG9jdW1lbnQodG91Y2hPck1vdXNlRXZlbnQpXG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzSW5FbGVtZW50ID0gdGhpcy5jb252ZXJ0Q29vcmRpbmF0ZXNGcm9tRG9jdW1lbnRUb0VsZW1lbnQoXG4gICAgICAgICAgICBjb29yZGluYXRlc0luRG9jdW1lbnQueCxcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzSW5Eb2N1bWVudC55LFxuICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICApXG4gICAgICAgIHJldHVybiBjb29yZGluYXRlc0luRWxlbWVudFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJQmFzZUJ1dHRvbi50c1wiIC8+XG5cblxuXG5jbGFzcyBVSUxpbmsgZXh0ZW5kcyBVSUJhc2VCdXR0b24ge1xuICAgIFxuICAgIHByaXZhdGUgX2NvbG9yczogVUlCdXR0b25Db2xvclNwZWNpZmllclxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRDogc3RyaW5nLCBpbml0Vmlld0RhdGEgPSBuaWwpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRCwgXCJhXCIsIGluaXRWaWV3RGF0YSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlMaW5rXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJQmFzZUJ1dHRvblxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdG9wc1BvaW50ZXJFdmVudFByb3BhZ2F0aW9uID0gTk9cbiAgICAgICAgXG4gICAgICAgIHRoaXMucGF1c2VzUG9pbnRlckV2ZW50cyA9IE5PXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGluaXRWaWV3KGVsZW1lbnRJRCwgdmlld0hUTUxFbGVtZW50LCBpbml0Vmlld0RhdGE6IHsgdGl0bGVUeXBlOiBzdHJpbmcgfSkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuaW5pdFZpZXcoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQsIGluaXRWaWV3RGF0YSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2xhc3Muc3VwZXJjbGFzcyA9IFVJQmFzZUJ1dHRvblxuICAgICAgICBcbiAgICAgICAgLy8gSW5zdGFuY2UgdmFyaWFibGVzXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy90aGlzLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdmlld0hUTUxFbGVtZW50Lm9uY2xpY2sgPSB0aGlzLmJsdXIuYmluZCh0aGlzKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IGNvbG9ycygpOiBVSUJ1dHRvbkNvbG9yU3BlY2lmaWVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yc1xuICAgIH1cbiAgICBcbiAgICBzZXQgY29sb3JzKHZhbHVlOiBVSUJ1dHRvbkNvbG9yU3BlY2lmaWVyKSB7XG4gICAgICAgIHRoaXMuX2NvbG9ycyA9IHZhbHVlXG4gICAgfVxuICAgIFxuICAgIGdldCB2aWV3SFRNTEVsZW1lbnQoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc3VwZXIudmlld0hUTUxFbGVtZW50IGFzIEhUTUxMaW5rRWxlbWVudFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2V0IHRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld0hUTUxFbGVtZW50LnRleHRDb250ZW50XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgdGFyZ2V0KHRhcmdldDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIHRhcmdldClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCB0YXJnZXQoKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudmlld0hUTUxFbGVtZW50LmdldEF0dHJpYnV0ZShcImhyZWZcIilcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0IHRhcmdldFJvdXRlRm9yQ3VycmVudFN0YXRlKHRhcmdldFJvdXRlRm9yQ3VycmVudFN0YXRlOiAoKSA9PiAoVUlSb3V0ZSB8IHN0cmluZykpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3RhcmdldFJvdXRlRm9yQ3VycmVudFN0YXRlID0gdGFyZ2V0Um91dGVGb3JDdXJyZW50U3RhdGVcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCB0YXJnZXRSb3V0ZUZvckN1cnJlbnRTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl90YXJnZXRSb3V0ZUZvckN1cnJlbnRTdGF0ZVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgX3RhcmdldFJvdXRlRm9yQ3VycmVudFN0YXRlKCkge1xuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBVSVJvdXRlLmN1cnJlbnRSb3V0ZS5yb3V0ZUJ5UmVtb3ZpbmdDb21wb25lbnRzT3RoZXJUaGFuT25lc05hbWVkKFtcInNldHRpbmdzXCJdKSBhcyAoVUlSb3V0ZSB8IHN0cmluZylcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50KGV2ZW50OiBVSVZpZXdCcm9hZGNhc3RFdmVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50KGV2ZW50KVxuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50Lm5hbWUgPT0gVUlDb3JlLmJyb2FkY2FzdEV2ZW50TmFtZS5Sb3V0ZURpZENoYW5nZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldCgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgd2FzQWRkZWRUb1ZpZXdUcmVlKCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIud2FzQWRkZWRUb1ZpZXdUcmVlKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KClcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICB1cGRhdGVUYXJnZXQoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByb3V0ZSA9IHRoaXMudGFyZ2V0Um91dGVGb3JDdXJyZW50U3RhdGUoKVxuICAgICAgICBcbiAgICAgICAgaWYgKHJvdXRlIGluc3RhbmNlb2YgVUlSb3V0ZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHJvdXRlLmxpbmtSZXByZXNlbnRhdGlvblxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRhcmdldCA9IHJvdXRlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBsYXlvdXRTdWJ2aWV3cygpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSUxpbmsudHNcIiAvPlxuXG5cblxuY2xhc3MgVUlMaW5rQnV0dG9uIGV4dGVuZHMgVUlMaW5rIHtcbiAgICBcbiAgICBcbiAgICBidXR0b246IFVJQnV0dG9uXG4gICAgXG4gICAgLy9saW5rID0gbmV3IFVJTGluayh0aGlzLmVsZW1lbnRJRCArIFwiTGlua1wiKTtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ6IHN0cmluZywgZWxlbWVudFR5cGU/OiBzdHJpbmcsIHRpdGxlVHlwZT86IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCB7IFwiZWxlbWVudFR5cGVcIjogZWxlbWVudFR5cGUsIFwidGl0bGVUeXBlXCI6IHRpdGxlVHlwZSB9KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBVSUxpbmtCdXR0b25cbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlMaW5rXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5idXR0b24uYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBVSUxpbmtCdXR0b24sIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgIFxuICAgICAgICAgICAgY29uc3QgYXNkID0gMVxuICAgIFxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gdGhpcy50YXJnZXQgYXMgYW55XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLmxpbmsuaGlkZGVuID0gWUVTO1xuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy5hZGRTdWJ2aWV3KHRoaXMubGluayk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW5pdFZpZXcoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQsIGluaXRWaWV3RGF0YTogeyB0aXRsZVR5cGU6IHN0cmluZywgZWxlbWVudFR5cGU6IHN0cmluZyB9KSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5pbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5jbGFzcy5zdXBlcmNsYXNzID0gVUlMaW5rXG4gICAgICAgIFxuICAgICAgICAvLyBJbnN0YW5jZSB2YXJpYWJsZXNcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYnV0dG9uID0gbmV3IFVJQnV0dG9uKHRoaXMuZWxlbWVudElEICsgXCJCdXR0b25cIiwgaW5pdFZpZXdEYXRhLmVsZW1lbnRUeXBlLCBpbml0Vmlld0RhdGEudGl0bGVUeXBlKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRTdWJ2aWV3KHRoaXMuYnV0dG9uKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCB0aXRsZUxhYmVsKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uLnRpdGxlTGFiZWxcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBpbWFnZVZpZXcoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b24uaW1hZ2VWaWV3XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgY29sb3JzKGNvbG9yczogVUlCdXR0b25Db2xvclNwZWNpZmllcikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5idXR0b24uY29sb3JzID0gY29sb3JzXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBnZXQgY29sb3JzKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uLmNvbG9yc1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHZpZXdIVE1MRWxlbWVudCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdXBlci52aWV3SFRNTEVsZW1lbnQgYXMgSFRNTExpbmtFbGVtZW50XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgdGFyZ2V0KHRhcmdldDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIHRhcmdldClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCB0YXJnZXQoKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudmlld0hUTUxFbGVtZW50LmdldEF0dHJpYnV0ZShcImhyZWZcIilcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgXG4gICAgICAgIHRoaXMuYnV0dG9uLmZyYW1lID0gYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLmJ1dHRvbi5sYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSUNvcmUvVUlWaWV3Q29udHJvbGxlci50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSUNvcmUvVUlEaWFsb2dWaWV3LnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJQ29yZS9VSUxpbmtCdXR0b24udHNcIiAvPlxuXG5cblxuXG5cbmNsYXNzIFJvb3RWaWV3Q29udHJvbGxlciBleHRlbmRzIFVJVmlld0NvbnRyb2xsZXIge1xuICAgIFxuICAgIHByaXZhdGUgdXNlR0VURUxFQ1ZpZXdDb250cm9sbGVyOiBHRVRFTEVDVmlld0NvbnRyb2xsZXJcbiAgICBwcml2YXRlIHVzZUdFVEVMRUNUYWJsZVZpZXdDb250cm9sbGVyOiBHRVRFTEVDVGFibGVWaWV3Q29udHJvbGxlclxuICAgIHByaXZhdGUgbWFpblZpZXdDb250cm9sbGVyOiBVSVZpZXdDb250cm9sbGVyXG4gICAgXG4gICAgcHJpdmF0ZSBfY29udGVudFZpZXdDb250cm9sbGVyOiBVSVZpZXdDb250cm9sbGVyXG4gICAgcHJpdmF0ZSB0b3BCYXJWaWV3OiBDZWxsVmlld1xuICAgIFxuICAgIHByaXZhdGUgYmFja1RvTWFpbkJ1dHRvbjogQ0JGbGF0QnV0dG9uXG4gICAgXG4gICAgYm90dG9tQmFyVmlldzogYW55XG4gICAgXG4gICAgY29uc3RydWN0b3Iodmlldykge1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsbGluZyBzdXBlclxuICAgICAgICBzdXBlcih2aWV3KVxuICAgICAgICBcbiAgICAgICAgLy8gSGVyZSBhcmUgc29tZSBzdWdnZXN0ZWQgY29udmVudGlvbnMgdGhhdCBhcmUgdXNlZCBpbiBVSUNvcmVcbiAgICAgICAgXG4gICAgICAgIC8vIEluc3RhbmNlIHZhcmlhYmxlcywgaXQgaXMgZ29vZCB0byBpbml0aWFsaXplIHRvIG5pbCBvciBlbXB0eSBmdW5jdGlvbiwgbm90IGxlYXZlIGFzIHVuZGVmaW5lZCB0byBhdm9pZFxuICAgICAgICAvLyBpZiBibG9ja3NcbiAgICAgICAgLy8gdGhpcy5fZmlyc3RWaWV3ID0gbmlsO1xuICAgICAgICAvLyB0aGlzLl9zZWNvbmRWaWV3ID0gbmlsO1xuICAgICAgICAvLyB0aGlzLl90ZXN0VmlldyA9IG5pbDtcbiAgICAgICAgLy8gdGhpcy5fYnV0dG9uID0gbmlsO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhlIG5pbCBvYmplY3QgYXZvaWRzIHVubmVjY2Vzc2FyeSBjcmFzaGVzIGJ5IGFsbG93aW5nIHlvdSB0byBjYWxsIGFueSBmdW5jdGlvbiBvciBhY2Nlc3MgYW55IHZhcmlhYmxlIG9uIGl0LCByZXR1cm5pbmcgbmlsXG4gICAgICAgIFxuICAgICAgICAvLyBEZWZpbmUgcHJvcGVydGllcyB3aXRoIGdldCBhbmQgc2V0IGZ1bmN0aW9ucyBzbyB0aGV5IGNhbiBiZSBhY2Nlc3NlZCBhbmQgc2V0IGxpa2UgdmFyaWFibGVzXG4gICAgICAgIFxuICAgICAgICAvLyBOYW1lIHZhcmlhYmxlcyB0aGF0IHNob3VsZCBiZSBwcml2YXRlLCBsaWtlIHByb3BlcnR5IHZhcmlhYmxlcywgd2l0aCBhIF8gc2lnbiwgdGhpcyBhbHNvIGhvbGRzIGZvciBwcml2YXRlIGZ1bmN0aW9uc1xuICAgICAgICAvLyBBdm9pZCBhY2Nlc3NpbmcgdmFyaWFibGVzIGFuZCBmdW5jdGlvbnMgbmFtZWQgd2l0aCBfIGZyb20gb3V0c2lkZSBhcyB0aGlzIGNyZWF0ZXMgc3Ryb25nIGNvdXBsaW5nIGFuZCBoaW5kZXJzIHN0YWJpbGl0eVxuICAgICAgICBcbiAgICAgICAgLy8gQ29kZSBmb3IgZnVydGhlciBzZXR1cCBpZiBuZWNlc3NhcnlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGxvYWRJbnRyb3NwZWN0aW9uVmFyaWFibGVzKCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIubG9hZEludHJvc3BlY3Rpb25WYXJpYWJsZXMoKVxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSVZpZXdDb250cm9sbGVyXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBsb2FkU3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXcuYmFja2dyb3VuZENvbG9yID0gVUlDb2xvci5jb2xvcldpdGhSR0JBKDIyNSwgMjI1LCAyMjUpXG4gICAgICAgIFxuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMudmlldy5iYWNrZ3JvdW5kQ29sb3Iuc3RyaW5nVmFsdWVcbiAgICAgICAgXG4gICAgICAgIHRoaXMudG9wQmFyVmlldyA9IG5ldyBDZWxsVmlldyhcIlRvcEJhclZpZXdcIikuY29weVZhbHVlc1JlY3Vyc2l2ZWx5RnJvbU9iamVjdCh7XG4gICAgICAgICAgICB0aXRsZUxhYmVsOiB7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICB0ZXh0QWxpZ25tZW50OiBVSVRleHRWaWV3LnRleHRBbGlnbm1lbnQuY2VudGVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogeyBub3JtYWw6IG5ldyBVSUNvbG9yKFwiIzAwNGYyMFwiKSB9LFxuICAgICAgICAgICAgICAgIHRpdGxlTGFiZWw6IHsgbm9ybWFsOiBVSUNvbG9yLndoaXRlQ29sb3IgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnZpZXcuYWRkU3Vidmlldyh0aGlzLnRvcEJhclZpZXcpXG4gICAgICAgIFxuICAgICAgICAvLyBCb3R0b20gYmFyXG4gICAgICAgIHRoaXMuYm90dG9tQmFyVmlldyA9IG5ldyBCb3R0b21CYXJWaWV3KFwiQm90dG9tQmFyVmlld1wiKS5jb3B5VmFsdWVzUmVjdXJzaXZlbHlGcm9tT2JqZWN0KHtcbiAgICAgICAgICAgIHN0eWxlOiB7IG92ZXJmbG93OiBcImhpZGRlblwiIH1cbiAgICAgICAgfSlcbiAgICAgICAgLy90aGlzLnZpZXcuYWRkU3Vidmlldyh0aGlzLmJvdHRvbUJhclZpZXcpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmJhY2tUb01haW5CdXR0b24gPSBuZXcgQ0JGbGF0QnV0dG9uKClcbiAgICAgICAgdGhpcy5iYWNrVG9NYWluQnV0dG9uLnRpdGxlTGFiZWwudGV4dCA9IFwiJiM4NTkyO1wiXG4gICAgICAgIHRoaXMuYmFja1RvTWFpbkJ1dHRvbi5jb2xvcnMgPSB7XG4gICAgICAgICAgICB0aXRsZUxhYmVsOiB7XG4gICAgICAgICAgICAgICAgbm9ybWFsOiBVSUNvbG9yLndoaXRlQ29sb3IsXG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWQ6IFVJQ29sb3Iud2hpdGVDb2xvci5jb2xvcldpdGhBbHBoYSgwLjc1KSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogVUlDb2xvci53aGl0ZUNvbG9yLmNvbG9yV2l0aEFscGhhKDAuNSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB7XG4gICAgICAgICAgICAgICAgbm9ybWFsOiBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3IsXG4gICAgICAgICAgICAgICAgaGlnaGxpZ2h0ZWQ6IFVJQ29sb3IudHJhbnNwYXJlbnRDb2xvcixcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogVUlDb2xvci50cmFuc3BhcmVudENvbG9yXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmFja1RvTWFpbkJ1dHRvbi5jYWxjdWxhdGVBbmRTZXRWaWV3RnJhbWUgPSBmdW5jdGlvbiAodGhpczogQ0JGbGF0QnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKDAsIG5pbCwgMCwgMCwgbmlsLCA1MClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy50b3BCYXJWaWV3LmFkZFN1YnZpZXcodGhpcy5iYWNrVG9NYWluQnV0dG9uKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5iYWNrVG9NYWluQnV0dG9uLmFkZENvbnRyb2xFdmVudFRhcmdldC5FbnRlckRvd24uUG9pbnRlclVwSW5zaWRlID0gKFxuICAgICAgICAgICAgc2VuZGVyLFxuICAgICAgICAgICAgZXZlbnRcbiAgICAgICAgKSA9PiBVSVJvdXRlLmN1cnJlbnRSb3V0ZS5yb3V0ZUJ5UmVtb3ZpbmdDb21wb25lbnRzT3RoZXJUaGFuT25lc05hbWVkKFtcInNldHRpbmdzXCJdKS5hcHBseSgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBhc3luYyBoYW5kbGVSb3V0ZShyb3V0ZTogVUlSb3V0ZSkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuaGFuZGxlUm91dGUocm91dGUpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmJhY2tUb01haW5CdXR0b24uaGlkZGVuID0gTk9cbiAgICAgICAgXG4gICAgICAgIGlmIChJUyhyb3V0ZS5jb21wb25lbnRXaXRoTmFtZShHRVRFTEVDVmlld0NvbnRyb2xsZXIucm91dGVDb21wb25lbnROYW1lKSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdyBhcnRpY2xlIHZpZXdcbiAgICAgICAgICAgIGlmICghSVModGhpcy51c2VHRVRFTEVDVmlld0NvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy51c2VHRVRFTEVDVmlld0NvbnRyb2xsZXIgPSBuZXcgR0VURUxFQ1ZpZXdDb250cm9sbGVyKG5ldyBVSVZpZXcoXCJHRVRFTEVDVmlld1wiKSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jb250ZW50Vmlld0NvbnRyb2xsZXIgPSB0aGlzLnVzZUdFVEVMRUNWaWV3Q29udHJvbGxlclxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoSVMocm91dGUuY29tcG9uZW50V2l0aE5hbWUoR0VURUxFQ1RhYmxlVmlld0NvbnRyb2xsZXIucm91dGVDb21wb25lbnROYW1lKSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdyBhcnRpY2xlIHZpZXdcbiAgICAgICAgICAgIGlmICghSVModGhpcy51c2VHRVRFTEVDVmlld0NvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy51c2VHRVRFTEVDVGFibGVWaWV3Q29udHJvbGxlciA9IG5ldyBHRVRFTEVDVGFibGVWaWV3Q29udHJvbGxlcihuZXcgVUlWaWV3KFwiR0VURUxFQ1RhYmxlVmlld1wiKSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jb250ZW50Vmlld0NvbnRyb2xsZXIgPSB0aGlzLnVzZUdFVEVMRUNUYWJsZVZpZXdDb250cm9sbGVyXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTWFpbiB2aWV3IGNvbnRyb2xsZXJcbiAgICAgICAgICAgIGlmICghSVModGhpcy5tYWluVmlld0NvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5tYWluVmlld0NvbnRyb2xsZXIgPSBuZXcgVUlWaWV3Q29udHJvbGxlcihuZXcgVUlWaWV3KFwiTWFpblZpZXdcIikpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5tYWluVmlld0NvbnRyb2xsZXIudmlldy5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLnRoZUNob3NlbkdyZXlDb2xvcjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLm1haW5WaWV3Q29udHJvbGxlci52aWV3LnZpZXdIVE1MRWxlbWVudC5pbm5lckhUTUwgPSBhd2FpdCBDQkNvcmUuc2hhcmVkSW5zdGFuY2UucmVhZFRleHRGaWxlRnJvbVVSTChcIi9mcm9udHBhZ2UuaHRtbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gICAgIExhbmd1YWdlU2VydmljZS5zdHJpbmdGb3JLZXkoXG4gICAgICAgICAgICAgICAgLy8gICAgIFwiZnJvbnRQYWdlSFRNTFwiLFxuICAgICAgICAgICAgICAgIC8vICAgICBMYW5ndWFnZVNlcnZpY2UuY3VycmVudExhbmd1YWdlS2V5LFxuICAgICAgICAgICAgICAgIC8vICAgICBcIlRoaXMgaXMgdGhlIGZyb250IHBhZ2UuXCJcbiAgICAgICAgICAgICAgICAvLyApXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jb250ZW50Vmlld0NvbnRyb2xsZXIgPSB0aGlzLm1haW5WaWV3Q29udHJvbGxlclxuICAgICAgICAgICAgdGhpcy5iYWNrVG9NYWluQnV0dG9uLmhpZGRlbiA9IFlFU1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldCBjb250ZW50Vmlld0NvbnRyb2xsZXIoY29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlcikge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuY29udGVudFZpZXdDb250cm9sbGVyID09IGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5jb250ZW50Vmlld0NvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGRWaWV3Q29udHJvbGxlcih0aGlzLmNvbnRlbnRWaWV3Q29udHJvbGxlcilcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY29udGVudFZpZXdDb250cm9sbGVyID0gY29udHJvbGxlclxuICAgICAgICB0aGlzLmFkZENoaWxkVmlld0NvbnRyb2xsZXJJbkNvbnRhaW5lcihjb250cm9sbGVyLCB0aGlzLnZpZXcpXG4gICAgICAgIHRoaXMuX2xheW91dFZpZXdTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXcuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IGNvbnRlbnRWaWV3Q29udHJvbGxlcigpOiBVSVZpZXdDb250cm9sbGVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRlbnRWaWV3Q29udHJvbGxlciB8fCBuaWxcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGdldCBwYWRkaW5nTGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gMjBcbiAgICB9XG4gICAgXG4gICAgZ2V0IHBhZGRpbmdMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsYXNzLnBhZGRpbmdMZW5ndGhcbiAgICB9XG4gICAgXG4gICAgXG4gICAgbGF5b3V0Vmlld3NNYW51YWxseSgpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFZpZXdzTWFudWFsbHkoKVxuICAgICAgICBcbiAgICAgICAgLy8gVmlldyBib3VuZHNcbiAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMudmlldy5ib3VuZHNcbiAgICAgICAgXG4gICAgICAgIHRoaXMudG9wQmFyVmlldy5mcmFtZSA9IGJvdW5kcy5yZWN0YW5nbGVXaXRoSGVpZ2h0KDUwKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGVudFZpZXdDb250cm9sbGVyLnZpZXcuZnJhbWUgPSB0aGlzLnRvcEJhclZpZXcuZnJhbWUucmVjdGFuZ2xlRm9yTmV4dFJvdyhcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ0xlbmd0aCxcbiAgICAgICAgICAgIEZJUlNUX09SX05JTChcbiAgICAgICAgICAgICAgICB3cmFwSW5OaWwodGhpcy5jb250ZW50Vmlld0NvbnRyb2xsZXIgYXMgYW55KS5pbnRyaW5zaWNWaWV3Q29udGVudEhlaWdodChbYm91bmRzLndpZHRoLCAxMjUwXS5taW4oKSksXG4gICAgICAgICAgICAgICAgd3JhcEluTmlsKHRoaXMuY29udGVudFZpZXdDb250cm9sbGVyKS52aWV3LmludHJpbnNpY0NvbnRlbnRIZWlnaHQoW2JvdW5kcy53aWR0aCwgMTI1MF0ubWluKCkpXG4gICAgICAgICAgICApXG4gICAgICAgICkucmVjdGFuZ2xlV2l0aFdpZHRoKFtib3VuZHMud2lkdGgsIDEyNTBdLm1pbigpLCAwLjUpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbnRlbnRWaWV3Q29udHJvbGxlci52aWV3LnN0eWxlLmJveFNoYWRvdyA9IFwiMCAzcHggNnB4IDAgcmdiYSgwLCAwLCAwLCAwLjEpXCJcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGVudFZpZXdDb250cm9sbGVyLnZpZXcuc2V0TWFyZ2lucygwLCAwLCB0aGlzLnBhZGRpbmdMZW5ndGgsIDApXG4gICAgICAgIFxuICAgICAgICAvL3RoaXMudmlldy5zZXRQYWRkaW5ncygwLCAwLCB0aGlzLnBhZGRpbmdMZW5ndGgsIDApO1xuICAgICAgICBcbiAgICAgICAgdmFyIGJvdHRvbUJhckhlaWdodCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgMTAwLFxuICAgICAgICAgICAgdGhpcy5ib3R0b21CYXJWaWV3LmludHJpbnNpY0NvbnRlbnRIZWlnaHQodGhpcy5jb250ZW50Vmlld0NvbnRyb2xsZXIudmlldy5mcmFtZS53aWR0aClcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ib3R0b21CYXJWaWV3LmZyYW1lID0gdGhpcy5jb250ZW50Vmlld0NvbnRyb2xsZXIudmlldy5mcmFtZS5yZWN0YW5nbGVXaXRoWShcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRWaWV3Q29udHJvbGxlci52aWV3LmZyYW1lLm1heC55ICsgdGhpcy5wYWRkaW5nTGVuZ3RoICogMixcbiAgICAgICAgICAgICAgICBVSVZpZXcucGFnZUhlaWdodCAtIGJvdHRvbUJhckhlaWdodFxuICAgICAgICAgICAgXS5tYXgoKVxuICAgICAgICApLnJlY3RhbmdsZVdpdGhIZWlnaHQoXG4gICAgICAgICAgICBib3R0b21CYXJIZWlnaHRcbiAgICAgICAgKS5yZWN0YW5nbGVXaXRoV2lkdGgodGhpcy52aWV3LmJvdW5kcy53aWR0aCkucmVjdGFuZ2xlV2l0aFgoMClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwidHlwZSBWYWx1ZU9mPFQ+ID0gVFtrZXlvZiBUXTtcbnR5cGUgUHJvcFR5cGU8VE9iaiwgVFByb3AgZXh0ZW5kcyBrZXlvZiBUT2JqPiA9IFRPYmpbVFByb3BdO1xuXG50eXBlIFVJUm91dGVQYXJhbWV0ZXJzPFQgPSBhbnk+ID0ge1xuICAgIFxuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcbiAgICBcbn0gfCBUO1xuXG5cbmludGVyZmFjZSBVSVJvdXRlQ29tcG9uZW50PFQgPSBhbnk+IHtcbiAgICBcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczogVUlSb3V0ZVBhcmFtZXRlcnM8VD47XG4gICAgXG59XG5cblxuLy8gQHRzLWlnbm9yZVxuY2xhc3MgVUlSb3V0ZSBleHRlbmRzIEFycmF5PFVJUm91dGVDb21wb25lbnQ+IHtcbiAgICBcbiAgICBfaXNIYW5kbGVkOiBib29sZWFuID0gTk9cbiAgICBjb21wbGV0ZWRDb21wb25lbnRzOiBVSVJvdXRlQ29tcG9uZW50W10gPSBbXVxuICAgIFxuICAgIHBhcmVudFJvdXRlOiBVSVJvdXRlXG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IoaGFzaD86IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICBcbiAgICAgICAgaWYgKCFoYXNoIHx8ICFoYXNoLnN0YXJ0c1dpdGgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGhhc2guc3RhcnRzV2l0aChcIiNcIikpIHtcbiAgICAgICAgICAgIGhhc2ggPSBoYXNoLnNsaWNlKDEpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGhhc2ggPSBkZWNvZGVVUklDb21wb25lbnQoaGFzaClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBoYXNoLnNwbGl0KFwiXVwiKVxuICAgICAgICBjb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24gKHRoaXM6IFVJUm91dGUsIGNvbXBvbmVudDogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBhcnJheTogc3RyaW5nW10pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5zcGxpdChcIltcIilbMF1cbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7fVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWNvbXBvbmVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVyc1N0cmluZyA9IGNvbXBvbmVudC5zcGxpdChcIltcIilbMV0gfHwgXCJcIlxuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVyUGFpclN0cmluZ3MgPSBwYXJhbWV0ZXJzU3RyaW5nLnNwbGl0KFwiLFwiKSB8fCBbXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYXJhbWV0ZXJQYWlyU3RyaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChwYWlyU3RyaW5nLCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlBbmRWYWx1ZUFycmF5ID0gcGFpclN0cmluZy5zcGxpdChcIjpcIilcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBkZWNvZGVVUklDb21wb25lbnQoa2V5QW5kVmFsdWVBcnJheVswXSlcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChrZXlBbmRWYWx1ZUFycmF5WzFdKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNba2V5XSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IGNvbXBvbmVudE5hbWUsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogcGFyYW1ldGVyc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH0sIHRoaXMpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGdldCBjdXJyZW50Um91dGUoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IFVJUm91dGUod2luZG93LmxvY2F0aW9uLmhhc2gpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBhcHBseSgpIHtcbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdGhpcy5zdHJpbmdSZXByZXNlbnRhdGlvblxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgYXBwbHlCeVJlcGxhY2luZ0N1cnJlbnRSb3V0ZUluSGlzdG9yeSgpIHtcbiAgICAgICAgXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHRoaXMubGlua1JlcHJlc2VudGF0aW9uKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgY29weSgpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBVSVJvdXRlKClcbiAgICAgICAgcmVzdWx0ID0gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHRoaXMpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgY2hpbGRSb3V0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmNvcHkoKVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0LmNvbXBsZXRlZENvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCwgY29tcGxldGVkQ29tcG9uZW50cykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgaW5kZXhJblJlc3VsdCA9IHJlc3VsdC5pbmRleE9mKGNvbXBvbmVudClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGluZGV4SW5SZXN1bHQgPiAtMSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlc3VsdC5zcGxpY2UoaW5kZXhJblJlc3VsdCwgMSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0LmNvbXBsZXRlZENvbXBvbmVudHMgPSBbXVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0LnBhcmVudFJvdXRlID0gdGhpc1xuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICByb3V0ZUJ5UmVtb3ZpbmdDb21wb25lbnRzT3RoZXJUaGFuT25lc05hbWVkKGNvbXBvbmVudE5hbWVzOiBzdHJpbmdbXSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNvcHkoKVxuICAgICAgICBjb25zdCBpbmRleGVzVG9SZW1vdmU6IG51bWJlcltdID0gW11cbiAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICBpZiAoIWNvbXBvbmVudE5hbWVzLmNvbnRhaW5zKGNvbXBvbmVudC5uYW1lKSkge1xuICAgICAgICAgICAgICAgIGluZGV4ZXNUb1JlbW92ZS5wdXNoKGluZGV4KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBpbmRleGVzVG9SZW1vdmUuZm9yRWFjaChmdW5jdGlvbiAoaW5kZXhUb1JlbW92ZSwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICByZXN1bHQucmVtb3ZlRWxlbWVudEF0SW5kZXgoaW5kZXhUb1JlbW92ZSlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICByb3V0ZUJ5UmVtb3ZpbmdDb21wb25lbnROYW1lZChjb21wb25lbnROYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jb3B5KClcbiAgICAgICAgY29uc3QgY29tcG9uZW50SW5kZXggPSByZXN1bHQuZmluZEluZGV4KGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gKGNvbXBvbmVudC5uYW1lID09IGNvbXBvbmVudE5hbWUpXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChjb21wb25lbnRJbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgcmVzdWx0LnNwbGljZShjb21wb25lbnRJbmRleCwgMSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIFxuICAgIHJvdXRlQnlSZW1vdmluZ1BhcmFtZXRlckluQ29tcG9uZW50KGNvbXBvbmVudE5hbWU6IHN0cmluZywgcGFyYW1ldGVyTmFtZTogc3RyaW5nLCByZW1vdmVDb21wb25lbnRJZkVtcHR5ID0gTk8pIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIHZhciBwYXJhbWV0ZXJzID0gcmVzdWx0LmNvbXBvbmVudFdpdGhOYW1lKGNvbXBvbmVudE5hbWUpLnBhcmFtZXRlcnNcbiAgICAgICAgaWYgKElTX05PVChwYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgcGFyYW1ldGVycyA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnNbcGFyYW1ldGVyTmFtZV1cbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJvdXRlV2l0aENvbXBvbmVudChjb21wb25lbnROYW1lLCBwYXJhbWV0ZXJzKVxuICAgICAgICBpZiAocmVtb3ZlQ29tcG9uZW50SWZFbXB0eSAmJiBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJvdXRlQnlSZW1vdmluZ0NvbXBvbmVudE5hbWVkKGNvbXBvbmVudE5hbWUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICByb3V0ZUJ5U2V0dGluZ1BhcmFtZXRlckluQ29tcG9uZW50KGNvbXBvbmVudE5hbWU6IHN0cmluZywgcGFyYW1ldGVyTmFtZTogc3RyaW5nLCB2YWx1ZVRvU2V0OiBzdHJpbmcpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuY29weSgpXG4gICAgICAgIGlmIChJU19OSUwodmFsdWVUb1NldCkgfHwgSVNfTklMKHBhcmFtZXRlck5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSByZXN1bHQuY29tcG9uZW50V2l0aE5hbWUoY29tcG9uZW50TmFtZSkucGFyYW1ldGVyc1xuICAgICAgICBpZiAoSVNfTk9UKHBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0ge31cbiAgICAgICAgfVxuICAgICAgICBwYXJhbWV0ZXJzW3BhcmFtZXRlck5hbWVdID0gdmFsdWVUb1NldFxuICAgICAgICByZXN1bHQgPSByZXN1bHQucm91dGVXaXRoQ29tcG9uZW50KGNvbXBvbmVudE5hbWUsIHBhcmFtZXRlcnMpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcm91dGVXaXRoVmlld0NvbnRyb2xsZXJDb21wb25lbnQ8VCBleHRlbmRzIHR5cGVvZiBVSVZpZXdDb250cm9sbGVyPihcbiAgICAgICAgdmlld0NvbnRyb2xsZXI6IFQsXG4gICAgICAgIHBhcmFtZXRlcnM6IFVJUm91dGVQYXJhbWV0ZXJzPHsgW1AgaW4ga2V5b2YgVFtcIlBhcmFtZXRlcklkZW50aWZpZXJOYW1lXCJdXTogc3RyaW5nIH0+LFxuICAgICAgICBleHRlbmRQYXJhbWV0ZXJzOiBib29sZWFuID0gTk9cbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnJvdXRlV2l0aENvbXBvbmVudCh2aWV3Q29udHJvbGxlci5yb3V0ZUNvbXBvbmVudE5hbWUsIHBhcmFtZXRlcnMsIGV4dGVuZFBhcmFtZXRlcnMpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByb3V0ZVdpdGhDb21wb25lbnQobmFtZTogc3RyaW5nLCBwYXJhbWV0ZXJzOiBVSVJvdXRlUGFyYW1ldGVycywgZXh0ZW5kUGFyYW1ldGVyczogYm9vbGVhbiA9IE5PKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNvcHkoKVxuICAgICAgICB2YXIgY29tcG9uZW50ID0gcmVzdWx0LmNvbXBvbmVudFdpdGhOYW1lKG5hbWUpXG4gICAgICAgIGlmIChJU19OT1QoY29tcG9uZW50KSkge1xuICAgICAgICAgICAgY29tcG9uZW50ID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNvbXBvbmVudClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVChwYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0ge31cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZXh0ZW5kUGFyYW1ldGVycykge1xuICAgICAgICAgICAgY29tcG9uZW50LnBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKGNvbXBvbmVudC5wYXJhbWV0ZXJzLCBwYXJhbWV0ZXJzKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29tcG9uZW50LnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIG5hdmlnYXRlQnlTZXR0aW5nQ29tcG9uZW50KG5hbWU6IHN0cmluZywgcGFyYW1ldGVyczogVUlSb3V0ZVBhcmFtZXRlcnMsIGV4dGVuZFBhcmFtZXRlcnM6IGJvb2xlYW4gPSBOTykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yb3V0ZVdpdGhDb21wb25lbnQobmFtZSwgcGFyYW1ldGVycywgZXh0ZW5kUGFyYW1ldGVycykuYXBwbHkoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgY29tcG9uZW50V2l0aFZpZXdDb250cm9sbGVyPFQgZXh0ZW5kcyB0eXBlb2YgVUlWaWV3Q29udHJvbGxlcj4odmlld0NvbnRyb2xsZXI6IFQpOiBVSVJvdXRlQ29tcG9uZW50PHsgW1AgaW4ga2V5b2YgVFtcIlBhcmFtZXRlcklkZW50aWZpZXJOYW1lXCJdXTogc3RyaW5nIH0+IHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudFdpdGhOYW1lKHZpZXdDb250cm9sbGVyLnJvdXRlQ29tcG9uZW50TmFtZSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGNvbXBvbmVudFdpdGhOYW1lKG5hbWU6IHN0cmluZyk6IFVJUm91dGVDb21wb25lbnQge1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmlsXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCwgc2VsZikge1xuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lID09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBjb21wb25lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBkaWRjb21wbGV0ZUNvbXBvbmVudChjb21wb25lbnQ6IFVJUm91dGVDb21wb25lbnQpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNlbGY6IFVJUm91dGUgPSB0aGlzXG4gICAgICAgIGNvbnN0IGluZGV4ID0gc2VsZi5pbmRleE9mKGNvbXBvbmVudCwgMClcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZWxmLmNvbXBsZXRlZENvbXBvbmVudHMucHVzaChzZWxmLnNwbGljZShpbmRleCwgMSlbMF0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vc2VsZi5jb21wbGV0ZWRDb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgaXNIYW5kbGVkKGlzSGFuZGxlZDogYm9vbGVhbikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNIYW5kbGVkID0gaXNIYW5kbGVkXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgaXNIYW5kbGVkKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuICh0aGlzLl9pc0hhbmRsZWQgfHwgKHRoaXMubGVuZ3RoID09IDAgJiYgdGhpcy5jb21wbGV0ZWRDb21wb25lbnRzLmxlbmd0aCAhPSAwKSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBsaW5rUmVwcmVzZW50YXRpb24oKSB7XG4gICAgICAgIHJldHVybiBcIiNcIiArIHRoaXMuc3RyaW5nUmVwcmVzZW50YXRpb25cbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IHN0cmluZ1JlcHJlc2VudGF0aW9uKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIlxuICAgICAgICB0aGlzLmNvbXBsZXRlZENvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50LCBpbmRleCwgc2VsZikge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgY29tcG9uZW50Lm5hbWVcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBjb21wb25lbnQucGFyYW1ldGVyc1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgXCJbXCJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSwgaW5kZXgsIGtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgXCIsXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyBcIjpcIiArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbWV0ZXJzW2tleV0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgXCJdXCJcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQsIGluZGV4LCBzZWxmKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBjb21wb25lbnQubmFtZVxuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IGNvbXBvbmVudC5wYXJhbWV0ZXJzXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBcIltcIlxuICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1ldGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpbmRleCwga2V5cykge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBcIixcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArIFwiOlwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtZXRlcnNba2V5XSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBcIl1cIlxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiVUlWaWV3LnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJVSVZpZXdDb250cm9sbGVyLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9Sb290Vmlld0NvbnRyb2xsZXIudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlVJUm91dGUudHNcIiAvPlxuXG5cblxuXG5pbnRlcmZhY2UgVUlMYW5ndWFnZVNlcnZpY2Uge1xuICAgIFxuICAgIGN1cnJlbnRMYW5ndWFnZUtleTogc3RyaW5nO1xuICAgIFxuICAgIHN0cmluZ0ZvcktleShcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIGxhbmd1YWdlTmFtZTogc3RyaW5nLFxuICAgICAgICBkZWZhdWx0U3RyaW5nOiBzdHJpbmcsXG4gICAgICAgIHBhcmFtZXRlcnM6IHsgW3g6IHN0cmluZ106IHN0cmluZyB8IFVJTG9jYWxpemVkVGV4dE9iamVjdDsgfVxuICAgICk6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBcbiAgICBzdHJpbmdGb3JDdXJyZW50TGFuZ3VhZ2UobG9jYWxpemVkVGV4dE9iamVjdDogVUlMb2NhbGl6ZWRUZXh0T2JqZWN0KTtcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgVUlMb2NhbGl6ZWRUZXh0T2JqZWN0IHtcbiAgICBcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG4gICAgXG59XG5cblxuXG5cblxuY2xhc3MgVUlDb3JlIGV4dGVuZHMgVUlPYmplY3Qge1xuICAgIFxuICAgIHJvb3RWaWV3Q29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciA9IG5pbFxuICAgIHN0YXRpYyBSb290Vmlld0NvbnRyb2xsZXJDbGFzczogYW55XG4gICAgc3RhdGljIG1haW46IFVJQ29yZVxuICAgIFxuICAgIHN0YXRpYyBsYW5ndWFnZVNlcnZpY2U6IFVJTGFuZ3VhZ2VTZXJ2aWNlID0gbmlsXG4gICAgXG4gICAgY29uc3RydWN0b3Iocm9vdERpdkVsZW1lbnRJRDogc3RyaW5nLCByb290Vmlld0NvbnRyb2xsZXJDbGFzczogdHlwZW9mIFVJVmlld0NvbnRyb2xsZXIpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlDb3JlXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJT2JqZWN0XG4gICAgICAgIFxuICAgICAgICBVSUNvcmUuUm9vdFZpZXdDb250cm9sbGVyQ2xhc3MgPSByb290Vmlld0NvbnRyb2xsZXJDbGFzc1xuICAgICAgICBcbiAgICAgICAgVUlDb3JlLm1haW4gPSB0aGlzXG4gICAgXG4gICAgICAgIGNvbnN0IHJvb3RWaWV3RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJvb3REaXZFbGVtZW50SUQpXG4gICAgXG4gICAgICAgIGNvbnN0IHJvb3RWaWV3ID0gbmV3IFVJVmlldyhyb290RGl2RWxlbWVudElELCByb290Vmlld0VsZW1lbnQpXG4gICAgXG4gICAgICAgIHJvb3RWaWV3LnBhdXNlc1BvaW50ZXJFdmVudHMgPSBOTyAvL1lFUztcbiAgICAgICAgXG4gICAgICAgIGlmIChVSUNvcmUuUm9vdFZpZXdDb250cm9sbGVyQ2xhc3MpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCEoVUlDb3JlLlJvb3RWaWV3Q29udHJvbGxlckNsYXNzLnByb3RvdHlwZSBpbnN0YW5jZW9mIFVJVmlld0NvbnRyb2xsZXIpIHx8XG4gICAgICAgICAgICAgICAgKFVJQ29yZS5Sb290Vmlld0NvbnRyb2xsZXJDbGFzcyBhcyBhbnkpID09PSBVSVZpZXdDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgICAgICAgIFwiRXJyb3IsIFVJQ29yZS5Sb290Vmlld0NvbnRyb2xsZXJDbGFzcyBtdXN0IGJlIGEgb3IgYSBzdWJjbGFzcyBvZiBVSVZpZXdDb250cm9sbGVyLCBmYWxsaW5nIGJhY2sgdG8gVUlWaWV3Q29udHJvbGxlci5cIilcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBVSUNvcmUuUm9vdFZpZXdDb250cm9sbGVyQ2xhc3MgPSBVSVZpZXdDb250cm9sbGVyXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucm9vdFZpZXdDb250cm9sbGVyID0gbmV3IFVJQ29yZS5Sb290Vmlld0NvbnRyb2xsZXJDbGFzcyhyb290VmlldylcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnJvb3RWaWV3Q29udHJvbGxlciA9IG5ldyBVSVZpZXdDb250cm9sbGVyKHJvb3RWaWV3KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMucm9vdFZpZXdDb250cm9sbGVyLnZpZXdXaWxsQXBwZWFyKClcbiAgICAgICAgdGhpcy5yb290Vmlld0NvbnRyb2xsZXIudmlld0RpZEFwcGVhcigpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5yb290Vmlld0NvbnRyb2xsZXIudmlldy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoXG4gICAgICAgICAgICBVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJVcEluc2lkZSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChzZW5kZXIsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLmJsdXIoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgXG4gICAgXG4gICAgXG4gICAgICAgIGNvbnN0IHdpbmRvd0RpZFJlc2l6ZSA9IGZ1bmN0aW9uICh0aGlzOiBVSUNvcmUpIHtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBEb2luZyBsYXlvdXQgdHdvIHRpbWVzIHRvIHByZXZlbnQgcGFnZSBzY3JvbGxiYXJzIGZyb20gY29uZnVzaW5nIHRoZSBsYXlvdXRcbiAgICAgICAgICAgIHRoaXMucm9vdFZpZXdDb250cm9sbGVyLl9sYXlvdXRWaWV3U3Vidmlld3MoKVxuICAgICAgICAgICAgVUlWaWV3LmxheW91dFZpZXdzSWZOZWVkZWQoKVxuICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucm9vdFZpZXdDb250cm9sbGVyLl9sYXlvdXRWaWV3U3Vidmlld3MoKVxuICAgICAgICAgICAgLy9VSVZpZXcubGF5b3V0Vmlld3NJZk5lZWRlZCgpXG4gICAgICAgIFxuICAgICAgICAgICAgdGhpcy5yb290Vmlld0NvbnRyb2xsZXIudmlldy5icm9hZGNhc3RFdmVudEluU3VidHJlZSh7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuYW1lOiBVSUNvcmUuYnJvYWRjYXN0RXZlbnROYW1lLldpbmRvd0RpZFJlc2l6ZSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBuaWxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgd2luZG93RGlkUmVzaXplLmJpbmQodGhpcykpXG4gICAgXG4gICAgICAgIGNvbnN0IGRpZFNjcm9sbCA9IGZ1bmN0aW9uICh0aGlzOiBVSUNvcmUpIHtcbiAgICAgICAgXG4gICAgICAgICAgICAvL2NvZGVcbiAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnJvb3RWaWV3Q29udHJvbGxlci52aWV3LmJyb2FkY2FzdEV2ZW50SW5TdWJ0cmVlKHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5hbWU6IFVJVmlldy5icm9hZGNhc3RFdmVudE5hbWUuUGFnZURpZFNjcm9sbCxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBuaWxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGRpZFNjcm9sbCwgZmFsc2UpXG4gICAgXG4gICAgICAgIGNvbnN0IGhhc2hEaWRDaGFuZ2UgPSBmdW5jdGlvbiAodGhpczogVUlDb3JlKSB7XG4gICAgICAgIFxuICAgICAgICAgICAgLy9jb2RlXG4gICAgICAgIFxuICAgICAgICAgICAgdGhpcy5yb290Vmlld0NvbnRyb2xsZXIuaGFuZGxlUm91dGVSZWN1cnNpdmVseShVSVJvdXRlLmN1cnJlbnRSb3V0ZSlcbiAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnJvb3RWaWV3Q29udHJvbGxlci52aWV3LmJyb2FkY2FzdEV2ZW50SW5TdWJ0cmVlKHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5hbWU6IFVJQ29yZS5icm9hZGNhc3RFdmVudE5hbWUuUm91dGVEaWRDaGFuZ2UsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogbmlsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLCBoYXNoRGlkQ2hhbmdlLmJpbmQodGhpcyksIGZhbHNlKVxuICAgICAgICBcbiAgICAgICAgaGFzaERpZENoYW5nZSgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBicm9hZGNhc3RFdmVudE5hbWUgPSB7XG4gICAgICAgIFxuICAgICAgICBcIlJvdXRlRGlkQ2hhbmdlXCI6IFwiUm91dGVEaWRDaGFuZ2VcIixcbiAgICAgICAgXCJXaW5kb3dEaWRSZXNpemVcIjogXCJXaW5kb3dEaWRSZXNpemVcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGxvYWRDbGFzcyhjbGFzc05hbWU6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgaWYgKHdpbmRvd1tjbGFzc05hbWVdKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQud3JpdGVsbihcIjxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0JyBzcmM9J2Rpc3QvVUlDb3JlL1wiICsgY2xhc3NOYW1lICsgXCIuanMnPjwvc2NyaXB0PlwiKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG59XG5cblxuVUlDb3JlLlJvb3RWaWV3Q29udHJvbGxlckNsYXNzID0gbmlsXG5cblxuY29uc3QgSVNfRklSRUZPWCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKSA+IC0xXG5jb25zdCBJU19TQUZBUkkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cblxuQXJyYXkucHJvdG90eXBlLmluZGV4T2YgfHwgKEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGQsIGUpIHtcbiAgICB2YXIgYVxuICAgIGlmIChudWxsID09IHRoaXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJ0aGlzXFxcIiBpcyBudWxsIG9yIG5vdCBkZWZpbmVkXCIpXG4gICAgfVxuICAgIGNvbnN0IGMgPSBPYmplY3QodGhpcyksXG4gICAgICAgIGIgPSBjLmxlbmd0aCA+Pj4gMFxuICAgIGlmICgwID09PSBiKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgIH1cbiAgICBhID0gK2UgfHwgMFxuICAgIEluZmluaXR5ID09PSBNYXRoLmFicyhhKSAmJiAoYSA9IDApXG4gICAgaWYgKGEgPj0gYikge1xuICAgICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgZm9yIChhID0gTWF0aC5tYXgoMCA8PSBhID8gYSA6IGIgLSBNYXRoLmFicyhhKSwgMCk7IGEgPCBiOykge1xuICAgICAgICBpZiAoYSBpbiBjICYmIGNbYV0gPT09IGQpIHtcbiAgICAgICAgICAgIHJldHVybiBhXG4gICAgICAgIH1cbiAgICAgICAgYSsrXG4gICAgfVxuICAgIHJldHVybiAtMVxufSlcblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlVJVmlldy50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiVUlDb3JlLnRzXCIgLz5cblxuXG5cblxuXG5jbGFzcyBVSVRleHRWaWV3IGV4dGVuZHMgVUlWaWV3IHtcbiAgICBcbiAgICBcbiAgICBfdGV4dENvbG9yOiBVSUNvbG9yID0gVUlUZXh0Vmlldy5kZWZhdWx0VGV4dENvbG9yXG4gICAgX3RleHRBbGlnbm1lbnQ6IHN0cmluZ1xuICAgIFxuICAgIF9pc1NpbmdsZUxpbmUgPSBZRVNcbiAgICBcbiAgICB0ZXh0UHJlZml4ID0gXCJcIlxuICAgIHRleHRTdWZmaXggPSBcIlwiXG4gICAgXG4gICAgX25vdGlmaWNhdGlvbkFtb3VudCA9IDBcbiAgICBcbiAgICBfbWluRm9udFNpemU6IG51bWJlciA9IG5pbFxuICAgIF9tYXhGb250U2l6ZTogbnVtYmVyID0gbmlsXG4gICAgXG4gICAgX2F1dG9tYXRpY0ZvbnRTaXplU2VsZWN0aW9uID0gTk9cbiAgICBcbiAgICBjaGFuZ2VzT2Z0ZW4gPSBOT1xuICAgIFxuICAgIFxuICAgIHN0YXRpYyBkZWZhdWx0VGV4dENvbG9yID0gVUlDb2xvci5ibGFja0NvbG9yXG4gICAgc3RhdGljIG5vdGlmaWNhdGlvblRleHRDb2xvciA9IFVJQ29sb3IucmVkQ29sb3JcbiAgICBcbiAgICBzdGF0aWMgX2ludHJpbnNpY0hlaWdodENhY2hlOiB7IFt4OiBzdHJpbmddOiB7IFt4OiBzdHJpbmddOiBudW1iZXI7IH07IH0gJiBVSU9iamVjdCA9IG5ldyBVSU9iamVjdCgpIGFzIGFueVxuICAgIHN0YXRpYyBfaW50cmluc2ljV2lkdGhDYWNoZTogeyBbeDogc3RyaW5nXTogeyBbeDogc3RyaW5nXTogbnVtYmVyOyB9OyB9ICYgVUlPYmplY3QgPSBuZXcgVUlPYmplY3QoKSBhcyBhbnlcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgX3B0VG9QeDogbnVtYmVyXG4gICAgc3RhdGljIF9weFRvUHQ6IG51bWJlclxuICAgIF90ZXh0OiBzdHJpbmdcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ/OiBzdHJpbmcsIHRleHRWaWV3VHlwZSA9IFVJVGV4dFZpZXcudHlwZS5wYXJhZ3JhcGgsIHZpZXdIVE1MRWxlbWVudCA9IG51bGwpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRCwgdmlld0hUTUxFbGVtZW50LCB0ZXh0Vmlld1R5cGUpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJVGV4dFZpZXdcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRleHQgPSBcIlwiXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIlxuICAgICAgICB0aGlzLnN0eWxlLnRleHRPdmVyZmxvdyA9IFwiZWxsaXBzaXNcIlxuICAgICAgICB0aGlzLmlzU2luZ2xlTGluZSA9IFlFU1xuICAgICAgICBcbiAgICAgICAgdGhpcy50ZXh0Q29sb3IgPSB0aGlzLnRleHRDb2xvclxuICAgICAgICBcbiAgICAgICAgdGhpcy51c2VySW50ZXJhY3Rpb25FbmFibGVkID0gWUVTXG4gICAgICAgIFxuICAgICAgICBpZiAodGV4dFZpZXdUeXBlID09IFVJVGV4dFZpZXcudHlwZS50ZXh0QXJlYSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBhdXNlc1BvaW50ZXJFdmVudHMgPSBZRVNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVXBJbnNpZGUsIGZ1bmN0aW9uIChzZW5kZXIsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2VuZGVyLmZvY3VzKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIF9kZXRlcm1pbmVQWEFuZFBUUmF0aW9zKCkge1xuICAgIFxuICAgICAgICBjb25zdCBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICBvLnN0eWxlLndpZHRoID0gXCIxMDAwcHRcIlxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG8pXG4gICAgICAgIFVJVGV4dFZpZXcuX3B0VG9QeCA9IG8uY2xpZW50V2lkdGggLyAxMDAwXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobylcbiAgICAgICAgVUlUZXh0Vmlldy5fcHhUb1B0ID0gMSAvIFVJVGV4dFZpZXcuX3B0VG9QeFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIHR5cGUgPSB7XG4gICAgICAgIFxuICAgICAgICBcInBhcmFncmFwaFwiOiBcInBcIixcbiAgICAgICAgXCJoZWFkZXIxXCI6IFwiaDFcIixcbiAgICAgICAgXCJoZWFkZXIyXCI6IFwiaDJcIixcbiAgICAgICAgXCJoZWFkZXIzXCI6IFwiaDNcIixcbiAgICAgICAgXCJoZWFkZXI0XCI6IFwiaDRcIixcbiAgICAgICAgXCJoZWFkZXI1XCI6IFwiaDVcIixcbiAgICAgICAgXCJoZWFkZXI2XCI6IFwiaDZcIixcbiAgICAgICAgXCJ0ZXh0QXJlYVwiOiBcInRleHRhcmVhXCIsXG4gICAgICAgIFwidGV4dEZpZWxkXCI6IFwiaW5wdXRcIixcbiAgICAgICAgXCJzcGFuXCI6IFwic3BhblwiLFxuICAgICAgICBcImxhYmVsXCI6IFwibGFiZWxcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIHRleHRBbGlnbm1lbnQgPSB7XG4gICAgICAgIFxuICAgICAgICBcImxlZnRcIjogXCJsZWZ0XCIsXG4gICAgICAgIFwiY2VudGVyXCI6IFwiY2VudGVyXCIsXG4gICAgICAgIFwicmlnaHRcIjogXCJyaWdodFwiLFxuICAgICAgICBcImp1c3RpZnlcIjogXCJqdXN0aWZ5XCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCB0ZXh0QWxpZ25tZW50KCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnN0eWxlLnRleHRBbGlnblxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHNldCB0ZXh0QWxpZ25tZW50KHRleHRBbGlnbm1lbnQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLl90ZXh0QWxpZ25tZW50ID0gdGV4dEFsaWdubWVudFxuICAgICAgICB0aGlzLnN0eWxlLnRleHRBbGlnbiA9IHRleHRBbGlnbm1lbnRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHRleHRDb2xvcigpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fdGV4dENvbG9yXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgc2V0IHRleHRDb2xvcihjb2xvcjogVUlDb2xvcikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fdGV4dENvbG9yID0gY29sb3IgfHwgVUlUZXh0Vmlldy5kZWZhdWx0VGV4dENvbG9yXG4gICAgICAgIHRoaXMuc3R5bGUuY29sb3IgPSB0aGlzLl90ZXh0Q29sb3Iuc3RyaW5nVmFsdWVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBpc1NpbmdsZUxpbmUoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5faXNTaW5nbGVMaW5lXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgaXNTaW5nbGVMaW5lKGlzU2luZ2xlTGluZTogYm9vbGVhbikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNTaW5nbGVMaW5lID0gaXNTaW5nbGVMaW5lXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKGlzU2luZ2xlTGluZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0eWxlLndoaXRlU3BhY2UgPSBcInByZVwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3R5bGUud2hpdGVTcGFjZSA9IFwicHJlLXdyYXBcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IG5vdGlmaWNhdGlvbkFtb3VudCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9ub3RpZmljYXRpb25BbW91bnRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBub3RpZmljYXRpb25BbW91bnQobm90aWZpY2F0aW9uQW1vdW50OiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9ub3RpZmljYXRpb25BbW91bnQgPT0gbm90aWZpY2F0aW9uQW1vdW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX25vdGlmaWNhdGlvbkFtb3VudCA9IG5vdGlmaWNhdGlvbkFtb3VudFxuICAgICAgICBcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0VXBUb1Jvb3RWaWV3KClcbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uQW1vdW50RGlkQ2hhbmdlKG5vdGlmaWNhdGlvbkFtb3VudClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIG5vdGlmaWNhdGlvbkFtb3VudERpZENoYW5nZShub3RpZmljYXRpb25BbW91bnQ6IG51bWJlcikge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuICh0aGlzLl90ZXh0IHx8IHRoaXMudmlld0hUTUxFbGVtZW50LmlubmVySFRNTClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCB0ZXh0KHRleHQpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3RleHQgPSB0ZXh0XG4gICAgXG4gICAgICAgIHZhciBub3RpZmljYXRpb25UZXh0ID0gXCJcIlxuICAgIFxuICAgICAgICBpZiAodGhpcy5ub3RpZmljYXRpb25BbW91bnQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbm90aWZpY2F0aW9uVGV4dCA9IFwiPHNwYW4gc3R5bGU9XFxcImNvbG9yOiBcIiArIFVJVGV4dFZpZXcubm90aWZpY2F0aW9uVGV4dENvbG9yLnN0cmluZ1ZhbHVlICsgXCI7XFxcIj5cIiArXG4gICAgICAgICAgICAgICAgKFwiIChcIiArIHRoaXMubm90aWZpY2F0aW9uQW1vdW50ICsgXCIpXCIpLmJvbGQoKSArIFwiPC9zcGFuPlwiXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMudmlld0hUTUxFbGVtZW50LmlubmVySFRNTCAhPSB0aGlzLnRleHRQcmVmaXggKyB0ZXh0ICsgdGhpcy50ZXh0U3VmZml4ICsgbm90aWZpY2F0aW9uVGV4dCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnRleHRQcmVmaXggKyBGSVJTVCh0ZXh0LCBcIlwiKSArIHRoaXMudGV4dFN1ZmZpeCArIG5vdGlmaWNhdGlvblRleHRcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0KCk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgaW5uZXJIVE1MKGlubmVySFRNTDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRleHQgPSBpbm5lckhUTUxcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBpbm5lckhUTUwoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy52aWV3SFRNTEVsZW1lbnQuaW5uZXJIVE1MXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBzZXRUZXh0KGtleTogc3RyaW5nLCBkZWZhdWx0U3RyaW5nOiBzdHJpbmcsIHBhcmFtZXRlcnM/OiB7IFt4OiBzdHJpbmddOiBzdHJpbmcgfCBVSUxvY2FsaXplZFRleHRPYmplY3QgfSkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRJbm5lckhUTUwoa2V5LCBkZWZhdWx0U3RyaW5nLCBwYXJhbWV0ZXJzKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IGZvbnRTaXplKCkge1xuICAgIFxuICAgICAgICBjb25zdCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMudmlld0hUTUxFbGVtZW50LCBudWxsKS5mb250U2l6ZVxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSAocGFyc2VGbG9hdChzdHlsZSkgKiBVSVRleHRWaWV3Ll9weFRvUHQpXG4gICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBmb250U2l6ZShmb250U2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5mb250U2l6ZSA9IFwiXCIgKyBmb250U2l6ZSArIFwicHRcIlxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHVzZUF1dG9tYXRpY0ZvbnRTaXplKG1pbkZvbnRTaXplOiBudW1iZXIgPSBuaWwsIG1heEZvbnRTaXplOiBudW1iZXIgPSBuaWwpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNGb250U2l6ZVNlbGVjdGlvbiA9IFlFU1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX21pbkZvbnRTaXplID0gbWluRm9udFNpemVcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX21heEZvbnRTaXplID0gbWF4Rm9udFNpemVcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBhdXRvbWF0aWNhbGx5Q2FsY3VsYXRlZEZvbnRTaXplKFxuICAgICAgICBib3VuZHM6IFVJUmVjdGFuZ2xlLFxuICAgICAgICBjdXJyZW50U2l6ZTogVUlSZWN0YW5nbGUsXG4gICAgICAgIGN1cnJlbnRGb250U2l6ZTogbnVtYmVyLFxuICAgICAgICBtaW5Gb250U2l6ZT86IG51bWJlcixcbiAgICAgICAgbWF4Rm9udFNpemU/OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIG1pbkZvbnRTaXplID0gRklSU1QobWluRm9udFNpemUsIDEpXG4gICAgICAgIFxuICAgICAgICBtYXhGb250U2l6ZSA9IEZJUlNUKG1heEZvbnRTaXplLCAxMDAwMDAwMDAwMDApXG4gICAgXG4gICAgXG4gICAgICAgIGNvbnN0IGhlaWdodE11bHRpcGxpZXIgPSBib3VuZHMuaGVpZ2h0IC8gKGN1cnJlbnRTaXplLmhlaWdodCArIDEpXG4gICAgXG4gICAgICAgIGNvbnN0IHdpZHRoTXVsdGlwbGllciA9IGJvdW5kcy53aWR0aCAvIChjdXJyZW50U2l6ZS53aWR0aCArIDEpXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgICAgIHZhciBtdWx0aXBsaWVyID0gaGVpZ2h0TXVsdGlwbGllclxuICAgIFxuICAgICAgICBpZiAoaGVpZ2h0TXVsdGlwbGllciA+IHdpZHRoTXVsdGlwbGllcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtdWx0aXBsaWVyID0gd2lkdGhNdWx0aXBsaWVyXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICAgICAgY29uc3QgbWF4Rml0dGluZ0ZvbnRTaXplID0gY3VycmVudEZvbnRTaXplICogbXVsdGlwbGllclxuICAgIFxuICAgIFxuICAgICAgICBpZiAobWF4Rml0dGluZ0ZvbnRTaXplID4gbWF4Rm9udFNpemUpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIG1heEZvbnRTaXplXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG1pbkZvbnRTaXplID4gbWF4Rml0dGluZ0ZvbnRTaXplKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBtaW5Gb250U2l6ZVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbWF4Rml0dGluZ0ZvbnRTaXplXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGRpZFJlY2VpdmVCcm9hZGNhc3RFdmVudChldmVudDogVUlWaWV3QnJvYWRjYXN0RXZlbnQpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmRpZFJlY2VpdmVCcm9hZGNhc3RFdmVudChldmVudClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHdpbGxNb3ZlVG9TdXBlcnZpZXcoc3VwZXJ2aWV3OiBVSVZpZXcpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLndpbGxNb3ZlVG9TdXBlcnZpZXcoc3VwZXJ2aWV3KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX2F1dG9tYXRpY0ZvbnRTaXplU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZm9udFNpemUgPSBVSVRleHRWaWV3LmF1dG9tYXRpY2FsbHlDYWxjdWxhdGVkRm9udFNpemUoXG4gICAgICAgICAgICAgICAgbmV3IFVJUmVjdGFuZ2xlKDAsIDAsIDEgKlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5vZmZzZXRIZWlnaHQsIDEgKlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5vZmZzZXRXaWR0aCksXG4gICAgICAgICAgICAgICAgdGhpcy5pbnRyaW5zaWNDb250ZW50U2l6ZSgpLFxuICAgICAgICAgICAgICAgIHRoaXMuZm9udFNpemUsXG4gICAgICAgICAgICAgICAgdGhpcy5fbWluRm9udFNpemUsXG4gICAgICAgICAgICAgICAgdGhpcy5fbWF4Rm9udFNpemVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW50cmluc2ljQ29udGVudEhlaWdodChjb25zdHJhaW5pbmdXaWR0aCA9IDApIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXNPZnRlbikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuaW50cmluc2ljQ29udGVudEhlaWdodChjb25zdHJhaW5pbmdXaWR0aClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGtleVBhdGggPSAodGhpcy52aWV3SFRNTEVsZW1lbnQuaW5uZXJIVE1MICsgXCJfY3NmX1wiICsgdGhpcy5jb21wdXRlZFN0eWxlLmZvbnQpLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcXFwuXCIsIFwiZ1wiKSwgXCJfXCIpICsgXCIuXCIgK1xuICAgICAgICAgICAgKFwiXCIgKyBjb25zdHJhaW5pbmdXaWR0aCkucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXC5cIiwgXCJnXCIpLCBcIl9cIilcbiAgICBcbiAgICAgICAgdmFyIHJlc3VsdCA9IFVJVGV4dFZpZXcuX2ludHJpbnNpY0hlaWdodENhY2hlLnZhbHVlRm9yS2V5UGF0aChrZXlQYXRoKVxuICAgIFxuICAgICAgICBpZiAoSVNfTElLRV9OVUxMKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gc3VwZXIuaW50cmluc2ljQ29udGVudEhlaWdodChjb25zdHJhaW5pbmdXaWR0aClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgVUlUZXh0Vmlldy5faW50cmluc2ljSGVpZ2h0Q2FjaGUuc2V0VmFsdWVGb3JLZXlQYXRoKGtleVBhdGgsIHJlc3VsdClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgaW50cmluc2ljQ29udGVudFdpZHRoKGNvbnN0cmFpbmluZ0hlaWdodCA9IDApIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmNoYW5nZXNPZnRlbikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuaW50cmluc2ljQ29udGVudFdpZHRoKGNvbnN0cmFpbmluZ0hlaWdodClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGtleVBhdGggPSAodGhpcy52aWV3SFRNTEVsZW1lbnQuaW5uZXJIVE1MICsgXCJfY3NmX1wiICsgdGhpcy5jb21wdXRlZFN0eWxlLmZvbnQpLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcXFwuXCIsIFwiZ1wiKSwgXCJfXCIpICsgXCIuXCIgK1xuICAgICAgICAgICAgKFwiXCIgKyBjb25zdHJhaW5pbmdIZWlnaHQpLnJlcGxhY2UobmV3IFJlZ0V4cChcIlxcXFwuXCIsIFwiZ1wiKSwgXCJfXCIpXG4gICAgXG4gICAgICAgIHZhciByZXN1bHQgPSBVSVRleHRWaWV3Ll9pbnRyaW5zaWNXaWR0aENhY2hlLnZhbHVlRm9yS2V5UGF0aChrZXlQYXRoKVxuICAgIFxuICAgICAgICBpZiAoSVNfTElLRV9OVUxMKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gc3VwZXIuaW50cmluc2ljQ29udGVudFdpZHRoKGNvbnN0cmFpbmluZ0hlaWdodClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgVUlUZXh0Vmlldy5faW50cmluc2ljV2lkdGhDYWNoZS5zZXRWYWx1ZUZvcktleVBhdGgoa2V5UGF0aCwgcmVzdWx0KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbnRyaW5zaWNDb250ZW50U2l6ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIFRoaXMgd29ya3MgYnV0IGlzIHNsb3dcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5pbnRyaW5zaWNDb250ZW50U2l6ZVdpdGhDb25zdHJhaW50cyhuaWwsIG5pbClcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuVUlUZXh0Vmlldy5fZGV0ZXJtaW5lUFhBbmRQVFJhdGlvcygpXG5cblxuXG5cblxuLy8gLyoqXG4vLyAgKiBVc2VzIGNhbnZhcy5tZWFzdXJlVGV4dCB0byBjb21wdXRlIGFuZCByZXR1cm4gdGhlIHdpZHRoIG9mIHRoZSBnaXZlbiB0ZXh0IG9mIGdpdmVuIGZvbnQgaW4gcGl4ZWxzLlxuLy8gICogXG4vLyAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBiZSByZW5kZXJlZC5cbi8vICAqIEBwYXJhbSB7U3RyaW5nfSBmb250IFRoZSBjc3MgZm9udCBkZXNjcmlwdG9yIHRoYXQgdGV4dCBpcyB0byBiZSByZW5kZXJlZCB3aXRoIChlLmcuIFwiYm9sZCAxNHB4IHZlcmRhbmFcIikuXG4vLyAgKiBcbi8vICAqIEBzZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTE4MjQxL2NhbGN1bGF0ZS10ZXh0LXdpZHRoLXdpdGgtamF2YXNjcmlwdC8yMTAxNTM5MyMyMTAxNTM5M1xuLy8gICovXG4vLyBmdW5jdGlvbiBnZXRUZXh0TWV0cmljcyh0ZXh0LCBmb250KSB7XG4vLyAgICAgLy8gcmUtdXNlIGNhbnZhcyBvYmplY3QgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuLy8gICAgIHZhciBjYW52YXMgPSBnZXRUZXh0TWV0cmljcy5jYW52YXMgfHwgKGdldFRleHRNZXRyaWNzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpO1xuLy8gICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbi8vICAgICBjb250ZXh0LmZvbnQgPSBmb250O1xuLy8gICAgIHZhciBtZXRyaWNzID0gY29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KTtcbi8vICAgICByZXR1cm4gbWV0cmljcztcbi8vIH1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSUNvcmUvVUlWaWV3Q29udHJvbGxlci50c1wiIC8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCJVSUNvcmUvVUlUZXh0Vmlldy50c1wiLz5cblxuXG5cblxuXG5jbGFzcyBHRVRFTEVDVGFibGVWaWV3Q29udHJvbGxlciBleHRlbmRzIFVJVmlld0NvbnRyb2xsZXIge1xuICAgIFxuICAgIFxuICAgIHByaXZhdGUgdGl0bGVMYWJlbDogVUlUZXh0Vmlld1xuICAgIHByaXZhdGUgaW5wdXRUZXh0QXJlYTogVUlUZXh0QXJlYVxuICAgIFxuICAgIFxuICAgIHByaXZhdGUgbG9hZERhdGFCdXR0b246IENCQnV0dG9uXG4gICAgY2hhcnRWaWV3OiBVSVZpZXdcbiAgICBjaGFydDogYW55XG4gICAgcHJpdmF0ZSByZXN1bHRzTGFiZWw6IFVJVmlld1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGxpbmcgc3VwZXJcbiAgICAgICAgc3VwZXIodmlldylcbiAgICAgICAgXG4gICAgICAgIC8vIENvZGUgZm9yIGZ1cnRoZXIgc2V0dXAgaWYgbmVjZXNzYXJ5XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBsb2FkSW50cm9zcGVjdGlvblZhcmlhYmxlcygpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxvYWRJbnRyb3NwZWN0aW9uVmFyaWFibGVzKClcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3Q29udHJvbGxlclxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIHJlYWRvbmx5IHJvdXRlQ29tcG9uZW50TmFtZSA9IFwiZml0X2Z1bmFzZGFzZFwiXG4gICAgXG4gICAgc3RhdGljIHJlYWRvbmx5IFBhcmFtZXRlcklkZW50aWZpZXJOYW1lID0geyBcIklEXCI6IFwiSURcIiB9XG4gICAgXG4gICAgXG4gICAgbG9hZFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3LmJhY2tncm91bmRDb2xvciA9IFVJQ29sb3Iud2hpdGVDb2xvclxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbCA9IG5ldyBVSVRleHRWaWV3KHRoaXMudmlldy5lbGVtZW50SUQgKyBcIlRpdGxlTGFiZWxcIiwgVUlUZXh0Vmlldy50eXBlLmhlYWRlcjQpXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0QWxpZ25tZW50ID0gVUlUZXh0Vmlldy50ZXh0QWxpZ25tZW50LmxlZnRcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLm5hdGl2ZVNlbGVjdGlvbkVuYWJsZWQgPSBOT1xuICAgICAgICB0aGlzLnRpdGxlTGFiZWwuaXNTaW5nbGVMaW5lID0gTk9cbiAgICAgICAgdGhpcy52aWV3LmFkZFN1YnZpZXcodGhpcy50aXRsZUxhYmVsKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0QXJlYSA9IG5ldyBVSVRleHRBcmVhKHRoaXMudmlldy5lbGVtZW50SUQgKyBcIklucHV0VGV4dEFyZWFcIilcbiAgICAgICAgdGhpcy5pbnB1dFRleHRBcmVhLnBsYWNlaG9sZGVyVGV4dCA9IFwiSW5wdXQgeW91ciBkYXRhIGhlcmUuXCJcbiAgICAgICAgdGhpcy5pbnB1dFRleHRBcmVhLmNoYW5nZXNPZnRlbiA9IFlFU1xuICAgICAgICB0aGlzLnZpZXcuYWRkU3Vidmlldyh0aGlzLmlucHV0VGV4dEFyZWEpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5sb2FkRGF0YUJ1dHRvbiA9IG5ldyBDQkJ1dHRvbigpXG4gICAgICAgIHRoaXMubG9hZERhdGFCdXR0b24udGl0bGVMYWJlbC50ZXh0ID0gXCJMb2FkIGRhdGFcIlxuICAgICAgICB0aGlzLnZpZXcuYWRkU3Vidmlldyh0aGlzLmxvYWREYXRhQnV0dG9uKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5sb2FkRGF0YUJ1dHRvbi5lbmFibGVkID0gTk9cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5yZXN1bHRzTGFiZWwgPSBuZXcgVUlWaWV3KClcbiAgICAgICAgdGhpcy5yZXN1bHRzTGFiZWwuaW5uZXJIVE1MID0gXCJSZXN1bHRzXCJcbiAgICAgICAgdGhpcy5yZXN1bHRzTGFiZWwuaGlkZGVuID0gWUVTXG4gICAgICAgIHRoaXMudmlldy5hZGRTdWJ2aWV3KHRoaXMucmVzdWx0c0xhYmVsKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2hhcnRWaWV3ID0gbmV3IFVJVmlldyhcIlJlc3VsdERhdGFDaGFydFwiLCBuaWwsIFwiY2FudmFzXCIpXG4gICAgICAgIHRoaXMuY2hhcnRWaWV3LmhpZGRlbiA9IFlFU1xuICAgICAgICB0aGlzLnZpZXcuYWRkU3Vidmlldyh0aGlzLmNoYXJ0VmlldylcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmlucHV0VGV4dEFyZWEuYWRkQ29udHJvbEV2ZW50VGFyZ2V0LlRleHRDaGFuZ2UgPSAoc2VuZGVyLCBldmVudCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNlbmRlcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudmlldy5zZXROZWVkc0xheW91dFVwVG9Sb290VmlldygpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubG9hZERhdGFCdXR0b24uZW5hYmxlZCA9IElTKHRoaXMuaW5wdXRUZXh0QXJlYS50ZXh0KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuY2hhcnRWaWV3LnZpZXdIVE1MRWxlbWVudC5nZXRDb250ZXh0KFwiMmRcIilcbiAgICAgICAgXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5jaGFydCA9IG5ldyBDaGFydChjdHgsIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIG9mIGNoYXJ0IHdlIHdhbnQgdG8gY3JlYXRlXG4gICAgICAgICAgICAvL3R5cGU6IFwibGluZVwiLFxuICAgICAgICAgICAgdHlwZTogXCJzY2F0dGVyXCIsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRoZSBkYXRhIGZvciBvdXIgZGF0YXNldFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIC8vbGFiZWxzOiBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnXSxcbiAgICAgICAgICAgICAgICBkYXRhc2V0czogW1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiSW5wdXQgRGF0YVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lVGVuc2lvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFja2dyb3VuZENvbG9yOiBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogXCJyZ2IoMTI1LCAxMTUsIDI1MilcIiAvLyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZGF0YTogW3sgeDogMCwgeTogMCB9LCB7IHg6IDIsIHk6IDEwIH0sIHsgeDogNSwgeTogNSB9LCB7IHg6IDcsIHk6IDIgfSwgeyB4OiA4LCB5OiAyMCB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB4OiAxMSwgeTogNDUgfV1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiRml0dGVkIHRoZW9yZXRpY2FsIGxpbmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZVRlbnNpb246IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiKDI1NSwgOTksIDEzMilcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcInJnYigyNTUsIDk5LCAxMzIpXCIgLy8sXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2RhdGE6IFt7IHg6IDAsIHk6IDAgfSwgeyB4OiAyLCB5OiAxMCB9LCB7IHg6IDUsIHk6IDUgfSwgeyB4OiA3LCB5OiAyIH0sIHsgeDogOCwgeTogMjAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8geDogMTEsIHk6IDQ1IH1dXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZ28gaGVyZVxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZpbGw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxpbmVUZW5zaW9uOiAwLFxuICAgICAgICAgICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxpbmVhclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsb2dhcml0aG1pY1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYm90dG9tXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeUF4ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxvZ2FyaXRobWljXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDEwMDAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMTAwMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIjFNXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMTAwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiMTAwS1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDEwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiMTBLXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMTAwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIjFLXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIxMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIxXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRvb2x0aXBzOiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiaW50ZXJwb2xhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgICAgICAgICAgIGNyb3NzaGFpcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNGNjZcIiwgIC8vIGNyb3NzaGFpciBsaW5lIGNvbG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEgICAgICAgIC8vIGNyb3NzaGFpciBsaW5lIHdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3luYzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsICAgICAgICAgICAgLy8gZW5hYmxlIHRyYWNlIGxpbmUgc3luY2luZyB3aXRoIG90aGVyIGNoYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiAxLCAgICAgICAgICAgICAgICAgLy8gY2hhcnQgZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwcmVzc1Rvb2x0aXBzOiBmYWxzZSAgIC8vIHN1cHByZXNzIHRvb2x0aXBzIHdoZW4gc2hvd2luZyBhIHN5bmNlZCB0cmFjZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogTk8sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgem9vbWluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb21ib3hCYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSg2NiwxMzMsMjQ0LDAuMilcIiwgICAgIC8vIGJhY2tncm91bmQgY29sb3Igb2Ygem9vbSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tYm94Qm9yZGVyQ29sb3I6IFwiIzQ4RlwiLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3JkZXIgY29sb3Igb2Ygem9vbSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tQnV0dG9uVGV4dDogXCJSZXNldCBab29tXCIsICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCB6b29tIGJ1dHRvbiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbUJ1dHRvbkNsYXNzOiBcInJlc2V0LXpvb21cIiAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCB6b29tIGJ1dHRvbiBjbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVpvb206IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7ICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIGJlZm9yZSB6b29tLCByZXR1cm4gZmFsc2UgdG8gcHJldmVudCB6b29tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlclpvb206IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7ICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBhZnRlciB6b29tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIHNob3dTY2FsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5sb2FkRGF0YUJ1dHRvbi5hZGRDb250cm9sRXZlbnRUYXJnZXQuRW50ZXJEb3duLlBvaW50ZXJVcEluc2lkZSA9IGFzeW5jIChzZW5kZXIsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coc2VuZGVyKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgQ0JEaWFsb2dWaWV3U2hvd2VyLnNob3dBY3Rpb25JbmRpY2F0b3JEaWFsb2coXCJMb2FkaW5nLlwiKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ1NvY2tldENsaWVudFJlc3VsdCA9IGF3YWl0IFNvY2tldENsaWVudC5QZXJmb3JtRml0RnVuKHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXREYXRhOiB0aGlzLmlucHV0VGV4dEFyZWEudGV4dFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKElTKHN0cmluZ1NvY2tldENsaWVudFJlc3VsdC5lcnJvclJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cmluZ1NvY2tldENsaWVudFJlc3VsdC5lcnJvclJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5hbGVydChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRmFpbGVkIHRvIGFuYWx5emUgZGF0YS4gXCIgKyBKU09OLnN0cmluZ2lmeShzdHJpbmdTb2NrZXRDbGllbnRSZXN1bHQuZXJyb3JSZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShzdHJpbmdTb2NrZXRDbGllbnRSZXN1bHQucmVzdWx0KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzdWx0KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c0xhYmVsLmlubmVySFRNTCA9IEZJUlNUKHJlc3VsdC5yZXN1bHRIVE1MU3RyaW5nLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgICArIElGKElTX05PVChyZXN1bHQucmVzdWx0SFRNTFN0cmluZykpKFJFVFVSTkVSKFxuICAgICAgICAgICAgICAgICAgICAgICAgYFxcclxcblJhZGl1czogJHsgcmVzdWx0LlJhZGl1cyB9IFxcclxcbmJldGE6ICR7IHJlc3VsdC5iZXRhIH0gXFxyXFxuc2lnbWFfQWVmZjogJHsgcmVzdWx0LnNpZ21hX0FlZmYgfWBcbiAgICAgICAgICAgICAgICAgICAgKSkoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50UG9pbnRzID0gdGhpcy5wb2ludE9iamVjdHNGcm9tVmFsdWVzKHJlc3VsdC54cGxvdF9tcmssIHJlc3VsdC55cGxvdF9tcmspXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZVBvaW50cyA9IHRoaXMucG9pbnRPYmplY3RzRnJvbVZhbHVlcyhyZXN1bHQueHBsb3RfbGluZSwgcmVzdWx0LnlwbG90X2xpbmUpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzBdLmRhdGEgPSBwb2ludFBvaW50c1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1swXS5zaG93TGluZSA9IE5PXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzFdLmRhdGEgPSBsaW5lUG9pbnRzXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzFdLnNob3dMaW5lID0gWUVTXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzFdLnBvaW50UmFkaXVzID0gMFxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1sxXS5pbnRlcnBvbGF0ZSA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueEF4ZXNbMF0uc2NhbGVMYWJlbC5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueEF4ZXNbMF0uc2NhbGVMYWJlbC5sYWJlbFN0cmluZyA9IFwiXCIgKyBGSVJTVChyZXN1bHQueEF4aXNVbml0LCBcIlwiKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueUF4ZXNbMF0uc2NhbGVMYWJlbC5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueUF4ZXNbMF0uc2NhbGVMYWJlbC5sYWJlbFN0cmluZyA9IFwiXCIgKyBGSVJTVChyZXN1bHQueUF4aXNVbml0LCBcIlwiKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c0xhYmVsLmhpZGRlbiA9IE5PXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydFZpZXcuaGlkZGVuID0gTk9cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0LnVwZGF0ZSgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldE5lZWRzTGF5b3V0VXBUb1Jvb3RWaWV3KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4Y2VwdGlvbilcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBDQkRpYWxvZ1ZpZXdTaG93ZXIuYWxlcnQoXCJGYWlsZWQgdG8gZGlzcGxheSByZXN1bHRzLiBcIiArIEpTT04uc3RyaW5naWZ5KGV4Y2VwdGlvbikpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5oaWRlQWN0aW9uSW5kaWNhdG9yRGlhbG9nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBwcml2YXRlIHBvaW50T2JqZWN0c0Zyb21WYWx1ZXMoeFZhbHVlcywgeVZhbHVlcykge1xuICAgICAgICBcbiAgICAgICAgdmFyIHJlc3VsdFBvaW50czogYW55W10gPSBbXVxuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4VmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgeSA9IHlWYWx1ZXNbaV1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0UG9pbnRzLnB1c2goeyB4OiB4LCB5OiB5IH0pXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFBvaW50c1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgYXN5bmMgaGFuZGxlUm91dGUocm91dGU6IFVJUm91dGUpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmhhbmRsZVJvdXRlKHJvdXRlKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5xdWlyeUNvbXBvbmVudCA9IHJvdXRlLmNvbXBvbmVudFdpdGhWaWV3Q29udHJvbGxlcihHRVRFTEVDVGFibGVWaWV3Q29udHJvbGxlcilcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0ID0gXCJFbnRlciB5b3VyIGRhdGEgYW5kIHByZXNzIHRoZSBsb2FkIGJ1dHRvbi4gVEFCTEUgVklFV1wiXG4gICAgICAgIFxuICAgICAgICByb3V0ZS5kaWRjb21wbGV0ZUNvbXBvbmVudChpbnF1aXJ5Q29tcG9uZW50KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0Vmlld3NNYW51YWxseSgpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFZpZXdzTWFudWFsbHkoKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcGFkZGluZyA9IFJvb3RWaWV3Q29udHJvbGxlci5wYWRkaW5nTGVuZ3RoXG4gICAgICAgIGNvbnN0IGxhYmVsSGVpZ2h0ID0gcGFkZGluZyAqIDEuMjVcbiAgICAgICAgXG4gICAgICAgIC8vIFZpZXcgYm91bmRzXG4gICAgICAgIHZhciBib3VuZHMgPSB0aGlzLnZpZXcuYm91bmRzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXcuc2V0UGFkZGluZ3MoMCwgMCwgcGFkZGluZywgMClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLmZyYW1lID0gYm91bmRzLnJlY3RhbmdsZVdpdGhJbnNldHMocGFkZGluZywgcGFkZGluZywgMCwgcGFkZGluZylcbiAgICAgICAgLnJlY3RhbmdsZVdpdGhIZWlnaHQodGhpcy50aXRsZUxhYmVsLmludHJpbnNpY0NvbnRlbnRIZWlnaHQoYm91bmRzLndpZHRoKSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0QXJlYS5mcmFtZSA9IHRoaXMudGl0bGVMYWJlbC5mcmFtZS5yZWN0YW5nbGVGb3JOZXh0Um93KFxuICAgICAgICAgICAgcGFkZGluZyAqIDAuMjUsXG4gICAgICAgICAgICB0aGlzLmlucHV0VGV4dEFyZWEuaW50cmluc2ljQ29udGVudEhlaWdodCh0aGlzLnRpdGxlTGFiZWwuZnJhbWUud2lkdGgpICsgNVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5sb2FkRGF0YUJ1dHRvbi5mcmFtZSA9IHRoaXMuaW5wdXRUZXh0QXJlYS5mcmFtZS5yZWN0YW5nbGVGb3JOZXh0Um93KHBhZGRpbmcsIGxhYmVsSGVpZ2h0ICogMilcbiAgICAgICAgXG4gICAgICAgIHRoaXMubG9hZERhdGFCdXR0b24uc2V0TWFyZ2lucygwLCAwLCBwYWRkaW5nLCAwKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVzdWx0c0xhYmVsLmZyYW1lID0gdGhpcy5sb2FkRGF0YUJ1dHRvbi5mcmFtZS5yZWN0YW5nbGVGb3JOZXh0Um93KHBhZGRpbmcpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5jaGFydFZpZXcuZnJhbWUgPSB0aGlzLnJlc3VsdHNMYWJlbC5mcmFtZS5yZWN0YW5nbGVGb3JOZXh0Um93KFxuICAgICAgICAgICAgcGFkZGluZyxcbiAgICAgICAgICAgIHRoaXMubG9hZERhdGFCdXR0b24uZnJhbWUud2lkdGggKiAwLjVcbiAgICAgICAgKVxuICAgICAgICAvLy5yZWN0YW5nbGVXaXRoSW5zZXRzKHBhZGRpbmcgKiA1ICogMCwgcGFkZGluZyAqIDUsIDAsIDApXG4gICAgICAgIC8vLnJlY3RhbmdsZUJ5QWRkaW5nWCgtcGFkZGluZylcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5jaGFydFZpZXcuc2V0UGFkZGluZyhwYWRkaW5nKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2hhcnRWaWV3LnNldE1heFNpemVzKHRoaXMuY2hhcnRWaWV3LmZyYW1lLmhlaWdodCwgdGhpcy5jaGFydFZpZXcuZnJhbWUud2lkdGgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGludHJpbnNpY1ZpZXdDb250ZW50SGVpZ2h0KGNvbnN0cmFpbmluZ1dpZHRoOiBudW1iZXIgPSAwKTogbnVtYmVyIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSBSb290Vmlld0NvbnRyb2xsZXIucGFkZGluZ0xlbmd0aFxuICAgICAgICBjb25zdCBsYWJlbEhlaWdodCA9IHBhZGRpbmcgKiAxLjVcbiAgICAgICAgXG4gICAgICAgIHZhciByZXN1bHQgPSBwYWRkaW5nICsgdGhpcy50aXRsZUxhYmVsLmludHJpbnNpY0NvbnRlbnRIZWlnaHQoY29uc3RyYWluaW5nV2lkdGgpICsgcGFkZGluZyAqIDAuMjUgK1xuICAgICAgICAgICAgbGFiZWxIZWlnaHQgKiAyICsgcGFkZGluZyAqIDAuNSArIHBhZGRpbmcgK1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRleHRBcmVhLmludHJpbnNpY0NvbnRlbnRIZWlnaHQoY29uc3RyYWluaW5nV2lkdGgpXG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHRoaXMuY2hhcnRWaWV3LmhpZGRlbikpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgcGFkZGluZyArIChjb25zdHJhaW5pbmdXaWR0aCAtIHBhZGRpbmcgKiAyKSAqIDAuNSArIHBhZGRpbmcgKyBsYWJlbEhlaWdodCAqIDJcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG59XG5cblxuLy8gQHRzLWlnbm9yZVxuQ2hhcnQuSW50ZXJhY3Rpb24ubW9kZXNbXCJpbnRlcnBvbGF0ZVwiXSA9IGZ1bmN0aW9uIChjaGFydCwgZSwgb3B0aW9ucykge1xuICAgIFxuICAgIC8vIFRoaXMgZnVuY3Rpb24gaGFzIGEgc2VwYXJhdGUgbGljZW5zZVxuICAgIFxuICAgIC8vIE1JVCBMaWNlbnNlXG4gICAgLy9cbiAgICAvLyBDb3B5cmlnaHQgKGMpIDIwMTggQWJlbCBIZWluc2Jyb2VrXG4gICAgLy9cbiAgICAvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gICAgLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICAgIC8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbiAgICAvLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4gICAgLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gICAgLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAgICAvL1xuICAgIC8vICAgICBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbiAgICAvLyBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICAgIC8vXG4gICAgLy8gICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiAgICAvLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAgICAvLyAgICAgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gICAgLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICAgIC8vIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gICAgLy8gICAgIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG4gICAgLy8gU09GVFdBUkUuXG4gICAgXG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICBcbiAgICBmb3IgKHZhciBkYXRhc2V0SW5kZXggPSAwOyBkYXRhc2V0SW5kZXggPCBjaGFydC5kYXRhLmRhdGFzZXRzLmxlbmd0aDsgZGF0YXNldEluZGV4KyspIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBjaGVjayBmb3IgaW50ZXJwb2xhdGUgc2V0dGluZ1xuICAgICAgICBpZiAoIWNoYXJ0LmRhdGEuZGF0YXNldHNbZGF0YXNldEluZGV4XS5pbnRlcnBvbGF0ZSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIG1ldGEgPSBjaGFydC5nZXREYXRhc2V0TWV0YShkYXRhc2V0SW5kZXgpXG4gICAgICAgIC8vIGRvIG5vdCBpbnRlcnBvbGF0ZSBoaWRkZW4gY2hhcnRzXG4gICAgICAgIGlmIChtZXRhLmhpZGRlbikge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHZhciB4U2NhbGUgPSBjaGFydC5zY2FsZXNbbWV0YS54QXhpc0lEXVxuICAgICAgICB2YXIgeVNjYWxlID0gY2hhcnQuc2NhbGVzW21ldGEueUF4aXNJRF1cbiAgICAgICAgXG4gICAgICAgIHZhciB4VmFsdWUgPSB4U2NhbGUuZ2V0VmFsdWVGb3JQaXhlbChlLngpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdmFyIGRhdGEgPSBjaGFydC5kYXRhLmRhdGFzZXRzW2RhdGFzZXRJbmRleF0uZGF0YVxuICAgICAgICBcbiAgICAgICAgdmFyIGluZGV4ID0gZGF0YS5maW5kSW5kZXgoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgIHJldHVybiBvLnggPj0geFZhbHVlXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gbGluZWFyIGludGVycG9sYXRlIHZhbHVlXG4gICAgICAgIHZhciBwcmV2ID0gZGF0YVtpbmRleCAtIDFdXG4gICAgICAgIHZhciBuZXh0ID0gZGF0YVtpbmRleF1cbiAgICAgICAgXG4gICAgICAgIGlmIChwcmV2ICYmIG5leHQpIHtcbiAgICAgICAgICAgIHZhciBzbG9wZSA9IChuZXh0LnkgLSBwcmV2LnkpIC8gKG5leHQueCAtIHByZXYueClcbiAgICAgICAgICAgIHZhciBpbnRlcnBvbGF0ZWRWYWx1ZSA9IHByZXYueSArICh4VmFsdWUgLSBwcmV2LngpICogc2xvcGVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGNoYXJ0LmRhdGEuZGF0YXNldHNbZGF0YXNldEluZGV4XS5zdGVwcGVkTGluZSAmJiBwcmV2KSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZWRWYWx1ZSA9IHByZXYueVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoaXNOYU4oaW50ZXJwb2xhdGVkVmFsdWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgeVBvc2l0aW9uID0geVNjYWxlLmdldFBpeGVsRm9yVmFsdWUoaW50ZXJwb2xhdGVkVmFsdWUpXG4gICAgICAgIFxuICAgICAgICAvLyBkbyBub3QgaW50ZXJwb2xhdGUgdmFsdWVzIG91dHNpZGUgb2YgdGhlIGF4aXMgbGltaXRzXG4gICAgICAgIGlmIChpc05hTih5UG9zaXRpb24pKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBjcmVhdGUgYSAnZmFrZScgZXZlbnQgcG9pbnRcbiAgICAgICAgXG4gICAgICAgIHZhciBmYWtlUG9pbnQgPSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhbHVlOiBpbnRlcnBvbGF0ZWRWYWx1ZSxcbiAgICAgICAgICAgIHhWYWx1ZTogeFZhbHVlLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0b29sdGlwUG9zaXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbW9kZWxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXNWYWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21vZGVsOiB7XG4gICAgICAgICAgICAgICAgeDogZS54LFxuICAgICAgICAgICAgICAgIHk6IHlQb3NpdGlvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9kYXRhc2V0SW5kZXg6IGRhdGFzZXRJbmRleCxcbiAgICAgICAgICAgIF9pbmRleDogaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgX3hTY2FsZToge1xuICAgICAgICAgICAgICAgIGdldExhYmVsRm9ySW5kZXg6IGZ1bmN0aW9uIChpbmR4KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsZXQgeFZhbHVlOiBudW1iZXIgPSBpdGVtc1tpbmR4XS54VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHhWYWx1ZSA9IHhWYWx1ZS50b1ByZWNpc2lvbig1KSBhcyBhbnlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF95U2NhbGU6IHtcbiAgICAgICAgICAgICAgICBnZXRMYWJlbEZvckluZGV4OiBmdW5jdGlvbiAoaW5keCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gaXRlbXNbaW5keF0udmFsdWUudG9QcmVjaXNpb24oNSlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoYXJ0OiBjaGFydFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGl0ZW1zLnB1c2goZmFrZVBvaW50KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gYWRkIG90aGVyLCBub3QgaW50ZXJwb2xhdGVkLCBpdGVtc1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICB2YXIgeEl0ZW1zID0gQ2hhcnQuSW50ZXJhY3Rpb24ubW9kZXMueChjaGFydCwgZSwgb3B0aW9ucylcbiAgICBcbiAgICB4SXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgsIGFycmF5KSA9PiB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKCFjaGFydC5kYXRhLmRhdGFzZXRzW2l0ZW0uX2RhdGFzZXRJbmRleF0uaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9KVxuICAgIFxuICAgIFxuICAgIFxuICAgIHJldHVybiBpdGVtc1xufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL1VJQ29yZS9VSVZpZXdDb250cm9sbGVyLnRzXCIgLz5cbi8vLzxyZWZlcmVuY2UgcGF0aD1cIlVJQ29yZS9VSVRleHRWaWV3LnRzXCIvPlxuXG5cblxuXG5cbmNsYXNzIEdFVEVMRUNWaWV3Q29udHJvbGxlciBleHRlbmRzIFVJVmlld0NvbnRyb2xsZXIge1xuICAgIFxuICAgIFxuICAgIHByaXZhdGUgdGl0bGVMYWJlbDogVUlUZXh0Vmlld1xuICAgIHByaXZhdGUgaW5wdXRUZXh0QXJlYTogVUlUZXh0QXJlYVxuICAgIFxuICAgIFxuICAgIHByaXZhdGUgbG9hZERhdGFCdXR0b246IENCQnV0dG9uXG4gICAgY2hhcnRWaWV3OiBVSVZpZXdcbiAgICBjaGFydDogYW55XG4gICAgcHJpdmF0ZSByZXN1bHRzTGFiZWw6IFVJVmlld1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKHZpZXcpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGxpbmcgc3VwZXJcbiAgICAgICAgc3VwZXIodmlldylcbiAgICAgICAgXG4gICAgICAgIC8vIENvZGUgZm9yIGZ1cnRoZXIgc2V0dXAgaWYgbmVjZXNzYXJ5XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBsb2FkSW50cm9zcGVjdGlvblZhcmlhYmxlcygpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxvYWRJbnRyb3NwZWN0aW9uVmFyaWFibGVzKClcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3Q29udHJvbGxlclxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIHJlYWRvbmx5IHJvdXRlQ29tcG9uZW50TmFtZSA9IFwiZml0X2Z1blwiXG4gICAgXG4gICAgc3RhdGljIHJlYWRvbmx5IFBhcmFtZXRlcklkZW50aWZpZXJOYW1lID0geyBcIklEXCI6IFwiSURcIiB9XG4gICAgXG4gICAgXG4gICAgbG9hZFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3LmJhY2tncm91bmRDb2xvciA9IFVJQ29sb3Iud2hpdGVDb2xvclxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbCA9IG5ldyBVSVRleHRWaWV3KHRoaXMudmlldy5lbGVtZW50SUQgKyBcIlRpdGxlTGFiZWxcIiwgVUlUZXh0Vmlldy50eXBlLmhlYWRlcjMpXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0QWxpZ25tZW50ID0gVUlUZXh0Vmlldy50ZXh0QWxpZ25tZW50LmxlZnRcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLm5hdGl2ZVNlbGVjdGlvbkVuYWJsZWQgPSBOT1xuICAgICAgICB0aGlzLnRpdGxlTGFiZWwuaXNTaW5nbGVMaW5lID0gTk9cbiAgICAgICAgdGhpcy52aWV3LmFkZFN1YnZpZXcodGhpcy50aXRsZUxhYmVsKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0QXJlYSA9IG5ldyBVSVRleHRBcmVhKHRoaXMudmlldy5lbGVtZW50SUQgKyBcIklucHV0VGV4dEFyZWFcIilcbiAgICAgICAgdGhpcy5pbnB1dFRleHRBcmVhLnBsYWNlaG9sZGVyVGV4dCA9IFwie1xcclxcblxcXCJWb2x0YWdlXFxcIjogWzIuNDEzZSswMiwgMy4zMDVlKzAyLCAgNC45OTNlKzAyXSxcXHJcXG5cIiArXG4gICAgICAgICAgICBcIlxcXCJDdXJyZW50XFxcIjogWzguNzE5ZS0wMSwgMy42NzBlKzAxLCA1LjYxN2UrMDNdLCBcXHJcXG5cXFwiV29ya19mdW5jdGlvblxcXCI6IDQuNVxcclxcbn1cIlxuICAgICAgICB0aGlzLmlucHV0VGV4dEFyZWEuY2hhbmdlc09mdGVuID0gWUVTXG4gICAgICAgIHRoaXMudmlldy5hZGRTdWJ2aWV3KHRoaXMuaW5wdXRUZXh0QXJlYSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmxvYWREYXRhQnV0dG9uID0gbmV3IENCQnV0dG9uKClcbiAgICAgICAgdGhpcy5sb2FkRGF0YUJ1dHRvbi50aXRsZUxhYmVsLnRleHQgPSBcIkxvYWQgZGF0YVwiXG4gICAgICAgIHRoaXMudmlldy5hZGRTdWJ2aWV3KHRoaXMubG9hZERhdGFCdXR0b24pXG4gICAgICAgIFxuICAgICAgICB0aGlzLmxvYWREYXRhQnV0dG9uLmVuYWJsZWQgPSBOT1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlc3VsdHNMYWJlbCA9IG5ldyBVSVZpZXcoKVxuICAgICAgICB0aGlzLnJlc3VsdHNMYWJlbC5pbm5lckhUTUwgPSBcIlJlc3VsdHNcIlxuICAgICAgICB0aGlzLnJlc3VsdHNMYWJlbC5oaWRkZW4gPSBZRVNcbiAgICAgICAgdGhpcy52aWV3LmFkZFN1YnZpZXcodGhpcy5yZXN1bHRzTGFiZWwpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5jaGFydFZpZXcgPSBuZXcgVUlWaWV3KFwiUmVzdWx0RGF0YUNoYXJ0XCIsIG5pbCwgXCJjYW52YXNcIilcbiAgICAgICAgdGhpcy5jaGFydFZpZXcuaGlkZGVuID0gWUVTXG4gICAgICAgIHRoaXMudmlldy5hZGRTdWJ2aWV3KHRoaXMuY2hhcnRWaWV3KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5wdXRUZXh0QXJlYS5hZGRDb250cm9sRXZlbnRUYXJnZXQuVGV4dENoYW5nZSA9IChzZW5kZXIsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coc2VuZGVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy52aWV3LnNldE5lZWRzTGF5b3V0VXBUb1Jvb3RWaWV3KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5sb2FkRGF0YUJ1dHRvbi5lbmFibGVkID0gSVModGhpcy5pbnB1dFRleHRBcmVhLnRleHQpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jaGFydFZpZXcudmlld0hUTUxFbGVtZW50LmdldENvbnRleHQoXCIyZFwiKVxuICAgICAgICBcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLmNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xuICAgICAgICAgICAgLy8gVGhlIHR5cGUgb2YgY2hhcnQgd2Ugd2FudCB0byBjcmVhdGVcbiAgICAgICAgICAgIC8vdHlwZTogXCJsaW5lXCIsXG4gICAgICAgICAgICB0eXBlOiBcInNjYXR0ZXJcIixcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhlIGRhdGEgZm9yIG91ciBkYXRhc2V0XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgLy9sYWJlbHM6IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZSddLFxuICAgICAgICAgICAgICAgIGRhdGFzZXRzOiBbXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJJbnB1dCBkYXRhIHBvaW50c1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lVGVuc2lvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFja2dyb3VuZENvbG9yOiBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogXCJyZ2IoODcsIDE3MywgMTIyKVwiIC8vLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhOiBbeyB4OiAwLCB5OiAwIH0sIHsgeDogMiwgeTogMTAgfSwgeyB4OiA1LCB5OiA1IH0sIHsgeDogNywgeTogMiB9LCB7IHg6IDgsIHk6IDIwIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHg6IDExLCB5OiA0NSB9XVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJGaXR0ZWQgbGluZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lVGVuc2lvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2IoMjEzLCAxNTAsIDEwMilcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBcInJnYigyMTMsIDE1MCwgMTAyKVwiIC8vLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhOiBbeyB4OiAwLCB5OiAwIH0sIHsgeDogMiwgeTogMTAgfSwgeyB4OiA1LCB5OiA1IH0sIHsgeDogNywgeTogMiB9LCB7IHg6IDgsIHk6IDIwIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHg6IDExLCB5OiA0NSB9XVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGdvIGhlcmVcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmaWxsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsaW5lVGVuc2lvbjogMCxcbiAgICAgICAgICAgICAgICBzY2FsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsaW5lYXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibG9nYXJpdGhtaWNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImJvdHRvbVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHlBeGVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsb2dhcml0aG1pY1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxMDAwMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDEwMDAwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIxTVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDEwMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIjEwMEtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAxMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIjEwS1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDEwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIxS1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIjEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiMTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRvb2x0aXBzOiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IFwiaW50ZXJwb2xhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0OiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwbHVnaW5zOiB7XG4gICAgICAgICAgICAgICAgICAgIGNyb3NzaGFpcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNGNjZcIiwgIC8vIGNyb3NzaGFpciBsaW5lIGNvbG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEgICAgICAgIC8vIGNyb3NzaGFpciBsaW5lIHdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3luYzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsICAgICAgICAgICAgLy8gZW5hYmxlIHRyYWNlIGxpbmUgc3luY2luZyB3aXRoIG90aGVyIGNoYXJ0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiAxLCAgICAgICAgICAgICAgICAgLy8gY2hhcnQgZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwcmVzc1Rvb2x0aXBzOiBmYWxzZSAgIC8vIHN1cHByZXNzIHRvb2x0aXBzIHdoZW4gc2hvd2luZyBhIHN5bmNlZCB0cmFjZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogTk8sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgem9vbWluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb21ib3hCYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSg2NiwxMzMsMjQ0LDAuMilcIiwgICAgIC8vIGJhY2tncm91bmQgY29sb3Igb2Ygem9vbSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tYm94Qm9yZGVyQ29sb3I6IFwiIzQ4RlwiLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3JkZXIgY29sb3Igb2Ygem9vbSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tQnV0dG9uVGV4dDogXCJSZXNldCBab29tXCIsICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCB6b29tIGJ1dHRvbiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbUJ1dHRvbkNsYXNzOiBcInJlc2V0LXpvb21cIiAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCB6b29tIGJ1dHRvbiBjbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZVpvb206IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7ICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIGJlZm9yZSB6b29tLCByZXR1cm4gZmFsc2UgdG8gcHJldmVudCB6b29tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlclpvb206IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7ICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBhZnRlciB6b29tXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJlc3BvbnNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIHNob3dTY2FsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5sb2FkRGF0YUJ1dHRvbi5hZGRDb250cm9sRXZlbnRUYXJnZXQuRW50ZXJEb3duLlBvaW50ZXJVcEluc2lkZSA9IGFzeW5jIChzZW5kZXIsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coc2VuZGVyKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgQ0JEaWFsb2dWaWV3U2hvd2VyLnNob3dBY3Rpb25JbmRpY2F0b3JEaWFsb2coXCJMb2FkaW5nLlwiKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ1NvY2tldENsaWVudFJlc3VsdCA9IGF3YWl0IFNvY2tldENsaWVudC5QZXJmb3JtRml0RnVuKHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXREYXRhOiB0aGlzLmlucHV0VGV4dEFyZWEudGV4dFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKElTKHN0cmluZ1NvY2tldENsaWVudFJlc3VsdC5lcnJvclJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cmluZ1NvY2tldENsaWVudFJlc3VsdC5lcnJvclJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5hbGVydChcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRmFpbGVkIHRvIGFuYWx5emUgZGF0YS4gXCIgKyBKU09OLnN0cmluZ2lmeShzdHJpbmdTb2NrZXRDbGllbnRSZXN1bHQuZXJyb3JSZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5oaWRlQWN0aW9uSW5kaWNhdG9yRGlhbG9nKClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShzdHJpbmdTb2NrZXRDbGllbnRSZXN1bHQucmVzdWx0KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzdWx0KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c0xhYmVsLmlubmVySFRNTCA9IEZJUlNUKHJlc3VsdC5yZXN1bHRIVE1MU3RyaW5nLCBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgIElGKElTX05PVChyZXN1bHQucmVzdWx0SFRNTFN0cmluZykpKFJFVFVSTkVSKGBSYWRpdXM6ICR7IHJlc3VsdC5SYWRpdXMgfSA8YnI+XG4gICAgICAgICAgICAgICAgICAgICAmYmV0YTs6ICR7IHJlc3VsdC5iZXRhIH0gPGJyPlxuICAgICAgICAgICAgICAgICAgICAgJnNpZ21hO0FlZmY6ICR7IHJlc3VsdC5zaWdtYV9BZWZmIH08YnI+YCkpXG4gICAgICAgICAgICAgICAgICAgIC5FTFNFKFJFVFVSTkVSKFwiXCIpKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHBvaW50UG9pbnRzID0gdGhpcy5wb2ludE9iamVjdHNGcm9tVmFsdWVzKHJlc3VsdC54cGxvdF9tcmssIHJlc3VsdC55cGxvdF9tcmspXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZVBvaW50cyA9IHRoaXMucG9pbnRPYmplY3RzRnJvbVZhbHVlcyhyZXN1bHQueHBsb3RfbGluZSwgcmVzdWx0LnlwbG90X2xpbmUpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzBdLmRhdGEgPSBwb2ludFBvaW50c1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1swXS5zaG93TGluZSA9IE5PXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzFdLmRhdGEgPSBsaW5lUG9pbnRzXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzFdLnNob3dMaW5lID0gWUVTXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzWzFdLnBvaW50UmFkaXVzID0gMFxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1sxXS5pbnRlcnBvbGF0ZSA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueEF4ZXNbMF0uc2NhbGVMYWJlbC5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueEF4ZXNbMF0uc2NhbGVMYWJlbC5sYWJlbFN0cmluZyA9IFwiXCIgKyBGSVJTVChyZXN1bHQueEF4aXNVbml0LCBcIlwiKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueUF4ZXNbMF0uc2NhbGVMYWJlbC5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnQub3B0aW9ucy5zY2FsZXMueUF4ZXNbMF0uc2NhbGVMYWJlbC5sYWJlbFN0cmluZyA9IFwiXCIgKyBGSVJTVChyZXN1bHQueUF4aXNVbml0LCBcIlwiKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c0xhYmVsLmhpZGRlbiA9IE5PXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFydFZpZXcuaGlkZGVuID0gTk9cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJ0LnVwZGF0ZSgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnNldE5lZWRzTGF5b3V0VXBUb1Jvb3RWaWV3KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4Y2VwdGlvbilcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBDQkRpYWxvZ1ZpZXdTaG93ZXIuYWxlcnQoXCJGYWlsZWQgdG8gZGlzcGxheSByZXN1bHRzLiBcIiArIEpTT04uc3RyaW5naWZ5KGV4Y2VwdGlvbikpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5oaWRlQWN0aW9uSW5kaWNhdG9yRGlhbG9nKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBwcml2YXRlIHBvaW50T2JqZWN0c0Zyb21WYWx1ZXMoeFZhbHVlcywgeVZhbHVlcykge1xuICAgICAgICBcbiAgICAgICAgdmFyIHJlc3VsdFBvaW50czogYW55W10gPSBbXVxuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4VmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgeSA9IHlWYWx1ZXNbaV1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0UG9pbnRzLnB1c2goeyB4OiB4LCB5OiB5IH0pXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFBvaW50c1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgaGFuZGxlUm91dGUocm91dGU6IFVJUm91dGUpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmhhbmRsZVJvdXRlKHJvdXRlKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5xdWlyeUNvbXBvbmVudCA9IHJvdXRlLmNvbXBvbmVudFdpdGhWaWV3Q29udHJvbGxlcihHRVRFTEVDVmlld0NvbnRyb2xsZXIpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dCA9IFwiRW50ZXIgeW91ciBkYXRhIGluIGpzb24gZm9ybWF0IGFuZCBwcmVzcyB0aGUgbG9hZCBidXR0b24uXCJcbiAgICAgICAgXG4gICAgICAgIHJvdXRlLmRpZGNvbXBsZXRlQ29tcG9uZW50KGlucXVpcnlDb21wb25lbnQpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBsYXlvdXRWaWV3c01hbnVhbGx5KCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIubGF5b3V0Vmlld3NNYW51YWxseSgpXG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYWRkaW5nID0gUm9vdFZpZXdDb250cm9sbGVyLnBhZGRpbmdMZW5ndGhcbiAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSBwYWRkaW5nICogMS4yNVxuICAgICAgICBcbiAgICAgICAgLy8gVmlldyBib3VuZHNcbiAgICAgICAgdmFyIGJvdW5kcyA9IHRoaXMudmlldy5ib3VuZHNcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlldy5zZXRQYWRkaW5ncygwLCAwLCBwYWRkaW5nLCAwKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwuZnJhbWUgPSBib3VuZHMucmVjdGFuZ2xlV2l0aEluc2V0cyhwYWRkaW5nLCBwYWRkaW5nLCAwLCBwYWRkaW5nKVxuICAgICAgICAucmVjdGFuZ2xlV2l0aEhlaWdodCh0aGlzLnRpdGxlTGFiZWwuaW50cmluc2ljQ29udGVudEhlaWdodChib3VuZHMud2lkdGggLSBwYWRkaW5nICogMikpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmlucHV0VGV4dEFyZWEuZnJhbWUgPSB0aGlzLnRpdGxlTGFiZWwuZnJhbWUucmVjdGFuZ2xlRm9yTmV4dFJvdyhcbiAgICAgICAgICAgIHBhZGRpbmcgKiAwLjI1LFxuICAgICAgICAgICAgdGhpcy5pbnB1dFRleHRBcmVhLmludHJpbnNpY0NvbnRlbnRIZWlnaHQodGhpcy50aXRsZUxhYmVsLmZyYW1lLndpZHRoKSArIDVcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMubG9hZERhdGFCdXR0b24uZnJhbWUgPSB0aGlzLmlucHV0VGV4dEFyZWEuZnJhbWUucmVjdGFuZ2xlRm9yTmV4dFJvdyhwYWRkaW5nLCBsYWJlbEhlaWdodCAqIDIpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmxvYWREYXRhQnV0dG9uLnNldE1hcmdpbnMoMCwgMCwgcGFkZGluZywgMClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlc3VsdHNMYWJlbC5mcmFtZSA9IHRoaXMubG9hZERhdGFCdXR0b24uZnJhbWUucmVjdGFuZ2xlRm9yTmV4dFJvdyhwYWRkaW5nKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2hhcnRWaWV3LmZyYW1lID0gdGhpcy5yZXN1bHRzTGFiZWwuZnJhbWUucmVjdGFuZ2xlRm9yTmV4dFJvdyhcbiAgICAgICAgICAgIHBhZGRpbmcsXG4gICAgICAgICAgICB0aGlzLmxvYWREYXRhQnV0dG9uLmZyYW1lLndpZHRoICogMC41XG4gICAgICAgIClcbiAgICAgICAgLy8ucmVjdGFuZ2xlV2l0aEluc2V0cyhwYWRkaW5nICogNSAqIDAsIHBhZGRpbmcgKiA1LCAwLCAwKVxuICAgICAgICAvLy5yZWN0YW5nbGVCeUFkZGluZ1goLXBhZGRpbmcpXG4gICAgICAgIFxuICAgICAgICAvL3RoaXMuY2hhcnRWaWV3LnNldFBhZGRpbmcocGFkZGluZyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNoYXJ0Vmlldy5zZXRNYXhTaXplcyh0aGlzLmNoYXJ0Vmlldy5mcmFtZS5oZWlnaHQsIHRoaXMuY2hhcnRWaWV3LmZyYW1lLndpZHRoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBpbnRyaW5zaWNWaWV3Q29udGVudEhlaWdodChjb25zdHJhaW5pbmdXaWR0aDogbnVtYmVyID0gMCk6IG51bWJlciB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYWRkaW5nID0gUm9vdFZpZXdDb250cm9sbGVyLnBhZGRpbmdMZW5ndGhcbiAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSBwYWRkaW5nICogMS41XG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzdWx0ID0gcGFkZGluZyArIHRoaXMudGl0bGVMYWJlbC5pbnRyaW5zaWNDb250ZW50SGVpZ2h0KGNvbnN0cmFpbmluZ1dpZHRoKSArIHBhZGRpbmcgKiAwLjI1ICtcbiAgICAgICAgICAgIGxhYmVsSGVpZ2h0ICogMiArIHBhZGRpbmcgKiAwLjUgKyBwYWRkaW5nICtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRUZXh0QXJlYS5pbnRyaW5zaWNDb250ZW50SGVpZ2h0KGNvbnN0cmFpbmluZ1dpZHRoKVxuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVCh0aGlzLmNoYXJ0Vmlldy5oaWRkZW4pKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIHBhZGRpbmcgKyAoY29uc3RyYWluaW5nV2lkdGggLSBwYWRkaW5nICogMikgKiAwLjUgKyBwYWRkaW5nICsgbGFiZWxIZWlnaHQgKiAyXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxufVxuXG5cbi8vIEB0cy1pZ25vcmVcbkNoYXJ0LkludGVyYWN0aW9uLm1vZGVzW1wiaW50ZXJwb2xhdGVcIl0gPSBmdW5jdGlvbiAoY2hhcnQsIGUsIG9wdGlvbnMpIHtcbiAgICBcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGhhcyBhIHNlcGFyYXRlIGxpY2Vuc2VcbiAgICBcbiAgICAvLyBNSVQgTGljZW5zZVxuICAgIC8vXG4gICAgLy8gQ29weXJpZ2h0IChjKSAyMDE4IEFiZWwgSGVpbnNicm9la1xuICAgIC8vXG4gICAgLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICAgIC8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiAgICAvLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gICAgLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICAgIC8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuICAgIC8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gICAgLy9cbiAgICAvLyAgICAgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG4gICAgLy8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAgICAvL1xuICAgIC8vICAgICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gICAgLy8gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gICAgLy8gICAgIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICAgIC8vIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiAgICAvLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuICAgIC8vICAgICBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuICAgIC8vIFNPRlRXQVJFLlxuICAgIFxuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgXG4gICAgZm9yICh2YXIgZGF0YXNldEluZGV4ID0gMDsgZGF0YXNldEluZGV4IDwgY2hhcnQuZGF0YS5kYXRhc2V0cy5sZW5ndGg7IGRhdGFzZXRJbmRleCsrKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gY2hlY2sgZm9yIGludGVycG9sYXRlIHNldHRpbmdcbiAgICAgICAgaWYgKCFjaGFydC5kYXRhLmRhdGFzZXRzW2RhdGFzZXRJbmRleF0uaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBtZXRhID0gY2hhcnQuZ2V0RGF0YXNldE1ldGEoZGF0YXNldEluZGV4KVxuICAgICAgICAvLyBkbyBub3QgaW50ZXJwb2xhdGUgaGlkZGVuIGNoYXJ0c1xuICAgICAgICBpZiAobWV0YS5oaWRkZW4pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB2YXIgeFNjYWxlID0gY2hhcnQuc2NhbGVzW21ldGEueEF4aXNJRF1cbiAgICAgICAgdmFyIHlTY2FsZSA9IGNoYXJ0LnNjYWxlc1ttZXRhLnlBeGlzSURdXG4gICAgICAgIFxuICAgICAgICB2YXIgeFZhbHVlID0geFNjYWxlLmdldFZhbHVlRm9yUGl4ZWwoZS54KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHZhciBkYXRhID0gY2hhcnQuZGF0YS5kYXRhc2V0c1tkYXRhc2V0SW5kZXhdLmRhdGFcbiAgICAgICAgXG4gICAgICAgIHZhciBpbmRleCA9IGRhdGEuZmluZEluZGV4KGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICByZXR1cm4gby54ID49IHhWYWx1ZVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIGxpbmVhciBpbnRlcnBvbGF0ZSB2YWx1ZVxuICAgICAgICB2YXIgcHJldiA9IGRhdGFbaW5kZXggLSAxXVxuICAgICAgICB2YXIgbmV4dCA9IGRhdGFbaW5kZXhdXG4gICAgICAgIFxuICAgICAgICBpZiAocHJldiAmJiBuZXh0KSB7XG4gICAgICAgICAgICB2YXIgc2xvcGUgPSAobmV4dC55IC0gcHJldi55KSAvIChuZXh0LnggLSBwcmV2LngpXG4gICAgICAgICAgICB2YXIgaW50ZXJwb2xhdGVkVmFsdWUgPSBwcmV2LnkgKyAoeFZhbHVlIC0gcHJldi54KSAqIHNsb3BlXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjaGFydC5kYXRhLmRhdGFzZXRzW2RhdGFzZXRJbmRleF0uc3RlcHBlZExpbmUgJiYgcHJldikge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGVkVmFsdWUgPSBwcmV2LnlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGlzTmFOKGludGVycG9sYXRlZFZhbHVlKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHlQb3NpdGlvbiA9IHlTY2FsZS5nZXRQaXhlbEZvclZhbHVlKGludGVycG9sYXRlZFZhbHVlKVxuICAgICAgICBcbiAgICAgICAgLy8gZG8gbm90IGludGVycG9sYXRlIHZhbHVlcyBvdXRzaWRlIG9mIHRoZSBheGlzIGxpbWl0c1xuICAgICAgICBpZiAoaXNOYU4oeVBvc2l0aW9uKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gY3JlYXRlIGEgJ2Zha2UnIGV2ZW50IHBvaW50XG4gICAgICAgIFxuICAgICAgICB2YXIgZmFrZVBvaW50ID0ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YWx1ZTogaW50ZXJwb2xhdGVkVmFsdWUsXG4gICAgICAgICAgICB4VmFsdWU6IHhWYWx1ZSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdG9vbHRpcFBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vZGVsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzVmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tb2RlbDoge1xuICAgICAgICAgICAgICAgIHg6IGUueCxcbiAgICAgICAgICAgICAgICB5OiB5UG9zaXRpb25cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZGF0YXNldEluZGV4OiBkYXRhc2V0SW5kZXgsXG4gICAgICAgICAgICBfaW5kZXg6IGl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIF94U2NhbGU6IHtcbiAgICAgICAgICAgICAgICBnZXRMYWJlbEZvckluZGV4OiBmdW5jdGlvbiAoaW5keCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHhWYWx1ZTogbnVtYmVyID0gaXRlbXNbaW5keF0ueFZhbHVlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB4VmFsdWUgPSB4VmFsdWUudG9QcmVjaXNpb24oNSkgYXMgYW55XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geFZhbHVlXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfeVNjYWxlOiB7XG4gICAgICAgICAgICAgICAgZ2V0TGFiZWxGb3JJbmRleDogZnVuY3Rpb24gKGluZHgpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGl0ZW1zW2luZHhdLnZhbHVlLnRvUHJlY2lzaW9uKDUpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGFydDogY2hhcnRcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpdGVtcy5wdXNoKGZha2VQb2ludClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGFkZCBvdGhlciwgbm90IGludGVycG9sYXRlZCwgaXRlbXNcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdmFyIHhJdGVtcyA9IENoYXJ0LkludGVyYWN0aW9uLm1vZGVzLngoY2hhcnQsIGUsIG9wdGlvbnMpXG4gICAgXG4gICAgeEl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4LCBhcnJheSkgPT4ge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmICghY2hhcnQuZGF0YS5kYXRhc2V0c1tpdGVtLl9kYXRhc2V0SW5kZXhdLmludGVycG9sYXRlKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfSlcbiAgICBcbiAgICBcbiAgICBcbiAgICByZXR1cm4gaXRlbXNcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSUJhc2VCdXR0b24udHNcIiAvPlxuXG5cblxuaW50ZXJmYWNlIFVJQnV0dG9uQ29sb3JTcGVjaWZpZXIge1xuICAgIFxuICAgIHRpdGxlTGFiZWw6IFVJQnV0dG9uRWxlbWVudENvbG9yU3BlY2lmaWVyO1xuICAgIGJhY2tncm91bmQ6IFVJQnV0dG9uRWxlbWVudENvbG9yU3BlY2lmaWVyO1xuICAgIFxufVxuXG5cbmludGVyZmFjZSBVSUJ1dHRvbkVsZW1lbnRDb2xvclNwZWNpZmllciB7XG4gICAgXG4gICAgbm9ybWFsOiBVSUNvbG9yO1xuICAgIGhvdmVyZWQ/OiBVSUNvbG9yO1xuICAgIGhpZ2hsaWdodGVkOiBVSUNvbG9yO1xuICAgIGZvY3VzZWQ/OiBVSUNvbG9yO1xuICAgIHNlbGVjdGVkOiBVSUNvbG9yO1xuICAgIHNlbGVjdGVkQW5kSGlnaGxpZ2h0ZWQ/OiBVSUNvbG9yO1xuICAgIFxufVxuXG5cblxuY2xhc3MgVUlCdXR0b24gZXh0ZW5kcyBVSUJhc2VCdXR0b24ge1xuICAgIFxuICAgIF9jb250ZW50UGFkZGluZzogYW55XG4gICAgX3RpdGxlTGFiZWw6IFVJVGV4dFZpZXdcbiAgICBfaW1hZ2VWaWV3OiBVSUltYWdlVmlld1xuICAgIFxuICAgIHVzZXNBdXRvbWF0aWNUaXRsZUZvbnRTaXplID0gTk9cbiAgICBtaW5BdXRvbWF0aWNGb250U2l6ZTogbnVtYmVyID0gbmlsXG4gICAgbWF4QXV0b21hdGljRm9udFNpemU6IG51bWJlciA9IDI1XG4gICAgXG4gICAgY29sb3JzOiBVSUJ1dHRvbkNvbG9yU3BlY2lmaWVyXG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudElEOiBzdHJpbmcsIGVsZW1lbnRUeXBlPzogc3RyaW5nLCB0aXRsZVR5cGUgPSBVSVRleHRWaWV3LnR5cGUuc3Bhbikge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCBlbGVtZW50VHlwZSwgeyBcInRpdGxlVHlwZVwiOiB0aXRsZVR5cGUgfSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlCdXR0b25cbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlCYXNlQnV0dG9uXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW5pdFZpZXcoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQsIGluaXRWaWV3RGF0YTogeyB0aXRsZVR5cGU6IHN0cmluZyB9KSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNsYXNzLnN1cGVyY2xhc3MgPSBVSUJhc2VCdXR0b25cbiAgICAgICAgXG4gICAgICAgIC8vIEluc3RhbmNlIHZhcmlhYmxlc1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jb2xvcnMgPSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRpdGxlTGFiZWw6IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBub3JtYWw6IFVJQ29sb3Iud2hpdGVDb2xvcixcbiAgICAgICAgICAgICAgICBoaWdobGlnaHRlZDogVUlDb2xvci53aGl0ZUNvbG9yLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBVSUNvbG9yLndoaXRlQ29sb3JcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBub3JtYWw6IFVJQ29sb3IuYmx1ZUNvbG9yLFxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBVSUNvbG9yLmdyZWVuQ29sb3IsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFVJQ29sb3IucmVkQ29sb3JcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5faW1hZ2VWaWV3ID0gbmV3IFVJSW1hZ2VWaWV3KGVsZW1lbnRJRCArIFwiSW1hZ2VWaWV3XCIpXG4gICAgICAgIHRoaXMuX2ltYWdlVmlldy5oaWRkZW4gPSBZRVNcbiAgICAgICAgdGhpcy5hZGRTdWJ2aWV3KHRoaXMuaW1hZ2VWaWV3KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5pbWFnZVZpZXcuZmlsbE1vZGUgPSBVSUltYWdlVmlldy5maWxsTW9kZS5hc3BlY3RGaXRJZkxhcmdlclxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19OT1RfTklMKGluaXRWaWV3RGF0YS50aXRsZVR5cGUpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlTGFiZWwgPSBuZXcgVUlUZXh0VmlldyhlbGVtZW50SUQgKyBcIlRpdGxlTGFiZWxcIiwgaW5pdFZpZXdEYXRhLnRpdGxlVHlwZSlcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIlxuICAgICAgICAgICAgdGhpcy5hZGRTdWJ2aWV3KHRoaXMudGl0bGVMYWJlbClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnVzZXJJbnRlcmFjdGlvbkVuYWJsZWQgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGVudFBhZGRpbmcgPSAxMFxuICAgICAgICBcbiAgICAgICAgdGhpcy5pbWFnZVZpZXcudXNlckludGVyYWN0aW9uRW5hYmxlZCA9IE5PXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0QWxpZ25tZW50ID0gVUlUZXh0Vmlldy50ZXh0QWxpZ25tZW50LmNlbnRlclxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwubmF0aXZlU2VsZWN0aW9uRW5hYmxlZCA9IE5PXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgY29udGVudFBhZGRpbmcoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGVudFBhZGRpbmcuaW50ZWdlclZhbHVlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgY29udGVudFBhZGRpbmcoY29udGVudFBhZGRpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NvbnRlbnRQYWRkaW5nID0gY29udGVudFBhZGRpbmdcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgcHVibGljIHNldCBob3ZlcmVkKGhvdmVyZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faG92ZXJlZCA9IGhvdmVyZWRcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBob3ZlcmVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faG92ZXJlZFxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0IGhpZ2hsaWdodGVkKGhpZ2hsaWdodGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2hpZ2hsaWdodGVkID0gaGlnaGxpZ2h0ZWRcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBoaWdobGlnaHRlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpZ2hsaWdodGVkXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzZXQgZm9jdXNlZChmb2N1c2VkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2ZvY3VzZWQgPSBmb2N1c2VkXG4gICAgICAgIGlmIChmb2N1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzKClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmx1cigpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBmb2N1c2VkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZm9jdXNlZFxuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc2V0IHNlbGVjdGVkKHNlbGVjdGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkID0gc2VsZWN0ZWRcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCBzZWxlY3RlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U3RhdGUoKSB7XG4gICAgXG4gICAgICAgIHZhciB1cGRhdGVGdW5jdGlvbjogRnVuY3Rpb24gPSB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JOb3JtYWxTdGF0ZVxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCAmJiB0aGlzLmhpZ2hsaWdodGVkKSB7XG4gICAgICAgICAgICB1cGRhdGVGdW5jdGlvbiA9IHRoaXMudXBkYXRlQ29udGVudEZvclNlbGVjdGVkQW5kSGlnaGxpZ2h0ZWRTdGF0ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZ1bmN0aW9uID0gdGhpcy51cGRhdGVDb250ZW50Rm9yU2VsZWN0ZWRTdGF0ZVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZm9jdXNlZCkge1xuICAgICAgICAgICAgdXBkYXRlRnVuY3Rpb24gPSB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JGb2N1c2VkU3RhdGVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhpZ2hsaWdodGVkKSB7XG4gICAgICAgICAgICB1cGRhdGVGdW5jdGlvbiA9IHRoaXMudXBkYXRlQ29udGVudEZvckhpZ2hsaWdodGVkU3RhdGVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhvdmVyZWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZUZ1bmN0aW9uID0gdGhpcy51cGRhdGVDb250ZW50Rm9ySG92ZXJlZFN0YXRlXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghSVModXBkYXRlRnVuY3Rpb24pKSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dENvbG9yID0gVUlDb2xvci5uaWxDb2xvclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLm5pbENvbG9yXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVGdW5jdGlvbi5jYWxsKHRoaXMpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRFbmFibGVkU3RhdGUoKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JOb3JtYWxTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb2xvcnMuYmFja2dyb3VuZC5ub3JtYWxcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IHRoaXMuY29sb3JzLnRpdGxlTGFiZWwubm9ybWFsXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9ySG92ZXJlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yTm9ybWFsU3RhdGUoKVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuY29sb3JzLmJhY2tncm91bmQuaG92ZXJlZCkge1xuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kLmhvdmVyZWRcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuY29sb3JzLnRpdGxlTGFiZWwuaG92ZXJlZCkge1xuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IHRoaXMuY29sb3JzLnRpdGxlTGFiZWwuaG92ZXJlZFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9yRm9jdXNlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9ySG92ZXJlZFN0YXRlKClcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kLmZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb2xvcnMuYmFja2dyb3VuZC5mb2N1c2VkXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmNvbG9ycy50aXRsZUxhYmVsLmZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0Q29sb3IgPSB0aGlzLmNvbG9ycy50aXRsZUxhYmVsLmZvY3VzZWRcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvckhpZ2hsaWdodGVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29sb3JzLmJhY2tncm91bmQuaGlnaGxpZ2h0ZWRcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IHRoaXMuY29sb3JzLnRpdGxlTGFiZWwuaGlnaGxpZ2h0ZWRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JTZWxlY3RlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kLnNlbGVjdGVkXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0Q29sb3IgPSB0aGlzLmNvbG9ycy50aXRsZUxhYmVsLnNlbGVjdGVkXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9yU2VsZWN0ZWRBbmRIaWdobGlnaHRlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yU2VsZWN0ZWRTdGF0ZSgpXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5jb2xvcnMuYmFja2dyb3VuZC5zZWxlY3RlZEFuZEhpZ2hsaWdodGVkKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29sb3JzLmJhY2tncm91bmQuc2VsZWN0ZWRBbmRIaWdobGlnaHRlZFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5jb2xvcnMudGl0bGVMYWJlbC5zZWxlY3RlZEFuZEhpZ2hsaWdodGVkKSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dENvbG9yID0gdGhpcy5jb2xvcnMudGl0bGVMYWJlbC5zZWxlY3RlZEFuZEhpZ2hsaWdodGVkXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldCBlbmFibGVkKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmVuYWJsZWQgPSBlbmFibGVkXG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U3RhdGUoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IGVuYWJsZWQoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc3VwZXIuZW5hYmxlZFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvckN1cnJlbnRFbmFibGVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmFscGhhID0gMVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hbHBoYSA9IDAuNVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVzZXJJbnRlcmFjdGlvbkVuYWJsZWQgPSB0aGlzLmVuYWJsZWRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGFkZFN0eWxlQ2xhc3Moc3R5bGVDbGFzc05hbWU6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuYWRkU3R5bGVDbGFzcyhzdHlsZUNsYXNzTmFtZSlcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnN0eWxlQ2xhc3NOYW1lICE9IHN0eWxlQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRTdGF0ZS5jYWxsKHRoaXMpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZ2V0IHRpdGxlTGFiZWwoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fdGl0bGVMYWJlbFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IGltYWdlVmlldygpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9pbWFnZVZpZXdcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGxheW91dFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIubGF5b3V0U3Vidmlld3MoKVxuICAgIFxuICAgICAgICB2YXIgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICBcbiAgICAgICAgdGhpcy5ob3ZlclRleHQgPSB0aGlzLnRpdGxlTGFiZWwudGV4dFxuICAgICAgICBcbiAgICAgICAgLy8gSW1hZ2Ugb25seSBpZiB0ZXh0IGlzIG5vdCBwcmVzZW50XG4gICAgICAgIGlmIChJU19OT1QodGhpcy5pbWFnZVZpZXcuaGlkZGVuKSAmJiAhSVModGhpcy50aXRsZUxhYmVsLnRleHQpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbWFnZVZpZXcuZnJhbWUgPSBib3VuZHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFRleHQgb25seSBpZiBpbWFnZSBpcyBub3QgcHJlc2VudFxuICAgICAgICBpZiAoSVModGhpcy5pbWFnZVZpZXcuaGlkZGVuKSAmJiBJUyh0aGlzLnRpdGxlTGFiZWwudGV4dCkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHRpdGxlRWxlbWVudCA9IHRoaXMudGl0bGVMYWJlbC52aWV3SFRNTEVsZW1lbnRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwuc3R5bGUubGVmdCA9IHRoaXMuY29udGVudFBhZGRpbmdcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5yaWdodCA9IHRoaXMuY29udGVudFBhZGRpbmdcbiAgICAgICAgICAgIC8vIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCJcIlxuICAgICAgICAgICAgLy8gdGhpcy50aXRsZUxhYmVsLnN0eWxlLnJpZ2h0ID0gdGhpcy5jb250ZW50UGFkZGluZ1xuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLnRvcCA9IFwiNTAlXCJcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoLTUwJSlcIlxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmZyYW1lID0gbmV3IFVJUmVjdGFuZ2xlKG5pbCwgbmlsLCBuaWwsIG5pbClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMudXNlc0F1dG9tYXRpY1RpdGxlRm9udFNpemUpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgaGlkZGVuID0gdGhpcy50aXRsZUxhYmVsLmhpZGRlblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5oaWRkZW4gPSBZRVNcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwuZm9udFNpemUgPSAxNVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5mb250U2l6ZSA9IFVJVGV4dFZpZXcuYXV0b21hdGljYWxseUNhbGN1bGF0ZWRGb250U2l6ZShcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVJUmVjdGFuZ2xlKFxuICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvdW5kcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAxICpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC52aWV3SFRNTEVsZW1lbnQub2Zmc2V0V2lkdGhcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmludHJpbnNpY0NvbnRlbnRTaXplKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5mb250U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5BdXRvbWF0aWNGb250U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhBdXRvbWF0aWNGb250U2l6ZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwuaGlkZGVuID0gaGlkZGVuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJbWFnZSBhbmQgdGV4dCBib3RoIHByZXNlbnRcbiAgICAgICAgaWYgKElTX05PVCh0aGlzLmltYWdlVmlldy5oaWRkZW4pICYmIElTKHRoaXMudGl0bGVMYWJlbC50ZXh0KSkge1xuICAgIFxuICAgICAgICAgICAgY29uc3QgaW1hZ2VTaGFyZU9mV2lkdGggPSAwLjI1XG4gICAgXG4gICAgICAgICAgICBib3VuZHMgPSBib3VuZHMucmVjdGFuZ2xlV2l0aEluc2V0KHRoaXMuY29udGVudFBhZGRpbmcpXG4gICAgXG4gICAgICAgICAgICBjb25zdCBpbWFnZUZyYW1lID0gYm91bmRzLmNvcHkoKVxuICAgICAgICAgICAgaW1hZ2VGcmFtZS53aWR0aCA9IGJvdW5kcy5oZWlnaHQgLSB0aGlzLmNvbnRlbnRQYWRkaW5nICogMC41XG4gICAgICAgICAgICB0aGlzLmltYWdlVmlldy5mcmFtZSA9IGltYWdlRnJhbWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHRpdGxlRWxlbWVudCA9IHRoaXMudGl0bGVMYWJlbC52aWV3SFRNTEVsZW1lbnRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLmxlZnQgPSBpbWFnZUZyYW1lLm1heC54ICsgdGhpcy5jb250ZW50UGFkZGluZ1xuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLnJpZ2h0ID0gdGhpcy5jb250ZW50UGFkZGluZ1xuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLnRvcCA9IFwiNTAlXCJcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoLTUwJSlcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy51c2VzQXV0b21hdGljVGl0bGVGb250U2l6ZSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBoaWRkZW4gPSB0aGlzLnRpdGxlTGFiZWwuaGlkZGVuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmhpZGRlbiA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5mb250U2l6ZSA9IDE1XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmZvbnRTaXplID0gVUlUZXh0Vmlldy5hdXRvbWF0aWNhbGx5Q2FsY3VsYXRlZEZvbnRTaXplKFxuICAgICAgICAgICAgICAgICAgICBuZXcgVUlSZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm91bmRzLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIDEgKlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnZpZXdIVE1MRWxlbWVudC5vZmZzZXRXaWR0aFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwuaW50cmluc2ljQ29udGVudFNpemUoKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmZvbnRTaXplLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1pbkF1dG9tYXRpY0ZvbnRTaXplLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1heEF1dG9tYXRpY0ZvbnRTaXplXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5oaWRkZW4gPSBoaWRkZW5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmFwcGx5Q2xhc3Nlc0FuZFN0eWxlcygpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBpbml0Vmlld1N0eWxlU2VsZWN0b3JzKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pbml0U3R5bGVTZWxlY3RvcihcIi5cIiArIHRoaXMuc3R5bGVDbGFzc05hbWUsIFwiYmFja2dyb3VuZC1jb2xvcjogbGlnaHRibHVlO1wiKVxuICAgICAgICBcbiAgICAgICAgLy8gdmFyIHNlbGVjdG9yV2l0aG91dEltYWdlID0gXCIuXCIgKyB0aGlzLnN0eWxlQ2xhc3NOYW1lICsgXCIgLlwiICsgdGhpcy5pbWFnZVZpZXcuc3R5bGVDbGFzc05hbWUgKyBcIiArIC5cIiArIHRoaXMudGl0bGVMYWJlbC5zdHlsZUNsYXNzTmFtZTtcbiAgICAgICAgXG4gICAgICAgIC8vIHRoaXMuaW5pdFN0eWxlU2VsZWN0b3IoXG4gICAgICAgIC8vICAgICBzZWxlY3RvcldpdGhvdXRJbWFnZSxcbiAgICAgICAgLy8gICAgIFwibGVmdDogXCIgKyB0aGlzLmNvbnRlbnRQYWRkaW5nICsgXCI7XCIgK1xuICAgICAgICAvLyAgICAgXCJyaWdodDogXCIgKyB0aGlzLmNvbnRlbnRQYWRkaW5nICsgXCI7XCIgK1xuICAgICAgICAvLyAgICAgXCJ0b3A6IDUwJTtcIiArXG4gICAgICAgIC8vICAgICBcInRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcIik7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9VSUNvcmUvVUlCdXR0b24udHNcIiAvPlxuXG5cblxuXG5cbmNsYXNzIENCQnV0dG9uIGV4dGVuZHMgVUlCdXR0b24ge1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRD86IHN0cmluZywgZWxlbWVudFR5cGU/OiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRCwgZWxlbWVudFR5cGUpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IENCQnV0dG9uXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJQnV0dG9uXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQ6IHN0cmluZywgdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5pbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjJweFwiXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLm91dGxpbmUgPSBcIm5vbmVcIlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29sb3JzLnRpdGxlTGFiZWwubm9ybWFsID0gVUlDb2xvci53aGl0ZUNvbG9yXG4gICAgICAgIHRoaXMuc2V0QmFja2dyb3VuZENvbG9yc1dpdGhOb3JtYWxDb2xvcihVSUNvbG9yLmNvbG9yV2l0aFJHQkEoMCwgNzksIDMyKSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29sb3JzLnRpdGxlTGFiZWwuc2VsZWN0ZWQgPSBVSUNvbG9yLmJsYWNrQ29sb3JcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzZXRCYWNrZ3JvdW5kQ29sb3JzV2l0aE5vcm1hbENvbG9yKG5vcm1hbEJhY2tncm91bmRDb2xvcjogVUlDb2xvcikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5jb2xvcnMuYmFja2dyb3VuZC5ub3JtYWwgPSBub3JtYWxCYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29sb3JzLmJhY2tncm91bmQuaG92ZXJlZCA9IFVJQ29sb3IuY29sb3JXaXRoUkdCQSg4NywgMTczLCAxMjIpIC8vIG5vcm1hbEJhY2tncm91bmRDb2xvci5jb2xvckJ5TXVsdGlwbHlpbmdSR0IoMC44NSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29sb3JzLmJhY2tncm91bmQuZm9jdXNlZCA9IG5vcm1hbEJhY2tncm91bmRDb2xvciAvLyBub3JtYWxCYWNrZ3JvdW5kQ29sb3IuY29sb3JCeU11bHRpcGx5aW5nUkdCKDAuNSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29sb3JzLmJhY2tncm91bmQuaGlnaGxpZ2h0ZWQgPSBVSUNvbG9yLmNvbG9yV2l0aFJHQkEoNDgsIDE5NiwgMjEyKSAvLyBub3JtYWxCYWNrZ3JvdW5kQ29sb3IuY29sb3JCeU11bHRpcGx5aW5nUkdCKDAuNylcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29sb3JzLmJhY2tncm91bmQuc2VsZWN0ZWQgPSBVSUNvbG9yLndoaXRlQ29sb3JcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRTdGF0ZSgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9yTm9ybWFsU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci51cGRhdGVDb250ZW50Rm9yTm9ybWFsU3RhdGUoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRCb3JkZXIoMCwgMClcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgMnB4IDJweCAwIHJnYmEoMCwwLDAsMC4yNClcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvckhvdmVyZWRTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLnVwZGF0ZUNvbnRlbnRGb3JIb3ZlcmVkU3RhdGUoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRCb3JkZXIoMCwgMClcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IFVJQ29sb3Iud2hpdGVDb2xvci5jb2xvckJ5TXVsdGlwbHlpbmdSR0IoMC44NSk7XG4gICAgICAgIFxuICAgICAgICAvL3RoaXMuc3R5bGUuYm94U2hhZG93ID0gXCIwIDJweCAycHggMCByZ2JhKDAsMCwwLDAuMTgpXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JGb2N1c2VkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci51cGRhdGVDb250ZW50Rm9yRm9jdXNlZFN0YXRlKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0Qm9yZGVyKDAsIDEsIFVJQ29sb3IuYmx1ZUNvbG9yKVxuICAgICAgICBcbiAgICAgICAgLy90aGlzLnRpdGxlTGFiZWwudGV4dENvbG9yID0gVUlDb2xvci53aGl0ZUNvbG9yLmNvbG9yQnlNdWx0aXBseWluZ1JHQigwLjg1KTtcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgMnB4IDJweCAwIHJnYmEoMCwwLDAsMC4xOClcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvckhpZ2hsaWdodGVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci51cGRhdGVDb250ZW50Rm9ySGlnaGxpZ2h0ZWRTdGF0ZSgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldEJvcmRlcigwLCAwKVxuICAgICAgICBcbiAgICAgICAgLy90aGlzLnRpdGxlTGFiZWwudGV4dENvbG9yID0gVUlDb2xvci53aGl0ZUNvbG9yLmNvbG9yQnlNdWx0aXBseWluZ1JHQigwLjcpO1xuICAgICAgICBcbiAgICAgICAgLy90aGlzLnN0eWxlLmJveFNoYWRvdyA9IFwiMCAycHggMnB4IDAgcmdiYSgwLDAsMCwwLjEyKVwiXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9yQ3VycmVudEVuYWJsZWRTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50RW5hYmxlZFN0YXRlKClcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19OT1QodGhpcy5lbmFibGVkKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dENvbG9yID0gbmV3IFVJQ29sb3IoXCIjYWRhZGFkXCIpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gbmV3IFVJQ29sb3IoXCIjZTVlNWU1XCIpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYWxwaGEgPSAxXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9VSUNvcmUvVUlCdXR0b24udHNcIi8+XG5cblxuY2xhc3MgQ0JDaGVja2JveCBleHRlbmRzIFVJVmlldyB7XG4gICAgXG4gICAgXG4gICAgY2hlY2tib3g6IFVJVmlld1xuICAgIHRpdGxlTGFiZWw6IFVJVGV4dFZpZXdcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCBuaWwsIFwibGFiZWxcIilcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IENCQ2hlY2tib3hcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQ6IHN0cmluZywgdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuaW5pdFZpZXcoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5jaGVja2JveCA9IG5ldyBVSVZpZXcoZWxlbWVudElEICsgXCJDaGVja2JveFwiLCBuaWwsIFwiaW5wdXRcIilcbiAgICAgICAgdGhpcy5jaGVja2JveC52aWV3SFRNTEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmFkZFN1YnZpZXcodGhpcy5jaGVja2JveClcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbCA9IG5ldyBVSVRleHRWaWV3KGVsZW1lbnRJRCArIFwiVGl0bGVMYWJlbFwiLCBVSVRleHRWaWV3LnR5cGUuc3BhbilcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLnRpdGxlTGFiZWwpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5jaGVja2JveC51c2VySW50ZXJhY3Rpb25FbmFibGVkID0gTk9cbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnVzZXJJbnRlcmFjdGlvbkVuYWJsZWQgPSBOT1xuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLm92ZXJmbG93ID0gXCJ2aXNpYmxlXCJcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLmxpbmVIZWlnaHQgPSBcIjEuNVwiXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQub25jaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VuZENvbnRyb2xFdmVudEZvcktleShDQkNoZWNrYm94LmNvbnRyb2xFdmVudC5TZWxlY3Rpb25DaGFuZ2UsIGV2ZW50KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGNvbnRyb2xFdmVudCA9IE9iamVjdC5hc3NpZ24oe30sIFVJVmlldy5jb250cm9sRXZlbnQsIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcIlNlbGVjdGlvbkNoYW5nZVwiOiBcIlNlbGVjdGlvbkNoYW5nZVwiXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9KVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBpc1N0YXRpYygpIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2hlY2tib3gudmlld0hUTUxFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInN0YXRpY0NoZWNrYm94XCIpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgaXNTdGF0aWMoaXNTdGF0aWM6IGJvb2xlYW4pIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChpc1N0YXRpYykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94LnZpZXdIVE1MRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic3RhdGljQ2hlY2tib3hcIilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94LnZpZXdIVE1MRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic3RhdGljQ2hlY2tib3hcIilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBzZWxlY3RlZCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAodGhpcy5jaGVja2JveC52aWV3SFRNTEVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2V0IHNlbGVjdGVkKHNlbGVjdGVkOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICAodGhpcy5jaGVja2JveC52aWV3SFRNTEVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZCA9IHNlbGVjdGVkXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBsYXlvdXRTdWJ2aWV3cygpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRpdGxlV2lkdGggPSB0aGlzLmJvdW5kcy53aWR0aCAtIDM1XG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC5zZXRNYXhTaXplcyhuaWwsIHRpdGxlV2lkdGgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dFByZWZpeCA9IFwiPHNwYW4gc3R5bGU9XFxcInBvc2l0aW9uOiBhYnNvbHV0ZTsgb3ZlcmZsb3c6IGhpZGRlbjsgbGVmdDogMDsgdG9wOiAwO3RleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyB3aGl0ZS1zcGFjZTogcHJlOyBwYWRkaW5nLWxlZnQ6IDM1cHg7IHdpZHRoOiBcIiArXG4gICAgICAgICAgICB0aXRsZVdpZHRoICsgXCJweDtcXFwiPlwiXG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dFN1ZmZpeCA9IFwiPC9zcGFuPlwiXG4gICAgICAgIFxuICAgICAgICB0aGlzLmhvdmVyVGV4dCA9IHRoaXMudGl0bGVMYWJlbC50ZXh0LnJlcGxhY2UoXG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dFByZWZpeCxcbiAgICAgICAgICAgIFwiXCJcbiAgICAgICAgKS5yZXBsYWNlKHRoaXMudGl0bGVMYWJlbC50ZXh0U3VmZml4LCBcIlwiKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9VSUNvcmUvVUlDb2xvci50c1wiIC8+XG5cblxuXG5cblxuY2xhc3MgQ0JDb2xvciBleHRlbmRzIFVJQ29sb3Ige1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKHN0cmluZ1ZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKHN0cmluZ1ZhbHVlKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gQ0JDb2xvclxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSUNvbG9yXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBnZXQgcHJpbWFyeVRpbnRDb2xvcigpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgQ0JDb2xvcihcInJnYmEoNTIsIDEyNywgMjMwLCAxKVwiKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGdldCBzZWNvbmRhcnlUaW50Q29sb3IoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IENCQ29sb3IoXCJyZ2JhKDAsIDE5NiwgMjEyLCAxKVwiKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGdldCBwcmltYXJ5Q29udGVudENvbG9yKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ldyBDQkNvbG9yKFwicmdiKDM1LCAzNSwgMzUpXCIpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IGdyZWVuVGludENvbG9yKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ldyBDQkNvbG9yKFwicmdiYSg1MSwgMTg4LCAxMjUsIDEpXCIpO1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIGdldCByZWRUaW50Q29sb3IoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IENCQ29sb3IoXCJyZ2JhKDIzNiwgODgsIDExMSwgMSlcIik7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0NCQnV0dG9uLnRzXCIgLz5cblxuXG5cbmNsYXNzIENCRmxhdEJ1dHRvbiBleHRlbmRzIENCQnV0dG9uIHtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgY29sb3JzID0ge1xuICAgICAgICBcbiAgICAgICAgdGl0bGVMYWJlbDoge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBub3JtYWw6IFVJQ29sb3IuYmx1ZUNvbG9yLFxuICAgICAgICAgICAgaGlnaGxpZ2h0ZWQ6IFVJQ29sb3IuYmx1ZUNvbG9yLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IFVJQ29sb3IuYmx1ZUNvbG9yXG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICAgICAgYmFja2dyb3VuZDoge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBub3JtYWw6IFVJQ29sb3IudHJhbnNwYXJlbnRDb2xvcixcbiAgICAgICAgICAgIGhvdmVyZWQ6IG5ldyBVSUNvbG9yKFwiI0Y4RjhGOFwiKSxcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBuZXcgVUlDb2xvcihcIiNlYmViZWJcIiksXG4gICAgICAgICAgICBzZWxlY3RlZDogbmV3IFVJQ29sb3IoXCIjZWJlYmViXCIpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudElEPzogc3RyaW5nLCBlbGVtZW50VHlwZT86IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCBlbGVtZW50VHlwZSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gQ0JGbGF0QnV0dG9uXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IENCQnV0dG9uXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQ6IHN0cmluZywgdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5pbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5jb2xvcnMgPSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRpdGxlTGFiZWw6IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBub3JtYWw6IFVJQ29sb3IuYmx1ZUNvbG9yLFxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBVSUNvbG9yLmJsdWVDb2xvcixcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogVUlDb2xvci5ibHVlQ29sb3JcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbm9ybWFsOiBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3IsXG4gICAgICAgICAgICAgICAgaG92ZXJlZDogbmV3IFVJQ29sb3IoXCIjRjhGOEY4XCIpLFxuICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBuZXcgVUlDb2xvcihcIiNlYmViZWJcIiksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IG5ldyBVSUNvbG9yKFwiI2ViZWJlYlwiKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0IHRpdGxlTGFiZWxDb2xvcih0aXRsZUxhYmVsQ29sb3I6IFVJQ29sb3IpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbG9ycy50aXRsZUxhYmVsLm5vcm1hbCA9IHRpdGxlTGFiZWxDb2xvclxuICAgICAgICB0aGlzLmNvbG9ycy50aXRsZUxhYmVsLmhpZ2hsaWdodGVkID0gdGl0bGVMYWJlbENvbG9yXG4gICAgICAgIHRoaXMuY29sb3JzLnRpdGxlTGFiZWwuc2VsZWN0ZWQgPSB0aXRsZUxhYmVsQ29sb3JcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U3RhdGUoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IHRpdGxlTGFiZWxDb2xvcigpIHtcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jb2xvcnMudGl0bGVMYWJlbC5ub3JtYWxcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvck5vcm1hbFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgVUlCdXR0b24ucHJvdG90eXBlLnVwZGF0ZUNvbnRlbnRGb3JOb3JtYWxTdGF0ZS5jYWxsKHRoaXMpXG4gICAgICAgIFxuICAgICAgICAvL3RoaXMuc3R5bGUuYm94U2hhZG93ID0gXCIwIDJweCAycHggMCByZ2JhKDAsMCwwLDAuMjQpXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JIb3ZlcmVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBVSUJ1dHRvbi5wcm90b3R5cGUudXBkYXRlQ29udGVudEZvckhvdmVyZWRTdGF0ZS5jYWxsKHRoaXMpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IFVJQ29sb3Iud2hpdGVDb2xvci5jb2xvckJ5TXVsdGlwbHlpbmdSR0IoMC44NSk7XG4gICAgICAgIFxuICAgICAgICAvL3RoaXMuc3R5bGUuYm94U2hhZG93ID0gXCIwIDJweCAycHggMCByZ2JhKDAsMCwwLDAuMTgpXCI7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9yRm9jdXNlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgVUlCdXR0b24ucHJvdG90eXBlLnVwZGF0ZUNvbnRlbnRGb3JGb2N1c2VkU3RhdGUuY2FsbCh0aGlzKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvL3RoaXMudGl0bGVMYWJlbC50ZXh0Q29sb3IgPSBVSUNvbG9yLndoaXRlQ29sb3IuY29sb3JCeU11bHRpcGx5aW5nUkdCKDAuODUpO1xuICAgICAgICBcbiAgICAgICAgLy90aGlzLnN0eWxlLmJveFNoYWRvdyA9IFwiMCAycHggMnB4IDAgcmdiYSgwLDAsMCwwLjE4KVwiXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9ySGlnaGxpZ2h0ZWRTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIFVJQnV0dG9uLnByb3RvdHlwZS51cGRhdGVDb250ZW50Rm9ySGlnaGxpZ2h0ZWRTdGF0ZS5jYWxsKHRoaXMpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IFVJQ29sb3Iud2hpdGVDb2xvci5jb2xvckJ5TXVsdGlwbHlpbmdSR0IoMC43KTtcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgMnB4IDJweCAwIHJnYmEoMCwwLDAsMC4xMilcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJVmlldy50c1wiIC8+XG5cblxuXG5cblxuY2xhc3MgUm93VmlldzxDZWxsVHlwZSBleHRlbmRzIFVJVmlldyA9IFVJVmlldz4gZXh0ZW5kcyBVSVZpZXcge1xuICAgIFxuICAgIFxuICAgIF9wcmV2aW91c0xheW91dEJvdW5kczogVUlSZWN0YW5nbGVcbiAgICBfY2VsbHM6IENlbGxUeXBlW11cbiAgICBfY2VsbFdlaWdodHM6IG51bWJlcltdXG4gICAgXG4gICAgcGFkZGluZyA9IDBcbiAgICBfY2VsbFdpZHRoczogbnVtYmVyW11cbiAgICBfcm93SGVpZ2h0ID0gNTBcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ/OiBzdHJpbmcsIGNlbGxzOiBDZWxsVHlwZVtdID0gW10sIGNlbGxXaWR0aHM6IG51bWJlcltdID0gW10pIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gUm93Vmlld1xuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSVZpZXdcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NlbGxzID0gY2VsbHNcbiAgICAgICAgdGhpcy5fY2VsbFdlaWdodHMgPSBjZWxsV2lkdGhzXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgY2VsbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jZWxsc1xuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgY2VsbHMoY2VsbHM6IENlbGxUeXBlW10pIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByZXZpb3VzQ2VsbHMgPSB0aGlzLmNlbGxzXG4gICAgICAgIFxuICAgICAgICAvLyBUaGUgY2VsbHMgYXJlIGFkZGVkIHRvIHRoaXMuX2NlbGxzIGluIHRoaXMuYWRkQ2VsbCgpXG4gICAgICAgIFxuICAgICAgICBwcmV2aW91c0NlbGxzLmNvcHkoKS5mb3JFYWNoKGZ1bmN0aW9uICh0aGlzOiBSb3dWaWV3LCBjZWxsOiBDZWxsVHlwZSwgaW5kZXg6IG51bWJlciwgYXJyYXk6IENlbGxUeXBlW10pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFjZWxscy5jb250YWlucyhjZWxsKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNlbGwucmVtb3ZlRnJvbVN1cGVydmlldygpXG4gICAgICAgICAgICAgICAgdGhpcy5fY2VsbHMucmVtb3ZlRWxlbWVudChjZWxsKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgXG4gICAgICAgIGNlbGxzLmNvcHkoKS5mb3JFYWNoKGZ1bmN0aW9uICh0aGlzOiBSb3dWaWV3LCBjZWxsOiBDZWxsVHlwZSwgaW5kZXg6IG51bWJlciwgYXJyYXk6IENlbGxUeXBlW10pIHtcbiAgICAgICAgICAgIGlmICghSVMoY2VsbC5zdXBlcnZpZXcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDZWxsKGNlbGwsIDEsIGluZGV4KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fcHJldmlvdXNMYXlvdXRCb3VuZHMgPSBuaWxcbiAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICByZW1vdmVDZWxsQXRJbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0NlbGxzID0gdGhpcy5jZWxscy5jb3B5KClcbiAgICAgICAgcmVtYWluaW5nQ2VsbHMucmVtb3ZlRWxlbWVudEF0SW5kZXgoaW5kZXgpXG4gICAgICAgIHRoaXMuY2VsbFdlaWdodHMucmVtb3ZlRWxlbWVudEF0SW5kZXgoaW5kZXgpXG4gICAgICAgIHRoaXMuY2VsbHMgPSByZW1haW5pbmdDZWxsc1xuICAgIH1cbiAgICBcbiAgICByZW1vdmVGaXJzdENlbGwoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2VsbEF0SW5kZXgoMClcbiAgICB9XG4gICAgXG4gICAgcmVtb3ZlTGFzdENlbGwoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2VsbEF0SW5kZXgodGhpcy5jZWxscy5sZW5ndGggLSAxKVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBhZGRDZWxsKGNlbGw6IENlbGxUeXBlLCB3ZWlnaHQ6IG51bWJlciA9IDEsIGluZGV4ID0gdGhpcy5jZWxscy5sZW5ndGgpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmNlbGxzLmNvbnRhaW5zKGNlbGwpICYmIElTX05PVF9OSUwoY2VsbCkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNlbGxzLmluc2VydEVsZW1lbnRBdEluZGV4KGluZGV4LCBjZWxsKVxuICAgICAgICB0aGlzLmNlbGxXZWlnaHRzLmluc2VydEVsZW1lbnRBdEluZGV4KGluZGV4LCB3ZWlnaHQpXG4gICAgICAgIHRoaXMuYWRkU3VidmlldyhjZWxsKVxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBjZWxsV2VpZ2h0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NlbGxXZWlnaHRzXG4gICAgfVxuICAgIFxuICAgIHNldCBjZWxsV2VpZ2h0cyh3aWR0aHM6IG51bWJlcltdKSB7XG4gICAgICAgIHRoaXMuX2NlbGxXZWlnaHRzID0gd2lkdGhzXG4gICAgICAgIHRoaXMuX3ByZXZpb3VzTGF5b3V0Qm91bmRzID0gbmlsXG4gICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgIH1cbiAgICBcbiAgICBnZXQgY2VsbFdpZHRocygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NlbGxXaWR0aHNcbiAgICB9XG4gICAgXG4gICAgc2V0IGNlbGxXaWR0aHMod2lkdGhzOiBudW1iZXJbXSkge1xuICAgICAgICB0aGlzLl9jZWxsV2lkdGhzID0gd2lkdGhzXG4gICAgICAgIHRoaXMuX3ByZXZpb3VzTGF5b3V0Qm91bmRzID0gbmlsXG4gICAgICAgIHRoaXMuc2V0TmVlZHNMYXlvdXQoKVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgcm93SGVpZ2h0KCkge1xuICAgICAgICBcbiAgICAgICAgdmFyIHJlc3VsdCA9IElGKHRoaXMuX3Jvd0hlaWdodCkoKCkgPT4gdGhpcy5fcm93SGVpZ2h0KVxuICAgICAgICAuRUxTRSgoKSA9PiB0aGlzLmNlbGxzLm1hcCgodmFsdWUsIGluZGV4LCBhcnJheSkgPT4gdmFsdWUuaW50cmluc2ljQ29udGVudEhlaWdodCh0aGlzLmJvdW5kcy53aWR0aCkpLm1heCgpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdCAvL3RoaXMuYm91bmRzLmhlaWdodFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmJvdW5kc1xuICAgICAgICBcbiAgICAgICAgaWYgKGJvdW5kcy5pc0VxdWFsVG8odGhpcy5fcHJldmlvdXNMYXlvdXRCb3VuZHMpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9wcmV2aW91c0xheW91dEJvdW5kcyA9IGJvdW5kc1xuICAgICAgICBcbiAgICAgICAgYm91bmRzLmRpc3RyaWJ1dGVWaWV3c0Fsb25nV2lkdGgodGhpcy5fY2VsbHMsIHRoaXMuX2NlbGxXZWlnaHRzLCB0aGlzLnBhZGRpbmcsIHRoaXMuX2NlbGxXaWR0aHMpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmNlbGxzLmZvckVhY2goZnVuY3Rpb24gKHRoaXM6IFJvd1ZpZXcsIGNlbGw6IFVJVmlldywgaW5kZXg6IG51bWJlciwgYXJyYXk6IFVJVmlld1tdKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbGwuZnJhbWUgPSBjZWxsLmZyYW1lLnJlY3RhbmdsZVdpdGhIZWlnaHQodGhpcy5yb3dIZWlnaHQpXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9DQkZsYXRCdXR0b24udHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vUm93Vmlldy50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJQ29yZUV4dGVuc2lvbnMudHNcIiAvPlxuXG5cblxuY2xhc3MgQ0JEaWFsb2dWaWV3IGV4dGVuZHMgVUlWaWV3IHtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICB0aXRsZUxhYmVsOiBVSVRleHRWaWV3ID0gbmlsXG4gICAgdGl0bGVSb3c6IFJvd1ZpZXcgPSBuaWxcbiAgICBwbGFjZWhvbGRlckxhYmVsOiBVSVRleHRWaWV3ID0gbmlsXG4gICAgXG4gICAgX3ZpZXc6IFVJVmlldyA9IG5pbFxuICAgIFxuICAgIHF1ZXN0aW9uTGFiZWw6IFVJVGV4dFZpZXcgPSBuaWxcbiAgICB5ZXNCdXR0b246IENCRmxhdEJ1dHRvbiA9IG5pbFxuICAgIG5vQnV0dG9uOiBDQkZsYXRCdXR0b24gPSBuaWxcbiAgICBjYW5jZWxCdXR0b246IENCRmxhdEJ1dHRvbiA9IG5pbFxuICAgIFxuICAgIFxuICAgIG5vQnV0dG9uRGlzbWlzc2VzRGlhbG9nID0gWUVTXG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudElEPzogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcihlbGVtZW50SUQpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBDQkRpYWxvZ1ZpZXdcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50KClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW5pdFZpZXcoZWxlbWVudElEOiBzdHJpbmcsIHZpZXdIVE1MRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBzdXBlci5pbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy5pbml0UGxhY2Vob2xkZXJMYWJlbElmTmVlZGVkKClcbiAgICAgICAgXG4gICAgICAgIC8vIHRoaXMuaW5pdFRpdGxlTGFiZWxJZk5lZWRlZCgpXG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLmluaXRUaXRsZVJvdygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy50aXRsZVJvdy5jZWxsV2VpZ2h0cyA9IFsxLCAwLjc1LCAxLjIsIDFdXG4gICAgICAgIFxuICAgICAgICAvLyB2YXIgY2VsbHMgPSB0aGlzLnRpdGxlUm93LmNlbGxzIGFzIENlbGxWaWV3W107XG4gICAgICAgIFxuICAgICAgICAvLyB2YXIgY2VsbFRpdGxlcyA9IFtcIlRJTUU6XCIsIFwiQ09NUEFOWTpcIiwgXCJDT01NRU5UUzpcIiwgXCJQUklDRTpcIl1cbiAgICAgICAgXG4gICAgICAgIC8vIGNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGNlbGwsIGluZGV4LCBhcnJheSkge1xuICAgICAgICBcbiAgICAgICAgLy8gICAgIGNlbGwudGl0bGVMYWJlbC50ZXh0ID0gY2VsbFRpdGxlc1tpbmRleF07XG4gICAgICAgIC8vICAgICBjZWxsLnRpdGxlTGFiZWwudXNlU2FpcmFGb250KClcbiAgICAgICAgXG4gICAgICAgIC8vIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy5pbml0UXVlc3Rpb25MYWJlbElmTmVlZGVkKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLmluaXRZZXNOb0J1dHRvbnNJZk5lZWRlZCgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjVweFwiXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHNldCB2aWV3KHZpZXc6IFVJVmlldykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3LnJlbW92ZUZyb21TdXBlcnZpZXcoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fdmlldyA9IHZpZXdcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkU3Vidmlldyh2aWV3KVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IHZpZXcoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fdmlld1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW5pdENhbmNlbEJ1dHRvbklmTmVlZGVkKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVCh0aGlzLmNhbmNlbEJ1dHRvbikpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24gPSBuZXcgQ0JGbGF0QnV0dG9uKHRoaXMuZWxlbWVudElEICsgXCJDYW5jZWxCdXR0b25cIilcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLnRpdGxlTGFiZWwudGV4dCA9IFwiT0tcIlxuICAgICAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24udGl0bGVMYWJlbENvbG9yID0gVUlDb2xvci5ncmVlbkNvbG9yXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEJ1dHRvbi50aXRsZUxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSBcIjYwMFwiXG4gICAgICAgICAgICB0aGlzLmFkZFN1YnZpZXcodGhpcy5jYW5jZWxCdXR0b24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgICAgIFVJQnV0dG9uLmNvbnRyb2xFdmVudC5Qb2ludGVyVXBJbnNpZGUsIFVJQnV0dG9uLmNvbnRyb2xFdmVudC5FbnRlckRvd25cbiAgICAgICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXcsIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlldy5kaXNtaXNzKClcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBpbml0WWVzTm9CdXR0b25zSWZOZWVkZWQoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHRoaXMueWVzQnV0dG9uKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnllc0J1dHRvbiA9IG5ldyBDQkZsYXRCdXR0b24odGhpcy5lbGVtZW50SUQgKyBcIlllc0J1dHRvblwiKVxuICAgICAgICAgICAgdGhpcy55ZXNCdXR0b24udGl0bGVMYWJlbC5zZXRUZXh0KFwiY0JERGlhbG9nVmlld1lFU1wiLCBcIllFU1wiKVxuICAgICAgICAgICAgdGhpcy55ZXNCdXR0b24udGl0bGVMYWJlbENvbG9yID0gVUlDb2xvci5ncmVlbkNvbG9yXG4gICAgICAgICAgICB0aGlzLnllc0J1dHRvbi50aXRsZUxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSBcIjYwMFwiXG4gICAgICAgICAgICB0aGlzLmFkZFN1YnZpZXcodGhpcy55ZXNCdXR0b24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubm9CdXR0b24gPSBuZXcgQ0JGbGF0QnV0dG9uKHRoaXMuZWxlbWVudElEICsgXCJOb0J1dHRvblwiKVxuICAgICAgICAgICAgdGhpcy5ub0J1dHRvbi50aXRsZUxhYmVsLnNldFRleHQoXCJjQkREaWFsb2dWaWV3Tk9cIiwgXCJOT1wiKVxuICAgICAgICAgICAgdGhpcy5ub0J1dHRvbi50aXRsZUxhYmVsQ29sb3IgPSBVSUNvbG9yLnJlZENvbG9yXG4gICAgICAgICAgICB0aGlzLm5vQnV0dG9uLnRpdGxlTGFiZWwuc3R5bGUuZm9udFdlaWdodCA9IFwiNjAwXCJcbiAgICAgICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLm5vQnV0dG9uKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB0aGlzLnllc0J1dHRvbi5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnRzKFtVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duXSwgZnVuY3Rpb24gKHRoaXM6IENCRGlhbG9nVmlldywgc2VuZGVyOiBVSUJ1dHRvbiwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICAvLyAgICAgdGhpcy5kaWFsb2dWaWV3LmRpc21pc3MoKVxuICAgICAgICAgICAgLy8gfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vQnV0dG9uLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgICAgIFVJQnV0dG9uLmNvbnRyb2xFdmVudC5Qb2ludGVyVXBJbnNpZGUsIFVJQnV0dG9uLmNvbnRyb2xFdmVudC5FbnRlckRvd25cbiAgICAgICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXcsIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5vQnV0dG9uRGlzbWlzc2VzRGlhbG9nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlldy5kaXNtaXNzKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBpbml0UXVlc3Rpb25MYWJlbElmTmVlZGVkKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVCh0aGlzLnF1ZXN0aW9uTGFiZWwpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25MYWJlbCA9IG5ldyBVSVRleHRWaWV3KHRoaXMuZWxlbWVudElEICsgXCJRdWVzdGlvbkxhYmVsXCIsIFVJVGV4dFZpZXcudHlwZS5oZWFkZXIzKVxuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbkxhYmVsLnRleHQgPSBMYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yS2V5KFxuICAgICAgICAgICAgICAgIFwiY0JERGlhbG9nVmlld0FyZVlvdVN1cmVcIixcbiAgICAgICAgICAgICAgICBMYW5ndWFnZVNlcnZpY2UuY3VycmVudExhbmd1YWdlS2V5LFxuICAgICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlP1wiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uTGFiZWwudGV4dEFsaWdubWVudCA9IFVJVGV4dFZpZXcudGV4dEFsaWdubWVudC5jZW50ZXJcbiAgICAgICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLnF1ZXN0aW9uTGFiZWwpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgaW5pdFRpdGxlUm93KCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVCh0aGlzLnRpdGxlUm93KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRpdGxlUm93ID0gbmV3IFJvd1ZpZXcodGhpcy5lbGVtZW50SUQgKyBcIlRpdGxlUm93XCIpXG4gICAgICAgICAgICB0aGlzLmFkZFN1YnZpZXcodGhpcy50aXRsZVJvdylcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBpbml0VGl0bGVMYWJlbElmTmVlZGVkKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVCh0aGlzLnRpdGxlTGFiZWwpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbCA9IG5ldyBVSVRleHRWaWV3KHRoaXMuZWxlbWVudElEICsgXCJUaXRsZUxhYmVsXCIsIFVJVGV4dFZpZXcudHlwZS5oZWFkZXI0KVxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHQgPSBcIkFjY2VwdCBvZmZlclwiXG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwuc3R5bGUuZm9udFNpemUgPSBcIjI0XCJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hZGRTdWJ2aWV3KHRoaXMudGl0bGVMYWJlbClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBpbml0UGxhY2Vob2xkZXJMYWJlbElmTmVlZGVkKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVCh0aGlzLnBsYWNlaG9sZGVyTGFiZWwpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXJMYWJlbCA9IG5ldyBVSVRleHRWaWV3KHRoaXMuZWxlbWVudElEICsgXCJQbGFjZWhvbGRlckxhYmVsXCIsIFVJVGV4dFZpZXcudHlwZS5oZWFkZXI0KVxuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlckxhYmVsLnRleHQgPSBcIk5vIG9mZmVycyBoYXZlIGJlZW4gbWFkZSB5ZXQuXCJcbiAgICAgICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLnBsYWNlaG9sZGVyTGFiZWwpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlQ29udGVudCgpIHtcbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHN0cmluZ0Zyb21WYWx1ZSh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKElTKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiLVwiXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5sYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgXG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSBSb290Vmlld0NvbnRyb2xsZXIucGFkZGluZ0xlbmd0aFxuICAgICAgICBjb25zdCBsYWJlbEhlaWdodCA9IHBhZGRpbmcgKiAwLjc1XG4gICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzLnJlY3RhbmdsZVdpdGhJbnNldHMocGFkZGluZyAqIDAuNSwgcGFkZGluZyAqIDAuNSwgMCwgMClcbiAgICBcbiAgICAgICAgY29uc3QgdG9wT2JqZWN0ID0geyBmcmFtZTogYm91bmRzLnJlY3RhbmdsZVdpdGhIZWlnaHQoMCkgfVxuICAgIFxuICAgIFxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwuZnJhbWUgPSBib3VuZHMucmVjdGFuZ2xlV2l0aEhlaWdodCh0aGlzLnRpdGxlTGFiZWwuaW50cmluc2ljQ29udGVudEhlaWdodChib3VuZHMud2lkdGgpKS5yZWN0YW5nbGVXaXRoWShcbiAgICAgICAgICAgIGJvdW5kcy55ICtcbiAgICAgICAgICAgIHBhZGRpbmcgKiAwLjUpXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCJcIiArIChwYWRkaW5nICogMC41KSArIFwicHhcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZVJvdy5mcmFtZSA9IEZJUlNUX09SX05JTCh0aGlzLnRpdGxlTGFiZWwsIHRvcE9iamVjdCkuZnJhbWUucmVjdGFuZ2xlRm9yTmV4dFJvdyhcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB0aGlzLnRpdGxlUm93LmludHJpbnNpY0NvbnRlbnRIZWlnaHQoYm91bmRzLndpZHRoKVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3LmZyYW1lID0gRklSU1RfT1JfTklMKHRoaXMudGl0bGVSb3csIHRoaXMudGl0bGVMYWJlbCwgdG9wT2JqZWN0KS5mcmFtZS5yZWN0YW5nbGVGb3JOZXh0Um93KFxuICAgICAgICAgICAgcGFkZGluZyxcbiAgICAgICAgICAgIHRoaXMudmlldy5pbnRyaW5zaWNDb250ZW50SGVpZ2h0KGJvdW5kcy53aWR0aClcbiAgICAgICAgKS5yZWN0YW5nbGVXaXRoV2lkdGgoYm91bmRzLndpZHRoKS5yZWN0YW5nbGVXaXRoWChib3VuZHMueClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5xdWVzdGlvbkxhYmVsLmZyYW1lID0gRklSU1RfT1JfTklMKFxuICAgICAgICAgICAgdGhpcy52aWV3LFxuICAgICAgICAgICAgdGhpcy50aXRsZVJvdyxcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbCxcbiAgICAgICAgICAgIHRvcE9iamVjdFxuICAgICAgICApLmZyYW1lLnJlY3RhbmdsZUZvck5leHRSb3coXG4gICAgICAgICAgICBwYWRkaW5nLFxuICAgICAgICAgICAgdGhpcy5xdWVzdGlvbkxhYmVsLmludHJpbnNpY0NvbnRlbnRIZWlnaHQoYm91bmRzLndpZHRoKVxuICAgICAgICApLnJlY3RhbmdsZVdpdGhXaWR0aChib3VuZHMud2lkdGgpLnJlY3RhbmdsZVdpdGhYKGJvdW5kcy54KVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgICAgICBjb25zdCBidXR0b25zID0gW3RoaXMueWVzQnV0dG9uLCB0aGlzLm5vQnV0dG9uXVxuICAgIFxuICAgICAgICBjb25zdCBidXR0b25zRnJhbWUgPSBGSVJTVF9PUl9OSUwoXG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uTGFiZWwsXG4gICAgICAgICAgICB0aGlzLnZpZXcsXG4gICAgICAgICAgICB0aGlzLnRpdGxlUm93LFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLFxuICAgICAgICAgICAgdG9wT2JqZWN0XG4gICAgICAgICkuZnJhbWUucmVjdGFuZ2xlRm9yTmV4dFJvdyhwYWRkaW5nLCBsYWJlbEhlaWdodCAqXG4gICAgICAgICAgICAyKVxuICAgICAgICAgICAgLnJlY3RhbmdsZVdpdGhXaWR0aChbKGJ1dHRvbnMuZXZlcnlFbGVtZW50LnRpdGxlTGFiZWwuaW50cmluc2ljQ29udGVudFdpZHRoKCkgYXMgYW55IGFzIG51bWJlcltdKS5tYXgoKSwgMTIwXS5tYXgoKSAqIDIgKyBwYWRkaW5nICogMywgMC41KVxuICAgICAgICBcbiAgICAgICAgYnV0dG9uc0ZyYW1lLmRpc3RyaWJ1dGVWaWV3c0Fsb25nV2lkdGgoYnV0dG9ucylcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLmZyYW1lID0gYnV0dG9uc0ZyYW1lLnJlY3RhbmdsZVdpdGhXaWR0aCgxNTAsIDAuNSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXJMYWJlbC5mcmFtZSA9IGJvdW5kcy5yZWN0YW5nbGVXaXRoSW5zZXRzKHBhZGRpbmcgKiAwLjUsIHBhZGRpbmcgKiAwLjUsIDAsIDApXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmIChJUyh0aGlzLnZpZXcpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXJMYWJlbC5oaWRkZW4gPSBZRVNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdGhpcy50aXRsZUxhYmVsLmhpZGRlbiA9IE5PXG4gICAgICAgICAgICAvLyB0aGlzLnRpdGxlUm93LmhpZGRlbiA9IE5PXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyTGFiZWwuaGlkZGVuID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdGhpcy50aXRsZUxhYmVsLmhpZGRlbiA9IFlFU1xuICAgICAgICAgICAgLy8gdGhpcy50aXRsZVJvdy5oaWRkZW4gPSBZRVNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGludHJpbnNpY0NvbnRlbnRIZWlnaHQoY29uc3RyYWluaW5nV2lkdGg6IG51bWJlciA9IDApIHtcbiAgICBcbiAgICBcbiAgICAgICAgY29uc3QgcGFkZGluZyA9IFJvb3RWaWV3Q29udHJvbGxlci5wYWRkaW5nTGVuZ3RoXG4gICAgICAgIGNvbnN0IGxhYmVsSGVpZ2h0ID0gcGFkZGluZyAqIDAuNzVcbiAgICBcbiAgICAgICAgZnVuY3Rpb24gYWRkUGFkZGluZ0lmTmVlZGVkKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIElGPG51bWJlcj4odmFsdWUpKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyBwYWRkaW5nXG4gICAgICAgICAgICB9KSgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB2YXIgcmVzdWx0ID0gcGFkZGluZ1xuICAgIFxuICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBhZGRQYWRkaW5nSWZOZWVkZWQodGhpcy50aXRsZUxhYmVsLmludHJpbnNpY0NvbnRlbnRIZWlnaHQoY29uc3RyYWluaW5nV2lkdGgpKVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgYWRkUGFkZGluZ0lmTmVlZGVkKHRoaXMudGl0bGVSb3cuaW50cmluc2ljQ29udGVudEhlaWdodChjb25zdHJhaW5pbmdXaWR0aCkpXG4gICAgICAgIFxuICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBhZGRQYWRkaW5nSWZOZWVkZWQodGhpcy52aWV3LmludHJpbnNpY0NvbnRlbnRIZWlnaHQoY29uc3RyYWluaW5nV2lkdGgpICsgcGFkZGluZylcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdCArIGFkZFBhZGRpbmdJZk5lZWRlZCh0aGlzLnF1ZXN0aW9uTGFiZWwuaW50cmluc2ljQ29udGVudEhlaWdodChjb25zdHJhaW5pbmdXaWR0aCkpXG4gICAgICAgIFxuICAgICAgICByZXN1bHQgPSByZXN1bHQgKyBJRjxudW1iZXI+KEZJUlNUX09SX05JTCh0aGlzLnllc0J1dHRvbiwgdGhpcy5jYW5jZWxCdXR0b24pKShSRVRVUk5FUihsYWJlbEhlaWdodCkpKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJQ29yZS50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJUm91dGUudHNcIiAvPlxuXG5cblxuXG5cbmNsYXNzIExhbmd1YWdlU2VydmljZSBpbXBsZW1lbnRzIFVJTGFuZ3VhZ2VTZXJ2aWNlIHtcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgX2N1cnJlbnRMYW5ndWFnZUtleTogc3RyaW5nXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGxhbmd1YWdlVmFsdWVzID0ge1xuICAgICAgICBcbiAgICAgICAgXCJlblwiOiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFwibGFuZ3VhZ2VOYW1lXCI6IFwiRW5nbGlzaFwiLFxuICAgICAgICAgICAgXCJsYW5ndWFnZU5hbWVTaG9ydFwiOiBcIkVOR1wiLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcInRvcEJhclRpdGxlXCI6IFwiQ2FycnVtXCIsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFwiZnJvbnRQYWdlSFRNTFwiOiBcIkFzZGFzZFwiLFxuICAgICAgICAgICAgXCJib3R0b21CYXJDb250ZW50XCI6IFwiUFVUIEJPVFRPTSBCQVIgU1RVRkYgSU4gSEVSRVwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgICAgICBcImVzdFwiOiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFwibGFuZ3VhZ2VOYW1lXCI6IFwiRWVzdGkga2VlbFwiLFxuICAgICAgICAgICAgXCJsYW5ndWFnZU5hbWVTaG9ydFwiOiBcIkVTVFwiLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcInRvcEJhclRpdGxlXCI6IFwiQ2FycnVtXCJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBsYW5ndWFnZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KExhbmd1YWdlU2VydmljZS5sYW5ndWFnZVZhbHVlcykpXG4gICAgXG4gICAgc3RhdGljIHVzZVN0b3JlZExhbmd1YWdlVmFsdWVzKHZhbHVlcyA9IHt9KSB7XG4gICAgICAgIFxuICAgICAgICBMYW5ndWFnZVNlcnZpY2UubGFuZ3VhZ2VzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShMYW5ndWFnZVNlcnZpY2UubGFuZ3VhZ2VWYWx1ZXMpKS5vYmplY3RCeUNvcHlpbmdWYWx1ZXNSZWN1cnNpdmVseUZyb21PYmplY3QoXG4gICAgICAgICAgICB2YWx1ZXMpIGFzIGFueVxuICAgICAgICBcbiAgICAgICAgTGFuZ3VhZ2VTZXJ2aWNlLmJyb2FkY2FzdExhbmd1YWdlQ2hhbmdlRXZlbnQoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGJyb2FkY2FzdExhbmd1YWdlQ2hhbmdlRXZlbnQoKSB7XG4gICAgICAgIFxuICAgICAgICBVSUNvcmUubWFpbi5yb290Vmlld0NvbnRyb2xsZXIudmlldy5icm9hZGNhc3RFdmVudEluU3VidHJlZSh7XG4gICAgICAgICAgICBuYW1lOiBVSVZpZXcuYnJvYWRjYXN0RXZlbnROYW1lLkxhbmd1YWdlQ2hhbmdlZCxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHt9XG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IGRlZmF1bHRMYW5ndWFnZUtleSgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBcImVuXCI7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZ2V0IGN1cnJlbnRMYW5ndWFnZUtleSgpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICghTGFuZ3VhZ2VTZXJ2aWNlLl9jdXJyZW50TGFuZ3VhZ2VLZXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgTGFuZ3VhZ2VTZXJ2aWNlLnVwZGF0ZUN1cnJlbnRMYW5ndWFnZUtleSgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIExhbmd1YWdlU2VydmljZS5fY3VycmVudExhbmd1YWdlS2V5XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgdXBkYXRlQ3VycmVudExhbmd1YWdlS2V5KHJvdXRlID0gVUlSb3V0ZS5jdXJyZW50Um91dGUpIHtcbiAgICBcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJvdXRlLmNvbXBvbmVudFdpdGhOYW1lKFwic2V0dGluZ3NcIikucGFyYW1ldGVycy5sYW5ndWFnZVxuICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gTGFuZ3VhZ2VTZXJ2aWNlLmRlZmF1bHRMYW5ndWFnZUtleVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIExhbmd1YWdlU2VydmljZS5fY3VycmVudExhbmd1YWdlS2V5ID0gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgY3VycmVudExhbmd1YWdlS2V5KCkge1xuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBMYW5ndWFnZVNlcnZpY2UuY3VycmVudExhbmd1YWdlS2V5XG4gICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBzdHJpbmdGb3JLZXkoXG4gICAgICAgIGtleTogc3RyaW5nLFxuICAgICAgICBsYW5ndWFnZUtleTogc3RyaW5nLFxuICAgICAgICBkZWZhdWx0U3RyaW5nOiBzdHJpbmcsXG4gICAgICAgIHBhcmFtZXRlcnM/OiB7IFt4OiBzdHJpbmddOiBzdHJpbmcgfCBVSUxvY2FsaXplZFRleHRPYmplY3Q7IH1cbiAgICApIHtcbiAgICBcbiAgICAgICAgdmFyIHJlc3VsdFxuICAgIFxuICAgICAgICBpZiAoSVMoa2V5KSAmJiBMYW5ndWFnZVNlcnZpY2UubGFuZ3VhZ2VzW2xhbmd1YWdlS2V5XSAmJlxuICAgICAgICAgICAgSVNfREVGSU5FRChMYW5ndWFnZVNlcnZpY2UubGFuZ3VhZ2VzW2xhbmd1YWdlS2V5XVtrZXldKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXN1bHQgPSBMYW5ndWFnZVNlcnZpY2UubGFuZ3VhZ2VzW2xhbmd1YWdlS2V5XVtrZXldXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gZGVmYXVsdFN0cmluZ1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChJUyhwYXJhbWV0ZXJzKSkge1xuICAgIFxuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVyS2V5cyA9IE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpXG4gICAgXG4gICAgICAgICAgICBwYXJhbWV0ZXJLZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgaW5kZXgsIGFycmF5KSB7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5U3RyaW5nID0gXCIlXCIgKyBrZXkgKyBcIiVcIlxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlciA9IHBhcmFtZXRlcnNba2V5XVxuICAgIFxuICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJTdHJpbmdcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVyIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJTdHJpbmcgPSBVSUNvcmUubGFuZ3VhZ2VTZXJ2aWNlLnN0cmluZ0ZvckN1cnJlbnRMYW5ndWFnZShwYXJhbWV0ZXIgYXMgVUlMb2NhbGl6ZWRUZXh0T2JqZWN0KVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJTdHJpbmcgPSBwYXJhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKG5ldyBSZWdFeHAoa2V5U3RyaW5nLCBcImdcIiksIHBhcmFtZXRlclN0cmluZylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RyaW5nRm9yS2V5KFxuICAgICAgICBrZXk6IHN0cmluZyxcbiAgICAgICAgbGFuZ3VhZ2VLZXk6IHN0cmluZyxcbiAgICAgICAgZGVmYXVsdFN0cmluZzogc3RyaW5nLFxuICAgICAgICBwYXJhbWV0ZXJzPzogeyBbeDogc3RyaW5nXTogc3RyaW5nIHwgVUlMb2NhbGl6ZWRUZXh0T2JqZWN0OyB9XG4gICAgKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIExhbmd1YWdlU2VydmljZS5zdHJpbmdGb3JLZXkoa2V5LCBsYW5ndWFnZUtleSwgZGVmYXVsdFN0cmluZywgcGFyYW1ldGVycylcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzdGF0aWMgbG9jYWxpemVkVGV4dE9iamVjdEZvcktleShcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIGRlZmF1bHRTdHJpbmcgPSBrZXksXG4gICAgICAgIHBhcmFtZXRlcnM/OiB7IFt4OiBzdHJpbmddOiBzdHJpbmcgfCBVSUxvY2FsaXplZFRleHRPYmplY3Q7IH1cbiAgICApIHtcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge31cbiAgICBcbiAgICAgICAgTGFuZ3VhZ2VTZXJ2aWNlLmxhbmd1YWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChsYW5ndWFnZU9iamVjdCwgbGFuZ3VhZ2VLZXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0W2xhbmd1YWdlS2V5XSA9IExhbmd1YWdlU2VydmljZS5zdHJpbmdGb3JLZXkoa2V5LCBsYW5ndWFnZUtleSwgZGVmYXVsdFN0cmluZywgcGFyYW1ldGVycylcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgbG9jYWxpemVkVGV4dE9iamVjdEZvcktleShcbiAgICAgICAga2V5OiBzdHJpbmcsXG4gICAgICAgIGRlZmF1bHRTdHJpbmc/OiBzdHJpbmcsXG4gICAgICAgIHBhcmFtZXRlcnM/OiB7IFt4OiBzdHJpbmddOiBzdHJpbmcgfCBVSUxvY2FsaXplZFRleHRPYmplY3Q7IH1cbiAgICApIHtcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gTGFuZ3VhZ2VTZXJ2aWNlLmxvY2FsaXplZFRleHRPYmplY3RGb3JLZXkoa2V5LCBkZWZhdWx0U3RyaW5nLCBwYXJhbWV0ZXJzKVxuICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzdGF0aWMgbG9jYWxpemVkVGV4dE9iamVjdEZvclRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHRleHQpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBuaWxcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgXG4gICAgICAgICAgICBbTGFuZ3VhZ2VTZXJ2aWNlLmRlZmF1bHRMYW5ndWFnZUtleV06IHRleHRcbiAgICAgICAgXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgbG9jYWxpemVkVGV4dE9iamVjdEZvclRleHQodGV4dDogc3RyaW5nKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IExhbmd1YWdlU2VydmljZS5sb2NhbGl6ZWRUZXh0T2JqZWN0Rm9yVGV4dCh0ZXh0KVxuICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzdGF0aWMgc3RyaW5nRm9yQ3VycmVudExhbmd1YWdlKGxvY2FsaXplZFRleHRPYmplY3Q6IENCTG9jYWxpemVkVGV4dE9iamVjdCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKCFMYW5ndWFnZVNlcnZpY2UgfHwgIWxvY2FsaXplZFRleHRPYmplY3QpIHtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGFzZCA9IDFcbiAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbG9jYWxpemVkVGV4dE9iamVjdCA9IEZJUlNUX09SX05JTChsb2NhbGl6ZWRUZXh0T2JqZWN0KVxuICAgIFxuICAgICAgICB2YXIgcmVzdWx0ID0gbG9jYWxpemVkVGV4dE9iamVjdFtMYW5ndWFnZVNlcnZpY2UuY3VycmVudExhbmd1YWdlS2V5XVxuICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gbG9jYWxpemVkVGV4dE9iamVjdFtMYW5ndWFnZVNlcnZpY2UuZGVmYXVsdExhbmd1YWdlS2V5XVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChJU19OT1QocmVzdWx0KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXN1bHQgPSBsb2NhbGl6ZWRUZXh0T2JqZWN0W1wiZW5cIl1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHN0cmluZ0ZvckN1cnJlbnRMYW5ndWFnZShsb2NhbGl6ZWRUZXh0T2JqZWN0OiBDQkxvY2FsaXplZFRleHRPYmplY3QpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBMYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yQ3VycmVudExhbmd1YWdlKGxvY2FsaXplZFRleHRPYmplY3QpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5VSUNvcmUubGFuZ3VhZ2VTZXJ2aWNlID0gTGFuZ3VhZ2VTZXJ2aWNlXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJQ29yZUV4dGVuc2lvbnMudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1VJQ29yZS9VSUNvcmUudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1VJQ29yZS9VSUNvbG9yLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0NCRGlhbG9nVmlldy50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vQ3VzdG9tIGNvbXBvbmVudHMvTGFuZ3VhZ2VTZXJ2aWNlLnRzXCIgLz5cblxuXG5cblxuXG5jbGFzcyBDQkRpYWxvZ1ZpZXdTaG93ZXIgZXh0ZW5kcyBVSU9iamVjdCB7XG4gICAgXG4gICAgZGlhbG9nVmlldzogVUlEaWFsb2dWaWV3PENCRGlhbG9nVmlldz5cbiAgICBzdGF0aWMgY3VycmVudERpYWxvZ1ZpZXdTaG93ZXI6IENCRGlhbG9nVmlld1Nob3dlclxuICAgIHN0YXRpYyBuZXh0U2hvd0RpYWxvZ0Z1bmN0aW9uczogRnVuY3Rpb25bXSA9IFtdXG4gICAgc3RhdGljIGN1cnJlbnRBY3Rpb25JbmRpY2F0b3JEaWFsb2dWaWV3U2hvd2VyOiBDQkRpYWxvZ1ZpZXdTaG93ZXIgPSBuaWxcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ/OiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gQ0JEaWFsb2dWaWV3U2hvd2VyXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJT2JqZWN0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3ID0gbmV3IFVJRGlhbG9nVmlldzxDQkRpYWxvZ1ZpZXc+KClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3ID0gbmV3IENCRGlhbG9nVmlldyhlbGVtZW50SUQpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLndoaXRlQ29sb3JcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRpYWxvZ0xheW91dEZ1bmN0aW9uID0gdGhpcy5kaWFsb2dWaWV3LmxheW91dFN1YnZpZXdzLmJpbmQodGhpcy5kaWFsb2dWaWV3KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LmxheW91dFN1YnZpZXdzID0gZnVuY3Rpb24gKHRoaXM6IENCRGlhbG9nVmlld1Nob3dlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBkaWFsb2dMYXlvdXRGdW5jdGlvbigpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmZyYW1lID0gbmV3IFVJUmVjdGFuZ2xlKFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgd2luZG93LmlubmVyV2lkdGhcbiAgICAgICAgICAgICkucmVjdGFuZ2xlV2l0aEhlaWdodChcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5pbnRyaW5zaWNDb250ZW50SGVpZ2h0KHRoaXMuZ2V0RGlhbG9nV2lkdGgoKSksXG4gICAgICAgICAgICAgICAgMC41XG4gICAgICAgICAgICApLnJlY3RhbmdsZVdpdGhXaWR0aCh0aGlzLmdldERpYWxvZ1dpZHRoKCksIDAuNSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kaWFsb2dWaWV3LmZyYW1lID0gVUlDb3JlLm1haW4ucm9vdFZpZXdDb250cm9sbGVyLnZpZXcuYm91bmRzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy55ZXNCdXR0b24uYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICBVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duXG4gICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXdTaG93ZXIsIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnllc0J1dHRvbldhc1ByZXNzZWQoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcubm9CdXR0b24uYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICBVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duXG4gICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXdTaG93ZXIsIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vQnV0dG9uV2FzUHJlc3NlZCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0RGlhbG9nV2lkdGgoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYWRkaW5nID0gUm9vdFZpZXdDb250cm9sbGVyLnBhZGRpbmdMZW5ndGhcbiAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSBwYWRkaW5nICogMC43NVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHZhciByZXN1bHQgPSAyNTBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5kaWFsb2dWaWV3LnZpZXcudGl0bGVMYWJlbC5pbnRyaW5zaWNDb250ZW50V2lkdGgoKSArIHBhZGRpbmcgKiAyXG4gICAgICAgIFxuICAgICAgICByZXN1bHQgPSBNYXRoLm1heChyZXN1bHQsIHRoaXMuZGlhbG9nVmlldy52aWV3LnZpZXcuaW50cmluc2ljQ29udGVudFdpZHRoKHRoaXMuZGlhbG9nVmlldy52aWV3LnZpZXcudmlld0hUTUxFbGVtZW50Lm5hdHVyYWxIZWlnaHQgfHwgMTAwMDAwMDAwMCkpXG4gICAgICAgIFxuICAgICAgICByZXN1bHQgPSBNYXRoLm1heChyZXN1bHQsIHdpZHRoKVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0ID0gTWF0aC5taW4ocmVzdWx0LCAxMDAwKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgZGlhbG9nTWF4V2lkdGggPSAodGhpcy5kaWFsb2dWaWV3LnN1cGVydmlldyB8fFxuICAgICAgICAgICAgeyBcImJvdW5kc1wiOiBuZXcgVUlSZWN0YW5nbGUoMCwgMCwgMCwgcmVzdWx0KSB9KS5ib3VuZHMud2lkdGhcbiAgICAgICAgXG4gICAgICAgIHJlc3VsdCA9IE1hdGgubWluKHJlc3VsdCwgZGlhbG9nTWF4V2lkdGgpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHllc0J1dHRvbldhc1ByZXNzZWQoKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIG5vQnV0dG9uV2FzUHJlc3NlZCgpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgY2FuY2VsQnV0dG9uV2FzUHJlc3NlZCgpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2hvd1F1ZXN0aW9uRGlhbG9nSW5Sb290Vmlldyh0aXRsZVRleHRPYmplY3Q/OiBDQkxvY2FsaXplZFRleHRPYmplY3QsIHF1ZXN0aW9uVGV4dE9iamVjdD86IENCTG9jYWxpemVkVGV4dE9iamVjdCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmluaXRUaXRsZUxhYmVsSWZOZWVkZWQoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcudGl0bGVMYWJlbC5sb2NhbGl6ZWRUZXh0T2JqZWN0ID0gdGl0bGVUZXh0T2JqZWN0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmluaXRRdWVzdGlvbkxhYmVsSWZOZWVkZWQoKVxuICAgICAgICBcbiAgICAgICAgaWYgKElTKHF1ZXN0aW9uVGV4dE9iamVjdCkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcucXVlc3Rpb25MYWJlbC5sb2NhbGl6ZWRUZXh0T2JqZWN0ID0gcXVlc3Rpb25UZXh0T2JqZWN0XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmluaXRZZXNOb0J1dHRvbnNJZk5lZWRlZCgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcubm9CdXR0b24uYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXdTaG93ZXIsIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vQnV0dG9uV2FzUHJlc3NlZCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy55ZXNCdXR0b24uYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXdTaG93ZXIsIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnllc0J1dHRvbldhc1ByZXNzZWQoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy5zaG93SW5Sb290VmlldyhZRVMpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2hvd01lc3NhZ2VEaWFsb2dJblJvb3RWaWV3KHRpdGxlVGV4dE9iamVjdD86IENCTG9jYWxpemVkVGV4dE9iamVjdCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmluaXRUaXRsZUxhYmVsSWZOZWVkZWQoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcudGl0bGVMYWJlbC5sb2NhbGl6ZWRUZXh0T2JqZWN0ID0gdGl0bGVUZXh0T2JqZWN0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcuaW5pdENhbmNlbEJ1dHRvbklmTmVlZGVkKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5jYW5jZWxCdXR0b24uYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgIF0sIGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXdTaG93ZXIsIHNlbmRlcjogVUlCdXR0b24sIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEJ1dHRvbldhc1ByZXNzZWQoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy5zaG93SW5Sb290VmlldyhZRVMpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5jYW5jZWxCdXR0b24uZm9jdXMoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNob3dEaWFsb2dJblJvb3RWaWV3KHZpZXc6IFVJVmlldykge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LnZpZXcgPSB2aWV3XG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5pbml0Q2FuY2VsQnV0dG9uSWZOZWVkZWQoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmNhbmNlbEJ1dHRvbi5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnRzKFtcbiAgICAgICAgICAgIFVJQnV0dG9uLmNvbnRyb2xFdmVudC5FbnRlckRvd24sIFVJQnV0dG9uLmNvbnRyb2xFdmVudC5Qb2ludGVyVXBJbnNpZGVcbiAgICAgICAgXSwgZnVuY3Rpb24gKHRoaXM6IENCRGlhbG9nVmlld1Nob3dlciwgc2VuZGVyOiBVSUJ1dHRvbiwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uV2FzUHJlc3NlZCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnNob3dJblJvb3RWaWV3KFlFUylcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmNhbmNlbEJ1dHRvbi5mb2N1cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2hvd0ltYWdlRGlhbG9nSW5Sb290VmlldyhpbWFnZVVSTDogc3RyaW5nLCBkZWxldGVJbWFnZUNhbGxiYWNrPzogRnVuY3Rpb24pIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB2YXIgbG9hZGluZ0xhYmVsID0gbmV3IFVJVGV4dFZpZXcoKVxuICAgICAgICBcbiAgICAgICAgbG9hZGluZ0xhYmVsLnRleHQgPSBcIkxvYWRpbmcgaW1hZ2UuXCJcbiAgICAgICAgXG4gICAgICAgIGxvYWRpbmdMYWJlbC50ZXh0QWxpZ25tZW50ID0gVUlUZXh0Vmlldy50ZXh0QWxpZ25tZW50LmNlbnRlclxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcudmlldyA9IGxvYWRpbmdMYWJlbFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGltYWdlVmlldyA9IG5ldyBVSUltYWdlVmlldygpXG4gICAgICAgIFxuICAgICAgICBpbWFnZVZpZXcuaW1hZ2VTb3VyY2UgPSBpbWFnZVVSTFxuICAgICAgICBcbiAgICAgICAgaW1hZ2VWaWV3LnZpZXdIVE1MRWxlbWVudC5vbmxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LnZpZXcgPSBpbWFnZVZpZXdcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW1hZ2VWaWV3LnNldE5lZWRzTGF5b3V0VXBUb1Jvb3RWaWV3KClcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaW1hZ2VWaWV3LmZpbGxNb2RlID0gVUlJbWFnZVZpZXcuZmlsbE1vZGUuYXNwZWN0Rml0SWZMYXJnZXJcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoSVMoZGVsZXRlSW1hZ2VDYWxsYmFjaykpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcuaW5pdFllc05vQnV0dG9uc0lmTmVlZGVkKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcueWVzQnV0dG9uLnRpdGxlTGFiZWwudGV4dCA9IFwiQ2xvc2VcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5ub0J1dHRvbi50aXRsZUxhYmVsLnRleHQgPSBcIkRlbGV0ZVwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3Lm5vQnV0dG9uRGlzbWlzc2VzRGlhbG9nID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcubm9CdXR0b24uYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICAgICAgVUlCdXR0b24uY29udHJvbEV2ZW50LkVudGVyRG93biwgVUlCdXR0b24uY29udHJvbEV2ZW50LlBvaW50ZXJVcEluc2lkZVxuICAgICAgICAgICAgXSwgZnVuY3Rpb24gKHRoaXM6IENCRGlhbG9nVmlld1Nob3dlciwgc2VuZGVyOiBVSUJ1dHRvbiwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZGlhbG9nU2hvd2VyID0gQ0JEaWFsb2dWaWV3U2hvd2VyLl9kaWFsb2dTaG93ZXJXaXRoRGlzbWlzc0NhbGxiYWNrKGZ1bmN0aW9uICh0aGlzOiBDQkRpYWxvZ1ZpZXdTaG93ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5kaWFsb2dWaWV3LmRpc21pc3MoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdmFyIHRleHRPYmplY3QgPSBMYW5ndWFnZVNlcnZpY2UubG9jYWxpemVkVGV4dE9iamVjdEZvclRleHQoXCJEZWxldGUgdGhpcyBpbWFnZS5cIilcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkaWFsb2dTaG93ZXIuc2hvd1F1ZXN0aW9uRGlhbG9nSW5Sb290Vmlldyh0ZXh0T2JqZWN0KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRpYWxvZ1Nob3dlci55ZXNCdXR0b25XYXNQcmVzc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlSW1hZ2VDYWxsYmFjaygpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dTaG93ZXIuZGlhbG9nVmlldy5kaXNtaXNzKClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3Lnllc0J1dHRvbi5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnRzKFtcbiAgICAgICAgICAgICAgICBVSUJ1dHRvbi5jb250cm9sRXZlbnQuRW50ZXJEb3duLCBVSUJ1dHRvbi5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgICAgICBdLCBmdW5jdGlvbiAodGhpczogQ0JEaWFsb2dWaWV3U2hvd2VyLCBzZW5kZXI6IFVJQnV0dG9uLCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcuZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcuaW5pdENhbmNlbEJ1dHRvbklmTmVlZGVkKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcuY2FuY2VsQnV0dG9uLnRpdGxlTGFiZWwudGV4dCA9IFwiQ2xvc2VcIlxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy5zaG93SW5Sb290VmlldyhZRVMpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5jYW5jZWxCdXR0b24uZm9jdXMoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNob3dBY3Rpb25JbmRpY2F0b3JEaWFsb2dJblJvb3RWaWV3KG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBhY3Rpb25JbmRpY2F0b3IgPSBuZXcgVUlBY3Rpb25JbmRpY2F0b3IoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy56SW5kZXggPSAxNTBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LnZpZXcgPSBhY3Rpb25JbmRpY2F0b3JcbiAgICAgICAgXG4gICAgICAgIGFjdGlvbkluZGljYXRvci5zdHlsZS5taW5IZWlnaHQgPSBcIjEwMHB4XCJcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmluaXRRdWVzdGlvbkxhYmVsSWZOZWVkZWQoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcucXVlc3Rpb25MYWJlbC50ZXh0ID0gbWVzc2FnZVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGFjdGlvbkluZGljYXRvci5zdGFydCgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRpYWxvZ1ZpZXcudmlldy5iYWNrZ3JvdW5kQ29sb3IgPSBDQkNvbG9yLnByaW1hcnlDb250ZW50Q29sb3IuY29sb3JXaXRoQWxwaGEoMC41KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LnZpZXcucXVlc3Rpb25MYWJlbC50ZXh0Q29sb3IgPSBVSUNvbG9yLndoaXRlQ29sb3JcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5kaWFsb2dWaWV3LmRpc21pc3Nlc09uVGFwT3V0c2lkZSA9IE5PXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgQ0JEaWFsb2dWaWV3U2hvd2VyLmN1cnJlbnRBY3Rpb25JbmRpY2F0b3JEaWFsb2dWaWV3U2hvd2VyID0gdGhpc1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy5zaG93SW5Sb290VmlldyhOTylcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGlhbG9nVmlldy52aWV3LmNhbmNlbEJ1dHRvbi5mb2N1cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIHNob3dOZXh0RGlhbG9nKCkge1xuICAgICAgICBcbiAgICAgICAgKENCRGlhbG9nVmlld1Nob3dlci5uZXh0U2hvd0RpYWxvZ0Z1bmN0aW9ucy5maXJzdEVsZW1lbnQgfHwgbmlsKSgpXG4gICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5uZXh0U2hvd0RpYWxvZ0Z1bmN0aW9ucy5yZW1vdmVFbGVtZW50QXRJbmRleCgwKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGFsZXJ0KHRleHQ6IHN0cmluZywgZGlzbWlzc0NhbGxiYWNrOiBGdW5jdGlvbiA9IG5pbCkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGlhbG9nU2hvd2VyID0gQ0JEaWFsb2dWaWV3U2hvd2VyLl9kaWFsb2dTaG93ZXJXaXRoRGlzbWlzc0NhbGxiYWNrKGRpc21pc3NDYWxsYmFjaylcbiAgICAgICAgY29uc3QgdGV4dE9iamVjdCA9IExhbmd1YWdlU2VydmljZS5sb2NhbGl6ZWRUZXh0T2JqZWN0Rm9yVGV4dCh0ZXh0KVxuICAgICAgICBjb25zdCBzaG93RGlhbG9nRnVuY3Rpb24gPSBkaWFsb2dTaG93ZXIuc2hvd01lc3NhZ2VEaWFsb2dJblJvb3RWaWV3LmJpbmQoZGlhbG9nU2hvd2VyLCB0ZXh0T2JqZWN0KVxuICAgICAgICBDQkRpYWxvZ1ZpZXdTaG93ZXIuX3Nob3dEaWFsb2dXaXRoRnVuY3Rpb24oc2hvd0RpYWxvZ0Z1bmN0aW9uLCBkaWFsb2dTaG93ZXIpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgbG9jYWxpemVkQWxlcnQodGV4dE9iamVjdDogQ0JMb2NhbGl6ZWRUZXh0T2JqZWN0LCBkaXNtaXNzQ2FsbGJhY2s6IEZ1bmN0aW9uID0gbmlsKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkaWFsb2dTaG93ZXIgPSBDQkRpYWxvZ1ZpZXdTaG93ZXIuX2RpYWxvZ1Nob3dlcldpdGhEaXNtaXNzQ2FsbGJhY2soZGlzbWlzc0NhbGxiYWNrKVxuICAgICAgICBjb25zdCBzaG93RGlhbG9nRnVuY3Rpb24gPSBkaWFsb2dTaG93ZXIuc2hvd01lc3NhZ2VEaWFsb2dJblJvb3RWaWV3LmJpbmQoZGlhbG9nU2hvd2VyLCB0ZXh0T2JqZWN0KVxuICAgICAgICBDQkRpYWxvZ1ZpZXdTaG93ZXIuX3Nob3dEaWFsb2dXaXRoRnVuY3Rpb24oc2hvd0RpYWxvZ0Z1bmN0aW9uLCBkaWFsb2dTaG93ZXIpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzdGF0aWMgc2hvd1F1ZXN0aW9uRGlhbG9nKHF1ZXN0aW9uVGV4dDogc3RyaW5nLCBkaXNtaXNzQ2FsbGJhY2s6IEZ1bmN0aW9uID0gbmlsKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkaWFsb2dTaG93ZXIgPSBDQkRpYWxvZ1ZpZXdTaG93ZXIuX2RpYWxvZ1Nob3dlcldpdGhEaXNtaXNzQ2FsbGJhY2soZGlzbWlzc0NhbGxiYWNrKVxuICAgICAgICBjb25zdCB0ZXh0T2JqZWN0ID0gTGFuZ3VhZ2VTZXJ2aWNlLmxvY2FsaXplZFRleHRPYmplY3RGb3JUZXh0KHF1ZXN0aW9uVGV4dClcbiAgICAgICAgY29uc3Qgc2hvd0RpYWxvZ0Z1bmN0aW9uID0gZGlhbG9nU2hvd2VyLnNob3dRdWVzdGlvbkRpYWxvZ0luUm9vdFZpZXcuYmluZChkaWFsb2dTaG93ZXIsIHRleHRPYmplY3QpXG4gICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5fc2hvd0RpYWxvZ1dpdGhGdW5jdGlvbihzaG93RGlhbG9nRnVuY3Rpb24sIGRpYWxvZ1Nob3dlcilcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBkaWFsb2dTaG93ZXJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHN0YXRpYyBzaG93SW1hZ2VEaWFsb2coaW1hZ2VVUkw6IHN0cmluZywgZGVsZXRlSW1hZ2VDYWxsYmFjazogRnVuY3Rpb24gPSBuaWwsIGRpc21pc3NDYWxsYmFjazogRnVuY3Rpb24gPSBuaWwpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBkaWFsb2dTaG93ZXIgPSBDQkRpYWxvZ1ZpZXdTaG93ZXIuX2RpYWxvZ1Nob3dlcldpdGhEaXNtaXNzQ2FsbGJhY2soZGlzbWlzc0NhbGxiYWNrKVxuICAgICAgICBcbiAgICAgICAgdmFyIHNob3dEaWFsb2dGdW5jdGlvbiA9IGRpYWxvZ1Nob3dlci5zaG93SW1hZ2VEaWFsb2dJblJvb3RWaWV3LmJpbmQoXG4gICAgICAgICAgICBkaWFsb2dTaG93ZXIsXG4gICAgICAgICAgICBpbWFnZVVSTCxcbiAgICAgICAgICAgIGRlbGV0ZUltYWdlQ2FsbGJhY2tcbiAgICAgICAgKVxuICAgICAgICBDQkRpYWxvZ1ZpZXdTaG93ZXIuX3Nob3dEaWFsb2dXaXRoRnVuY3Rpb24oc2hvd0RpYWxvZ0Z1bmN0aW9uLCBkaWFsb2dTaG93ZXIpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGlhbG9nU2hvd2VyXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIHNob3dEaWFsb2codmlldzogVUlWaWV3LCBkaXNtaXNzQ2FsbGJhY2s6IEZ1bmN0aW9uID0gbmlsKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkaWFsb2dTaG93ZXIgPSBDQkRpYWxvZ1ZpZXdTaG93ZXIuX2RpYWxvZ1Nob3dlcldpdGhEaXNtaXNzQ2FsbGJhY2soZGlzbWlzc0NhbGxiYWNrKVxuICAgICAgICBjb25zdCBzaG93RGlhbG9nRnVuY3Rpb24gPSBkaWFsb2dTaG93ZXIuc2hvd0RpYWxvZ0luUm9vdFZpZXcuYmluZChkaWFsb2dTaG93ZXIsIHZpZXcpXG4gICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5fc2hvd0RpYWxvZ1dpdGhGdW5jdGlvbihzaG93RGlhbG9nRnVuY3Rpb24sIGRpYWxvZ1Nob3dlcilcbiAgICBcbiAgICAgICAgcmV0dXJuIGRpYWxvZ1Nob3dlcjtcbiAgICBcbiAgICB9XG4gICAgXG4gICAgc3RhdGljIHNob3dBY3Rpb25JbmRpY2F0b3JEaWFsb2cobWVzc2FnZTogc3RyaW5nLCBkaXNtaXNzQ2FsbGJhY2s6IEZ1bmN0aW9uID0gbmlsKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKElTKENCRGlhbG9nVmlld1Nob3dlci5jdXJyZW50QWN0aW9uSW5kaWNhdG9yRGlhbG9nVmlld1Nob3dlcikpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBDQkRpYWxvZ1ZpZXdTaG93ZXIuY3VycmVudEFjdGlvbkluZGljYXRvckRpYWxvZ1ZpZXdTaG93ZXIuZGlhbG9nVmlldy52aWV3LnF1ZXN0aW9uTGFiZWwudGV4dCA9IG1lc3NhZ2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQ0JEaWFsb2dWaWV3U2hvd2VyLmN1cnJlbnRBY3Rpb25JbmRpY2F0b3JEaWFsb2dWaWV3U2hvd2VyLmRpYWxvZ1ZpZXcudmlldy5zZXROZWVkc0xheW91dFVwVG9Sb290VmlldygpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBkaWFsb2dTaG93ZXIgPSBDQkRpYWxvZ1ZpZXdTaG93ZXIuX2RpYWxvZ1Nob3dlcldpdGhEaXNtaXNzQ2FsbGJhY2soZGlzbWlzc0NhbGxiYWNrKVxuICAgICAgICBcbiAgICAgICAgZGlhbG9nU2hvd2VyLnNob3dBY3Rpb25JbmRpY2F0b3JEaWFsb2dJblJvb3RWaWV3KG1lc3NhZ2UpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGlhbG9nU2hvd2VyXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGhpZGVBY3Rpb25JbmRpY2F0b3JEaWFsb2coKSB7XG4gICAgICAgIFxuICAgICAgICBDQkRpYWxvZ1ZpZXdTaG93ZXIuY3VycmVudEFjdGlvbkluZGljYXRvckRpYWxvZ1ZpZXdTaG93ZXIuZGlhbG9nVmlldy5kaXNtaXNzKClcbiAgICAgICAgXG4gICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5jdXJyZW50QWN0aW9uSW5kaWNhdG9yRGlhbG9nVmlld1Nob3dlciA9IG5pbFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2RpYWxvZ1Nob3dlcldpdGhEaXNtaXNzQ2FsbGJhY2soZGlzbWlzc0NhbGxiYWNrOiBGdW5jdGlvbikge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGlhbG9nU2hvd2VyID0gbmV3IENCRGlhbG9nVmlld1Nob3dlcigpXG4gICAgICAgIGNvbnN0IGRpc21pc3NGdW5jdGlvbiA9IGRpYWxvZ1Nob3dlci5kaWFsb2dWaWV3LmRpc21pc3MuYmluZChkaWFsb2dTaG93ZXIuZGlhbG9nVmlldylcbiAgICAgICAgXG4gICAgICAgIGRpYWxvZ1Nob3dlci5kaWFsb2dWaWV3LmRpc21pc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkaXNtaXNzRnVuY3Rpb24oKVxuICAgICAgICAgICAgZGlzbWlzc0NhbGxiYWNrKClcbiAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5jdXJyZW50RGlhbG9nVmlld1Nob3dlciA9IG51bGxcbiAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5zaG93TmV4dERpYWxvZygpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBkaWFsb2dTaG93ZXJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHByaXZhdGUgc3RhdGljIF9zaG93RGlhbG9nV2l0aEZ1bmN0aW9uKHNob3dEaWFsb2dGdW5jdGlvbjogYW55LCBkaWFsb2dTaG93ZXI6IENCRGlhbG9nVmlld1Nob3dlcikge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTKENCRGlhbG9nVmlld1Nob3dlci5jdXJyZW50RGlhbG9nVmlld1Nob3dlcikpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgQ0JEaWFsb2dWaWV3U2hvd2VyLm5leHRTaG93RGlhbG9nRnVuY3Rpb25zLnB1c2goc2hvd0RpYWxvZ0Z1bmN0aW9uKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIENCRGlhbG9nVmlld1Nob3dlci5jdXJyZW50RGlhbG9nVmlld1Nob3dlciA9IGRpYWxvZ1Nob3dlclxuICAgICAgICAgICAgc2hvd0RpYWxvZ0Z1bmN0aW9uKClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJTGlua0J1dHRvbi50c1wiIC8+XG5cblxuXG5cblxuY2xhc3MgQ0JMaW5rQnV0dG9uIGV4dGVuZHMgVUlMaW5rQnV0dG9uIHtcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ/OiBzdHJpbmcsIGVsZW1lbnRUeXBlPzogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcihlbGVtZW50SUQsIGVsZW1lbnRUeXBlKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBDQkxpbmtCdXR0b25cbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlMaW5rQnV0dG9uXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQ6IHN0cmluZywgdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5pbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5idXR0b24ucmVtb3ZlRnJvbVN1cGVydmlldygpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmJ1dHRvbiA9IG5ldyBDQkJ1dHRvbih0aGlzLmVsZW1lbnRJRCArIFwiQnV0dG9uXCIsIGluaXRWaWV3RGF0YS5lbGVtZW50VHlwZSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLmJ1dHRvbilcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1VJQ29yZS9VSVZpZXcudHNcIiAvPlxuXG5cblxuXG5cbmNsYXNzIENlbGxWaWV3IGV4dGVuZHMgVUlCdXR0b24ge1xuICAgIFxuICAgIFxuICAgIF9pc0FCdXR0b24gPSBOT1xuICAgIF9yaWdodEltYWdlVmlldzogVUlJbWFnZVZpZXdcbiAgICBcbiAgICBsZWZ0SW5zZXQgPSAwXG4gICAgcmlnaHRJbnNldCA9IDBcbiAgICBcbiAgICAvL3RpdGxlTGFiZWw6IFVJVGV4dFZpZXc7XG4gICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudElEPzogc3RyaW5nLCB0aXRsZUxhYmVsVHlwZTogc3RyaW5nID0gVUlUZXh0Vmlldy50eXBlLnNwYW4pIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRCwgdW5kZWZpbmVkLCB0aXRsZUxhYmVsVHlwZSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gQ2VsbFZpZXdcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3XG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLnRpdGxlTGFiZWwgPSBuZXcgVUlUZXh0Vmlldyh0aGlzLmVsZW1lbnRJRCArIFwiVGl0bGVMYWJlbFwiLCB0aXRsZUxhYmVsVHlwZSk7XG4gICAgICAgIC8vIHRoaXMuYWRkU3Vidmlldyh0aGlzLnRpdGxlTGFiZWwpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVGb3JDdXJyZW50SXNBQnV0dG9uU3RhdGUoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHNldCBpc0FCdXR0b24oaXNBQnV0dG9uOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc0FCdXR0b24gPSBpc0FCdXR0b25cbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlRm9yQ3VycmVudElzQUJ1dHRvblN0YXRlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBpc0FCdXR0b24oKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5faXNBQnV0dG9uXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICB1cGRhdGVGb3JDdXJyZW50SXNBQnV0dG9uU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX2lzQUJ1dHRvbikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC51c2VySW50ZXJhY3Rpb25FbmFibGVkID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLm5hdGl2ZVNlbGVjdGlvbkVuYWJsZWQgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dEFsaWdubWVudCA9IFVJVGV4dFZpZXcudGV4dEFsaWdubWVudC5jZW50ZXJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb25FbmFibGVkID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdHlsZS5vdXRsaW5lID0gXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmNvbG9ycyA9IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aXRsZUxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBub3JtYWw6IFVJQ29sb3IuYmx1ZUNvbG9yLFxuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZDogVUlDb2xvci5ibHVlQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBVSUNvbG9yLmJsdWVDb2xvclxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbDogVUlDb2xvci50cmFuc3BhcmVudENvbG9yLFxuICAgICAgICAgICAgICAgICAgICBob3ZlcmVkOiBuZXcgVUlDb2xvcihcIiNGOEY4RjhcIiksXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBuZXcgVUlDb2xvcihcIiNlYmViZWJcIiksXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBuZXcgVUlDb2xvcihcIiNlYmViZWJcIilcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdHlsZS5jdXJzb3IgPSBcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC51c2VySW50ZXJhY3Rpb25FbmFibGVkID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5uYXRpdmVTZWxlY3Rpb25FbmFibGVkID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0QWxpZ25tZW50ID0gVUlUZXh0Vmlldy50ZXh0QWxpZ25tZW50LmxlZnRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5uYXRpdmVTZWxlY3Rpb25FbmFibGVkID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub3V0bGluZSA9IFwibm9uZVwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY29sb3JzID0ge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRpdGxlTGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbDogVUlDb2xvci5ibGFja0NvbG9yLFxuICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZDogVUlDb2xvci5ibGFja0NvbG9yLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogVUlDb2xvci5ibGFja0NvbG9yXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDoge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsOiBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3JcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgaW5pdFJpZ2h0SW1hZ2VWaWV3SWZOZWVkZWQoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fcmlnaHRJbWFnZVZpZXcpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3JpZ2h0SW1hZ2VWaWV3ID0gbmV3IFVJSW1hZ2VWaWV3KHRoaXMuZWxlbWVudElEICsgXCJSaWdodEltYWdlVmlld1wiKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fcmlnaHRJbWFnZVZpZXcudXNlckludGVyYWN0aW9uRW5hYmxlZCA9IE5PXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgcmlnaHRJbWFnZVNvdXJjZShpbWFnZVNvdXJjZTogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmIChJUyhpbWFnZVNvdXJjZSkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbml0UmlnaHRJbWFnZVZpZXdJZk5lZWRlZCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0SW1hZ2VWaWV3LmltYWdlU291cmNlID0gaW1hZ2VTb3VyY2VcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5hZGRTdWJ2aWV3KHRoaXMuX3JpZ2h0SW1hZ2VWaWV3KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0SW1hZ2VWaWV3LnJlbW92ZUZyb21TdXBlcnZpZXcoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgcmlnaHRJbWFnZVNvdXJjZSgpIHtcbiAgICBcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5pbFxuICAgIFxuICAgICAgICBpZiAodGhpcy5fcmlnaHRJbWFnZVZpZXcpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcmlnaHRJbWFnZVZpZXcuaW1hZ2VTb3VyY2VcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBsYXlvdXRTdWJ2aWV3cygpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICBcbiAgICAgICAgY29uc3QgcGFkZGluZyA9IFJvb3RWaWV3Q29udHJvbGxlci5wYWRkaW5nTGVuZ3RoXG4gICAgICAgIGNvbnN0IGxhYmVsSGVpZ2h0ID0gcGFkZGluZ1xuICAgIFxuICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmJvdW5kc1xuICAgIFxuICAgIFxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwuY2VudGVyWUluQ29udGFpbmVyKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5sZWZ0ID0gXCJcIiArIChwYWRkaW5nICogMC41ICsgdGhpcy5sZWZ0SW5zZXQpLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwuc3R5bGUucmlnaHQgPSBcIlwiICsgKHBhZGRpbmcgKiAwLjUgKyB0aGlzLnJpZ2h0SW5zZXQpLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLm1heEhlaWdodCA9IFwiMTAwJVwiXG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpdGxlTGFiZWwuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gICAgICAgIFxuICAgICAgICAvL3RoaXMudGl0bGVMYWJlbC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fcmlnaHRJbWFnZVZpZXcgJiYgdGhpcy5fcmlnaHRJbWFnZVZpZXcuc3VwZXJ2aWV3ID09IHRoaXMpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdmFyIGltYWdlSGVpZ2h0ID0gYm91bmRzLmhlaWdodCAtIHBhZGRpbmc7XG4gICAgICAgICAgICAvLyB0aGlzLl9yaWdodEltYWdlVmlldy5mcmFtZSA9IG5ldyBVSVJlY3RhbmdsZShib3VuZHMud2lkdGggLSBpbWFnZUhlaWdodCAtIHBhZGRpbmcgKiAwLjUsIHBhZGRpbmcgKiAwLjUsIGltYWdlSGVpZ2h0LCBpbWFnZUhlaWdodCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0SW1hZ2VWaWV3LmZyYW1lID0gYm91bmRzLnJlY3RhbmdsZVdpdGhJbnNldHModGhpcy5sZWZ0SW5zZXQsIHBhZGRpbmcgKiAwLjUgK1xuICAgICAgICAgICAgICAgIHRoaXMucmlnaHRJbnNldCwgMCwgMCkucmVjdGFuZ2xlV2l0aFdpZHRoKDI0LCAxKS5yZWN0YW5nbGVXaXRoSGVpZ2h0KDI0LCAwLjUpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5yaWdodCA9IFwiXCIgK1xuICAgICAgICAgICAgICAgIChwYWRkaW5nICogMC41ICsgdGhpcy5yaWdodEluc2V0ICsgdGhpcy5fcmlnaHRJbWFnZVZpZXcuZnJhbWUud2lkdGgpLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJVmlldy50c1wiLz5cblxuXG5cblxuXG5jbGFzcyBTZWFyY2hUZXh0RmllbGQgZXh0ZW5kcyBVSVZpZXcge1xuICAgIFxuICAgIF90ZXh0RmllbGQ6IFVJVmlld1xuICAgIF9zZWFyY2hCdXR0b246IFVJVmlld1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRDogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcihlbGVtZW50SUQpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBTZWFyY2hUZXh0RmllbGRcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQ6IHN0cmluZywgdmlld0hUTUxFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuaW5pdFZpZXcoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdmlld0hUTUxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpbnB1dFwiLCBcImlucHV0LS1zZWFyY2hcIilcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB2aWV3SFRNTEVsZW1lbnQuaW5uZXJIVE1MID0gXCJcXFxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJpbnB1dF9fYnV0dG9uXFxcIj5cXFxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJtYXRlcmlhbC1pY29uc1xcXCI+c2VhcmNoPC9pPlxcXG4gICAgICAgICAgICA8L2J1dHRvbj5cXFxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInNlYXJjaFxcXCIgY2xhc3M9XFxcImlucHV0X19maWVsZFxcXCIgcGxhY2Vob2xkZXI9XFxcIlNlYXJjaFxcXCI+XCJcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3RleHRGaWVsZCA9IG5ldyBVSVZpZXcobmlsLCB0aGlzLnRleHRGaWVsZEVsZW1lbnQpXG4gICAgICAgIHRoaXMuX3NlYXJjaEJ1dHRvbiA9IG5ldyBVSVZpZXcobmlsLCB0aGlzLnNlYXJjaEJ1dHRvbkVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NlYXJjaEJ1dHRvbi5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnRzKFtcbiAgICAgICAgICAgIFVJVmlldy5jb250cm9sRXZlbnQuRW50ZXJEb3duLCBVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJVcEluc2lkZVxuICAgICAgICBdLCBmdW5jdGlvbiAodGhpczogU2VhcmNoVGV4dEZpZWxkLCBzZW5kZXI6IFVJVmlldywgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybVNlYXJjaCgpXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fdGV4dEZpZWxkLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudChcbiAgICAgICAgICAgIFVJVmlldy5jb250cm9sRXZlbnQuRW50ZXJEb3duLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFNlYXJjaFRleHRGaWVsZCwgc2VuZGVyOiBVSVZpZXcsIGV2ZW50OiBFdmVudCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybVNlYXJjaCgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLl90ZXh0RmllbGQudmlld0hUTUxFbGVtZW50Lm9uaW5wdXQgPSBmdW5jdGlvbiAodGhpczogU2VhcmNoVGV4dEZpZWxkLCBldmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3RleHRGaWVsZC5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFVJVGV4dEZpZWxkLmNvbnRyb2xFdmVudC5UZXh0Q2hhbmdlLCBldmVudClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBzZWFyY2hCdXR0b25FbGVtZW50KCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld0hUTUxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIikgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgdGV4dEZpZWxkRWxlbWVudCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdIVE1MRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikgYXMgSFRNTElucHV0RWxlbWVudFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHNldCBwbGFjZWhvbGRlclRleHQocGxhY2Vob2xkZXJUZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGV4dEZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBwbGFjZWhvbGRlclRleHQpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgcGxhY2Vob2xkZXJUZXh0KCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnRleHRGaWVsZEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIilcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgdGV4dCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnRleHRGaWVsZEVsZW1lbnQudmFsdWVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCB0ZXh0KHRleHQ6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy50ZXh0RmllbGRFbGVtZW50LnZhbHVlID0gdGV4dFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZm9jdXMoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRleHRGaWVsZEVsZW1lbnQuZm9jdXMoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgYmx1cigpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGV4dEZpZWxkRWxlbWVudC5ibHVyKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHBlcmZvcm1TZWFyY2goKTogYW55IHtcbiAgICBcbiAgICBcbiAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiVUlPYmplY3QudHNcIi8+XG5cblxuXG5cblxuXG5cblxuY2xhc3MgVUlLZXlWYWx1ZVN0cmluZ0ZpbHRlciBleHRlbmRzIFVJT2JqZWN0IHtcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgX3NoYXJlZFdlYldvcmtlciA9IG5ldyBXb3JrZXIoXCJjb21waWxlZFNjcmlwdHMvVUlLZXlWYWx1ZVN0cmluZ0ZpbHRlcldlYldvcmtlci5qc1wiKVxuICAgIFxuICAgIHN0YXRpYyBfaW5zdGFuY2VOdW1iZXIgPSAtMVxuICAgIFxuICAgIFxuICAgIF9pbnN0YW5jZU51bWJlcjogbnVtYmVyXG4gICAgXG4gICAgX2lzVGhyZWFkQ2xvc2VkID0gTk9cbiAgICBcbiAgICBfd2ViV29ya2VyID0gVUlLZXlWYWx1ZVN0cmluZ0ZpbHRlci5fc2hhcmVkV2ViV29ya2VyXG4gICAgXG4gICAgY29uc3RydWN0b3IodXNlU2VwYXJhdGVXZWJXb3JrZXIgPSBOTykge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlLZXlWYWx1ZVN0cmluZ0ZpbHRlclxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSU9iamVjdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmICh1c2VTZXBhcmF0ZVdlYldvcmtlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl93ZWJXb3JrZXIgPSBuZXcgV29ya2VyKFwiY29tcGlsZWRTY3JpcHRzL1VJS2V5VmFsdWVTdHJpbmdGaWx0ZXJXZWJXb3JrZXIuanNcIilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBVSUtleVZhbHVlU3RyaW5nRmlsdGVyLl9pbnN0YW5jZU51bWJlciA9IFVJS2V5VmFsdWVTdHJpbmdGaWx0ZXIuX2luc3RhbmNlTnVtYmVyICsgMVxuICAgICAgICB0aGlzLl9pbnN0YW5jZU51bWJlciA9IFVJS2V5VmFsdWVTdHJpbmdGaWx0ZXIuX2luc3RhbmNlTnVtYmVyXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IGluc3RhbmNlSWRlbnRpZmllcigpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZU51bWJlclxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZmlsdGVyRGF0YShcbiAgICAgICAgZmlsdGVyaW5nU3RyaW5nOiBzdHJpbmcsXG4gICAgICAgIGRhdGE6IGFueVtdLFxuICAgICAgICBleGNsdWRlZERhdGE6IHN0cmluZ1tdLFxuICAgICAgICBkYXRhS2V5UGF0aDogc3RyaW5nLFxuICAgICAgICBpZGVudGlmaWVyOiBhbnksXG4gICAgICAgIGNvbXBsZXRpb246IChmaWx0ZXJlZERhdGE6IHN0cmluZ1tdLCBmaWx0ZXJlZEluZGV4ZXM6IHN0cmluZ1tdLCBpZGVudGlmaWVyOiBhbnkpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5faXNUaHJlYWRDbG9zZWQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgXG4gICAgICAgIGNvbnN0IGluc3RhbmNlSWRlbnRpZmllciA9IHRoaXMuaW5zdGFuY2VJZGVudGlmaWVyXG4gICAgXG4gICAgICAgIHRoaXMuX3dlYldvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhLmluc3RhbmNlSWRlbnRpZmllciA9PSBpbnN0YW5jZUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbHRlcmluZyB0b29rIFwiICsgKERhdGUubm93KCkgLSBzdGFydFRpbWUpICsgXCIgbXMuXCIpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29tcGxldGlvbihtZXNzYWdlLmRhdGEuZmlsdGVyZWREYXRhLCBtZXNzYWdlLmRhdGEuZmlsdGVyZWRJbmRleGVzLCBtZXNzYWdlLmRhdGEuaWRlbnRpZmllcilcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fd2ViV29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcImZpbHRlcmluZ1N0cmluZ1wiOiBmaWx0ZXJpbmdTdHJpbmcsXG4gICAgICAgICAgICAgICAgXCJkYXRhXCI6IGRhdGEsXG4gICAgICAgICAgICAgICAgXCJleGNsdWRlZERhdGFcIjogZXhjbHVkZWREYXRhLFxuICAgICAgICAgICAgICAgIFwiZGF0YUtleVBhdGhcIjogZGF0YUtleVBhdGgsXG4gICAgICAgICAgICAgICAgXCJpZGVudGlmaWVyXCI6IGlkZW50aWZpZXIsXG4gICAgICAgICAgICAgICAgXCJpbnN0YW5jZUlkZW50aWZpZXJcIjogaW5zdGFuY2VJZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb21wbGV0aW9uKFtdLCBbXSwgaWRlbnRpZmllcilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgY2xvc2VUaHJlYWQoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc1RocmVhZENsb3NlZCA9IFlFU1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3dlYldvcmtlciAhPSBVSUtleVZhbHVlU3RyaW5nRmlsdGVyLl9zaGFyZWRXZWJXb3JrZXIpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fd2ViV29ya2VyLnRlcm1pbmF0ZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vVUlWaWV3LnRzXCIgLz5cblxuXG5cblxuXG5jbGFzcyBVSU5hdGl2ZVNjcm9sbFZpZXcgZXh0ZW5kcyBVSVZpZXcge1xuICAgIFxuICAgIFxuICAgIGFuaW1hdGlvbkR1cmF0aW9uID0gMFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRCwgdmlld0hUTUxFbGVtZW50Pykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJTmF0aXZlU2Nyb2xsVmlld1xuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSVZpZXdcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLmNzc1RleHQgPSB0aGlzLnN0eWxlLmNzc1RleHQgKyBcIi13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiXG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLnNjcm9sbHNYID0gWUVTO1xuICAgICAgICAvLyB0aGlzLnNjcm9sbHNZID0gWUVTO1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbiAodGhpczogVUlOYXRpdmVTY3JvbGxWaWV3LCBldmVudDogVUlFdmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZGlkU2Nyb2xsVG9Qb3NpdGlvbihuZXcgVUlQb2ludCh0aGlzLnZpZXdIVE1MRWxlbWVudC5zY3JvbGxMZWZ0LCB0aGlzLnZpZXdIVE1MRWxlbWVudC5zY3JvbGxUb3ApKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmJyb2FkY2FzdEV2ZW50SW5TdWJ0cmVlKHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuYW1lOiBVSVZpZXcuYnJvYWRjYXN0RXZlbnROYW1lLlBhZ2VEaWRTY3JvbGwsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogbmlsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGRpZFNjcm9sbFRvUG9zaXRpb24ob2Zmc2V0UG9zaXRpb246IFVJUG9pbnQpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHNjcm9sbHNYKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSAodGhpcy5zdHlsZS5vdmVyZmxvd1ggPT0gXCJzY3JvbGxcIilcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cbiAgICBcbiAgICBzZXQgc2Nyb2xsc1goc2Nyb2xsczogYm9vbGVhbikge1xuICAgICAgICBpZiAoc2Nyb2xscykge1xuICAgICAgICAgICAgdGhpcy5zdHlsZS5vdmVyZmxvd1ggPSBcInNjcm9sbFwiXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlLm92ZXJmbG93WCA9IFwiaGlkZGVuXCJcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgc2Nyb2xsc1koKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9ICh0aGlzLnN0eWxlLm92ZXJmbG93WSA9PSBcInNjcm9sbFwiKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIHNldCBzY3JvbGxzWShzY3JvbGxzOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChzY3JvbGxzKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlLm92ZXJmbG93WSA9IFwic2Nyb2xsXCJcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub3ZlcmZsb3dZID0gXCJoaWRkZW5cIlxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBjb250ZW50T2Zmc2V0KCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgVUlQb2ludCh0aGlzLnZpZXdIVE1MRWxlbWVudC5zY3JvbGxMZWZ0LCB0aGlzLnZpZXdIVE1MRWxlbWVudC5zY3JvbGxUb3ApXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc2V0IGNvbnRlbnRPZmZzZXQob2Zmc2V0UG9pbnQ6IFVJUG9pbnQpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbkR1cmF0aW9uKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsWFRvKHRoaXMudmlld0hUTUxFbGVtZW50LCBvZmZzZXRQb2ludC54LCB0aGlzLmFuaW1hdGlvbkR1cmF0aW9uKVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxZVG8odGhpcy52aWV3SFRNTEVsZW1lbnQsIG9mZnNldFBvaW50LnksIHRoaXMuYW5pbWF0aW9uRHVyYXRpb24pXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5zY3JvbGxMZWZ0ID0gb2Zmc2V0UG9pbnQueFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5zY3JvbGxUb3AgPSBvZmZzZXRQb2ludC55XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzY3JvbGxUb0JvdHRvbSgpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGVudE9mZnNldCA9IG5ldyBVSVBvaW50KHRoaXMuY29udGVudE9mZnNldC54LCB0aGlzLnNjcm9sbFNpemUuaGVpZ2h0IC0gdGhpcy5mcmFtZS5oZWlnaHQpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzY3JvbGxUb1RvcCgpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGVudE9mZnNldCA9IG5ldyBVSVBvaW50KHRoaXMuY29udGVudE9mZnNldC54LCAwKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IGlzU2Nyb2xsZWRUb0JvdHRvbSgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRPZmZzZXQuaXNFcXVhbFRvKG5ldyBVSVBvaW50KHRoaXMuY29udGVudE9mZnNldC54LCB0aGlzLnNjcm9sbFNpemUuaGVpZ2h0IC1cbiAgICAgICAgICAgIHRoaXMuZnJhbWUuaGVpZ2h0KSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBpc1Njcm9sbGVkVG9Ub3AoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50T2Zmc2V0LmlzRXF1YWxUbyhuZXcgVUlQb2ludCh0aGlzLmNvbnRlbnRPZmZzZXQueCwgMCkpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzY3JvbGxZVG8oZWxlbWVudCwgdG8sIGR1cmF0aW9uKSB7XG4gICAgICAgIFxuICAgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uICogMTAwMFxuICAgIFxuICAgICAgICBjb25zdCBzdGFydCA9IGVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgICAgIGNvbnN0IGNoYW5nZSA9IHRvIC0gc3RhcnRcbiAgICAgICAgY29uc3QgaW5jcmVtZW50ID0gMTBcbiAgICBcbiAgICAgICAgY29uc3QgYW5pbWF0ZVNjcm9sbCA9IGZ1bmN0aW9uIChlbGFwc2VkVGltZSkge1xuICAgICAgICAgICAgZWxhcHNlZFRpbWUgKz0gaW5jcmVtZW50XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZWFzZUluT3V0KGVsYXBzZWRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbilcbiAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0gcG9zaXRpb25cbiAgICAgICAgICAgIGlmIChlbGFwc2VkVGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGVTY3JvbGwoZWxhcHNlZFRpbWUpXG4gICAgICAgICAgICAgICAgfSwgaW5jcmVtZW50KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICBcbiAgICAgICAgYW5pbWF0ZVNjcm9sbCgwKVxuICAgIH1cbiAgICBcbiAgICBzY3JvbGxYVG8oZWxlbWVudCwgdG8sIGR1cmF0aW9uKSB7XG4gICAgICAgIFxuICAgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uICogMTAwMFxuICAgIFxuICAgICAgICBjb25zdCBzdGFydCA9IGVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgICAgIGNvbnN0IGNoYW5nZSA9IHRvIC0gc3RhcnRcbiAgICAgICAgY29uc3QgaW5jcmVtZW50ID0gMTBcbiAgICBcbiAgICAgICAgY29uc3QgYW5pbWF0ZVNjcm9sbCA9IGZ1bmN0aW9uIChlbGFwc2VkVGltZSkge1xuICAgICAgICAgICAgZWxhcHNlZFRpbWUgKz0gaW5jcmVtZW50XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZWFzZUluT3V0KGVsYXBzZWRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbilcbiAgICAgICAgICAgIGVsZW1lbnQuc2Nyb2xsTGVmdCA9IHBvc2l0aW9uXG4gICAgICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPCBkdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRlU2Nyb2xsKGVsYXBzZWRUaW1lKVxuICAgICAgICAgICAgICAgIH0sIGluY3JlbWVudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgXG4gICAgICAgIGFuaW1hdGVTY3JvbGwoMClcbiAgICB9XG4gICAgXG4gICAgZWFzZUluT3V0KGN1cnJlbnRUaW1lLCBzdGFydCwgY2hhbmdlLCBkdXJhdGlvbikge1xuICAgICAgICBjdXJyZW50VGltZSAvPSBkdXJhdGlvbiAvIDJcbiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZSAvIDIgKiBjdXJyZW50VGltZSAqIGN1cnJlbnRUaW1lICsgc3RhcnRcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50VGltZSAtPSAxXG4gICAgICAgIHJldHVybiAtY2hhbmdlIC8gMiAqIChjdXJyZW50VGltZSAqIChjdXJyZW50VGltZSAtIDIpIC0gMSkgKyBzdGFydFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSU5hdGl2ZVNjcm9sbFZpZXcudHNcIiAvPlxuXG5cblxuaW50ZXJmYWNlIFVJVGFibGVWaWV3UmV1c2FibGVWaWV3c0NvbnRhaW5lck9iamVjdCB7XG4gICAgXG4gICAgW2tleTogc3RyaW5nXTogVUlWaWV3W107XG4gICAgXG59XG5cblxuaW50ZXJmYWNlIFVJVGFibGVWaWV3UmV1c2FibGVWaWV3UG9zaXRpb25PYmplY3Qge1xuICAgIFxuICAgIGJvdHRvbVk6IG51bWJlcjtcbiAgICB0b3BZOiBudW1iZXI7XG4gICAgXG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBcbn1cblxuXG5cblxuXG5jbGFzcyBVSVRhYmxlVmlldyBleHRlbmRzIFVJTmF0aXZlU2Nyb2xsVmlldyB7XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgYWxsUm93c0hhdmVFcXVhbEhlaWdodDogYm9vbGVhbiA9IE5PXG4gICAgX3Zpc2libGVSb3dzOiBVSVZpZXdbXSA9IFtdXG4gICAgX2ZpcnN0TGF5b3V0VmlzaWJsZVJvd3M6IFVJVmlld1tdID0gW11cbiAgICBcbiAgICBfcm93UG9zaXRpb25zOiBVSVRhYmxlVmlld1JldXNhYmxlVmlld1Bvc2l0aW9uT2JqZWN0W10gPSBbXVxuICAgIFxuICAgIF9oaWdoZXN0VmFsaWRSb3dQb3NpdGlvbkluZGV4OiBudW1iZXIgPSAwXG4gICAgXG4gICAgX3JldXNhYmxlVmlld3M6IFVJVGFibGVWaWV3UmV1c2FibGVWaWV3c0NvbnRhaW5lck9iamVjdCA9IHt9XG4gICAgXG4gICAgX3JlbW92ZWRSZXVzYWJsZVZpZXdzOiBVSVRhYmxlVmlld1JldXNhYmxlVmlld3NDb250YWluZXJPYmplY3QgPSB7fVxuICAgIFxuICAgIF9mdWxsSGVpZ2h0VmlldzogVUlWaWV3XG4gICAgXG4gICAgX3Jvd0lESW5kZXg6IG51bWJlciA9IDBcbiAgICBcbiAgICByZWxvYWRzT25MYW5ndWFnZUNoYW5nZSA9IFlFU1xuICAgIFxuICAgIHNpZGVQYWRkaW5nID0gMFxuICAgIFxuICAgIF9wZXJzaXN0ZWREYXRhOiBhbnlbXSA9IFtdXG4gICAgX25lZWRzRHJhd2luZ09mVmlzaWJsZVJvd3NCZWZvcmVMYXlvdXQgPSBOT1xuICAgIF9pc0RyYXdWaXNpYmxlUm93c1NjaGVkdWxlZCA9IE5PXG4gICAgX3Nob3VsZEFuaW1hdGVOZXh0TGF5b3V0OiBib29sZWFuXG4gICAgXG4gICAgYW5pbWF0aW9uRHVyYXRpb24gPSAwLjI1XG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudElEKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcihlbGVtZW50SUQpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJVGFibGVWaWV3XG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJTmF0aXZlU2Nyb2xsVmlld1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zY3JvbGxzWCA9IE5PXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuaW5pdFZpZXcoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9mdWxsSGVpZ2h0VmlldyA9IG5ldyBVSVZpZXcoKVxuICAgICAgICB0aGlzLl9mdWxsSGVpZ2h0Vmlldy5oaWRkZW4gPSBZRVNcbiAgICAgICAgdGhpcy5fZnVsbEhlaWdodFZpZXcudXNlckludGVyYWN0aW9uRW5hYmxlZCA9IE5PXG4gICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLl9mdWxsSGVpZ2h0VmlldylcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGxvYWREYXRhKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fcGVyc2lzdGVkRGF0YSA9IFtdXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVQb3NpdGlvbnNVbnRpbEluZGV4KHRoaXMubnVtYmVyT2ZSb3dzKCkgLSAxKVxuICAgICAgICB0aGlzLl9uZWVkc0RyYXdpbmdPZlZpc2libGVSb3dzQmVmb3JlTGF5b3V0ID0gWUVTXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgXG4gICAgICAgIC8vIHRoaXMuZm9yRWFjaFZpZXdJblN1YnRyZWUoZnVuY3Rpb24odmlldykge1xuICAgICAgICBcbiAgICAgICAgLy8gICAgIHZpZXcuc2V0TmVlZHNMYXlvdXQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIH0pXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICByZWxvYWREYXRhKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fcmVtb3ZlVmlzaWJsZVJvd3MoKVxuICAgICAgICB0aGlzLl9yZW1vdmVBbGxSZXVzYWJsZVJvd3MoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fcm93UG9zaXRpb25zID0gW11cbiAgICAgICAgdGhpcy5faGlnaGVzdFZhbGlkUm93UG9zaXRpb25JbmRleCA9IDBcbiAgICAgICAgXG4gICAgICAgIHRoaXMubG9hZERhdGEoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgaGlnaGxpZ2h0Q2hhbmdlcyhwcmV2aW91c0RhdGE6IGFueVtdLCBuZXdEYXRhOiBhbnlbXSkge1xuICAgICAgICBcbiAgICAgICAgcHJldmlvdXNEYXRhID0gcHJldmlvdXNEYXRhLm1hcChmdW5jdGlvbiAoZGF0YVBvaW50LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGFQb2ludClcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgbmV3RGF0YSA9IG5ld0RhdGEubWFwKGZ1bmN0aW9uIChkYXRhUG9pbnQsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YVBvaW50KVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV3SW5kZXhlczogbnVtYmVyW10gPSBbXVxuICAgICAgICBcbiAgICAgICAgbmV3RGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcHJldmlvdXNEYXRhLmNvbnRhaW5zKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ld0luZGV4ZXMucHVzaChpbmRleClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgbmV3SW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uICh0aGlzOiBVSVRhYmxlVmlldywgaW5kZXgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNSb3dXaXRoSW5kZXhWaXNpYmxlKGluZGV4KSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Um93QXNOZXcodGhpcy52aWV3Rm9yUm93V2l0aEluZGV4KGluZGV4KSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBoaWdobGlnaHRSb3dBc05ldyhyb3c6IFVJVmlldykge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbnZhbGlkYXRlU2l6ZU9mUm93V2l0aEluZGV4KGluZGV4OiBudW1iZXIsIGFuaW1hdGVDaGFuZ2UgPSBOTykge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3Jvd1Bvc2l0aW9uc1tpbmRleF0pIHtcbiAgICAgICAgICAgIHRoaXMuX3Jvd1Bvc2l0aW9uc1tpbmRleF0uaXNWYWxpZCA9IE5PXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2hpZ2hlc3RWYWxpZFJvd1Bvc2l0aW9uSW5kZXggPSBNYXRoLm1pbih0aGlzLl9oaWdoZXN0VmFsaWRSb3dQb3NpdGlvbkluZGV4LCBpbmRleCAtIDEpXG4gICAgICAgIFxuICAgICAgICAvLyBpZiAoaW5kZXggPT0gMCkge1xuICAgICAgICBcbiAgICAgICAgLy8gICAgIHRoaXMuX2hpZ2hlc3RWYWxpZFJvd1Bvc2l0aW9uSW5kZXggPSAwO1xuICAgICAgICBcbiAgICAgICAgLy8gICAgIHRoaXMuX3Jvd1Bvc2l0aW9ucyA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fbmVlZHNEcmF3aW5nT2ZWaXNpYmxlUm93c0JlZm9yZUxheW91dCA9IFlFU1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2hvdWxkQW5pbWF0ZU5leHRMYXlvdXQgPSBhbmltYXRlQ2hhbmdlXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBfY2FsY3VsYXRlQWxsUG9zaXRpb25zKCkge1xuICAgICAgICB0aGlzLl9jYWxjdWxhdGVQb3NpdGlvbnNVbnRpbEluZGV4KHRoaXMubnVtYmVyT2ZSb3dzKCkgLSAxKVxuICAgIH1cbiAgICBcbiAgICBfY2FsY3VsYXRlUG9zaXRpb25zVW50aWxJbmRleChtYXhJbmRleDogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgdmFsaWRQb3NpdGlvbk9iamVjdCA9IHRoaXMuX3Jvd1Bvc2l0aW9uc1t0aGlzLl9oaWdoZXN0VmFsaWRSb3dQb3NpdGlvbkluZGV4XVxuICAgICAgICBpZiAoIUlTKHZhbGlkUG9zaXRpb25PYmplY3QpKSB7XG4gICAgICAgICAgICB2YWxpZFBvc2l0aW9uT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIGJvdHRvbVk6IDAsXG4gICAgICAgICAgICAgICAgdG9wWTogMCxcbiAgICAgICAgICAgICAgICBpc1ZhbGlkOiBZRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHByZXZpb3VzQm90dG9tWSA9IHZhbGlkUG9zaXRpb25PYmplY3QuYm90dG9tWVxuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLl9yb3dQb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2hpZ2hlc3RWYWxpZFJvd1Bvc2l0aW9uSW5kZXggPSAtMVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9oaWdoZXN0VmFsaWRSb3dQb3NpdGlvbkluZGV4ICsgMTsgaSA8PSBtYXhJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBoZWlnaHQ6IG51bWJlclxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByb3dQb3NpdGlvbk9iamVjdCA9IHRoaXMuX3Jvd1Bvc2l0aW9uc1tpXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoSVMoKHJvd1Bvc2l0aW9uT2JqZWN0IHx8IG5pbCkuaXNWYWxpZCkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSByb3dQb3NpdGlvbk9iamVjdC5ib3R0b21ZIC0gcm93UG9zaXRpb25PYmplY3QudG9wWVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5oZWlnaHRGb3JSb3dXaXRoSW5kZXgoaSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb25PYmplY3Q6IFVJVGFibGVWaWV3UmV1c2FibGVWaWV3UG9zaXRpb25PYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgYm90dG9tWTogcHJldmlvdXNCb3R0b21ZICsgaGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRvcFk6IHByZXZpb3VzQm90dG9tWSxcbiAgICAgICAgICAgICAgICBpc1ZhbGlkOiBZRVNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGkgPCB0aGlzLl9yb3dQb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcm93UG9zaXRpb25zW2ldID0gcG9zaXRpb25PYmplY3RcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jvd1Bvc2l0aW9ucy5wdXNoKHBvc2l0aW9uT2JqZWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faGlnaGVzdFZhbGlkUm93UG9zaXRpb25JbmRleCA9IGlcbiAgICAgICAgICAgIHByZXZpb3VzQm90dG9tWSA9IHByZXZpb3VzQm90dG9tWSArIGhlaWdodFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGluZGV4ZXNGb3JWaXNpYmxlUm93cyhwYWRkaW5nUmF0aW8gPSAwLjUpOiBudW1iZXJbXSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmaXJzdFZpc2libGVZID0gdGhpcy5jb250ZW50T2Zmc2V0LnkgLSB0aGlzLmJvdW5kcy5oZWlnaHQgKiBwYWRkaW5nUmF0aW9cbiAgICAgICAgY29uc3QgbGFzdFZpc2libGVZID0gZmlyc3RWaXNpYmxlWSArIHRoaXMuYm91bmRzLmhlaWdodCAqICgxICsgcGFkZGluZ1JhdGlvKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZSb3dzID0gdGhpcy5udW1iZXJPZlJvd3MoKVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuYWxsUm93c0hhdmVFcXVhbEhlaWdodCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByb3dIZWlnaHQgPSB0aGlzLmhlaWdodEZvclJvd1dpdGhJbmRleCgwKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZmlyc3RJbmRleCA9IGZpcnN0VmlzaWJsZVkgLyByb3dIZWlnaHRcbiAgICAgICAgICAgIHZhciBsYXN0SW5kZXggPSBsYXN0VmlzaWJsZVkgLyByb3dIZWlnaHRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZmlyc3RJbmRleCA9IE1hdGgudHJ1bmMoZmlyc3RJbmRleClcbiAgICAgICAgICAgIGxhc3RJbmRleCA9IE1hdGgudHJ1bmMobGFzdEluZGV4KSArIDFcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZmlyc3RJbmRleCA9IE1hdGgubWF4KGZpcnN0SW5kZXgsIDApXG4gICAgICAgICAgICBsYXN0SW5kZXggPSBNYXRoLm1pbihsYXN0SW5kZXgsIG51bWJlck9mUm93cyAtIDEpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW5kZXg7IGkgPCBsYXN0SW5kZXggKyAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgYWNjdW11bGF0ZWRIZWlnaHQgPSAwXG4gICAgICAgIHZhciByZXN1bHQgPSBbXVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2FsY3VsYXRlQWxsUG9zaXRpb25zKClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJvd1Bvc2l0aW9ucyA9IHRoaXMuX3Jvd1Bvc2l0aW9uc1xuICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZlJvd3M7IGkrKykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSByb3dQb3NpdGlvbnNbaV0uYm90dG9tWSAtIHJvd1Bvc2l0aW9uc1tpXS50b3BZICAvLyB0aGlzLmhlaWdodEZvclJvd1dpdGhJbmRleChpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBhY2N1bXVsYXRlZEhlaWdodCA9IGFjY3VtdWxhdGVkSGVpZ2h0ICsgaGVpZ2h0XG4gICAgICAgICAgICBpZiAoYWNjdW11bGF0ZWRIZWlnaHQgPj0gZmlyc3RWaXNpYmxlWSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWNjdW11bGF0ZWRIZWlnaHQgPj0gbGFzdFZpc2libGVZKSB7XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBfcmVtb3ZlVmlzaWJsZVJvd3MoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aXNpYmxlUm93cyA9IFtdXG4gICAgICAgIHRoaXMuX3Zpc2libGVSb3dzLmZvckVhY2goZnVuY3Rpb24gKHRoaXM6IFVJVGFibGVWaWV3LCByb3c6IFVJVmlldywgaW5kZXg6IG51bWJlciwgYXJyYXk6IFVJVmlld1tdKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3BlcnNpc3RlZERhdGFbcm93Ll9VSVRhYmxlVmlld1Jvd0luZGV4XSA9IHRoaXMucGVyc2lzdGVuY2VEYXRhSXRlbUZvclJvd1dpdGhJbmRleChcbiAgICAgICAgICAgICAgICByb3cuX1VJVGFibGVWaWV3Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgcm93XG4gICAgICAgICAgICApXG4gICAgICAgICAgICByb3cucmVtb3ZlRnJvbVN1cGVydmlldygpXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVkUmV1c2FibGVWaWV3c1tyb3cuX1VJVGFibGVWaWV3UmV1c2FiaWxpdHlJZGVudGlmaWVyXS5wdXNoKHJvdylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH0sIHRoaXMpXG4gICAgICAgIHRoaXMuX3Zpc2libGVSb3dzID0gdmlzaWJsZVJvd3NcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIF9yZW1vdmVBbGxSZXVzYWJsZVJvd3MoKSB7XG4gICAgICAgIHRoaXMuX3JldXNhYmxlVmlld3MuZm9yRWFjaChmdW5jdGlvbiAodGhpczogVUlUYWJsZVZpZXcsIHJvd3M6IFVJVmlld1tdKSB7XG4gICAgICAgICAgICByb3dzLmZvckVhY2goZnVuY3Rpb24gKHRoaXM6IFVJVGFibGVWaWV3LCByb3c6IFVJVmlldywgaW5kZXg6IG51bWJlciwgYXJyYXk6IFVJVmlld1tdKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5fcGVyc2lzdGVkRGF0YVtyb3cuX1VJVGFibGVWaWV3Um93SW5kZXhdID0gdGhpcy5wZXJzaXN0ZW5jZURhdGFJdGVtRm9yUm93V2l0aEluZGV4KFxuICAgICAgICAgICAgICAgICAgICByb3cuX1VJVGFibGVWaWV3Um93SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHJvd1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICByb3cucmVtb3ZlRnJvbVN1cGVydmlldygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya1JldXNhYmxlVmlld0FzVW51c2VkKHJvdylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBfbWFya1JldXNhYmxlVmlld0FzVW51c2VkKHJvdzogVUlWaWV3KSB7XG4gICAgICAgIGlmICghdGhpcy5fcmVtb3ZlZFJldXNhYmxlVmlld3Nbcm93Ll9VSVRhYmxlVmlld1JldXNhYmlsaXR5SWRlbnRpZmllcl0uY29udGFpbnMocm93KSkge1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlZFJldXNhYmxlVmlld3Nbcm93Ll9VSVRhYmxlVmlld1JldXNhYmlsaXR5SWRlbnRpZmllcl0ucHVzaChyb3cpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgX2RyYXdWaXNpYmxlUm93cygpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5pc01lbWJlck9mVmlld1RyZWUpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aXNpYmxlSW5kZXhlcyA9IHRoaXMuaW5kZXhlc0ZvclZpc2libGVSb3dzKClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1pbkluZGV4ID0gdmlzaWJsZUluZGV4ZXNbMF1cbiAgICAgICAgY29uc3QgbWF4SW5kZXggPSB2aXNpYmxlSW5kZXhlc1t2aXNpYmxlSW5kZXhlcy5sZW5ndGggLSAxXVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVtb3ZlZFZpZXdzID0gW11cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZpc2libGVSb3dzID0gW11cbiAgICAgICAgdGhpcy5fdmlzaWJsZVJvd3MuZm9yRWFjaChmdW5jdGlvbiAodGhpczogVUlUYWJsZVZpZXcsIHJvdzogVUlWaWV3LCBpbmRleDogbnVtYmVyLCBhcnJheTogVUlWaWV3W10pIHtcbiAgICAgICAgICAgIGlmIChyb3cuX1VJVGFibGVWaWV3Um93SW5kZXggPCBtaW5JbmRleCB8fCByb3cuX1VJVGFibGVWaWV3Um93SW5kZXggPiBtYXhJbmRleCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vcm93LnJlbW92ZUZyb21TdXBlcnZpZXcoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9wZXJzaXN0ZWREYXRhW3Jvdy5fVUlUYWJsZVZpZXdSb3dJbmRleF0gPSB0aGlzLnBlcnNpc3RlbmNlRGF0YUl0ZW1Gb3JSb3dXaXRoSW5kZXgoXG4gICAgICAgICAgICAgICAgICAgIHJvdy5fVUlUYWJsZVZpZXdSb3dJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgcm93XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZWRSZXVzYWJsZVZpZXdzW3Jvdy5fVUlUYWJsZVZpZXdSZXVzYWJpbGl0eUlkZW50aWZpZXJdLnB1c2gocm93KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJlbW92ZWRWaWV3cy5wdXNoKHJvdylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpc2libGVSb3dzLnB1c2gocm93KVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKVxuICAgICAgICB0aGlzLl92aXNpYmxlUm93cyA9IHZpc2libGVSb3dzXG4gICAgICAgIFxuICAgICAgICB2aXNpYmxlSW5kZXhlcy5mb3JFYWNoKGZ1bmN0aW9uICh0aGlzOiBVSVRhYmxlVmlldywgcm93SW5kZXg6IG51bWJlciwgaW5kZXg6IG51bWJlciwgYXJyYXk6IG51bWJlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUm93V2l0aEluZGV4VmlzaWJsZShyb3dJbmRleCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZpZXc6IFVJVmlldyA9IHRoaXMudmlld0ZvclJvd1dpdGhJbmRleChyb3dJbmRleClcbiAgICAgICAgICAgIC8vdmlldy5fVUlUYWJsZVZpZXdSb3dJbmRleCA9IHJvd0luZGV4O1xuICAgICAgICAgICAgdGhpcy5fZmlyc3RMYXlvdXRWaXNpYmxlUm93cy5wdXNoKHZpZXcpXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlUm93cy5wdXNoKHZpZXcpXG4gICAgICAgICAgICB0aGlzLmFkZFN1YnZpZXcodmlldylcbiAgICAgICAgICAgIFxuICAgICAgICB9IGFzIGFueSwgdGhpcylcbiAgICAgICAgXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3ZlZFZpZXdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB2aWV3OiBVSVZpZXcgPSByZW1vdmVkVmlld3NbaV1cbiAgICAgICAgICAgIGlmICh0aGlzLl92aXNpYmxlUm93cy5pbmRleE9mKHZpZXcpID09IC0xKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy90aGlzLl9wZXJzaXN0ZWREYXRhW3ZpZXcuX1VJVGFibGVWaWV3Um93SW5kZXhdID0gdGhpcy5wZXJzaXN0ZW5jZURhdGFJdGVtRm9yUm93V2l0aEluZGV4KHZpZXcuX1VJVGFibGVWaWV3Um93SW5kZXgsIHZpZXcpO1xuICAgICAgICAgICAgICAgIHZpZXcucmVtb3ZlRnJvbVN1cGVydmlldygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy90aGlzLl9yZW1vdmVkUmV1c2FibGVWaWV3c1t2aWV3Ll9VSVRhYmxlVmlld1JldXNhYmlsaXR5SWRlbnRpZmllcl0ucHVzaCh2aWV3KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvL3RoaXMuc2V0TmVlZHNMYXlvdXQoKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHZpc2libGVSb3dXaXRoSW5kZXgocm93SW5kZXg6IG51bWJlcik6IFVJVmlldyB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdmlzaWJsZVJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRoaXMuX3Zpc2libGVSb3dzW2ldXG4gICAgICAgICAgICBpZiAocm93Ll9VSVRhYmxlVmlld1Jvd0luZGV4ID09IHJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvd1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuaWxcbiAgICB9XG4gICAgXG4gICAgXG4gICAgaXNSb3dXaXRoSW5kZXhWaXNpYmxlKHJvd0luZGV4OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIElTKHRoaXMudmlzaWJsZVJvd1dpdGhJbmRleChyb3dJbmRleCkpXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHJldXNhYmxlVmlld0ZvcklkZW50aWZpZXIoaWRlbnRpZmllcjogc3RyaW5nLCByb3dJbmRleDogbnVtYmVyKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuX3JlbW92ZWRSZXVzYWJsZVZpZXdzW2lkZW50aWZpZXJdKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVkUmV1c2FibGVWaWV3c1tpZGVudGlmaWVyXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9yZW1vdmVkUmV1c2FibGVWaWV3c1tpZGVudGlmaWVyXSAmJiB0aGlzLl9yZW1vdmVkUmV1c2FibGVWaWV3c1tpZGVudGlmaWVyXS5sZW5ndGgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuX3JlbW92ZWRSZXVzYWJsZVZpZXdzW2lkZW50aWZpZXJdLnBvcCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZpZXcuX1VJVGFibGVWaWV3Um93SW5kZXggPSByb3dJbmRleFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHZpZXcsIHRoaXMuX3BlcnNpc3RlZERhdGFbcm93SW5kZXhdIHx8IHRoaXMuZGVmYXVsdFJvd1BlcnNpc3RlbmNlRGF0YUl0ZW0oKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHZpZXdcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuX3JldXNhYmxlVmlld3NbaWRlbnRpZmllcl0pIHtcbiAgICAgICAgICAgIHRoaXMuX3JldXNhYmxlVmlld3NbaWRlbnRpZmllcl0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBuZXdWaWV3ID0gdGhpcy5uZXdSZXVzYWJsZVZpZXdGb3JJZGVudGlmaWVyKGlkZW50aWZpZXIsIHRoaXMuX3Jvd0lESW5kZXgpXG4gICAgICAgIHRoaXMuX3Jvd0lESW5kZXggPSB0aGlzLl9yb3dJREluZGV4ICsgMVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3Jvd0lESW5kZXggPiA0MCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBhc2QgPSAxXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbmV3Vmlldy5fVUlUYWJsZVZpZXdSZXVzYWJpbGl0eUlkZW50aWZpZXIgPSBpZGVudGlmaWVyXG4gICAgICAgIFxuICAgICAgICBuZXdWaWV3Ll9VSVRhYmxlVmlld1Jvd0luZGV4ID0gcm93SW5kZXhcbiAgICAgICAgXG4gICAgICAgIE9iamVjdC5hc3NpZ24obmV3VmlldywgdGhpcy5fcGVyc2lzdGVkRGF0YVtyb3dJbmRleF0gfHwgdGhpcy5kZWZhdWx0Um93UGVyc2lzdGVuY2VEYXRhSXRlbSgpKVxuICAgICAgICB0aGlzLl9yZXVzYWJsZVZpZXdzW2lkZW50aWZpZXJdLnB1c2gobmV3VmlldylcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBuZXdWaWV3XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBGdW5jdGlvbnMgdGhhdCBzaG91bGQgYmUgb3ZlcnJpZGRlbiB0byBkcmF3IHRoZSBjb3JyZWN0IGNvbnRlbnQgU1RBUlRcbiAgICBuZXdSZXVzYWJsZVZpZXdGb3JJZGVudGlmaWVyKGlkZW50aWZpZXI6IHN0cmluZywgcm93SURJbmRleDogbnVtYmVyKTogVUlWaWV3IHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgVUlCdXR0b24odGhpcy5lbGVtZW50SUQgKyBcIlJvd1wiICsgcm93SURJbmRleClcbiAgICAgICAgXG4gICAgICAgIHZpZXcuc3RvcHNQb2ludGVyRXZlbnRQcm9wYWdhdGlvbiA9IE5PXG4gICAgICAgIHZpZXcucGF1c2VzUG9pbnRlckV2ZW50cyA9IE5PXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdmlld1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgaGVpZ2h0Rm9yUm93V2l0aEluZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gNTBcbiAgICB9XG4gICAgXG4gICAgbnVtYmVyT2ZSb3dzKCkge1xuICAgICAgICByZXR1cm4gMTAwMDBcbiAgICB9XG4gICAgXG4gICAgZGVmYXVsdFJvd1BlcnNpc3RlbmNlRGF0YUl0ZW0oKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHBlcnNpc3RlbmNlRGF0YUl0ZW1Gb3JSb3dXaXRoSW5kZXgocm93SW5kZXg6IG51bWJlciwgcm93OiBVSVZpZXcpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgdmlld0ZvclJvd1dpdGhJbmRleChyb3dJbmRleDogbnVtYmVyKTogVUlWaWV3IHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJvdyA9IHRoaXMucmV1c2FibGVWaWV3Rm9ySWRlbnRpZmllcihcIlJvd1wiLCByb3dJbmRleCk7XG4gICAgICAgIChyb3cgYXMgVUlCdXR0b24pLnRpdGxlTGFiZWwudGV4dCA9IFwiUm93IFwiICsgcm93SW5kZXhcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByb3dcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIC8vIEZ1bmN0aW9ucyB0aGF0IHNob3VsZCBiZSBvdmVycmlkZGVuIHRvIGRyYXcgdGhlIGNvcnJlY3QgY29udGVudCBFTkRcbiAgICBcbiAgICBcbiAgICAvLyBGdW5jdGlvbnMgdGhhdCB0cmlnZ2VyIHJlZHJhd2luZyBvZiB0aGUgY29udGVudFxuICAgIGRpZFNjcm9sbFRvUG9zaXRpb24ob2Zmc2V0UG9zaXRpb246IFVJUG9pbnQpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmRpZFNjcm9sbFRvUG9zaXRpb24ob2Zmc2V0UG9zaXRpb24pXG4gICAgICAgIFxuICAgICAgICB0aGlzLmZvckVhY2hWaWV3SW5TdWJ0cmVlKGZ1bmN0aW9uICh2aWV3OiBVSVZpZXcpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmlldy5faXNQb2ludGVyVmFsaWQgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuX2lzRHJhd1Zpc2libGVSb3dzU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2lzRHJhd1Zpc2libGVSb3dzU2NoZWR1bGVkID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFVJVmlldy5ydW5GdW5jdGlvbkJlZm9yZU5leHRGcmFtZShmdW5jdGlvbiAodGhpczogVUlUYWJsZVZpZXcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVBbGxQb3NpdGlvbnMoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2RyYXdWaXNpYmxlUm93cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5faXNEcmF3VmlzaWJsZVJvd3NTY2hlZHVsZWQgPSBOT1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHdhc0FkZGVkVG9WaWV3VHJlZSgpIHtcbiAgICAgICAgdGhpcy5sb2FkRGF0YSgpXG4gICAgfVxuICAgIFxuICAgIHNldEZyYW1lKHJlY3RhbmdsZTogVUlSZWN0YW5nbGUsIHpJbmRleD86IG51bWJlciwgcGVyZm9ybVVuY2hlY2tlZExheW91dD86IGJvb2xlYW4pIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5mcmFtZVxuICAgICAgICBzdXBlci5zZXRGcmFtZShyZWN0YW5nbGUsIHpJbmRleCwgcGVyZm9ybVVuY2hlY2tlZExheW91dClcbiAgICAgICAgaWYgKGZyYW1lLmlzRXF1YWxUbyhyZWN0YW5nbGUpICYmICFwZXJmb3JtVW5jaGVja2VkTGF5b3V0KSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fbmVlZHNEcmF3aW5nT2ZWaXNpYmxlUm93c0JlZm9yZUxheW91dCA9IFlFU1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50KGV2ZW50OiBVSVZpZXdCcm9hZGNhc3RFdmVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50KGV2ZW50KVxuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50Lm5hbWUgPT0gVUlWaWV3LmJyb2FkY2FzdEV2ZW50TmFtZS5MYW5ndWFnZUNoYW5nZWQgJiYgdGhpcy5yZWxvYWRzT25MYW5ndWFnZUNoYW5nZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnJlbG9hZERhdGEoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBwcml2YXRlIF9sYXlvdXRBbGxSb3dzKHBvc2l0aW9ucyA9IHRoaXMuX3Jvd1Bvc2l0aW9ucykge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3Zpc2libGVSb3dzLmZvckVhY2goZnVuY3Rpb24gKHRoaXM6IFVJVGFibGVWaWV3LCByb3c6IFVJVmlldywgaW5kZXg6IG51bWJlciwgYXJyYXk6IFVJVmlld1tdKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gYm91bmRzLmNvcHkoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbk9iamVjdCA9IHBvc2l0aW9uc1tyb3cuX1VJVGFibGVWaWV3Um93SW5kZXhdXG4gICAgICAgICAgICBmcmFtZS5taW4ueSA9IHBvc2l0aW9uT2JqZWN0LnRvcFlcbiAgICAgICAgICAgIGZyYW1lLm1heC55ID0gcG9zaXRpb25PYmplY3QuYm90dG9tWVxuICAgICAgICAgICAgcm93LmZyYW1lID0gZnJhbWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcm93LnN0eWxlLndpZHRoID0gXCJcIiArIChib3VuZHMud2lkdGggLSB0aGlzLnNpZGVQYWRkaW5nICogMikuaW50ZWdlclZhbHVlICsgXCJweFwiXG4gICAgICAgICAgICByb3cuc3R5bGUubGVmdCA9IFwiXCIgKyB0aGlzLnNpZGVQYWRkaW5nLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfSwgdGhpcylcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2Z1bGxIZWlnaHRWaWV3LmZyYW1lID0gYm91bmRzLnJlY3RhbmdsZVdpdGhIZWlnaHQoKHBvc2l0aW9ucy5sYXN0RWxlbWVudCB8fFxuICAgICAgICAgICAgbmlsKS5ib3R0b21ZKS5yZWN0YW5nbGVXaXRoV2lkdGgoYm91bmRzLndpZHRoICogMC41KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fZmlyc3RMYXlvdXRWaXNpYmxlUm93cyA9IFtdXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBfYW5pbWF0ZUxheW91dEFsbFJvd3MoKSB7XG4gICAgICAgIFxuICAgICAgICBVSVZpZXcuYW5pbWF0ZVZpZXdPclZpZXdzV2l0aER1cmF0aW9uRGVsYXlBbmRGdW5jdGlvbihcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGVSb3dzLFxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICBmdW5jdGlvbiAodGhpczogVUlUYWJsZVZpZXcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXlvdXRBbGxSb3dzKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICh0aGlzOiBVSVRhYmxlVmlldykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHRoaXMuX2NhbGN1bGF0ZUFsbFBvc2l0aW9ucygpXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5fbGF5b3V0QWxsUm93cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmV2aW91c1Bvc2l0aW9uczogVUlUYWJsZVZpZXdSZXVzYWJsZVZpZXdQb3NpdGlvbk9iamVjdFtdID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLl9yb3dQb3NpdGlvbnMpKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJldmlvdXNWaXNpYmxlUm93c0xlbmd0aCA9IHRoaXMuX3Zpc2libGVSb3dzLmxlbmd0aFxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX25lZWRzRHJhd2luZ09mVmlzaWJsZVJvd3NCZWZvcmVMYXlvdXQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy90aGlzLl9jYWxjdWxhdGVBbGxQb3NpdGlvbnMoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9kcmF3VmlzaWJsZVJvd3MoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9uZWVkc0RyYXdpbmdPZlZpc2libGVSb3dzQmVmb3JlTGF5b3V0ID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMubnVtYmVyT2ZSb3dzKCkgfHwgIXRoaXMuaXNNZW1iZXJPZlZpZXdUcmVlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fc2hvdWxkQW5pbWF0ZU5leHRMYXlvdXQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gZG8gbGF5b3V0IHdpdGggdGhlIHByZXZpb3VzIHBvc2l0aW9uc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9sYXlvdXRBbGxSb3dzKHByZXZpb3VzUG9zaXRpb25zKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwcmV2aW91c1Zpc2libGVSb3dzTGVuZ3RoIDwgdGhpcy5fdmlzaWJsZVJvd3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgVUlWaWV3LnJ1bkZ1bmN0aW9uQmVmb3JlTmV4dEZyYW1lKGZ1bmN0aW9uICh0aGlzOiBVSVRhYmxlVmlldykge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZUxheW91dEFsbFJvd3MoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9hbmltYXRlTGF5b3V0QWxsUm93cygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc2hvdWxkQW5pbWF0ZU5leHRMYXlvdXQgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLl9uZWVkc0RyYXdpbmdPZlZpc2libGVSb3dzQmVmb3JlTGF5b3V0KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vICAgICB0aGlzLl9kcmF3VmlzaWJsZVJvd3MoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gICAgIHRoaXMuX25lZWRzRHJhd2luZ09mVmlzaWJsZVJvd3NCZWZvcmVMYXlvdXQgPSBOTztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVBbGxQb3NpdGlvbnMoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9sYXlvdXRBbGxSb3dzKClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbnRyaW5zaWNDb250ZW50SGVpZ2h0KGNvbnN0cmFpbmluZ1dpZHRoID0gMCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB2YXIgcmVzdWx0ID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl9yb3dQb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3Jvd1Bvc2l0aW9uc1t0aGlzLl9yb3dQb3NpdGlvbnMubGVuZ3RoIC0gMV0uYm90dG9tWVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIlVJVmlldy50c1wiLz5cblxuXG5cblxuXG5cblxuXG5cbmNsYXNzIFVJSW1hZ2VWaWV3IGV4dGVuZHMgVUlWaWV3IHtcbiAgICBcbiAgICBcbiAgICAvL2FjdGlvbkluZGljYXRvcjogVUlBY3Rpb25JbmRpY2F0b3I7XG4gICAgX3NvdXJjZUtleTogc3RyaW5nXG4gICAgX2RlZmF1bHRTb3VyY2U6IHN0cmluZ1xuICAgIFxuICAgIF9maWxsTW9kZTogYW55XG4gICAgXG4gICAgX2hpZGRlbldoZW5FbXB0eSA9IE5PXG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudElEPywgdmlld0hUTUxFbGVtZW50ID0gbnVsbCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQsIFwiaW1nXCIpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJSW1hZ2VWaWV3XG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJVmlld1xuICAgICAgICBcbiAgICAgICAgLy90aGlzLmFjdGlvbkluZGljYXRvciA9IG5ldyBVSUFjdGlvbkluZGljYXRvcihlbGVtZW50SUQgKyBcIkFjdGlvbkluZGljYXRvclwiKTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgZmlsbE1vZGUgPSB7XG4gICAgICAgIFxuICAgICAgICBcInN0cmV0Y2hUb0ZpbGxcIjogXCJmaWxsXCIsXG4gICAgICAgIFwiYXNwZWN0Rml0XCI6IFwiY29udGFpblwiLFxuICAgICAgICBcImFzcGVjdEZpbGxcIjogXCJjb3ZlclwiLFxuICAgICAgICBcImNlbnRlclwiOiBcIm5vbmVcIixcbiAgICAgICAgXCJhc3BlY3RGaXRJZkxhcmdlclwiOiBcInNjYWxlLWRvd25cIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHZpZXdIVE1MRWxlbWVudCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdXBlci52aWV3SFRNTEVsZW1lbnQgYXMgSFRNTEltYWdlRWxlbWVudFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGRhdGFVUkwodXJsLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgICAgICB4aHIub3BlbihcImdldFwiLCB1cmwpXG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBcImJsb2JcIlxuICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgZnIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgXG4gICAgICAgICAgICBmci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5yZXN1bHQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZyLnJlYWRBc0RhdGFVUkwoeGhyLnJlc3BvbnNlKSAvLyBhc3luYyBjYWxsXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHhoci5zZW5kKClcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGRhdGFVUkxXaXRoTWF4U2l6ZShVUkxTdHJpbmc6IHN0cmluZywgbWF4U2l6ZTogbnVtYmVyLCBjb21wbGV0aW9uOiAocmVzdWx0VVJMU3RyaW5nOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICBcbiAgICAgICAgY29uc3QgaW1hZ2VWaWV3ID0gbmV3IFVJSW1hZ2VWaWV3KClcbiAgICAgICAgaW1hZ2VWaWV3LmltYWdlU291cmNlID0gVVJMU3RyaW5nXG4gICAgICAgIFxuICAgICAgICBpbWFnZVZpZXcudmlld0hUTUxFbGVtZW50Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU2l6ZSA9IGltYWdlVmlldy5pbnRyaW5zaWNDb250ZW50U2l6ZSgpXG4gICAgXG4gICAgXG4gICAgICAgICAgICB2YXIgbXVsdGlwbGllciA9IG1heFNpemUgLyBNYXRoLm1heChvcmlnaW5hbFNpemUuaGVpZ2h0LCBvcmlnaW5hbFNpemUud2lkdGgpXG4gICAgXG4gICAgICAgICAgICBtdWx0aXBsaWVyID0gTWF0aC5taW4oMSwgbXVsdGlwbGllcilcbiAgICBcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGltYWdlVmlldy5nZXREYXRhVVJMKChvcmlnaW5hbFNpemUuaGVpZ2h0ICogbXVsdGlwbGllcikuaW50ZWdlclZhbHVlLCAob3JpZ2luYWxTaXplLndpZHRoICpcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyKS5pbnRlZ2VyVmFsdWUpXG4gICAgXG4gICAgICAgICAgICBjb21wbGV0aW9uKHJlc3VsdClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzdGF0aWMgZGF0YVVSTFdpdGhTaXplcyhcbiAgICAgICAgVVJMU3RyaW5nOiBzdHJpbmcsXG4gICAgICAgIGhlaWdodDogbnVtYmVyLFxuICAgICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgICBjb21wbGV0aW9uOiAocmVzdWx0VVJMU3RyaW5nOiBzdHJpbmcpID0+IHZvaWRcbiAgICApIHtcbiAgICBcbiAgICAgICAgY29uc3QgaW1hZ2VWaWV3ID0gbmV3IFVJSW1hZ2VWaWV3KClcbiAgICAgICAgaW1hZ2VWaWV3LmltYWdlU291cmNlID0gVVJMU3RyaW5nXG4gICAgICAgIFxuICAgICAgICBpbWFnZVZpZXcudmlld0hUTUxFbGVtZW50Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGltYWdlVmlldy5nZXREYXRhVVJMKGhlaWdodCwgd2lkdGgpXG4gICAgICAgICAgICBjb21wbGV0aW9uKHJlc3VsdClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBnZXREYXRhVVJMKGhlaWdodD86IG51bWJlciwgd2lkdGg/OiBudW1iZXIpIHtcbiAgICBcbiAgICAgICAgY29uc3QgaW1nID0gdGhpcy52aWV3SFRNTEVsZW1lbnRcbiAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IGNhbnZhcyBlbGVtZW50XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIilcbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGhcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodFxuICAgICAgICBcbiAgICAgICAgLy8gQ29weSB0aGUgaW1hZ2UgY29udGVudHMgdG8gdGhlIGNhbnZhc1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KVxuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHRoZSBkYXRhLVVSTCBmb3JtYXR0ZWQgaW1hZ2VcbiAgICAgICAgLy8gRmlyZWZveCBzdXBwb3J0cyBQTkcgYW5kIEpQRUcuIFlvdSBjb3VsZCBjaGVjayBpbWcuc3JjIHRvXG4gICAgICAgIC8vIGd1ZXNzIHRoZSBvcmlnaW5hbCBmb3JtYXQsIGJ1dCBiZSBhd2FyZSB0aGUgdXNpbmcgXCJpbWFnZS9qcGdcIlxuICAgICAgICAvLyB3aWxsIHJlLWVuY29kZSB0aGUgaW1hZ2UuXG4gICAgICAgIGNvbnN0IGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpXG4gICAgXG4gICAgICAgIHJldHVybiBkYXRhVVJMXG4gICAgICAgIFxuICAgICAgICAvL3JldHVybiBkYXRhVVJMLnJlcGxhY2UoL15kYXRhOmltYWdlXFwvKHBuZ3xqcGcpO2Jhc2U2NCwvLCBcIlwiKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBpbWFnZVNvdXJjZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdIVE1MRWxlbWVudC5zcmNcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBpbWFnZVNvdXJjZShzb3VyY2VTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTX05PVChzb3VyY2VTdHJpbmcpKSB7XG4gICAgICAgICAgICBzb3VyY2VTdHJpbmcgPSBcIlwiXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlld0hUTUxFbGVtZW50LnNyYyA9IHNvdXJjZVN0cmluZ1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuaGlkZGVuV2hlbkVtcHR5KSB7XG4gICAgICAgICAgICB0aGlzLmhpZGRlbiA9IElTX05PVCh0aGlzLmltYWdlU291cmNlKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIXNvdXJjZVN0cmluZyB8fCAhc291cmNlU3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL3RoaXMuYWN0aW9uSW5kaWNhdG9yLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyB0aGlzLnN1cGVydmlldy5hZGRTdWJ2aWV3KHRoaXMuYWN0aW9uSW5kaWNhdG9yKTtcbiAgICAgICAgLy8gdGhpcy5hY3Rpb25JbmRpY2F0b3IuZnJhbWUgPSB0aGlzLmZyYW1lO1xuICAgICAgICAvLyB0aGlzLmFjdGlvbkluZGljYXRvci5zdGFydCgpO1xuICAgICAgICAvLyB0aGlzLmFjdGlvbkluZGljYXRvci5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLnJlZENvbG9yXG4gICAgICAgIFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRoaXMudmlld0hUTUxFbGVtZW50Lm9ubG9hZCA9IGZ1bmN0aW9uICh0aGlzOiBVSUltYWdlVmlldywgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc3VwZXJ2aWV3LnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy90aGlzLmFjdGlvbkluZGljYXRvci5yZW1vdmVGcm9tU3VwZXJ2aWV3KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBzZXRJbWFnZVNvdXJjZShrZXk6IHN0cmluZywgZGVmYXVsdFN0cmluZzogc3RyaW5nKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IGxhbmd1YWdlTmFtZSA9IFVJQ29yZS5sYW5ndWFnZVNlcnZpY2UuY3VycmVudExhbmd1YWdlS2V5XG4gICAgICAgIHRoaXMuaW1hZ2VTb3VyY2UgPSBVSUNvcmUubGFuZ3VhZ2VTZXJ2aWNlLnN0cmluZ0ZvcktleShrZXksIGxhbmd1YWdlTmFtZSwgZGVmYXVsdFN0cmluZywgbmlsKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50KGV2ZW50OiBVSVZpZXdCcm9hZGNhc3RFdmVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIuZGlkUmVjZWl2ZUJyb2FkY2FzdEV2ZW50KGV2ZW50KVxuICAgICAgICBcbiAgICAgICAgaWYgKGV2ZW50Lm5hbWUgPT0gVUlWaWV3LmJyb2FkY2FzdEV2ZW50TmFtZS5MYW5ndWFnZUNoYW5nZWQgfHwgZXZlbnQubmFtZSA9PVxuICAgICAgICAgICAgVUlWaWV3LmJyb2FkY2FzdEV2ZW50TmFtZS5BZGRlZFRvVmlld1RyZWUpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc2V0SW1hZ2VTb3VyY2VGcm9tS2V5SWZQb3NzaWJsZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgd2lsbE1vdmVUb1N1cGVydmlldyhzdXBlcnZpZXc6IFVJVmlldykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIud2lsbE1vdmVUb1N1cGVydmlldyhzdXBlcnZpZXcpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zZXRJbWFnZVNvdXJjZUZyb21LZXlJZlBvc3NpYmxlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIF9zZXRJbWFnZVNvdXJjZUZyb21LZXlJZlBvc3NpYmxlKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3NvdXJjZUtleSAmJiB0aGlzLl9kZWZhdWx0U291cmNlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2V0SW1hZ2VTb3VyY2UodGhpcy5fc291cmNlS2V5LCB0aGlzLl9kZWZhdWx0U291cmNlKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBmaWxsTW9kZSgpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fZmlsbE1vZGVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBmaWxsTW9kZShmaWxsTW9kZSkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fZmlsbE1vZGUgPSBmaWxsTW9kZTtcbiAgICAgICAgXG4gICAgICAgICh0aGlzLnN0eWxlIGFzIGFueSkub2JqZWN0Rml0ID0gZmlsbE1vZGVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBoaWRkZW5XaGVuRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oaWRkZW5XaGVuRW1wdHlcbiAgICB9XG4gICAgXG4gICAgc2V0IGhpZGRlbldoZW5FbXB0eShoaWRkZW5XaGVuRW1wdHk6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faGlkZGVuV2hlbkVtcHR5ID0gaGlkZGVuV2hlbkVtcHR5XG4gICAgICAgIGlmIChoaWRkZW5XaGVuRW1wdHkpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuID0gSVNfTk9UKHRoaXMuaW1hZ2VTb3VyY2UpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZGlkTW92ZVRvU3VwZXJ2aWV3KHN1cGVydmlldzogVUlWaWV3KSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5kaWRNb3ZlVG9TdXBlcnZpZXcoc3VwZXJ2aWV3KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGxheW91dFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIubGF5b3V0U3Vidmlld3MoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbnRyaW5zaWNDb250ZW50U2l6ZSgpIHtcbiAgICBcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFVJUmVjdGFuZ2xlKDAsIDAsIHRoaXMudmlld0hUTUxFbGVtZW50Lm5hdHVyYWxIZWlnaHQsIHRoaXMudmlld0hUTUxFbGVtZW50Lm5hdHVyYWxXaWR0aClcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGludHJpbnNpY0NvbnRlbnRTaXplV2l0aENvbnN0cmFpbnRzKGNvbnN0cmFpbmluZ0hlaWdodCA9IDAsIGNvbnN0cmFpbmluZ1dpZHRoID0gMCkge1xuICAgIFxuICAgICAgICBjb25zdCBoZWlnaHRSYXRpbyA9IGNvbnN0cmFpbmluZ0hlaWdodCAvIHRoaXMudmlld0hUTUxFbGVtZW50Lm5hdHVyYWxIZWlnaHRcbiAgICBcbiAgICAgICAgY29uc3Qgd2lkdGhSYXRpbyA9IGNvbnN0cmFpbmluZ1dpZHRoIC8gdGhpcy52aWV3SFRNTEVsZW1lbnQubmF0dXJhbFdpZHRoXG4gICAgXG4gICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBNYXRoLm1heChoZWlnaHRSYXRpbywgd2lkdGhSYXRpbylcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFVJUmVjdGFuZ2xlKDAsIDAsIHRoaXMudmlld0hUTUxFbGVtZW50Lm5hdHVyYWxIZWlnaHQgKlxuICAgICAgICAgICAgbXVsdGlwbGllciwgdGhpcy52aWV3SFRNTEVsZW1lbnQubmF0dXJhbFdpZHRoICogbXVsdGlwbGllcilcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJVSVRleHRWaWV3LnRzXCIgLz5cblxuXG5cblxuLy8gQHRzLWlnbm9yZVxuY2xhc3MgVUlUZXh0RmllbGQgZXh0ZW5kcyBVSVRleHRWaWV3IHtcbiAgICBcbiAgICBcbiAgICBfcGxhY2Vob2xkZXJUZXh0S2V5OiBzdHJpbmdcbiAgICBfZGVmYXVsdFBsYWNlaG9sZGVyVGV4dDogc3RyaW5nXG4gICAgXG4gICAgX3ZpZXdIVE1MRWxlbWVudDogSFRNTElucHV0RWxlbWVudFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRD86IHN0cmluZywgdmlld0hUTUxFbGVtZW50ID0gbnVsbCwgdHlwZSA9IFVJVGV4dFZpZXcudHlwZS50ZXh0RmllbGQpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRCwgdHlwZSwgdmlld0hUTUxFbGVtZW50KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBVSVRleHRGaWVsZFxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSVRleHRWaWV3XG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLndoaXRlQ29sb3JcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVXBJbnNpZGUsIGZ1bmN0aW9uIChzZW5kZXIsIGV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNlbmRlci5mb2N1cygpXG4gICAgICAgICAgICBcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnZpZXdIVE1MRWxlbWVudC5vbmlucHV0ID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlUZXh0RmllbGQuY29udHJvbEV2ZW50LlRleHRDaGFuZ2UsIGV2ZW50KVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS53ZWJraXRVc2VyU2VsZWN0ID0gXCJ0ZXh0XCJcbiAgICAgICAgXG4gICAgICAgIHRoaXMubmF0aXZlU2VsZWN0aW9uRW5hYmxlZCA9IFlFU1xuICAgICAgICBcbiAgICAgICAgdGhpcy5wYXVzZXNQb2ludGVyRXZlbnRzID0gTk9cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgY29udHJvbEV2ZW50ID0gT2JqZWN0LmFzc2lnbih7fSwgVUlWaWV3LmNvbnRyb2xFdmVudCwge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFwiVGV4dENoYW5nZVwiOiBcIlRleHRDaGFuZ2VcIlxuICAgICAgICBcbiAgICAgICAgXG4gICAgfSlcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgYWRkQ29udHJvbEV2ZW50VGFyZ2V0KCk6IFVJVmlld0FkZENvbnRyb2xFdmVudFRhcmdldE9iamVjdDx0eXBlb2YgVUlUZXh0RmllbGQuY29udHJvbEV2ZW50PiB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc3VwZXIuYWRkQ29udHJvbEV2ZW50VGFyZ2V0IGFzIGFueTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBnZXQgdmlld0hUTUxFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlld0hUTUxFbGVtZW50XG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHB1YmxpYyBzZXQgdGV4dCh0ZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlld0hUTUxFbGVtZW50LnZhbHVlID0gdGV4dFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcHVibGljIGdldCB0ZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy52aWV3SFRNTEVsZW1lbnQudmFsdWVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHB1YmxpYyBzZXQgcGxhY2Vob2xkZXJUZXh0KHRleHQ6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQucGxhY2Vob2xkZXIgPSB0ZXh0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBwdWJsaWMgZ2V0IHBsYWNlaG9sZGVyVGV4dCgpOiBzdHJpbmcge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld0hUTUxFbGVtZW50LnBsYWNlaG9sZGVyXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXRQbGFjZWhvbGRlclRleHQoa2V5OiBzdHJpbmcsIGRlZmF1bHRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXJUZXh0S2V5ID0ga2V5XG4gICAgICAgIHRoaXMuX2RlZmF1bHRQbGFjZWhvbGRlclRleHQgPSBkZWZhdWx0U3RyaW5nXG4gICAgICAgIFxuICAgICAgICBjb25zdCBsYW5ndWFnZU5hbWUgPSBVSUNvcmUubGFuZ3VhZ2VTZXJ2aWNlLmN1cnJlbnRMYW5ndWFnZUtleVxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyVGV4dCA9IFVJQ29yZS5sYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yS2V5KGtleSwgbGFuZ3VhZ2VOYW1lLCBkZWZhdWx0U3RyaW5nLCBuaWwpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBkaWRSZWNlaXZlQnJvYWRjYXN0RXZlbnQoZXZlbnQ6IFVJVmlld0Jyb2FkY2FzdEV2ZW50KSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5kaWRSZWNlaXZlQnJvYWRjYXN0RXZlbnQoZXZlbnQpXG4gICAgICAgIFxuICAgICAgICBpZiAoZXZlbnQubmFtZSA9PSBVSVZpZXcuYnJvYWRjYXN0RXZlbnROYW1lLkxhbmd1YWdlQ2hhbmdlZCB8fCBldmVudC5uYW1lID09XG4gICAgICAgICAgICBVSVZpZXcuYnJvYWRjYXN0RXZlbnROYW1lLkFkZGVkVG9WaWV3VHJlZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9zZXRQbGFjZWhvbGRlckZyb21LZXlJZlBvc3NpYmxlKClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICB3aWxsTW92ZVRvU3VwZXJ2aWV3KHN1cGVydmlldzogVUlWaWV3KSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci53aWxsTW92ZVRvU3VwZXJ2aWV3KHN1cGVydmlldylcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NldFBsYWNlaG9sZGVyRnJvbUtleUlmUG9zc2libGUoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgX3NldFBsYWNlaG9sZGVyRnJvbUtleUlmUG9zc2libGUoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fcGxhY2Vob2xkZXJUZXh0S2V5ICYmIHRoaXMuX2RlZmF1bHRQbGFjZWhvbGRlclRleHQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlclRleHQodGhpcy5fcGxhY2Vob2xkZXJUZXh0S2V5LCB0aGlzLl9kZWZhdWx0UGxhY2Vob2xkZXJUZXh0KVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHB1YmxpYyBnZXQgaXNTZWN1cmUoKTogYm9vbGVhbiB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSAodGhpcy52aWV3SFRNTEVsZW1lbnQudHlwZSA9PSBcInBhc3N3b3JkXCIpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBwdWJsaWMgc2V0IGlzU2VjdXJlKHNlY3VyZTogYm9vbGVhbikge1xuICAgICAgICBcbiAgICAgICAgdmFyIHR5cGUgPSBcInRleHRcIlxuICAgICAgICBcbiAgICAgICAgaWYgKHNlY3VyZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0eXBlID0gXCJwYXNzd29yZFwiXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQudHlwZSA9IHR5cGVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJQnV0dG9uLnRzXCIvPlxuXG5cblxuXG5cbmNsYXNzIFNlYXJjaGFibGVEcm9wZG93blJvdyBleHRlbmRzIFVJQnV0dG9uIHtcbiAgICBcbiAgICBfY2hlY2tib3g6IENCQ2hlY2tib3hcbiAgICBcbiAgICBcbiAgICBcbiAgICB0eXBlID0gU2VhcmNoYWJsZURyb3Bkb3duUm93LnR5cGUuc2VsZWN0YWJsZUl0ZW1cbiAgICBfU2VhcmNoYWJsZURyb3Bkb3duUm93V2FzSG92ZXJlZEZ1bmN0aW9uOiBhbnlcbiAgICBcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElEKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBTZWFyY2hhYmxlRHJvcGRvd25Sb3dcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlCdXR0b25cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGluaXRWaWV3KGVsZW1lbnRJRDogc3RyaW5nLCB2aWV3SFRNTEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpbml0Vmlld0RhdGEpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmluaXRWaWV3KGVsZW1lbnRJRCwgdmlld0hUTUxFbGVtZW50LCBpbml0Vmlld0RhdGEpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NoZWNrYm94ID0gbmV3IENCQ2hlY2tib3goZWxlbWVudElEICsgXCJDaGVja2JveFwiKVxuICAgICAgICB0aGlzLl9jaGVja2JveC51c2VySW50ZXJhY3Rpb25FbmFibGVkID0gTk9cbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLl9jaGVja2JveClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLm91dGxpbmUgPSBcIm5vbmVcIlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHNldCB0aXRsZVRleHQodGl0bGVUZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0ID0gdGl0bGVUZXh0XG4gICAgICAgIHRoaXMuX2NoZWNrYm94LnRpdGxlTGFiZWwudGV4dCA9IHRpdGxlVGV4dFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IHRpdGxlVGV4dCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlTGFiZWwudGV4dFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0IHNlbGVjdGVkKHNlbGVjdGVkOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5zZWxlY3RlZCA9IHNlbGVjdGVkXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jaGVja2JveC5zZWxlY3RlZCA9IHNlbGVjdGVkXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBzZWxlY3RlZCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdXBlci5zZWxlY3RlZFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0IGZvY3VzZWQoZm9jdXNlZDogYm9vbGVhbikge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fZm9jdXNlZCA9IGZvY3VzZWRcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRTdGF0ZSgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgZm9jdXNlZCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9mb2N1c2VkXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgdHlwZSA9IHtcbiAgICAgICAgXG4gICAgICAgIFwic2VjdGlvblRpdGxlXCI6IFwiU2VjdGlvblRpdGxlXCIsXG4gICAgICAgIFwic2VsZWN0ZWRJdGVtXCI6IFwiU2VsZWN0ZWRJdGVtXCIsXG4gICAgICAgIFwic2VsZWN0YWJsZUl0ZW1cIjogXCJTZWxlY3RhYmxlSXRlbVwiLFxuICAgICAgICBcImN1c3RvbUl0ZW1cIjogXCJDdXN0b21JdGVtXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JOb3JtYWxTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy50eXBlID09IFNlYXJjaGFibGVEcm9wZG93blJvdy50eXBlLnNlY3Rpb25UaXRsZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3JcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0Q29sb3IgPSBDQkNvbG9yLnByaW1hcnlDb250ZW50Q29sb3IuY29sb3JXaXRoQWxwaGEoMC41KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0eWxlLmJvcmRlclRvcCA9IFwiMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKVwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRleHRTdWZmaXggPSBcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLl9jaGVja2JveCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94LmhpZGRlbiA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwuaGlkZGVuID0gTk9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSA9PSBTZWFyY2hhYmxlRHJvcGRvd25Sb3cudHlwZS5zZWxlY3RlZEl0ZW0pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3JcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0Q29sb3IgPSBDQkNvbG9yLnByaW1hcnlUaW50Q29sb3JcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdHlsZS5ib3JkZXJUb3AgPSBcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vdGhpcy50aXRsZUxhYmVsLnN0eWxlLm1hcmdpbkxlZnQgPSBcIjIwcHhcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRleHRTdWZmaXggPSBcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLl9jaGVja2JveCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94LmhpZGRlbiA9IE5PXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tib3gudGl0bGVMYWJlbC50ZXh0Q29sb3IgPSBDQkNvbG9yLnByaW1hcnlDb250ZW50Q29sb3JcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmhpZGRlbiA9IFlFU1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnR5cGUgPT0gU2VhcmNoYWJsZURyb3Bkb3duUm93LnR5cGUuY3VzdG9tSXRlbSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IFVJQ29sb3IudHJhbnNwYXJlbnRDb2xvclxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IENCQ29sb3IucHJpbWFyeVRpbnRDb2xvclxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnN0eWxlLmJvcmRlclRvcCA9IFwiMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4zKVwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRleHRTdWZmaXggPSBMYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yS2V5KFxuICAgICAgICAgICAgICAgIFwic2VhcmNoYWJsZURyb3Bkb3duQ3VzdG9tSXRlbVwiLFxuICAgICAgICAgICAgICAgIExhbmd1YWdlU2VydmljZS5jdXJyZW50TGFuZ3VhZ2VLZXksXG4gICAgICAgICAgICAgICAgXCItQ3VzdG9tIGl0ZW1cIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5fY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja2JveC5oaWRkZW4gPSBZRVNcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmhpZGRlbiA9IE5PXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBVSUNvbG9yLnRyYW5zcGFyZW50Q29sb3JcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0Q29sb3IgPSBDQkNvbG9yLnByaW1hcnlUaW50Q29sb3JcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zdHlsZS5ib3JkZXJUb3AgPSBcIlwiXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCIyMHB4XCJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50ZXh0U3VmZml4ID0gXCJcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5fY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja2JveC5oaWRkZW4gPSBZRVNcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLmhpZGRlbiA9IE5PXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVzZXJJbnRlcmFjdGlvbkVuYWJsZWQgPSBZRVNcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCB0ZXh0U3VmZml4KCkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy50aXRsZUxhYmVsLnRleHRTdWZmaXhcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCB0ZXh0U3VmZml4KHRleHRTdWZmaXg6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHRTdWZmaXggPSB0ZXh0U3VmZml4XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jaGVja2JveC50aXRsZUxhYmVsLnRleHRTdWZmaXggPSB0ZXh0U3VmZml4XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9ySG92ZXJlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gQ0JDb2xvci5wcmltYXJ5Q29udGVudENvbG9yLmNvbG9yV2l0aEFscGhhKDAuMDUpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvckhpZ2hsaWdodGVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBDQkNvbG9yLnByaW1hcnlDb250ZW50Q29sb3IuY29sb3JXaXRoQWxwaGEoMC4wOClcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9yRm9jdXNlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gQ0JDb2xvci5wcmltYXJ5Q29udGVudENvbG9yLmNvbG9yV2l0aEFscGhhKDAuMDgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgdXBkYXRlQ29udGVudEZvclNlbGVjdGVkU3RhdGUoKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yTm9ybWFsU3RhdGUoKVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSBTZWFyY2hhYmxlRHJvcGRvd25Sb3cudHlwZS5zZWxlY3RhYmxlSXRlbSB8fCB0aGlzLnR5cGUgPT1cbiAgICAgICAgICAgIFNlYXJjaGFibGVEcm9wZG93blJvdy50eXBlLmN1c3RvbUl0ZW0pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fY2hlY2tib3guaGlkZGVuID0gTk9cbiAgICAgICAgICAgIC8vdGhpcy5fY2hlY2tib3gudGl0bGVMYWJlbC5oaWRkZW4gPSBZRVM7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94LnRpdGxlTGFiZWwudGV4dENvbG9yID0gQ0JDb2xvci5wcmltYXJ5VGludENvbG9yXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlTGFiZWwuaGlkZGVuID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICB3YXNSZW1vdmVkRnJvbVZpZXdUcmVlKCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIud2FzUmVtb3ZlZEZyb21WaWV3VHJlZSgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkID0gTk9cbiAgICAgICAgdGhpcy5ob3ZlcmVkID0gTk9cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrYm94KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveC5zdHlsZS50b3AgPSBcIjI1JVwiXG4gICAgICAgICAgICB0aGlzLl9jaGVja2JveC5zdHlsZS5oZWlnaHQgPSBcIjMwcHhcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrYm94LnN0eWxlLmxlZnQgPSBcIlwiICsgdGhpcy5jb250ZW50UGFkZGluZyArIFwicHhcIlxuICAgICAgICAgICAgdGhpcy5fY2hlY2tib3guc3R5bGUucmlnaHQgPSBcIlwiICsgdGhpcy5jb250ZW50UGFkZGluZyArIFwicHhcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJQnV0dG9uLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9VSUNvcmUvVUlLZXlWYWx1ZVN0cmluZ0ZpbHRlci50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVUlDb3JlL1VJVGFibGVWaWV3LnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9VSUNvcmUvVUlJbWFnZVZpZXcudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1VJQ29yZS9VSVRleHRWaWV3LnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9VSUNvcmUvVUlUZXh0RmllbGQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1VJQ29yZS9VSURpYWxvZ1ZpZXcudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vU2VhcmNoVGV4dEZpZWxkLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0NCQ2hlY2tib3gudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vQ0JDb2xvci50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9TZWFyY2hhYmxlRHJvcGRvd25Sb3cudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1Jvb3RWaWV3Q29udHJvbGxlci50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9MYW5ndWFnZVNlcnZpY2UudHNcIiAvPlxuXG5cblxuXG5cbmludGVyZmFjZSBDQkxvY2FsaXplZFRleHRPYmplY3Qge1xuICAgIFxuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZ1xuICAgIFxufVxuXG5cbmludGVyZmFjZSBDQkRyb3Bkb3duRGF0YTxUPiB7XG4gICAgXG4gICAgX2lkOiBzdHJpbmc7XG4gICAgbmFtZT86IENCTG9jYWxpemVkVGV4dE9iamVjdDtcbiAgICBkcm9wZG93bkNvZGU6IHN0cmluZztcbiAgICBkYXRhOiBDQkRyb3Bkb3duRGF0YUl0ZW08VD5bXTtcbiAgICBcbn1cblxuXG5pbnRlcmZhY2UgQ0JEcm9wZG93bkRhdGFJdGVtPFQ+IHtcbiAgICBcbiAgICBfaWQ6IHN0cmluZztcbiAgICB0aXRsZTogQ0JMb2NhbGl6ZWRUZXh0T2JqZWN0O1xuICAgIHJvd3NEYXRhPzogQ0JEcm9wZG93bkRhdGFJdGVtPFQ+W11cbiAgICBpc0FEcm9wZG93bkRhdGFTZWN0aW9uOiBib29sZWFuO1xuICAgIGlzQURyb3Bkb3duRGF0YVJvdzogYm9vbGVhbjtcbiAgICBcbiAgICBhdHRhY2hlZE9iamVjdDogVFxuICAgIFxuICAgIGl0ZW1Db2RlOiBzdHJpbmc7XG4gICAgZHJvcGRvd25Db2RlOiBzdHJpbmc7XG4gICAgXG59XG5cblxuaW50ZXJmYWNlIENCU3ViamVjdERyb3Bkb3duSXRlbUF0dGFjaGVkT2JqZWN0IHtcbiAgICBcbiAgICBpc0FQcm9kdWN0PzogYm9vbGVhbjtcbiAgICBpc0FTZXJ2aWNlPzogYm9vbGVhbjtcbiAgICBcbn1cblxuXG5cblxuY2xhc3MgU2VhcmNoYWJsZURyb3Bkb3duPFQ+IGV4dGVuZHMgVUlCdXR0b24ge1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIF9rZXlWYWx1ZVN0cmluZ0ZpbHRlcjogVUlLZXlWYWx1ZVN0cmluZ0ZpbHRlclxuICAgIF9jb250YWluZXJWaWV3OiBVSVZpZXdcbiAgICBfc2VhcmNoVGV4dEZpZWxkOiBTZWFyY2hUZXh0RmllbGRcbiAgICBfZGlhbG9nVmlldzogVUlEaWFsb2dWaWV3XG4gICAgX3RhYmxlVmlldzogVUlUYWJsZVZpZXdcbiAgICBfcmlnaHRJbWFnZVZpZXc6IFVJSW1hZ2VWaWV3XG4gICAgXG4gICAgaGlnaGxpZ2h0TGFiZWw6IFVJVGV4dFZpZXdcbiAgICBcbiAgICBfZGF0YTogQ0JEcm9wZG93bkRhdGFJdGVtPFQ+W10gPSBbXVxuICAgIF9maWx0ZXJlZERhdGE6IENCRHJvcGRvd25EYXRhSXRlbTxUPltdID0gW11cbiAgICBcbiAgICBfZXhjbHVkZWREYXRhOiBzdHJpbmdbXSA9IFtdXG4gICAgXG4gICAgXG4gICAgdGludENvbG9yOiBVSUNvbG9yID0gQ0JDb2xvci5wcmltYXJ5VGludENvbG9yXG4gICAgXG4gICAgXG4gICAgb3ZlcmZsb3dMYWJlbDogVUlUZXh0Vmlld1xuICAgIHNlbGVjdGVkSW5kaWNlczogbnVtYmVyW10gPSBbXVxuICAgIF9zZWxlY3RlZERhdGE6IENCRHJvcGRvd25EYXRhSXRlbTxUPltdID0gW11cbiAgICBfZHJhd2luZ0RhdGE6IENCRHJvcGRvd25EYXRhSXRlbTxUPltdID0gW11cbiAgICBcbiAgICBfaXNEcmF3aW5nRGF0YVZhbGlkID0gTk9cbiAgICBfcGxhY2Vob2xkZXJUZXh0OiBzdHJpbmdcbiAgICBfZXhwYW5kZWRDb250YWluZXJWaWV3SGVpZ2h0OiBudW1iZXJcbiAgICBcbiAgICBpc1NpbmdsZVNlbGVjdGlvbiA9IE5PXG4gICAgc2hvd3NTZWxlY3RlZFNlY3Rpb25Jbk11bHRpcGxlU2VsZWN0aW9uTW9kZSA9IE5PXG4gICAgXG4gICAgYWxsb3dzQ3VzdG9tSXRlbSA9IE5PXG4gICAgX2N1c3RvbUl0ZW06IENCRHJvcGRvd25EYXRhSXRlbTxhbnk+XG4gICAgX2ZvY3VzZWRSb3dJbmRleDogbnVtYmVyXG4gICAgXG4gICAga2VlcEZvY3VzZWRSb3dWaXNpYmxlID0gWUVTXG4gICAgX3BsYWNlaG9sZGVyTG9jYWxpemVkVGV4dE9iamVjdDogVUlMb2NhbGl6ZWRUZXh0T2JqZWN0XG4gICAgXG4gICAgXG4gICAgY29uc3RydWN0b3IoZWxlbWVudElEOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBTZWFyY2hhYmxlRHJvcGRvd25cbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlCdXR0b25cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5pbml0VmlldyhlbGVtZW50SUQsIHZpZXdIVE1MRWxlbWVudCwgaW5pdFZpZXdEYXRhKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjJweFwiO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3RpdGxlTGFiZWwudGV4dCA9IFwiQ3VycmVudCB2YWx1ZVwiXG4gICAgICAgIHRoaXMuX3RpdGxlTGFiZWwudGV4dEFsaWdubWVudCA9IFVJVGV4dFZpZXcudGV4dEFsaWdubWVudC5sZWZ0XG4gICAgICAgIFxuICAgICAgICB0aGlzLm92ZXJmbG93TGFiZWwgPSBuZXcgVUlUZXh0VmlldyhlbGVtZW50SUQgKyBcIk92ZXJmbG93TGFiZWxcIilcbiAgICAgICAgdGhpcy5vdmVyZmxvd0xhYmVsLnRleHRDb2xvciA9IENCQ29sb3IucHJpbWFyeUNvbnRlbnRDb2xvclxuICAgICAgICB0aGlzLm92ZXJmbG93TGFiZWwudGV4dEFsaWdubWVudCA9IFVJVGV4dFZpZXcudGV4dEFsaWdubWVudC5yaWdodFxuICAgICAgICB0aGlzLmFkZFN1YnZpZXcodGhpcy5vdmVyZmxvd0xhYmVsKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3JpZ2h0SW1hZ2VWaWV3ID0gbmV3IFVJSW1hZ2VWaWV3KHRoaXMuZWxlbWVudElEICsgXCJSaWdodEltYWdlVmlld1wiKVxuICAgICAgICB0aGlzLl9yaWdodEltYWdlVmlldy5pbWFnZVNvdXJjZSA9IFwiaW1hZ2VzL2Jhc2VsaW5lLWFycm93X2Ryb3BfZG93bi0yNHB4LnN2Z1wiXG4gICAgICAgIHRoaXMuX3JpZ2h0SW1hZ2VWaWV3LnVzZXJJbnRlcmFjdGlvbkVuYWJsZWQgPSBOT1xuICAgICAgICB0aGlzLmFkZFN1YnZpZXcodGhpcy5fcmlnaHRJbWFnZVZpZXcpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY29udGFpbmVyVmlldyA9IG5ldyBVSVZpZXcoZWxlbWVudElEICsgXCJDb250YWluZXJWaWV3XCIpXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lclZpZXcuc3R5bGUuYm94U2hhZG93ID0gXCIwIDlweCAxM3B4IDAgcmdiYSgwLDAsMCwwLjI2KVwiXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lclZpZXcuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCIycHhcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkID0gbmV3IFNlYXJjaFRleHRGaWVsZChlbGVtZW50SUQgKyBcIlNlYXJjaFRleHRGaWVsZFwiKVxuICAgICAgICB0aGlzLl9zZWFyY2hUZXh0RmllbGQucGxhY2Vob2xkZXJUZXh0ID0gXCJTZWFyY2hcIlxuICAgICAgICB0aGlzLl9jb250YWluZXJWaWV3LmFkZFN1YnZpZXcodGhpcy5fc2VhcmNoVGV4dEZpZWxkKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLl90ZXh0RmllbGQuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KFxuICAgICAgICAgICAgVUlUZXh0RmllbGQuY29udHJvbEV2ZW50LlRleHRDaGFuZ2UsXG4gICAgICAgICAgICBmdW5jdGlvbiAodGhpczogU2VhcmNoYWJsZURyb3Bkb3duPFQ+LCBzZW5kZXIsIGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWx0ZXJlZERhdGEodGhpcy5fc2VhcmNoVGV4dEZpZWxkLnRleHQpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLl90ZXh0RmllbGQuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KFxuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5Fc2NEb3duLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bjxUPiwgc2VuZGVyLCBldmVudCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChJUyh0aGlzLl9zZWFyY2hUZXh0RmllbGQudGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFRleHRGaWVsZC50ZXh0ID0gXCJcIlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcmVkRGF0YShcIlwiKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFsb2dWaWV3LmRpc21pc3MoWUVTKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLl90ZXh0RmllbGQuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KFxuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5Eb3duQXJyb3dEb3duLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bjxUPiwgc2VuZGVyOiBVSVRleHRGaWVsZCwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFJvd0luZGV4IDwgKHRoaXMuZHJhd2luZ0RhdGEubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJvd0luZGV4ID0gdGhpcy5mb2N1c2VkUm93SW5kZXggKyAxXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zZWFyY2hUZXh0RmllbGQuX3RleHRGaWVsZC5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoXG4gICAgICAgICAgICBVSVZpZXcuY29udHJvbEV2ZW50LlVwQXJyb3dEb3duLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bjxUPiwgc2VuZGVyOiBVSVRleHRGaWVsZCwgZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZm9jdXNlZFJvd0luZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkUm93SW5kZXggPSB0aGlzLmZvY3VzZWRSb3dJbmRleCAtIDFcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NlYXJjaFRleHRGaWVsZC5fdGV4dEZpZWxkLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudChcbiAgICAgICAgICAgIFVJVmlldy5jb250cm9sRXZlbnQuRW50ZXJEb3duLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bjxUPiwgc2VuZGVyLCBldmVudCkge1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGlzVG91Y2hEZXZpY2UgPSBcIm9udG91Y2hzdGFydFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICAgIFxuICAgICAgICAgICAgICAgIGlmIChpc1RvdWNoRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hUZXh0RmllbGQuYmx1cigpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFwb2ludCA9IHRoaXMuZHJhd2luZ0RhdGFbdGhpcy5mb2N1c2VkUm93SW5kZXhdXG4gICAgXG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYWxyZWFkeVNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZERhdGFDb250YWlucyhkYXRhcG9pbnQpXG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKGFscmVhZHlTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEucmVtb3ZlRWxlbWVudChkYXRhcG9pbnQpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmlzU2luZ2xlU2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMgPSBbdGhpcy5mb2N1c2VkUm93SW5kZXhdXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YSA9IFtkYXRhcG9pbnRdXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyB2aWV3LnNlbGVjdGVkID0gWUVTO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25EaWRDaGFuZ2UodGhpcy5zZWxlY3RlZERhdGEpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U2VsZWN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpYWxvZ1ZpZXcuZGlzbWlzcygpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YS5wdXNoKGRhdGFwb2ludClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3RhYmxlVmlldyA9IG5ldyBVSVRhYmxlVmlldyhlbGVtZW50SUQgKyBcIlRhYmxlVmlld1wiKVxuICAgICAgICB0aGlzLl9jb250YWluZXJWaWV3LmFkZFN1YnZpZXcodGhpcy5fdGFibGVWaWV3KVxuICAgICAgICB0aGlzLl90YWJsZVZpZXcuYmFja2dyb3VuZENvbG9yID0gVUlDb2xvci53aGl0ZUNvbG9yXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9kaWFsb2dWaWV3ID0gbmV3IFVJRGlhbG9nVmlldyhlbGVtZW50SUQgKyBcIkRpYWxvZ1ZpZXdcIilcbiAgICAgICAgdGhpcy5fZGlhbG9nVmlldy52aWV3ID0gdGhpcy5fY29udGFpbmVyVmlld1xuICAgICAgICB0aGlzLl9kaWFsb2dWaWV3LmJhY2tncm91bmRDb2xvciA9IFVJQ29sb3IudHJhbnNwYXJlbnRDb2xvclxuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnRzKFtcbiAgICAgICAgICAgIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlLCBVSVZpZXcuY29udHJvbEV2ZW50LkVudGVyRG93blxuICAgICAgICBdLCBmdW5jdGlvbiAodGhpczogU2VhcmNoYWJsZURyb3Bkb3duPFQ+LCBzZW5kZXIsIGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGlhbG9nVmlldy5pc1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuRHJvcGRvd24oKVxuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fZGlhbG9nVmlldy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoXG4gICAgICAgICAgICBVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJEb3duLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHNlbmRlcjogVUlEaWFsb2dWaWV3LCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoc2VuZGVyLnZpZXdIVE1MRWxlbWVudCA9PSBldmVudC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyLmRpc21pc3MoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIFxuICAgIFxuICAgICAgICBjb25zdCBkaWFsb2dMYXlvdXRGdW5jdGlvbiA9IHRoaXMuX2RpYWxvZ1ZpZXcubGF5b3V0U3Vidmlld3NcbiAgICBcbiAgICAgICAgdGhpcy5fZGlhbG9nVmlldy5sYXlvdXRTdWJ2aWV3cyA9IGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9kaWFsb2dMYXlvdXRGdW5jdGlvbi5jYWxsKHRoaXMuX2RpYWxvZ1ZpZXcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9kaWFsb2dWaWV3LmZyYW1lID0gdGhpcy5yb290Vmlldy5ib3VuZHMgLy90aGlzLnN1cGVydmlldy5yZWN0YW5nbGVJblZpZXcodGhpcy5zdXBlcnZpZXcuYm91bmRzLCB0aGlzLnJvb3RWaWV3KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmcgPSBSb290Vmlld0NvbnRyb2xsZXIucGFkZGluZ0xlbmd0aFxuICAgICAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSBwYWRkaW5nXG4gICAgXG4gICAgICAgICAgICBjb25zdCBzZWFyY2hUZXh0RmllbGRIZWlnaHQgPSB0aGlzLmJvdW5kcy5oZWlnaHRcbiAgICBcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lclZpZXcuZnJhbWUgPSB0aGlzLnN1cGVydmlldy5yZWN0YW5nbGVJblZpZXcodGhpcy5mcmFtZSwgdGhpcy5yb290VmlldylcbiAgICAgICAgICAgICAgICAucmVjdGFuZ2xlV2l0aEhlaWdodCh0aGlzLmV4cGFuZGVkQ29udGFpbmVyVmlld0hlaWdodClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLmZyYW1lID0gdGhpcy5fY29udGFpbmVyVmlldy5ib3VuZHMucmVjdGFuZ2xlV2l0aEhlaWdodChzZWFyY2hUZXh0RmllbGRIZWlnaHQpLnJlY3RhbmdsZVdpdGhJbnNldHMoXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAxNixcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fdGFibGVWaWV3LmZyYW1lID0gdGhpcy5fY29udGFpbmVyVmlldy5ib3VuZHMucmVjdGFuZ2xlV2l0aEluc2V0cygwLCAwLCAwLCBzZWFyY2hUZXh0RmllbGRIZWlnaHQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vdGhpcy5fdGFibGVWaWV3LnN0eWxlLm1heEhlaWdodCA9IFwiXCIgKyB0aGlzLl90YWJsZVZpZXcuaW50cmluc2ljQ29udGVudEhlaWdodCgpICsgXCJweFwiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gdmFyIGFuaW1hdGVEaWFsb2dBcHBlYXJpbmcgPSB0aGlzLl9kaWFsb2dWaWV3LmFuaW1hdGVBcHBlYXJpbmc7XG4gICAgICAgIC8vIHRoaXMuX2RpYWxvZ1ZpZXcuYW5pbWF0ZUFwcGVhcmluZyA9IGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd24pIHtcbiAgICAgICAgLy8gICAgIGFuaW1hdGVEaWFsb2dBcHBlYXJpbmcuY2FsbCh0aGlzLl9kaWFsb2dWaWV3KTtcbiAgICAgICAgLy8gICAgIHRoaXMuc3R5bGUuekluZGV4ID0gXCIxMDFcIjtcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLmhpZ2hsaWdodExhYmVsKSB7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy5oaWdobGlnaHRMYWJlbC50ZXh0Q29sb3IgPSBVSUNvbG9yLndoaXRlQ29sb3I7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy5oaWdobGlnaHRMYWJlbC5zdHlsZS56SW5kZXggPSBcIjEwMVwiO1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuaGlnaGxpZ2h0TGFiZWwudXNlckludGVyYWN0aW9uRW5hYmxlZCA9IE5PO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gICAgIHRoaXMuX3NlYXJjaFRleHRGaWVsZC5mb2N1cygpO1xuICAgICAgICBcbiAgICAgICAgLy8gfS5iaW5kKHRoaXMpXG4gICAgICAgIFxuICAgICAgICAvLyB2YXIgYW5pbWF0ZURpYWxvZ0Rpc2FwcGVhcmluZyA9IHRoaXMuX2RpYWxvZ1ZpZXcuYW5pbWF0ZURpc2FwcGVhcmluZztcbiAgICAgICAgLy8gdGhpcy5fZGlhbG9nVmlldy5hbmltYXRlRGlzYXBwZWFyaW5nID0gZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bikge1xuICAgICAgICAvLyAgICAgYW5pbWF0ZURpYWxvZ0Rpc2FwcGVhcmluZy5jYWxsKHRoaXMuX2RpYWxvZ1ZpZXcpO1xuICAgICAgICAvLyAgICAgdGhpcy5zdHlsZS56SW5kZXggPSBcIjBcIjtcbiAgICAgICAgLy8gICAgIGlmICh0aGlzLmhpZ2hsaWdodExhYmVsKSB7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy5oaWdobGlnaHRMYWJlbC50ZXh0Q29sb3IgPSBDQkNvbG9yLnByaW1hcnlDb250ZW50Q29sb3I7XG4gICAgICAgIC8vICAgICAgICAgdGhpcy5oaWdobGlnaHRMYWJlbC5zdHlsZS56SW5kZXggPSBcIjBcIjtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmhpZ2hsaWdodExhYmVsLnVzZXJJbnRlcmFjdGlvbkVuYWJsZWQgPSBZRVM7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLmJsdXIoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIH0uYmluZCh0aGlzKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3RhYmxlVmlldy5udW1iZXJPZlJvd3MgPSBmdW5jdGlvbiAodGhpczogU2VhcmNoYWJsZURyb3Bkb3duPFQ+KSB7XG4gICAgXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5kcmF3aW5nRGF0YS5sZW5ndGhcbiAgICBcbiAgICAgICAgICAgIGlmIChJU19OT1QodGhpcy5pc1NpbmdsZVNlbGVjdGlvbikgJiYgdGhpcy5zaG93c1NlbGVjdGVkU2VjdGlvbkluTXVsdGlwbGVTZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgdGhpcy5zZWxlY3RlZERhdGEubGVuZ3RoXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgIFxuICAgIFxuICAgICAgICBjb25zdCBuZXdSZXVzYWJsZVZpZXdGb3JJZGVudGlmaWVyRnVuY3Rpb24gPSB0aGlzLl90YWJsZVZpZXcubmV3UmV1c2FibGVWaWV3Rm9ySWRlbnRpZmllci5iaW5kKHRoaXMuX3RhYmxlVmlldylcbiAgICBcbiAgICAgICAgdGhpcy5fdGFibGVWaWV3Lm5ld1JldXNhYmxlVmlld0ZvcklkZW50aWZpZXIgPSBmdW5jdGlvbiAoXG4gICAgICAgICAgICB0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4sXG4gICAgICAgICAgICBpZGVudGlmaWVyOiBzdHJpbmcsXG4gICAgICAgICAgICByb3dJbmRleDogbnVtYmVyXG4gICAgICAgICkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvL2lmIChpZGVudGlmaWVyID09IFwiU2VsZWN0ZWRJdGVtUm93XCIpIHtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSBuZXcgU2VhcmNoYWJsZURyb3Bkb3duUm93KGVsZW1lbnRJRCArIGlkZW50aWZpZXIgKyByb3dJbmRleClcbiAgICBcbiAgICAgICAgICAgIHZpZXcuc3RvcHNQb2ludGVyRXZlbnRQcm9wYWdhdGlvbiA9IE5PXG4gICAgICAgICAgICB2aWV3LnBhdXNlc1BvaW50ZXJFdmVudHMgPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdmlld1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHJldHVybiBuZXdSZXVzYWJsZVZpZXdGb3JJZGVudGlmaWVyRnVuY3Rpb24oaWRlbnRpZmllciwgcm93SW5kZXgpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgIFxuICAgIFxuICAgICAgICBjb25zdCB2aWV3Rm9yU2VsZWN0ZWRJdGVtUm93ID0gZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bjxUPiwgaW5kZXg6IG51bWJlcikge1xuICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLl90YWJsZVZpZXcucmV1c2FibGVWaWV3Rm9ySWRlbnRpZmllcihcIlNlbGVjdGVkSXRlbVJvd1wiLCBpbmRleCkgYXMgQ0JDaGVja2JveFxuICAgICAgICBcbiAgICAgICAgICAgIHZpZXcudGl0bGVMYWJlbC50ZXh0ID0gTGFuZ3VhZ2VTZXJ2aWNlLnN0cmluZ0ZvckN1cnJlbnRMYW5ndWFnZSh0aGlzLnNlbGVjdGVkRGF0YVtpbmRleF0udGl0bGUpXG4gICAgICAgIFxuICAgICAgICAgICAgdmlldy5zZWxlY3RlZCA9IFlFU1xuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB2aWV3XG4gICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcylcbiAgICBcbiAgICAgICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgICAgIHRoaXMuX3RhYmxlVmlldy52aWV3Rm9yUm93V2l0aEluZGV4ID0gZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bjxUPiwgaW5kZXg6IG51bWJlcikge1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgICAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuX3RhYmxlVmlldy5yZXVzYWJsZVZpZXdGb3JJZGVudGlmaWVyKFwiU3ViamVjdFZpZXdcIiwgaW5kZXgpIGFzIFNlYXJjaGFibGVEcm9wZG93blJvd1xuICAgIFxuICAgIFxuICAgICAgICAgICAgdmlldy5zdHlsZS5ib3JkZXJCb3R0b21Db2xvciA9IFwiXCJcbiAgICAgICAgICAgIHZpZXcuc3R5bGUuYm9yZGVyQm90dG9tU3R5bGUgPSBcIlwiXG4gICAgICAgICAgICB2aWV3LnN0eWxlLmJvcmRlckJvdHRvbVdpZHRoID0gXCJcIlxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgICAgICAgICAgY29uc3Qgcm93V2FzSG92ZXJlZCA9IGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4sIHNlbmRlcjogU2VhcmNoYWJsZURyb3Bkb3duUm93LCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c2VkUm93SW5kZXggPSBpbmRleFxuICAgICAgICBcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgIFxuICAgICAgICAgICAgdmlldy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoVUlCdXR0b24uY29udHJvbEV2ZW50LlBvaW50ZXJIb3Zlciwgcm93V2FzSG92ZXJlZClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmlldy5yZW1vdmVUYXJnZXRGb3JDb250cm9sRXZlbnQoXG4gICAgICAgICAgICAgICAgVUlCdXR0b24uY29udHJvbEV2ZW50LlBvaW50ZXJIb3ZlcixcbiAgICAgICAgICAgICAgICB2aWV3Ll9TZWFyY2hhYmxlRHJvcGRvd25Sb3dXYXNIb3ZlcmVkRnVuY3Rpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmlldy5fU2VhcmNoYWJsZURyb3Bkb3duUm93V2FzSG92ZXJlZEZ1bmN0aW9uID0gcm93V2FzSG92ZXJlZFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2aWV3LmZvY3VzZWQgPSAodGhpcy5mb2N1c2VkUm93SW5kZXggPT0gaW5kZXgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTaW5nbGVTZWxlY3Rpb24gJiYgdGhpcy5zaG93c1NlbGVjdGVkU2VjdGlvbkluTXVsdGlwbGVTZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgdGhpcy5zZWxlY3RlZERhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmlldy50eXBlID0gU2VhcmNoYWJsZURyb3Bkb3duUm93LnR5cGUuc2VsZWN0ZWRJdGVtXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2aWV3LnRpdGxlVGV4dCA9IExhbmd1YWdlU2VydmljZS5zdHJpbmdGb3JDdXJyZW50TGFuZ3VhZ2UodGhpcy5zZWxlY3RlZERhdGFbaW5kZXhdLnRpdGxlKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmlldy5zZWxlY3RlZCA9IFlFU1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmlldy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFN0YXRlKClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5zZWxlY3RlZERhdGEubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnN0eWxlLmJvcmRlckJvdHRvbUNvbG9yID0gVUlDb2xvci5jb2xvcldpdGhSR0JBKDEwMCwgMTAwLCAxMDApLnN0cmluZ1ZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc3R5bGUuYm9yZGVyQm90dG9tU3R5bGUgPSBcInNvbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zdHlsZS5ib3JkZXJCb3R0b21XaWR0aCA9IFwiMXB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdmlld1dhc1RhcHBlZCA9IGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4sIHNlbmRlciwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcy5yZW1vdmVFbGVtZW50QXRJbmRleChpbmRleClcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IHRoaXMuc2VsZWN0ZWREYXRhW2luZGV4XVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEucmVtb3ZlRWxlbWVudChzZWxlY3RlZEl0ZW0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZWxlY3RlZCA9IE5PXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uRGlkQ2hhbmdlKHRoaXMuc2VsZWN0ZWREYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMucGVyZm9ybUZ1bmN0aW9uV2l0aERlbGF5KDAuMTUsIGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFNlbGVjdGlvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAvLyBVbnNlbGVjdGluZyBtYWluIGJvZHkgaXRlbSBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHZpc2libGVSb3dzID0gdGhpcy5fdGFibGVWaWV3Ll92aXNpYmxlUm93cyBhcyBTZWFyY2hhYmxlRHJvcGRvd25Sb3dbXVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgdmlzaWJsZUluZGljZXMgPSB0aGlzLl90YWJsZVZpZXcuaW5kZXhlc0ZvclZpc2libGVSb3dzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlzaWJsZVJvd3MuZm9yRWFjaChmdW5jdGlvbiAodGhpczogU2VhcmNoYWJsZURyb3Bkb3duPFQ+LCB2aXNpYmxlUm93OiBTZWFyY2hhYmxlRHJvcGRvd25Sb3csIHZpc2libGVSb3dJbmRleDogbnVtYmVyLCB2aXNpYmxlUm93c0FycmF5OiBTZWFyY2hhYmxlRHJvcGRvd25Sb3dbXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmFyIHJvd0RhdGFJbmRleCA9IHZpc2libGVJbmRpY2VzW3Zpc2libGVSb3dJbmRleF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZpc2libGVSb3cuc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkRGF0YS5jb250YWlucyh0aGlzLmRyYXdpbmdEYXRhW3Jvd0RhdGFJbmRleF0pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLmZvY3VzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZpZXcgYXMgYW55KS52aWV3V2FzVGFwcGVkRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlbW92ZVRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVSVZpZXcuY29udHJvbEV2ZW50LkVudGVyRG93biwgVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVGFwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSwgKHZpZXcgYXMgYW55KS52aWV3V2FzVGFwcGVkRnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmluZyBwcmV2aW91cyBldmVudCB0YXJnZXQgaWYgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2aWV3IGFzIGFueSkudmlld1dhc1RhcHBlZEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnJlbW92ZVRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVJVmlldy5jb250cm9sRXZlbnQuRW50ZXJEb3duLCBVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJUYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sICh2aWV3IGFzIGFueSkudmlld1dhc1RhcHBlZEZ1bmN0aW9uKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkaW5nIGV2ZW50IHRhcmdldFxuICAgICAgICAgICAgICAgICAgICB2aWV3LmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5FbnRlckRvd24sIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlclRhcFxuICAgICAgICAgICAgICAgICAgICBdLCB2aWV3V2FzVGFwcGVkKTtcbiAgICAgICAgICAgICAgICAgICAgKHZpZXcgYXMgYW55KS52aWV3V2FzVGFwcGVkRnVuY3Rpb24gPSB2aWV3V2FzVGFwcGVkXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXdcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCAtIHRoaXMuc2VsZWN0ZWREYXRhLmxlbmd0aFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGF0YXBvaW50XG4gICAgICAgICAgICBjb25zdCBkYXRhcG9pbnQgPSB0aGlzLmRyYXdpbmdEYXRhW2luZGV4XVxuICAgIFxuICAgICAgICAgICAgaWYgKElTX05PVChkYXRhcG9pbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldHRpbmcgZGlmZmVyZW50IHN0eWxlIGZvciBzZWN0aW9uIHRpdGxlIHJvd3NcbiAgICAgICAgICAgIGlmIChkYXRhcG9pbnQuaXNBRHJvcGRvd25EYXRhU2VjdGlvbikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZpZXcudHlwZSA9IFNlYXJjaGFibGVEcm9wZG93blJvdy50eXBlLnNlY3Rpb25UaXRsZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZpZXcudXNlckludGVyYWN0aW9uRW5hYmxlZCA9IE5PXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2aWV3LnR5cGUgPSBTZWFyY2hhYmxlRHJvcGRvd25Sb3cudHlwZS5zZWxlY3RhYmxlSXRlbVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZpZXcudXNlckludGVyYWN0aW9uRW5hYmxlZCA9IFlFU1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZGF0YXBvaW50Ll9pZCA9PSAodGhpcy5fY3VzdG9tSXRlbSB8fCBuaWwpLl9pZCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZpZXcudHlwZSA9IFNlYXJjaGFibGVEcm9wZG93blJvdy50eXBlLmN1c3RvbUl0ZW1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmlldy51cGRhdGVDb250ZW50Rm9yTm9ybWFsU3RhdGUoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2aWV3LnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U3RhdGUoKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldHRpbmcgcm93IHRpdGxlXG4gICAgICAgICAgICB2aWV3LnRpdGxlVGV4dCA9IExhbmd1YWdlU2VydmljZS5zdHJpbmdGb3JDdXJyZW50TGFuZ3VhZ2UoZGF0YXBvaW50LnRpdGxlKVxuICAgICAgICAgICAgdmlldy50aXRsZUxhYmVsLnRleHRBbGlnbm1lbnQgPSBVSVRleHRWaWV3LnRleHRBbGlnbm1lbnQubGVmdFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhpZ2hsaWdodGluZyBvZiByb3dcbiAgICAgICAgICAgIC8vdmlldy5oaWdobGlnaHRlZCA9ICh0aGlzLmhpZ2hsaWdodGVkUm93SW5kZXggPT0gaW5kZXgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNlbGVjdGluZyBvZiByb3dzXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZpZXcuc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93SWRlbnRpZmllcnMuY29udGFpbnMoZGF0YXBvaW50Ll9pZCkgLy90aGlzLnNlbGVjdGVkSW5kaWNlcy5jb250YWlucyhpbmRleCk7IC8vdGhpcy5zZWxlY3RlZERhdGFDb250YWlucyhkYXRhcG9pbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgdmlld1dhc1RhcHBlZCA9IGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4sIHNlbmRlciwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodmlldy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMucmVtb3ZlRWxlbWVudChpbmRleClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhLnJlbW92ZUVsZW1lbnQoZGF0YXBvaW50KVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTaW5nbGVTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMgPSBbaW5kZXhdXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhID0gW2RhdGFwb2ludF1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlldy5zZWxlY3RlZCA9IFlFUztcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25EaWRDaGFuZ2UodGhpcy5zZWxlY3RlZERhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRTZWxlY3Rpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWFsb2dWaWV3LmRpc21pc3MoKVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcy5wdXNoKGluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YS5wdXNoKGRhdGFwb2ludClcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL3ZpZXcuc2VsZWN0ZWQgPSAhdmlldy5zZWxlY3RlZDtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZERhdGEgPSB0aGlzLnNlbGVjdGVkRGF0YVxuICAgIFxuICAgICAgICAgICAgICAgIGlmICghdmlldy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHZpZXcuc2VsZWN0ZWQgPSBZRVNcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybUZ1bmN0aW9uV2l0aERlbGF5KDAuMjUsIGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkRpZENoYW5nZShzZWxlY3RlZERhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGVudEZvckN1cnJlbnRTZWxlY3Rpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93c1NlbGVjdGVkU2VjdGlvbkluTXVsdGlwbGVTZWxlY3Rpb25Nb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGFibGVWaWV3LmNvbnRlbnRPZmZzZXQgPSB0aGlzLl90YWJsZVZpZXcuY29udGVudE9mZnNldC5wb2ludEJ5QWRkaW5nWSh2aWV3LmZyYW1lLmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHZpZXcuX2NoZWNrYm94LnNlbGVjdGVkID0gTk9cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uRGlkQ2hhbmdlKHNlbGVjdGVkRGF0YSlcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybUZ1bmN0aW9uV2l0aERlbGF5KDAuMTUsIGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNlbGVjdGVkID0gTk9cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFNlbGVjdGlvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dzU2VsZWN0ZWRTZWN0aW9uSW5NdWx0aXBsZVNlbGVjdGlvbk1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJsZVZpZXcuY29udGVudE9mZnNldCA9IHRoaXMuX3RhYmxlVmlldy5jb250ZW50T2Zmc2V0LnBvaW50QnlBZGRpbmdZKC12aWV3LmZyYW1lLmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hUZXh0RmllbGQuZm9jdXMoKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlbW92aW5nIHByZXZpb3VzIGV2ZW50IHRhcmdldCBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgaWYgKCh2aWV3IGFzIGFueSkudmlld1dhc1RhcHBlZEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmlldy5yZW1vdmVUYXJnZXRGb3JDb250cm9sRXZlbnRzKFtcbiAgICAgICAgICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5FbnRlckRvd24sIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgICAgICAgICAgXSwgKHZpZXcgYXMgYW55KS52aWV3V2FzVGFwcGVkRnVuY3Rpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkZGluZyBldmVudCB0YXJnZXRcbiAgICAgICAgICAgIHZpZXcuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50cyhbXG4gICAgICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5FbnRlckRvd24sIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlclVwSW5zaWRlXG4gICAgICAgICAgICBdLCB2aWV3V2FzVGFwcGVkKTtcbiAgICAgICAgICAgICh2aWV3IGFzIGFueSkudmlld1dhc1RhcHBlZEZ1bmN0aW9uID0gdmlld1dhc1RhcHBlZFxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdmlld1xuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fa2V5VmFsdWVTdHJpbmdGaWx0ZXIgPSBuZXcgVUlLZXlWYWx1ZVN0cmluZ0ZpbHRlcigpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBvcGVuRHJvcGRvd24oKSB7XG4gICAgICAgIHRoaXMuX2RpYWxvZ1ZpZXcuc2hvd0luVmlldyh0aGlzLnJvb3RWaWV3LCBZRVMpXG4gICAgICAgIHRoaXMuX3NlYXJjaFRleHRGaWVsZC5mb2N1cygpXG4gICAgfVxuICAgIFxuICAgIGNsb3NlRHJvcGRvd24oKSB7XG4gICAgICAgIHRoaXMuX2RpYWxvZ1ZpZXcuZGlzbWlzcyhZRVMpXG4gICAgfVxuICAgIFxuICAgIGJvdW5kc0RpZENoYW5nZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmJvdW5kc0RpZENoYW5nZSgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBmb2N1c2VkUm93SW5kZXgoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fZm9jdXNlZFJvd0luZGV4XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgZm9jdXNlZFJvd0luZGV4KGZvY3VzZWRSb3dJbmRleDogbnVtYmVyKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHByZXZpb3VzRm9jdXNlZFJvd0luZGV4ID0gdGhpcy5mb2N1c2VkUm93SW5kZXhcbiAgICBcbiAgICAgICAgdGhpcy5fZm9jdXNlZFJvd0luZGV4ID0gZm9jdXNlZFJvd0luZGV4XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKHByZXZpb3VzRm9jdXNlZFJvd0luZGV4ICE9IGZvY3VzZWRSb3dJbmRleCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAodGhpcy5fdGFibGVWaWV3LnZpc2libGVSb3dXaXRoSW5kZXgocHJldmlvdXNGb2N1c2VkUm93SW5kZXgpIGFzIFNlYXJjaGFibGVEcm9wZG93blJvdykuZm9jdXNlZCA9IE5PXG4gICAgXG4gICAgICAgICAgICBjb25zdCBmb2N1c2VkUm93ID0gdGhpcy5fdGFibGVWaWV3LnZpc2libGVSb3dXaXRoSW5kZXgodGhpcy5mb2N1c2VkUm93SW5kZXgpIGFzIFNlYXJjaGFibGVEcm9wZG93blJvd1xuICAgIFxuICAgICAgICAgICAgZm9jdXNlZFJvdy5mb2N1c2VkID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGhpcy5rZWVwRm9jdXNlZFJvd1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHZhciBjb250ZW50T2Zmc2V0ID0gdGhpcy5fdGFibGVWaWV3LmNvbnRlbnRPZmZzZXRcbiAgICBcbiAgICAgICAgICAgIGlmIChmb2N1c2VkUm93LmZyYW1lLnkgPCBjb250ZW50T2Zmc2V0LnkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb250ZW50T2Zmc2V0LnkgPSBmb2N1c2VkUm93LmZyYW1lLnlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZvY3VzZWRSb3cuZnJhbWUubWF4LnkgPiAoY29udGVudE9mZnNldC55ICsgdGhpcy5fdGFibGVWaWV3LmJvdW5kcy5oZWlnaHQpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29udGVudE9mZnNldCA9IGNvbnRlbnRPZmZzZXQucG9pbnRCeUFkZGluZ1koLShjb250ZW50T2Zmc2V0LnkgKyB0aGlzLl90YWJsZVZpZXcuYm91bmRzLmhlaWdodCAtXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzZWRSb3cuZnJhbWUubWF4LnkpKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgYW5pbWF0aW9uRHVyYXRpb24gPSB0aGlzLl90YWJsZVZpZXcuYW5pbWF0aW9uRHVyYXRpb25cbiAgICBcbiAgICAgICAgICAgIHRoaXMuX3RhYmxlVmlldy5hbmltYXRpb25EdXJhdGlvbiA9IDBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fdGFibGVWaWV3LmNvbnRlbnRPZmZzZXQgPSBjb250ZW50T2Zmc2V0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3RhYmxlVmlldy5hbmltYXRpb25EdXJhdGlvbiA9IGFuaW1hdGlvbkR1cmF0aW9uXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldCBleHBhbmRlZENvbnRhaW5lclZpZXdIZWlnaHQoZXhwYW5kZWRDb250YWluZXJWaWV3SGVpZ2h0OiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9leHBhbmRlZENvbnRhaW5lclZpZXdIZWlnaHQgPSBleHBhbmRlZENvbnRhaW5lclZpZXdIZWlnaHRcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2RpYWxvZ1ZpZXcuc2V0TmVlZHNMYXlvdXQoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBleHBhbmRlZENvbnRhaW5lclZpZXdIZWlnaHQoKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVModGhpcy5fZXhwYW5kZWRDb250YWluZXJWaWV3SGVpZ2h0KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kZWRDb250YWluZXJWaWV3SGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBwYWRkaW5nID0gUm9vdFZpZXdDb250cm9sbGVyLnBhZGRpbmdMZW5ndGhcbiAgICAgICAgY29uc3QgbGFiZWxIZWlnaHQgPSBwYWRkaW5nXG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc3VwZXJ2aWV3LmJvdW5kcy5oZWlnaHQgLSB0aGlzLmZyYW1lLm1heC55IC0gcGFkZGluZ1xuICAgIFxuICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzZWxlY3RlZERhdGFDb250YWlucyhkYXRhcG9pbnQ6IENCRHJvcGRvd25EYXRhSXRlbTxUPikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsZWN0ZWREYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc2VsZWN0ZWREYXRhW2ldXG4gICAgICAgICAgICBpZiAodmFsdWUuX2lkID09IGRhdGFwb2ludC5faWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWUVTXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE5PXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JOb3JtYWxTdGF0ZSgpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLmJvcmRlckJvdHRvbSA9IFwiMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4xMilcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHRDb2xvciA9IENCQ29sb3IucHJpbWFyeUNvbnRlbnRDb2xvclxuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IFVJQ29sb3IudHJhbnNwYXJlbnRDb2xvclxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5ib3JkZXJCb3R0b21Db2xvciA9IENCQ29sb3IucHJpbWFyeUNvbnRlbnRDb2xvci5jb2xvcldpdGhBbHBoYSgwLjEyKS5zdHJpbmdWYWx1ZVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZUNvbnRlbnRGb3JIaWdobGlnaHRlZFN0YXRlKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5ib3JkZXJCb3R0b21XaWR0aCA9IFwiMnB4XCJcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3R5bGUuYm9yZGVyQm90dG9tQ29sb3IgPSB0aGlzLnRpbnRDb2xvci5zdHJpbmdWYWx1ZVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGNvbnRyb2xFdmVudCA9IE9iamVjdC5hc3NpZ24oe30sIFVJVmlldy5jb250cm9sRXZlbnQsIHtcbiAgICAgICAgXG4gICAgICAgIFwiU2VsZWN0aW9uRGlkQ2hhbmdlXCI6IFwiU2VsZWN0aW9uRGlkQ2hhbmdlXCJcbiAgICAgICAgXG4gICAgfSlcbiAgICBcbiAgICBcbiAgICBcbiAgICBzZWxlY3Rpb25EaWRDaGFuZ2Uoc2VsZWN0ZWRSb3dzOiBDQkRyb3Bkb3duRGF0YUl0ZW08VD5bXSkge1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRpdGxlIHRvIGluZGljYXRlIHRoZSBzZWxlY3Rpb25cbiAgICAgICAgdGhpcy51cGRhdGVUaXRsZVdpdGhTZWxlY3Rpb24oc2VsZWN0ZWRSb3dzKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZW5kQ29udHJvbEV2ZW50Rm9yS2V5KFNlYXJjaGFibGVEcm9wZG93bi5jb250cm9sRXZlbnQuU2VsZWN0aW9uRGlkQ2hhbmdlLCBuaWwpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICB1cGRhdGVDb250ZW50Rm9yQ3VycmVudFNlbGVjdGlvbigpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBzZWxlY3RlZCByb3dzIGluIHRoZSB0b3Agb2YgdGhlIHRhYmxlIHZpZXdcbiAgICAgICAgdGhpcy5fdGFibGVWaWV3LnJlbG9hZERhdGEoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBnZXQgcGxhY2Vob2xkZXJUZXh0KCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKElTX1VOREVGSU5FRCh0aGlzLl9wbGFjZWhvbGRlclRleHQpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXJUZXh0ID0gXCJOb3Qgc2VsZWN0ZWRcIlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYWNlaG9sZGVyVGV4dFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2V0IHBsYWNlaG9sZGVyVGV4dChwbGFjZWhvbGRlclRleHQ6IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXJUZXh0ID0gcGxhY2Vob2xkZXJUZXh0XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVRpdGxlV2l0aFNlbGVjdGlvbih0aGlzLnNlbGVjdGVkRGF0YSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHNldFBsYWNlaG9sZGVyVGV4dChrZXk6IHN0cmluZywgZGVmYXVsdFN0cmluZzogc3RyaW5nLCBwYXJhbWV0ZXJzPzogeyBbeDogc3RyaW5nXTogc3RyaW5nIH0pIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXJMb2NhbGl6ZWRUZXh0T2JqZWN0ID0gTGFuZ3VhZ2VTZXJ2aWNlLmxvY2FsaXplZFRleHRPYmplY3RGb3JLZXkoa2V5LCBkZWZhdWx0U3RyaW5nLCBwYXJhbWV0ZXJzKVxuICAgICAgICBcbiAgICAgICAgLy90aGlzLnRpdGxlTGFiZWwuc2V0VGV4dChrZXksIGRlZmF1bHRTdHJpbmcsIHBhcmFtZXRlcnMpO1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IHBsYWNlaG9sZGVyTG9jYWxpemVkVGV4dE9iamVjdCgpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19VTkRFRklORUQodGhpcy5fcGxhY2Vob2xkZXJMb2NhbGl6ZWRUZXh0T2JqZWN0KSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyTG9jYWxpemVkVGV4dE9iamVjdCA9IExhbmd1YWdlU2VydmljZS5sb2NhbGl6ZWRUZXh0T2JqZWN0Rm9yVGV4dChcIk5vdCBzZWxlY3RlZFwiKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYWNlaG9sZGVyTG9jYWxpemVkVGV4dE9iamVjdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2V0IHBsYWNlaG9sZGVyTG9jYWxpemVkVGV4dE9iamVjdChwbGFjZWhvbGRlclRleHQ6IFVJTG9jYWxpemVkVGV4dE9iamVjdCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXJMb2NhbGl6ZWRUZXh0T2JqZWN0ID0gcGxhY2Vob2xkZXJUZXh0XG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVRpdGxlV2l0aFNlbGVjdGlvbih0aGlzLnNlbGVjdGVkRGF0YSlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHVwZGF0ZVRpdGxlV2l0aFNlbGVjdGlvbihzZWxlY3RlZFJvd3M6IENCRHJvcGRvd25EYXRhSXRlbTxUPltdKSB7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZUxhYmVsLmxvY2FsaXplZFRleHRPYmplY3QgPSB0aGlzLnBsYWNlaG9sZGVyTG9jYWxpemVkVGV4dE9iamVjdFxuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjdGVkUm93cyAmJiBzZWxlY3RlZFJvd3MubGVuZ3RoKSB7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMudGl0bGVMYWJlbC5ib3VuZHMud2lkdGhcbiAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC5sb2NhbGl6ZWRUZXh0T2JqZWN0ID0gbmlsXG4gICAgICAgICAgICB0aGlzLnRpdGxlTGFiZWwudGV4dCA9IFwiXCJcbiAgICAgICAgICAgIHZhciBzdG9wTG9vcGluZyA9IE5PXG4gICAgXG4gICAgICAgICAgICBzZWxlY3RlZFJvd3MuZm9yRWFjaChmdW5jdGlvbiAodGhpczogU2VhcmNoYWJsZURyb3Bkb3duPFQ+LCBzZWxlY3RlZERhdGFwb2ludCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHN0b3BMb29waW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRTdHJpbmcgPSBMYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yQ3VycmVudExhbmd1YWdlKHNlbGVjdGVkRGF0YXBvaW50LnRpdGxlKVxuICAgICAgICAgICAgICAgIGlmIChpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFN0cmluZyA9IFwiLCBcIiArIHNlbGVjdGVkU3RyaW5nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVGV4dCA9IHRoaXMudGl0bGVMYWJlbC50ZXh0XG4gICAgICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnRleHQgPSB0aGlzLnRpdGxlTGFiZWwudGV4dCArIHNlbGVjdGVkU3RyaW5nXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5vdmVyZmxvd0xhYmVsLnRleHQgPSBcIitcIiArIChhcnJheS5sZW5ndGggLSBpbmRleCAtIDEpXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IGFycmF5Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVyZmxvd0xhYmVsLnRleHQgPSBcIlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChpbmRleCAmJiAodGhpcy5ib3VuZHMud2lkdGggLVxuICAgICAgICAgICAgICAgICAgICAodGhpcy5vdmVyZmxvd0xhYmVsLmludHJpbnNpY0NvbnRlbnRXaWR0aCgpICsgdGhpcy50aXRsZUxhYmVsLmludHJpbnNpY0NvbnRlbnRXaWR0aCgpKSAtIDIwKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGVMYWJlbC50ZXh0ID0gcHJldmlvdXNUZXh0XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3ZlcmZsb3dMYWJlbC50ZXh0ID0gXCIrXCIgKyAoYXJyYXkubGVuZ3RoIC0gaW5kZXggLSAyICogMClcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHN0b3BMb29waW5nID0gWUVTXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSwgdGhpcylcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICB1cGRhdGVGaWx0ZXJlZERhdGEoZmlsdGVyaW5nU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2ZpbHRlcmVkRGF0YSA9IFtdXG4gICAgICAgIFxuICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoXG4gICAgICAgICAgICB0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4sXG4gICAgICAgICAgICBzZWN0aW9uT3JSb3c6IENCRHJvcGRvd25EYXRhSXRlbTxUPixcbiAgICAgICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgICAgICBhcnJheTogQ0JEcm9wZG93bkRhdGFJdGVtPFQ+W11cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChMYW5ndWFnZVNlcnZpY2Uuc3RyaW5nRm9yQ3VycmVudExhbmd1YWdlKHNlY3Rpb25PclJvdy50aXRsZSkudG9Mb3dlckNhc2UoKS5jb250YWlucyhmaWx0ZXJpbmdTdHJpbmcudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkRGF0YS5wdXNoKHNlY3Rpb25PclJvdylcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlY3Rpb25PclJvdy5pc0FEcm9wZG93bkRhdGFTZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5VmFsdWVTdHJpbmdGaWx0ZXIuZmlsdGVyRGF0YShcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyaW5nU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uT3JSb3cucm93c0RhdGEsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V4Y2x1ZGVkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgXCJ0aXRsZS5cIiArIExhbmd1YWdlU2VydmljZS5jdXJyZW50TGFuZ3VhZ2VLZXksXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25PclJvdyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpczogU2VhcmNoYWJsZURyb3Bkb3duPFQ+LFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyZWRJbmRleGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkZyb21UaHJlYWQ6IENCRHJvcGRvd25EYXRhSXRlbTxUPlxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcmVkRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkRGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pZDogc2VjdGlvbkZyb21UaHJlYWQuX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogc2VjdGlvbkZyb21UaHJlYWQudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3NEYXRhOiBmaWx0ZXJlZERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQURyb3Bkb3duRGF0YVNlY3Rpb246IHNlY3Rpb25Gcm9tVGhyZWFkLmlzQURyb3Bkb3duRGF0YVNlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQURyb3Bkb3duRGF0YVJvdzogc2VjdGlvbkZyb21UaHJlYWQuaXNBRHJvcGRvd25EYXRhUm93LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWRPYmplY3Q6IHNlY3Rpb25Gcm9tVGhyZWFkLmF0dGFjaGVkT2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUNvZGU6IHNlY3Rpb25Gcm9tVGhyZWFkLml0ZW1Db2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bkNvZGU6IHNlY3Rpb25Gcm9tVGhyZWFkLmRyb3Bkb3duQ29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFsbG93c0N1c3RvbUl0ZW0gJiYgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLnRleHQgJiYgdGhpcy5fY3VzdG9tSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJlZERhdGEucmVtb3ZlRWxlbWVudCh0aGlzLl9jdXN0b21JdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJlZERhdGEucHVzaCh0aGlzLl9jdXN0b21JdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNEcmF3aW5nRGF0YVZhbGlkID0gTk9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJsZVZpZXcucmVsb2FkRGF0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5hbGxvd3NDdXN0b21JdGVtICYmIHRoaXMuX3NlYXJjaFRleHRGaWVsZC50ZXh0KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyZWREYXRhLnJlbW92ZUVsZW1lbnQodGhpcy5fY3VzdG9tSXRlbSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbml0Q3VzdG9tSXRlbVdpdGhUaXRsZSh0aGlzLl9zZWFyY2hUZXh0RmllbGQudGV4dClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5maWx0ZXJlZERhdGEucHVzaCh0aGlzLl9jdXN0b21JdGVtKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5maWx0ZXJlZERhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJvd0luZGV4ID0gMFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZFJvd0luZGV4ID0gbnVsbFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2lzRHJhd2luZ0RhdGFWYWxpZCA9IE5PXG4gICAgICAgIFxuICAgICAgICB0aGlzLl90YWJsZVZpZXcucmVsb2FkRGF0YSgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbml0Q3VzdG9tSXRlbVdpdGhUaXRsZSh0aXRsZTogc3RyaW5nKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoSVNfTk9UKHRpdGxlKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9jdXN0b21JdGVtID0gdW5kZWZpbmVkXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fY3VzdG9tSXRlbSA9IHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBfaWQ6IFwiXCIgKyBNQUtFX0lEKCksXG4gICAgICAgICAgICAgICAgdGl0bGU6IExhbmd1YWdlU2VydmljZS5sb2NhbGl6ZWRUZXh0T2JqZWN0Rm9yVGV4dCh0aXRsZSksXG4gICAgICAgICAgICAgICAgcm93c0RhdGE6IFtdLFxuICAgICAgICAgICAgICAgIGlzQURyb3Bkb3duRGF0YVNlY3Rpb246IE5PLFxuICAgICAgICAgICAgICAgIGlzQURyb3Bkb3duRGF0YVJvdzogWUVTLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF0dGFjaGVkT2JqZWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaXRlbUNvZGU6IFwiY3VzdG9tX2l0ZW1cIixcbiAgICAgICAgICAgICAgICBkcm9wZG93bkNvZGU6IG51bGxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZWxlY3RJdGVtT3JDdXN0b21JdGVtV2l0aFRpdGxlKHRpdGxlOiBzdHJpbmcpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChJU19OT1QodGl0bGUpKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2N1c3RvbUl0ZW0gPSB1bmRlZmluZWRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5kcmF3aW5nRGF0YS5maW5kKGZ1bmN0aW9uIChkYXRhSXRlbSwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiAoTGFuZ3VhZ2VTZXJ2aWNlLnN0cmluZ0ZvckN1cnJlbnRMYW5ndWFnZShkYXRhSXRlbS50aXRsZSkgPT0gdGl0bGUpXG4gICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICBcbiAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbG93c0N1c3RvbUl0ZW0gJiYgSVNfTk9UKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoVGV4dEZpZWxkLnRleHQgPSB0aXRsZVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyZWREYXRhKHRpdGxlKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGl0ZW0gPSB0aGlzLl9jdXN0b21JdGVtXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKElTX05PVCh0aGlzLmlzU2luZ2xlU2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChJU19OT1QodGhpcy5zZWxlY3RlZERhdGFDb250YWlucyhpdGVtKSkpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJdGVtQ29kZXMgPSB0aGlzLnNlbGVjdGVkSXRlbUNvZGVzLmNvcHkoKVxuICAgIFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW1Db2Rlcy5wdXNoKGl0ZW0uaXRlbUNvZGUpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbUNvZGVzID0gc2VsZWN0ZWRJdGVtQ29kZXNcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1Db2RlcyA9IFtpdGVtLml0ZW1Db2RlXVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc2V0IGRhdGEoZGF0YTogQ0JEcm9wZG93bkRhdGFJdGVtPFQ+W10pIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhXG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcmVkRGF0YSh0aGlzLl9zZWFyY2hUZXh0RmllbGQudGV4dClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBkYXRhKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBmaWx0ZXJlZERhdGEoZGF0YTogQ0JEcm9wZG93bkRhdGFJdGVtPFQ+W10pIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2ZpbHRlcmVkRGF0YSA9IGRhdGFcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2lzRHJhd2luZ0RhdGFWYWxpZCA9IE5PXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgZmlsdGVyZWREYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsdGVyZWREYXRhXG4gICAgfVxuICAgIFxuICAgIGdldCBkcmF3aW5nRGF0YSgpOiBDQkRyb3Bkb3duRGF0YUl0ZW08VD5bXSB7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5faXNEcmF3aW5nRGF0YVZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZHJhd2luZ0RhdGFcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQ6IENCRHJvcGRvd25EYXRhSXRlbTxUPltdID0gW11cbiAgICBcbiAgICAgICAgdGhpcy5fZmlsdGVyZWREYXRhLmZvckVhY2goZnVuY3Rpb24gKHRoaXM6IFNlYXJjaGFibGVEcm9wZG93bjxUPiwgc2VjdGlvbjogQ0JEcm9wZG93bkRhdGFJdGVtPFQ+KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBfaWQ6IHNlY3Rpb24uX2lkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBzZWN0aW9uLnRpdGxlLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICByb3dzRGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgICBpc0FEcm9wZG93bkRhdGFTZWN0aW9uOiBzZWN0aW9uLmlzQURyb3Bkb3duRGF0YVNlY3Rpb24sXG4gICAgICAgICAgICAgICAgaXNBRHJvcGRvd25EYXRhUm93OiBOTyxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdHRhY2hlZE9iamVjdDogc2VjdGlvbi5hdHRhY2hlZE9iamVjdCxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpdGVtQ29kZTogc2VjdGlvbi5pdGVtQ29kZSxcbiAgICAgICAgICAgICAgICBkcm9wZG93bkNvZGU6IHNlY3Rpb24uZHJvcGRvd25Db2RlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2VjdGlvbi5yb3dzRGF0YSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHNlY3Rpb24ucm93c0RhdGEuZm9yRWFjaChmdW5jdGlvbiAodGhpczogU2VhcmNoYWJsZURyb3Bkb3duPFQ+LCByb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocm93KVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fZHJhd2luZ0RhdGEgPSByZXN1bHRcbiAgICAgICAgdGhpcy5faXNEcmF3aW5nRGF0YVZhbGlkID0gWUVTXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBnZXQgc2VsZWN0ZWREYXRhKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkRGF0YVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2V0IHNlbGVjdGVkRGF0YShzZWxlY3RlZERhdGE6IENCRHJvcGRvd25EYXRhSXRlbTxUPltdKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zZWxlY3RlZERhdGEgPSBzZWxlY3RlZERhdGFcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNsZWFyU2VsZWN0aW9uKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEgPSBbXVxuICAgICAgICB0aGlzLnNlbGVjdGVkSW5kaWNlcyA9IFtdXG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVRpdGxlV2l0aFNlbGVjdGlvbih0aGlzLnNlbGVjdGVkRGF0YSlcbiAgICAgICAgdGhpcy51cGRhdGVDb250ZW50Rm9yQ3VycmVudFNlbGVjdGlvbigpXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uRGlkQ2hhbmdlKHRoaXMuc2VsZWN0ZWREYXRhKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHNlbGVjdGVkSXRlbUNvZGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZERhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5pdGVtQ29kZVxuICAgICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBzZXQgc2VsZWN0ZWRJdGVtQ29kZXMoc2VsZWN0ZWRJdGVtQ29kZXM6IHN0cmluZ1tdKSB7XG4gICAgXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkRGF0YSA9IFtdXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kaWNlcyA9IFtdXG4gICAgXG4gICAgICAgIHRoaXMuX2RyYXdpbmdEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtQ29kZXMuY29udGFpbnMoaXRlbS5pdGVtQ29kZSkpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZWxlY3RlZERhdGEucHVzaChpdGVtKVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5kaWNlcy5wdXNoKGluZGV4KVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEgPSBzZWxlY3RlZERhdGFcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGljZXMgPSBzZWxlY3RlZEluZGljZXNcbiAgICAgICAgXG4gICAgICAgIHRoaXMudXBkYXRlVGl0bGVXaXRoU2VsZWN0aW9uKHRoaXMuc2VsZWN0ZWREYXRhKVxuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRlbnRGb3JDdXJyZW50U2VsZWN0aW9uKClcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25EaWRDaGFuZ2UodGhpcy5zZWxlY3RlZERhdGEpXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IHNlbGVjdGVkUm93SWRlbnRpZmllcnMoKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXVxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh0aGlzOiBTZWFyY2hhYmxlRHJvcGRvd248VD4sIHNlbGVjdGVkRGF0YXBvaW50OiBDQkRyb3Bkb3duRGF0YUl0ZW08VD4pIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHNlbGVjdGVkRGF0YXBvaW50Ll9pZClcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHdhc0FkZGVkVG9WaWV3VHJlZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLndhc0FkZGVkVG9WaWV3VHJlZSgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0KClcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgXG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuYm91bmRzXG4gICAgXG4gICAgICAgIGNvbnN0IHBhZGRpbmcgPSBSb290Vmlld0NvbnRyb2xsZXIucGFkZGluZ0xlbmd0aFxuICAgICAgICBjb25zdCBsYWJlbEhlaWdodCA9IHBhZGRpbmdcbiAgICBcbiAgICAgICAgdGhpcy51cGRhdGVUaXRsZVdpdGhTZWxlY3Rpb24odGhpcy5zZWxlY3RlZERhdGEpXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fcmlnaHRJbWFnZVZpZXcpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gdmFyIGltYWdlSGVpZ2h0ID0gYm91bmRzLmhlaWdodCAtIHBhZGRpbmc7XG4gICAgICAgICAgICAvLyB0aGlzLl9yaWdodEltYWdlVmlldy5mcmFtZSA9IG5ldyBVSVJlY3RhbmdsZShib3VuZHMud2lkdGggLSBpbWFnZUhlaWdodCAtIHBhZGRpbmcgKiAwLjUsIHBhZGRpbmcgKiAwLjUsIGltYWdlSGVpZ2h0LCBpbWFnZUhlaWdodCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0SW1hZ2VWaWV3LmZyYW1lID0gYm91bmRzLnJlY3RhbmdsZVdpdGhJbnNldHMoMCwgcGFkZGluZyAqXG4gICAgICAgICAgICAgICAgMC41LCAwLCAwKS5yZWN0YW5nbGVXaXRoV2lkdGgoMjQsIDEpLnJlY3RhbmdsZVdpdGhIZWlnaHQoMjQsIDAuNSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5vdmVyZmxvd0xhYmVsKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vdGhpcy5vdmVyZmxvd0xhYmVsLmZyYW1lID0gYm91bmRzLnJlY3RhbmdsZVdpdGhJbnNldHMocGFkZGluZywgcGFkZGluZywgMCwgMCkucmVjdGFuZ2xlV2l0aEluc2V0cygwLCB0aGlzLl9yaWdodEltYWdlVmlldy5ib3VuZHMud2lkdGggfHwgMCwgMCwgMCkucmVjdGFuZ2xlV2l0aFdpZHRoKDM2LCAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy90aGlzLnRpdGxlTGFiZWwuc3R5bGUubWF4V2lkdGggPSBcIlwiICsgKGJvdW5kcy53aWR0aCAtIChib3VuZHMud2lkdGggLSB0aGlzLnRpdGxlTGFiZWwudmlld0hUTUxFbGVtZW50Lm9mZnNldExlZnQgLSAodGhpcy5vdmVyZmxvd0xhYmVsLmZyYW1lLnggfHwgMCkpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm92ZXJmbG93TGFiZWwuc3R5bGUud2lkdGggPSBcIjM2cHhcIlxuICAgICAgICAgICAgdGhpcy5vdmVyZmxvd0xhYmVsLnN0eWxlLnJpZ2h0ID0gXCIzMnB4XCJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5vdmVyZmxvd0xhYmVsLmNlbnRlcllJbkNvbnRhaW5lcigpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50aXRsZUxhYmVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCI2MHB4XCJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy90aGlzLm92ZXJmbG93TGFiZWwuY2VudGVyWUluQ29udGFpbmVyKCk7XG4gICAgICAgICAgICAvL3RoaXMudGl0bGVMYWJlbC5mcmFtZSA9IHRoaXMudGl0bGVMYWJlbC5mcmFtZS5yZWN0YW5nbGVXaXRoV2lkdGgoYm91bmRzLndpZHRoIC0gKGJvdW5kcy53aWR0aCAtIHRoaXMudGl0bGVMYWJlbC5mcmFtZS54IC0gKHRoaXMub3ZlcmZsb3dMYWJlbC5mcmFtZS54IHx8IDApKSlcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJVSVZpZXcudHNcIi8+XG5cblxuXG5cblxuY2xhc3MgVUlBY3Rpb25JbmRpY2F0b3IgZXh0ZW5kcyBVSVZpZXcge1xuICAgIFxuICAgIFxuICAgIGluZGljYXRvclZpZXc6IFVJVmlld1xuICAgIFxuICAgIF9zaXplOiBudW1iZXIgPSA1MFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRD86IHN0cmluZykge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElEKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBVSUFjdGlvbkluZGljYXRvclxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSVZpZXdcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yVmlldyA9IG5ldyBVSVZpZXcodGhpcy5lbGVtZW50SUQgKyBcIkluZGljYXRvclZpZXdcIilcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLmluZGljYXRvclZpZXcpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmluZGljYXRvclZpZXcudmlld0hUTUxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJMdWtlSGFhc0xvYWRlclwiKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5oaWRkZW4gPSBZRVNcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzZXQgc2l6ZShzaXplOiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3NpemUgPSBzaXplXG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldE5lZWRzTGF5b3V0VXBUb1Jvb3RWaWV3KClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBzaXplKCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NpemVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHNldCBoaWRkZW4oaGlkZGVuOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5oaWRkZW4gPSBoaWRkZW5cbiAgICAgICAgXG4gICAgICAgIGlmIChoaWRkZW4pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5pbmRpY2F0b3JWaWV3LnJlbW92ZUZyb21TdXBlcnZpZXcoKVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLmluZGljYXRvclZpZXcpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc3RhcnQoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmhpZGRlbiA9IE5PXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdG9wKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5oaWRkZW4gPSBZRVNcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGxheW91dFN1YnZpZXdzKCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIubGF5b3V0U3Vidmlld3MoKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5pbmRpY2F0b3JWaWV3LmNlbnRlckluQ29udGFpbmVyKCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmluZGljYXRvclZpZXcuc3R5bGUuaGVpZ2h0ID0gXCJcIiArIHRoaXMuX3NpemUuaW50ZWdlclZhbHVlICsgXCJweFwiXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yVmlldy5zdHlsZS53aWR0aCA9IFwiXCIgKyB0aGlzLl9zaXplLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICBcbiAgICAgICAgY29uc3QgbWluU2l6ZSA9IE1hdGgubWluKHRoaXMuYm91bmRzLmhlaWdodCwgdGhpcy5ib3VuZHMud2lkdGgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmluZGljYXRvclZpZXcuc3R5bGUubWF4SGVpZ2h0ID0gXCJcIiArIG1pblNpemUuaW50ZWdlclZhbHVlICsgXCJweFwiXG4gICAgICAgIHRoaXMuaW5kaWNhdG9yVmlldy5zdHlsZS5tYXhXaWR0aCA9IFwiXCIgKyBtaW5TaXplLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2l6ZSA9IE1hdGgubWluKHRoaXMuX3NpemUsIG1pblNpemUpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmluZGljYXRvclZpZXcuc3R5bGUubGVmdCA9IFwiXCIgKyAoKGJvdW5kcy53aWR0aCAtIHNpemUpICogMC41IC0gMTEpLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICB0aGlzLmluZGljYXRvclZpZXcuc3R5bGUudG9wID0gXCJcIiArICgoYm91bmRzLmhlaWdodCAtIHNpemUpICogMC41IC0gMTEpLmludGVnZXJWYWx1ZSArIFwicHhcIlxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIlVJVmlldy50c1wiLz5cblxuXG5cblxuXG5jbGFzcyBVSURhdGVUaW1lSW5wdXQgZXh0ZW5kcyBVSVZpZXcge1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRDogc3RyaW5nLCB0eXBlOiBzdHJpbmcgPSBVSURhdGVUaW1lSW5wdXQudHlwZS5EYXRlVGltZSkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCBuaWwsIFwiaW5wdXRcIilcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlEYXRlVGltZUlucHV0XG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJVmlld1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlld0hUTUxFbGVtZW50LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgdHlwZSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMudmlld0hUTUxFbGVtZW50Lm9uY2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNlbmRDb250cm9sRXZlbnRGb3JLZXkoVUlEYXRlVGltZUlucHV0LmNvbnRyb2xFdmVudC5WYWx1ZUNoYW5nZSwgZXZlbnQpXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgY29udHJvbEV2ZW50ID0gT2JqZWN0LmFzc2lnbih7fSwgVUlWaWV3LmNvbnRyb2xFdmVudCwge1xuICAgICAgICBcbiAgICAgICAgXCJWYWx1ZUNoYW5nZVwiOiBcIlZhbHVlQ2hhbmdlXCJcbiAgICAgICAgXG4gICAgfSlcbiAgICBcbiAgICBnZXQgYWRkQ29udHJvbEV2ZW50VGFyZ2V0KCk6IFVJVmlld0FkZENvbnRyb2xFdmVudFRhcmdldE9iamVjdDx0eXBlb2YgVUlEYXRlVGltZUlucHV0LmNvbnRyb2xFdmVudD4ge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHN1cGVyLmFkZENvbnRyb2xFdmVudFRhcmdldCBhcyBhbnlcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHN0YXRpYyB0eXBlID0ge1xuICAgICAgICBcbiAgICAgICAgXCJEYXRlXCI6IFwiZGF0ZVwiLFxuICAgICAgICBcIlRpbWVcIjogXCJ0aW1lXCIsXG4gICAgICAgIFwiRGF0ZVRpbWVcIjogXCJkYXRldGltZVwiXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGZvcm1hdCA9IHtcbiAgICAgICAgXG4gICAgICAgIFwiRXVyb3BlYW5cIjogXCJERC1NTS1ZWVlZXCIsXG4gICAgICAgIFwiSVNPQ29tcHV0ZXJcIjogXCJZWVlZLU1NLUREXCIsXG4gICAgICAgIFwiQW1lcmljYW5cIjogXCJNTS9ERC9ZWVlZXCJcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBkYXRlKCkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IERhdGUoKHRoaXMudmlld0hUTUxFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJVSU9iamVjdC50c1wiLz5cblxuXG5cblxuXG5cblxuXG5cblxuXG5pbnRlcmZhY2UgVUlLZXlWYWx1ZVN0cmluZ1NvcnRlclNvcnRpbmdJbnN0cnVjdGlvbiB7XG4gICAgXG4gICAga2V5UGF0aDogc3RyaW5nO1xuICAgIFxuICAgIGRhdGFUeXBlOiBzdHJpbmc7XG4gICAgXG4gICAgZGlyZWN0aW9uOiBzdHJpbmc7XG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuY2xhc3MgVUlLZXlWYWx1ZVN0cmluZ1NvcnRlciBleHRlbmRzIFVJT2JqZWN0IHtcbiAgICBcbiAgICBcbiAgICBzdGF0aWMgX3NoYXJlZFdlYldvcmtlciA9IG5ldyBXb3JrZXIoXCJjb21waWxlZFNjcmlwdHMvVUlLZXlWYWx1ZVN0cmluZ1NvcnRlcldlYldvcmtlci5qc1wiKVxuICAgIFxuICAgIHN0YXRpYyBfaW5zdGFuY2VOdW1iZXIgPSAtMVxuICAgIFxuICAgIFxuICAgIF9pbnN0YW5jZU51bWJlcjogbnVtYmVyXG4gICAgXG4gICAgX2lzVGhyZWFkQ2xvc2VkID0gTk9cbiAgICBcbiAgICBfd2ViV29ya2VyID0gVUlLZXlWYWx1ZVN0cmluZ1NvcnRlci5fc2hhcmVkV2ViV29ya2VyXG4gICAgXG4gICAgY29uc3RydWN0b3IodXNlU2VwYXJhdGVXZWJXb3JrZXIgPSBOTykge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKClcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlLZXlWYWx1ZVN0cmluZ1NvcnRlclxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSU9iamVjdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmICh1c2VTZXBhcmF0ZVdlYldvcmtlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl93ZWJXb3JrZXIgPSBuZXcgV29ya2VyKFwiY29tcGlsZWRTY3JpcHRzL1VJS2V5VmFsdWVTdHJpbmdTb3J0ZXJXZWJXb3JrZXIuanNcIilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBVSUtleVZhbHVlU3RyaW5nU29ydGVyLl9pbnN0YW5jZU51bWJlciA9IFVJS2V5VmFsdWVTdHJpbmdTb3J0ZXIuX2luc3RhbmNlTnVtYmVyICsgMVxuICAgICAgICB0aGlzLl9pbnN0YW5jZU51bWJlciA9IFVJS2V5VmFsdWVTdHJpbmdTb3J0ZXIuX2luc3RhbmNlTnVtYmVyXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IGluc3RhbmNlSWRlbnRpZmllcigpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZU51bWJlclxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhdGljIGRhdGFUeXBlID0ge1xuICAgICAgICBcbiAgICAgICAgXCJzdHJpbmdcIjogXCJzdHJpbmdcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgc3RhdGljIGRpcmVjdGlvbiA9IHtcbiAgICAgICAgXG4gICAgICAgIFwiZGVzY2VuZGluZ1wiOiBcImRlc2NlbmRpbmdcIixcbiAgICAgICAgXCJhc2NlbmRpbmdcIjogXCJhc2NlbmRpbmdcIlxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc29ydERhdGE8VD4oXG4gICAgICAgIGRhdGE6IFRbXSxcbiAgICAgICAgc29ydGluZ0luc3RydWN0aW9uczogVUlLZXlWYWx1ZVN0cmluZ1NvcnRlclNvcnRpbmdJbnN0cnVjdGlvbltdLFxuICAgICAgICBpZGVudGlmaWVyOiBhbnksXG4gICAgICAgIGNvbXBsZXRpb246IChzb3J0ZWREYXRhOiBUW10sIHNvcnRlZEluZGV4ZXM6IG51bWJlcltdLCBpZGVudGlmaWVyOiBhbnkpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5faXNUaHJlYWRDbG9zZWQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgXG4gICAgICAgIGNvbnN0IGluc3RhbmNlSWRlbnRpZmllciA9IHRoaXMuaW5zdGFuY2VJZGVudGlmaWVyXG4gICAgXG4gICAgICAgIHRoaXMuX3dlYldvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5kYXRhLmluc3RhbmNlSWRlbnRpZmllciA9PSBpbnN0YW5jZUlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNvcnRpbmcgXCIgKyBkYXRhLmxlbmd0aCArIFwiIGl0ZW1zIHRvb2sgXCIgKyAoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgKyBcIiBtcy5cIilcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uKG1lc3NhZ2UuZGF0YS5zb3J0ZWREYXRhLCBtZXNzYWdlLmRhdGEuc29ydGVkSW5kZXhlcywgbWVzc2FnZS5kYXRhLmlkZW50aWZpZXIpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3dlYldvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXCJkYXRhXCI6IGRhdGEsXG4gICAgICAgICAgICAgICAgXCJzb3J0aW5nSW5zdHJ1Y3Rpb25zXCI6IHNvcnRpbmdJbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICAgICAgXCJpZGVudGlmaWVyXCI6IGlkZW50aWZpZXIsXG4gICAgICAgICAgICAgICAgXCJpbnN0YW5jZUlkZW50aWZpZXJcIjogaW5zdGFuY2VJZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb21wbGV0aW9uKFtdLCBbXSwgaWRlbnRpZmllcilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgc29ydGVkRGF0YTxUPihcbiAgICAgICAgZGF0YTogVFtdLFxuICAgICAgICBzb3J0aW5nSW5zdHJ1Y3Rpb25zOiBVSUtleVZhbHVlU3RyaW5nU29ydGVyU29ydGluZ0luc3RydWN0aW9uW10sXG4gICAgICAgIGlkZW50aWZpZXI6IGFueSA9IE1BS0VfSUQoKVxuICAgICkge1xuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQ6IFByb21pc2U8e1xuICAgICAgICBcbiAgICAgICAgICAgIHNvcnRlZERhdGE6IFRbXSxcbiAgICAgICAgICAgIHNvcnRlZEluZGV4ZXM6IG51bWJlcltdLFxuICAgICAgICAgICAgaWRlbnRpZmllcjogYW55XG4gICAgICAgIFxuICAgICAgICB9PiA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNvcnREYXRhKGRhdGEsIHNvcnRpbmdJbnN0cnVjdGlvbnMsIGlkZW50aWZpZXIsIChzb3J0ZWREYXRhLCBzb3J0ZWRJbmRleGVzLCBzb3J0ZWRJZGVudGlmaWVyKSA9PiB7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKHNvcnRlZElkZW50aWZpZXIgPT0gaWRlbnRpZmllcikge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWREYXRhOiBzb3J0ZWREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkSW5kZXhlczogc29ydGVkSW5kZXhlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IHNvcnRlZElkZW50aWZpZXJcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgfSlcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgY2xvc2VUaHJlYWQoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc1RocmVhZENsb3NlZCA9IFlFU1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuX3dlYldvcmtlciAhPSBVSUtleVZhbHVlU3RyaW5nU29ydGVyLl9zaGFyZWRXZWJXb3JrZXIpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fd2ViV29ya2VyLnRlcm1pbmF0ZSgpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiVUlPYmplY3QudHNcIi8+XG5cblxuXG5cblxuXG5cblxuXG5cbmNsYXNzIFVJTGF5b3V0R3JpZCBleHRlbmRzIFVJT2JqZWN0IHtcbiAgICBcbiAgICBcbiAgICBcbiAgICBfZnJhbWU6IFVJUmVjdGFuZ2xlXG4gICAgXG4gICAgX3N1YmZyYW1lczogVUlMYXlvdXRHcmlkW10gPSBbXVxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGZyYW1lOiBVSVJlY3RhbmdsZSkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBVSUxheW91dEdyaWRcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlPYmplY3RcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2ZyYW1lID0gZnJhbWVcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHNwbGl0WEludG8obnVtYmVyT2ZGcmFtZXM6IG51bWJlcikge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5fc3ViZnJhbWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mRnJhbWVzOyBpKyspIHtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBhc2QgPSAxXG4gICAgXG4gICAgXG4gICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9VSVZpZXcudHNcIiAvPlxuXG5cblxuXG5cbmNsYXNzIFVJU2Nyb2xsVmlldyBleHRlbmRzIFVJVmlldyB7XG4gICAgXG4gICAgXG4gICAgX2NvbnRlbnRPZmZzZXQ6IFVJUG9pbnQgPSBuZXcgVUlQb2ludCgwLCAwKVxuICAgIF9jb250ZW50U2NhbGU6IG51bWJlciA9IDFcbiAgICBcbiAgICBjb250YWluZXJWaWV3OiBVSVZpZXdcbiAgICBcbiAgICBfcG9pbnRlckRvd246IGJvb2xlYW5cbiAgICBcbiAgICBfc2Nyb2xsRW5hYmxlZDogYm9vbGVhbiA9IFlFU1xuICAgIFxuICAgIF9wcmV2aW91c0NsaWVudFBvaW50OiBVSVBvaW50XG4gICAgXG4gICAgX2ludHJpbnNpY0NvbnRlbnRGcmFtZTogVUlSZWN0YW5nbGVcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SUQ6IHN0cmluZywgdmlld0hUTUxFbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyKGVsZW1lbnRJRCwgdmlld0hUTUxFbGVtZW50KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fY2xhc3MgPSBVSVNjcm9sbFZpZXdcbiAgICAgICAgdGhpcy5zdXBlcmNsYXNzID0gVUlWaWV3XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5jb250YWluZXJWaWV3ID0gbmV3IFVJVmlldyhlbGVtZW50SUQgKyBcIkNvbnRhaW5lclZpZXdcIilcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmFkZFN1YnZpZXcodGhpcy5jb250YWluZXJWaWV3KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiXG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhdXNlc1BvaW50ZXJFdmVudHMgPSBOTyAvL1lFUztcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmFkZFRhcmdldEZvckNvbnRyb2xFdmVudChVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJEb3duLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3BvaW50ZXJEb3duID0gWUVTXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVXAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fcG9pbnRlckRvd24gPSBOT1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c0NsaWVudFBvaW50ID0gbnVsbFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzY3JvbGxTdG9wcGVkKClcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsU3RvcHBlZCgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGFuZGxlIHBhZ2luZyBpZiBuZWVkZWRcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyTW92ZSwgZnVuY3Rpb24gKHNlbmRlcjogVUlTY3JvbGxWaWV3LCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCEodGhpcy5fcG9pbnRlckRvd24gJiYgdGhpcy5fc2Nyb2xsRW5hYmxlZCAmJiB0aGlzLl9lbmFibGVkKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgY3VycmVudENsaWVudFBvaW50ID0gbmV3IFVJUG9pbnQobmlsLCBuaWwpXG4gICAgXG4gICAgICAgICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLk1vdXNlRXZlbnQgJiYgZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY3VycmVudENsaWVudFBvaW50LnggPSAoZXZlbnQgYXMgTW91c2VFdmVudCkuY2xpZW50WFxuICAgICAgICAgICAgICAgIGN1cnJlbnRDbGllbnRQb2ludC55ID0gKGV2ZW50IGFzIE1vdXNlRXZlbnQpLmNsaWVudFlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCh3aW5kb3cgYXMgYW55KS5Ub3VjaEV2ZW50ICYmIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkge1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRvdWNoRXZlbnQ6IFRvdWNoRXZlbnQgPSBldmVudFxuICAgIFxuICAgICAgICAgICAgICAgIGlmICh0b3VjaEV2ZW50LnRvdWNoZXMubGVuZ3RoICE9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BvaW50ZXJEb3duID0gTk9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldmlvdXNDbGllbnRQb2ludCA9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFN0b3BwZWQoKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2xpZW50UG9pbnQueCA9IHRvdWNoRXZlbnQudG91Y2hlc1swXS5jbGllbnRYXG4gICAgICAgICAgICAgICAgY3VycmVudENsaWVudFBvaW50LnkgPSB0b3VjaEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3ByZXZpb3VzQ2xpZW50UG9pbnQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLl9wcmV2aW91c0NsaWVudFBvaW50ID0gY3VycmVudENsaWVudFBvaW50XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBjb25zdCBjaGFuZ2VQb2ludCA9IGN1cnJlbnRDbGllbnRQb2ludC5jb3B5KCkuc3VidHJhY3QodGhpcy5fcHJldmlvdXNDbGllbnRQb2ludClcbiAgICBcbiAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5lclZpZXcuYm91bmRzLndpZHRoIDw9IHRoaXMuYm91bmRzLndpZHRoKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlUG9pbnQueCA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgwIDwgdGhpcy5jb250ZW50T2Zmc2V0LnggKyBjaGFuZ2VQb2ludC54KSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlUG9pbnQueCA9IC10aGlzLmNvbnRlbnRPZmZzZXQueFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudE9mZnNldC54ICsgY2hhbmdlUG9pbnQueCA8IC10aGlzLmJvdW5kcy53aWR0aCkge1xuICAgICAgICAgICAgICAgIGNoYW5nZVBvaW50LnggPSAtdGhpcy5ib3VuZHMud2lkdGggLSB0aGlzLmNvbnRlbnRPZmZzZXQueFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXJWaWV3LmJvdW5kcy5oZWlnaHQgPD0gdGhpcy5ib3VuZHMuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlUG9pbnQueSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgwIDwgdGhpcy5jb250ZW50T2Zmc2V0LnkgKyBjaGFuZ2VQb2ludC55KSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlUG9pbnQueSA9IC10aGlzLmNvbnRlbnRPZmZzZXQueVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudE9mZnNldC55ICsgY2hhbmdlUG9pbnQueSA8IC10aGlzLmJvdW5kcy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VQb2ludC55ID0gLXRoaXMuYm91bmRzLmhlaWdodCAtIHRoaXMuY29udGVudE9mZnNldC55XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY29udGVudE9mZnNldCA9IHRoaXMuY29udGVudE9mZnNldC5hZGQoY2hhbmdlUG9pbnQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzQ2xpZW50UG9pbnQgPSBjdXJyZW50Q2xpZW50UG9pbnRcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBpbnZhbGlkYXRlSW50cmluc2ljQ29udGVudEZyYW1lKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faW50cmluc2ljQ29udGVudEZyYW1lID0gbmlsXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBnZXQgY29udGVudE9mZnNldCgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250ZW50T2Zmc2V0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzZXQgY29udGVudE9mZnNldChvZmZzZXQ6IFVJUG9pbnQpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NvbnRlbnRPZmZzZXQgPSBvZmZzZXRcbiAgICAgICAgdGhpcy5zZXROZWVkc0xheW91dCgpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBsYXlvdXRTdWJ2aWV3cygpIHtcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLmxheW91dFN1YnZpZXdzKClcbiAgICAgICAgXG4gICAgICAgIC8vIHZhciBpbnRyaW5zaWNDb250ZW50RnJhbWUgPSB0aGlzLl9pbnRyaW5zaWNDb250ZW50RnJhbWU7XG4gICAgICAgIC8vIGlmICghSVMoaW50cmluc2ljQ29udGVudEZyYW1lKSkge1xuICAgICAgICAvLyAgICAgaW50cmluc2ljQ29udGVudEZyYW1lID0gdGhpcy5jb250YWluZXJWaWV3LmludHJpbnNpY0NvbnRlbnRTaXplV2l0aENvbnN0cmFpbnRzKCk7ICAgXG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gaW50cmluc2ljQ29udGVudEZyYW1lLm9mZnNldEJ5UG9pbnQodGhpcy5jb250ZW50T2Zmc2V0KTtcbiAgICAgICAgLy8gaW50cmluc2ljQ29udGVudEZyYW1lLmhlaWdodCA9IHRoaXMuY29udGFpbmVyVmlldy52aWV3SFRNTEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAvLyBpbnRyaW5zaWNDb250ZW50RnJhbWUud2lkdGggPSB0aGlzLmNvbnRhaW5lclZpZXcudmlld0hUTUxFbGVtZW50LnNjcm9sbFdpZHRoO1xuICAgICAgICAvLyB0aGlzLmNvbnRhaW5lclZpZXcuZnJhbWUgPSBpbnRyaW5zaWNDb250ZW50RnJhbWU7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNvbnRhaW5lclZpZXcuZnJhbWUgPSB0aGlzLmNvbnRhaW5lclZpZXcuYm91bmRzLm9mZnNldEJ5UG9pbnQodGhpcy5jb250ZW50T2Zmc2V0KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgLy8gZ2V0IF9zdWJ2aWV3cygpIHtcbiAgICAvLyAgICAgcmV0dXJuIHN1cGVyLnN1YnZpZXdzO1xuICAgIC8vIH1cbiAgICBcbiAgICAvLyBzZXQgX3N1YnZpZXdzKHN1YnZpZXdzOiBVSVZpZXdbXSkge1xuICAgIC8vICAgICBzdXBlci5zdWJ2aWV3cyA9IHN1YnZpZXdzO1xuICAgIC8vIH1cbiAgICBcbiAgICAvLyBnZXQgc3Vidmlld3MoKSB7XG4gICAgLy8gICAgIHJldHVybiB0aGlzLmNvbnRhaW5lclZpZXcuc3Vidmlld3M7XG4gICAgLy8gfVxuICAgIFxuICAgIC8vIHNldCBzdWJ2aWV3cyhzdWJ2aWV3czogVUlWaWV3W10pIHtcbiAgICBcbiAgICAvLyAgICAgdGhpcy5jb250YWluZXJWaWV3LnN1YnZpZXdzID0gc3Vidmlld3M7XG4gICAgXG4gICAgLy8gICAgIHRoaXMuaW52YWxpZGF0ZUludHJpbnNpY0NvbnRlbnRGcmFtZSgpO1xuICAgIFxuICAgIFxuICAgIC8vIH1cbiAgICBcbiAgICBcbiAgICBoYXNTdWJ2aWV3KHZpZXc6IFVJVmlldykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJWaWV3Lmhhc1N1YnZpZXcodmlldylcbiAgICB9XG4gICAgXG4gICAgYWRkU3Vidmlldyh2aWV3OiBVSVZpZXcpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY29udGFpbmVyVmlldy5hZGRTdWJ2aWV3KHZpZXcpXG4gICAgICAgIFxuICAgICAgICB0aGlzLmludmFsaWRhdGVJbnRyaW5zaWNDb250ZW50RnJhbWUoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIlVJVmlldy50c1wiLz5cblxuXG5cblxuXG5cblxuXG5cbmNsYXNzIFVJU2xpZGVTY3JvbGxlclZpZXcgZXh0ZW5kcyBVSVZpZXcge1xuICAgIFxuICAgIFxuICAgIFxuICAgIF9wcmV2aW91c0xheW91dEJvdW5kczogVUlSZWN0YW5nbGVcbiAgICBfdGFyZ2V0SW5kZXg6IG51bWJlciA9IDBcbiAgICBwYWdlSW5kaWNhdG9yc1ZpZXc6IFVJVmlld1xuICAgIF9pc0FuaW1hdGluZzogYm9vbGVhbiA9IE5PXG4gICAgX2lzQW5pbWF0aW9uT25nb2luZzogYm9vbGVhbiA9IE5PXG4gICAgX2FuaW1hdGlvblRpbWVyOiBVSVRpbWVyID0gbmlsXG4gICAgX3Njcm9sbFZpZXc6IFVJU2Nyb2xsVmlld1xuICAgIF9zbGlkZVZpZXdzOiBVSVZpZXdbXSA9IFtdXG4gICAgXG4gICAgd3JhcEFyb3VuZDogYm9vbGVhbiA9IFlFU1xuICAgIFxuICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBudW1iZXIgPSAwLjM1XG4gICAgYW5pbWF0aW9uRGVsYXk6IG51bWJlciA9IDJcbiAgICBcbiAgICBfY3VycmVudFBhZ2VJbmRleDogbnVtYmVyID0gMFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRDogc3RyaW5nLCB2aWV3SFRNTEVsZW1lbnQ/OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJU2Nyb2xsVmlld1xuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSVZpZXdcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zY3JvbGxWaWV3ID0gbmV3IFVJU2Nyb2xsVmlldyhlbGVtZW50SUQgKyBcIlNjcm9sbFZpZXdcIilcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWRkU3Vidmlldyh0aGlzLl9zY3JvbGxWaWV3KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3Njcm9sbFZpZXcuX3Njcm9sbEVuYWJsZWQgPSBOT1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2Nyb2xsVmlldy5hZGRUYXJnZXRGb3JDb250cm9sRXZlbnQoXG4gICAgICAgICAgICBVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJNb3ZlLFxuICAgICAgICAgICAgZnVuY3Rpb24gKHNlbmRlcjogVUlWaWV3LCBldmVudDogRXZlbnQpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVyLmludmFsaWRhdGUoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zY3JvbGxWaWV3LmFkZFRhcmdldEZvckNvbnRyb2xFdmVudChVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJMZWF2ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5faXNBbmltYXRpbmcgJiYgZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgLy8gVG91Y2ggZXZlbnRzXG4gICAgICAgIHRoaXMuX3Njcm9sbFZpZXcuYWRkVGFyZ2V0Rm9yQ29udHJvbEV2ZW50KFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlckRvd24sIGZ1bmN0aW9uIChzZW5kZXIsIGV2ZW50KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hbmltYXRpb25UaW1lci5pbnZhbGlkYXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zY3JvbGxWaWV3LmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVXAsIFVJVmlldy5jb250cm9sRXZlbnQuUG9pbnRlckNhbmNlbFxuICAgICAgICBdLCBmdW5jdGlvbiAoc2VuZGVyLCBldmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50ICYmIHRoaXMuX2lzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEFuaW1hdGluZygpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIFBhZ2UgaW5kaWNhdG9yXG4gICAgICAgIFxuICAgICAgICB0aGlzLnBhZ2VJbmRpY2F0b3JzVmlldyA9IG5ldyBVSVZpZXcoZWxlbWVudElEICsgXCJQYWdlSW5kaWNhdG9yc1ZpZXdcIilcbiAgICAgICAgdGhpcy5hZGRTdWJ2aWV3KHRoaXMucGFnZUluZGljYXRvcnNWaWV3KVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGJ1dHRvbkZvclBhZ2VJbmRpY2F0b3JXaXRoSW5kZXgoaW5kZXg6IG51bWJlcik6IFVJQnV0dG9uIHtcbiAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFVJQnV0dG9uKHRoaXMudmlld0hUTUxFbGVtZW50LmlkICsgXCJQYWdlSW5kaWNhdG9yQnV0dG9uXCIgKyBpbmRleClcbiAgICBcbiAgICAgICAgcmVzdWx0LmFkZFRhcmdldEZvckNvbnRyb2xFdmVudHMoW1xuICAgICAgICAgICAgVUlWaWV3LmNvbnRyb2xFdmVudC5Qb2ludGVyVXBJbnNpZGUsIFVJVmlldy5jb250cm9sRXZlbnQuRW50ZXJVcFxuICAgICAgICBdLCBmdW5jdGlvbiAoc2VuZGVyLCBldmVudCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvUGFnZVdpdGhJbmRleChpbmRleCwgWUVTKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5faXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QW5pbWF0aW5nKClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgcmVzdWx0LmFkZFRhcmdldEZvckNvbnRyb2xFdmVudChVSVZpZXcuY29udHJvbEV2ZW50LlBvaW50ZXJNb3ZlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvblRpbWVyLmludmFsaWRhdGUoKVxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXN1bHQudXBkYXRlQ29udGVudEZvck5vcm1hbFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXN1bHQuYmFja2dyb3VuZENvbG9yID0gVUlDb2xvci5ibHVlQ29sb3JcbiAgICAgICAgICAgIHJlc3VsdC50aXRsZUxhYmVsLnRleHRDb2xvciA9IFVJQ29sb3Iud2hpdGVDb2xvclxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXN1bHQuZnJhbWUgPSBuZXcgVUlSZWN0YW5nbGUobmlsLCBuaWwsIDIwLCA1MClcbiAgICAgICAgXG4gICAgICAgIC8vIHJlc3VsdC5zdHlsZS5oZWlnaHQgPSBcIjIwcHhcIjtcbiAgICAgICAgLy8gcmVzdWx0LnN0eWxlLndpZHRoID0gXCI1MHB4XCI7XG4gICAgICAgIHJlc3VsdC5zdHlsZS5kaXNwbGF5ID0gXCJ0YWJsZS1jZWxsXCJcbiAgICAgICAgcmVzdWx0LnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gdmFyIHJlc3VsdENvbnRlbnQgPSBuZXcgVUlWaWV3KHJlc3VsdC52aWV3SFRNTEVsZW1lbnQuaWQgKyBcIkNvbnRlbnRcIik7XG4gICAgICAgIC8vIHJlc3VsdENvbnRlbnQuYmFja2dyb3VuZENvbG9yID0gVUlDb2xvci53aGl0ZUNvbG9yO1xuICAgICAgICAvLyByZXN1bHRDb250ZW50LmNlbnRlcllJbkNvbnRhaW5lcigpO1xuICAgICAgICAvLyByZXN1bHRDb250ZW50LnN0eWxlLmhlaWdodCA9IFwiMTBweFwiO1xuICAgICAgICAvLyByZXN1bHRDb250ZW50LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgICAgICAvLyByZXN1bHRDb250ZW50LnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNXB4XCI7XG4gICAgICAgIFxuICAgICAgICAvLyByZXN1bHQuYWRkU3VidmlldyhyZXN1bHRDb250ZW50KTtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBhZGRTbGlkZVZpZXcodmlldzogVUlWaWV3KSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNsaWRlVmlld3MucHVzaCh2aWV3KVxuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGVTbGlkZVZpZXdzKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBzbGlkZVZpZXdzKHZpZXdzOiBVSVZpZXdbXSkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2xpZGVWaWV3cyA9IHZpZXdzXG4gICAgICAgIFxuICAgICAgICB0aGlzLnVwZGF0ZVNsaWRlVmlld3MoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZ2V0IHNsaWRlVmlld3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbGlkZVZpZXdzXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIGdldCBjdXJyZW50UGFnZUluZGV4KCkge1xuICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9jdXJyZW50UGFnZUluZGV4XG4gICAgXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIHNldCBjdXJyZW50UGFnZUluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2N1cnJlbnRQYWdlSW5kZXggPSBpbmRleFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2xpZGVWaWV3c1tpbmRleF0ud2lsbEFwcGVhcigpXG4gICAgICAgIFxuICAgICAgICAvL3RoaXMuX3Njcm9sbFZpZXcuY29udGVudE9mZnNldC54ID0gLXRoaXMuX3NsaWRlVmlld3NbaW5kZXhdLmZyYW1lLm1pbi54OyAvLy10aGlzLmJvdW5kcy53aWR0aCAqIGluZGV4O1xuICAgICAgICAvL3RoaXMuX3Njcm9sbFZpZXcuY29udGVudE9mZnNldC54ID0gTWF0aC5yb3VuZCh0aGlzLl9zY3JvbGxWaWV3LmNvbnRlbnRPZmZzZXQueCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zY3JvbGxWaWV3LmNvbnRlbnRPZmZzZXQgPSB0aGlzLl9zY3JvbGxWaWV3LmNvbnRlbnRPZmZzZXQucG9pbnRXaXRoWCgtdGhpcy5fc2xpZGVWaWV3c1tpbmRleF0uZnJhbWUubWluLngpXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5wYWdlSW5kaWNhdG9yc1ZpZXcuc3Vidmlld3MuZm9yRWFjaChmdW5jdGlvbiAoYnV0dG9uOiBVSUJ1dHRvbiwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJ1dHRvbi5zZWxlY3RlZCA9IE5PXG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgICh0aGlzLnBhZ2VJbmRpY2F0b3JzVmlldy5zdWJ2aWV3c1tpbmRleF0gYXMgVUlCdXR0b24pLnNlbGVjdGVkID0gWUVTXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHNjcm9sbFRvUHJldmlvdXNQYWdlKGFuaW1hdGVkOiBib29sZWFuKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5zbGlkZVZpZXdzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIFxuICAgICAgICB2YXIgdGFyZ2V0SW5kZXggPSB0aGlzLmN1cnJlbnRQYWdlSW5kZXhcbiAgICBcbiAgICAgICAgaWYgKHRoaXMud3JhcEFyb3VuZCkge1xuICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSAodGhpcy5jdXJyZW50UGFnZUluZGV4IC0gMSkgJSAodGhpcy5zbGlkZVZpZXdzLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmN1cnJlbnRQYWdlSW5kZXggLSAxIDwgdGhpcy5zbGlkZVZpZXdzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSB0aGlzLmN1cnJlbnRQYWdlSW5kZXggLSAxXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zY3JvbGxUb1BhZ2VXaXRoSW5kZXgodGFyZ2V0SW5kZXgsIGFuaW1hdGVkKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgc2Nyb2xsVG9OZXh0UGFnZShhbmltYXRlZDogYm9vbGVhbikge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuc2xpZGVWaWV3cy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdmFyIHRhcmdldEluZGV4ID0gdGhpcy5jdXJyZW50UGFnZUluZGV4XG4gICAgXG4gICAgICAgIGlmICh0aGlzLndyYXBBcm91bmQpIHtcbiAgICAgICAgICAgIHRhcmdldEluZGV4ID0gKHRoaXMuY3VycmVudFBhZ2VJbmRleCArIDEpICUgKHRoaXMuc2xpZGVWaWV3cy5sZW5ndGgpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50UGFnZUluZGV4ICsgMSA8IHRoaXMuc2xpZGVWaWV3cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRhcmdldEluZGV4ID0gdGhpcy5jdXJyZW50UGFnZUluZGV4ICsgMVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9QYWdlV2l0aEluZGV4KHRhcmdldEluZGV4LCBhbmltYXRlZClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHNjcm9sbFRvUGFnZVdpdGhJbmRleCh0YXJnZXRJbmRleDogbnVtYmVyLCBhbmltYXRlZDogYm9vbGVhbiA9IFlFUykge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fdGFyZ2V0SW5kZXggPSB0YXJnZXRJbmRleFxuICAgICAgICBcbiAgICAgICAgLy8gdGhpcy5fc2xpZGVWaWV3c1t0aGlzLmN1cnJlbnRQYWdlSW5kZXhdLl9zaG91bGRMYXlvdXQgPSBOTztcbiAgICAgICAgLy8gdGhpcy5fc2xpZGVWaWV3c1t0aGlzLl90YXJnZXRJbmRleF0uX3Nob3VsZExheW91dCA9IFlFUztcbiAgICAgICAgXG4gICAgICAgIC8vdGhpcy5fc2xpZGVWaWV3c1t0aGlzLl90YXJnZXRJbmRleF0uaGlkZGVuID0gTk87XG4gICAgICAgIFxuICAgICAgICB0aGlzLndpbGxTY3JvbGxUb1BhZ2VXaXRoSW5kZXgodGFyZ2V0SW5kZXgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc0FuaW1hdGlvbk9uZ29pbmcgPSBZRVNcbiAgICAgICAgXG4gICAgICAgIC8vdmFyIHByZXZpb3VzVmlldyA9IHRoaXMuX3NsaWRlVmlld3NbdGhpcy5jdXJyZW50UGFnZUluZGV4XTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhbmltYXRlZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgVUlWaWV3LmFuaW1hdGVWaWV3T3JWaWV3c1dpdGhEdXJhdGlvbkRlbGF5QW5kRnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVmlldy5jb250YWluZXJWaWV3LFxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHRoaXM6IFVJU2xpZGVTY3JvbGxlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlSW5kZXggPSB0YXJnZXRJbmRleFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAodGhpczogVUlTbGlkZVNjcm9sbGVyVmlldykge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWRTY3JvbGxUb1BhZ2VXaXRoSW5kZXgodGFyZ2V0SW5kZXgpXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc0FuaW1hdGlvbk9uZ29pbmcgPSBOT1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy9wcmV2aW91c1ZpZXcuaGlkZGVuID0gWUVTO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2VJbmRleCA9IHRhcmdldEluZGV4XG4gICAgICAgICAgICB0aGlzLmRpZFNjcm9sbFRvUGFnZVdpdGhJbmRleCh0YXJnZXRJbmRleClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9wcmV2aW91c1ZpZXcuaGlkZGVuID0gWUVTO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIHdpbGxTY3JvbGxUb1BhZ2VXaXRoSW5kZXgoaW5kZXg6IG51bWJlcikge1xuICAgIFxuICAgICAgICBjb25zdCB0YXJnZXRWaWV3ID0gdGhpcy5zbGlkZVZpZXdzW2luZGV4XVxuICAgIFxuICAgICAgICBpZiAoSVModGFyZ2V0VmlldykgJiYgKHRhcmdldFZpZXcgYXMgYW55KS53aWxsQXBwZWFyICYmICh0YXJnZXRWaWV3IGFzIGFueSkud2lsbEFwcGVhciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICh0YXJnZXRWaWV3IGFzIGFueSkud2lsbEFwcGVhcigpXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgZGlkU2Nyb2xsVG9QYWdlV2l0aEluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgc3RhcnRBbmltYXRpbmcoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9pc0FuaW1hdGluZyA9IFlFU1xuICAgICAgICBcbiAgICAgICAgdGhpcy5fYW5pbWF0aW9uVGltZXIuaW52YWxpZGF0ZSgpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9hbmltYXRpb25UaW1lciA9IG5ldyBVSVRpbWVyKHRoaXMuYW5pbWF0aW9uRGVsYXkgKyB0aGlzLmFuaW1hdGlvbkR1cmF0aW9uLCBZRVMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb05leHRQYWdlKFlFUylcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBzdG9wQW5pbWF0aW5nKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNBbmltYXRpbmcgPSBOT1xuICAgICAgICB0aGlzLl9hbmltYXRpb25UaW1lci5pbnZhbGlkYXRlKClcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIHVwZGF0ZVNsaWRlVmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9zY3JvbGxWaWV3LmNvbnRhaW5lclZpZXcuc3Vidmlld3Muc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdWJ2aWV3LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3Vidmlldy5yZW1vdmVGcm9tU3VwZXJ2aWV3KClcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5wYWdlSW5kaWNhdG9yc1ZpZXcuc3Vidmlld3Muc2xpY2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdWJ2aWV3LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc3Vidmlldy5yZW1vdmVGcm9tU3VwZXJ2aWV3KClcbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2xpZGVWaWV3cy5mb3JFYWNoKGZ1bmN0aW9uICh2aWV3LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVmlldy5hZGRTdWJ2aWV3KHZpZXcpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMucGFnZUluZGljYXRvcnNWaWV3LmFkZFN1YnZpZXcodGhpcy5idXR0b25Gb3JQYWdlSW5kaWNhdG9yV2l0aEluZGV4KGluZGV4KSlcbiAgICAgICAgICAgIFxuICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBkaWRSZWNlaXZlQnJvYWRjYXN0RXZlbnQoZXZlbnQ6IFVJVmlld0Jyb2FkY2FzdEV2ZW50KSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5kaWRSZWNlaXZlQnJvYWRjYXN0RXZlbnQoZXZlbnQpXG4gICAgICAgIFxuICAgICAgICBpZiAoZXZlbnQubmFtZSA9PSBVSUNvcmUuYnJvYWRjYXN0RXZlbnROYW1lLldpbmRvd0RpZFJlc2l6ZSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlSW5kZXggPSB0aGlzLmN1cnJlbnRQYWdlSW5kZXhcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBzZXQgZnJhbWUoZnJhbWU6IFVJUmVjdGFuZ2xlKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5mcmFtZSA9IGZyYW1lXG4gICAgICAgIFxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlSW5kZXggPSB0aGlzLmN1cnJlbnRQYWdlSW5kZXhcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIGdldCBmcmFtZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzdXBlci5mcmFtZVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgbGF5b3V0U3Vidmlld3MoKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlci5sYXlvdXRTdWJ2aWV3cygpXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5ib3VuZHMuaXNFcXVhbFRvKHRoaXMuX3ByZXZpb3VzTGF5b3V0Qm91bmRzKSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5ib3VuZHNcbiAgICBcbiAgICAgICAgdGhpcy5fcHJldmlvdXNMYXlvdXRCb3VuZHMgPSBib3VuZHNcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX3Njcm9sbFZpZXcuZnJhbWUgPSBib3VuZHNcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2Nyb2xsVmlldy5jb250YWluZXJWaWV3LmZyYW1lID0gYm91bmRzLnJlY3RhbmdsZVdpdGhXaWR0aChib3VuZHMud2lkdGggKlxuICAgICAgICAgICAgdGhpcy5zbGlkZVZpZXdzLmxlbmd0aCkucGVyZm9ybUZ1bmN0aW9uV2l0aFNlbGYoZnVuY3Rpb24gKHRoaXM6IFVJU2xpZGVTY3JvbGxlclZpZXcsIHNlbGY6IFVJUmVjdGFuZ2xlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNlbGYub2Zmc2V0QnlQb2ludCh0aGlzLl9zY3JvbGxWaWV3LmNvbnRlbnRPZmZzZXQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBzZWxmXG4gICAgICAgICAgICBcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fc2xpZGVWaWV3cy5mb3JFYWNoKGZ1bmN0aW9uICh2aWV3LCBpbmRleCwgYXJyYXkpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmlldy5mcmFtZSA9IGJvdW5kcy5yZWN0YW5nbGVXaXRoWCgodGhpcy5ib3VuZHMud2lkdGggKyAxKSAqIGluZGV4KVxuICAgICAgICAgICAgXG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICB0aGlzLmxheW91dFBhZ2VJbmRpY2F0b3JzKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBsYXlvdXRQYWdlSW5kaWNhdG9ycygpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGFnZUluZGljYXRvcnNWaWV3LmNlbnRlclhJbkNvbnRhaW5lcigpXG4gICAgICAgIHRoaXMucGFnZUluZGljYXRvcnNWaWV3LnN0eWxlLmJvdHRvbSA9IFwiMjBweFwiXG4gICAgICAgIHRoaXMucGFnZUluZGljYXRvcnNWaWV3LnN0eWxlLmhlaWdodCA9IFwiMjBweFwiXG4gICAgICAgIHRoaXMucGFnZUluZGljYXRvcnNWaWV3LnN0eWxlLmRpc3BsYXkgPSBcInRhYmxlLXJvd1wiXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICByZW1vdmVGcm9tU3VwZXJ2aWV3KCkge1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHN1cGVyLnJlbW92ZUZyb21TdXBlcnZpZXcoKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdG9wQW5pbWF0aW5nKClcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiVUlPYmplY3QudHNcIi8+XG5cblxuXG5cblxuXG5cblxuXG5cbmNsYXNzIFVJU3RyaW5nRmlsdGVyIGV4dGVuZHMgVUlPYmplY3Qge1xuICAgIFxuICAgIFxuICAgIHN0YXRpYyBfc2hhcmVkV2ViV29ya2VyID0gbmV3IFdvcmtlcihcImNvbXBpbGVkU2NyaXB0cy9VSVN0cmluZ0ZpbHRlcldlYldvcmtlci5qc1wiKVxuICAgIFxuICAgIHN0YXRpYyBfaW5zdGFuY2VOdW1iZXIgPSAtMVxuICAgIFxuICAgIFxuICAgIF9pbnN0YW5jZU51bWJlcjogbnVtYmVyXG4gICAgXG4gICAgX2lzVGhyZWFkQ2xvc2VkID0gTk9cbiAgICBcbiAgICBfd2ViV29ya2VyID0gVUlTdHJpbmdGaWx0ZXIuX3NoYXJlZFdlYldvcmtlclxuICAgIFxuICAgIGNvbnN0cnVjdG9yKHVzZVNlcGFyYXRlV2ViV29ya2VyID0gTk8pIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jbGFzcyA9IFVJU3RyaW5nRmlsdGVyXG4gICAgICAgIHRoaXMuc3VwZXJjbGFzcyA9IFVJT2JqZWN0XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKHVzZVNlcGFyYXRlV2ViV29ya2VyKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX3dlYldvcmtlciA9IG5ldyBXb3JrZXIoXCJjb21waWxlZFNjcmlwdHMvVUlTdHJpbmdGaWx0ZXJXZWJXb3JrZXIuanNcIilcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBVSVN0cmluZ0ZpbHRlci5faW5zdGFuY2VOdW1iZXIgPSBVSVN0cmluZ0ZpbHRlci5faW5zdGFuY2VOdW1iZXIgKyAxXG4gICAgICAgIHRoaXMuX2luc3RhbmNlTnVtYmVyID0gVUlTdHJpbmdGaWx0ZXIuX2luc3RhbmNlTnVtYmVyXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZ2V0IGluc3RhbmNlSWRlbnRpZmllcigpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZU51bWJlclxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgZmlsdGVyRGF0YShcbiAgICAgICAgZmlsdGVyaW5nU3RyaW5nOiBzdHJpbmcsXG4gICAgICAgIGRhdGE6IHN0cmluZ1tdLFxuICAgICAgICBleGNsdWRlZERhdGE6IHN0cmluZ1tdLFxuICAgICAgICBpZGVudGlmaWVyOiBhbnksXG4gICAgICAgIGNvbXBsZXRpb246IChmaWx0ZXJlZERhdGE6IHN0cmluZ1tdLCBmaWx0ZXJlZEluZGV4ZXM6IG51bWJlcltdLCBpZGVudGlmaWVyOiBhbnkpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5faXNUaHJlYWRDbG9zZWQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy92YXIgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICAgICAgY29uc3QgaW5zdGFuY2VJZGVudGlmaWVyID0gdGhpcy5pbnN0YW5jZUlkZW50aWZpZXJcbiAgICBcbiAgICAgICAgdGhpcy5fd2ViV29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmRhdGEuaW5zdGFuY2VJZGVudGlmaWVyID09IGluc3RhbmNlSWRlbnRpZmllcikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJGaWx0ZXJpbmcgdG9vayBcIiArIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lKSArIFwiIG1zXCIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbXBsZXRpb24obWVzc2FnZS5kYXRhLmZpbHRlcmVkRGF0YSwgbWVzc2FnZS5kYXRhLmZpbHRlcmVkSW5kZXhlcywgbWVzc2FnZS5kYXRhLmlkZW50aWZpZXIpXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5fd2ViV29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXCJmaWx0ZXJpbmdTdHJpbmdcIjogZmlsdGVyaW5nU3RyaW5nLFxuICAgICAgICAgICAgXCJkYXRhXCI6IGRhdGEsXG4gICAgICAgICAgICBcImV4Y2x1ZGVkRGF0YVwiOiBleGNsdWRlZERhdGEsXG4gICAgICAgICAgICBcImlkZW50aWZpZXJcIjogaWRlbnRpZmllcixcbiAgICAgICAgICAgIFwiaW5zdGFuY2VJZGVudGlmaWVyXCI6IGluc3RhbmNlSWRlbnRpZmllclxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgZmlsdGVyZWREYXRhKFxuICAgICAgICBmaWx0ZXJpbmdTdHJpbmc6IHN0cmluZyxcbiAgICAgICAgZGF0YTogc3RyaW5nW10sXG4gICAgICAgIGV4Y2x1ZGVkRGF0YTogc3RyaW5nW10gPSBbXSxcbiAgICAgICAgaWRlbnRpZmllcjogYW55ID0gTUFLRV9JRCgpXG4gICAgKSB7XG4gICAgXG4gICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdDogUHJvbWlzZTx7XG4gICAgICAgIFxuICAgICAgICAgICAgZmlsdGVyZWREYXRhOiBzdHJpbmdbXSxcbiAgICAgICAgICAgIGZpbHRlcmVkSW5kZXhlczogbnVtYmVyW10sXG4gICAgICAgICAgICBpZGVudGlmaWVyOiBhbnlcbiAgICAgICAgXG4gICAgICAgIH0+ID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRGF0YShmaWx0ZXJpbmdTdHJpbmcsIGRhdGEsIGV4Y2x1ZGVkRGF0YSwgaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICAoZmlsdGVyZWREYXRhLCBmaWx0ZXJlZEluZGV4ZXMsIGZpbHRlcmVkSWRlbnRpZmllcikgPT4ge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyZWRJZGVudGlmaWVyID09IGlkZW50aWZpZXIpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZERhdGE6IGZpbHRlcmVkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZEluZGV4ZXM6IGZpbHRlcmVkSW5kZXhlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBmaWx0ZXJlZElkZW50aWZpZXJcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgfSlcbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNsb3NlVGhyZWFkKCkge1xuICAgICAgICBcbiAgICAgICAgdGhpcy5faXNUaHJlYWRDbG9zZWQgPSBZRVNcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLl93ZWJXb3JrZXIgIT0gVUlTdHJpbmdGaWx0ZXIuX3NoYXJlZFdlYldvcmtlcikge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl93ZWJXb3JrZXIudGVybWluYXRlKClcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxufVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiVUlUZXh0RmllbGQudHNcIiAvPlxuXG5cblxuXG5jbGFzcyBVSVRleHRBcmVhIGV4dGVuZHMgVUlUZXh0RmllbGQge1xuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIFxuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRJRCwgdmlld0hUTUxFbGVtZW50ID0gbnVsbCkge1xuICAgICAgICBcbiAgICAgICAgc3VwZXIoZWxlbWVudElELCB2aWV3SFRNTEVsZW1lbnQsIFVJVGV4dFZpZXcudHlwZS50ZXh0QXJlYSlcbiAgICAgICAgXG4gICAgICAgIHRoaXMuX2NsYXNzID0gVUlUZXh0QXJlYVxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSVRleHRGaWVsZFxuICAgICAgICBcbiAgICAgICAgdGhpcy52aWV3SFRNTEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSBcInRleHRcIlxuICAgICAgICBcbiAgICAgICAgdGhpcy5wYXVzZXNQb2ludGVyRXZlbnRzID0gTk9cbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIGdldCBhZGRDb250cm9sRXZlbnRUYXJnZXQoKTogVUlWaWV3QWRkQ29udHJvbEV2ZW50VGFyZ2V0T2JqZWN0PHR5cGVvZiBVSVRleHRBcmVhLmNvbnRyb2xFdmVudD4ge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHN1cGVyLmFkZENvbnRyb2xFdmVudFRhcmdldCBhcyBhbnk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZ2V0IHZpZXdIVE1MRWxlbWVudCgpOiBIVE1MVGV4dEFyZWFFbGVtZW50IHtcbiAgICAgICAgXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuIHN1cGVyLnZpZXdIVE1MRWxlbWVudFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJVSU9iamVjdC50c1wiLz5cblxuXG5cblxuXG5cblxuXG5cbmNsYXNzIFVJVGltZXIgZXh0ZW5kcyBVSU9iamVjdCB7XG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgXG4gICAgX2ludGVydmFsSUQ6IG51bWJlclxuICAgIFxuICAgIGlzVmFsaWQ6IGJvb2xlYW4gPSBZRVNcbiAgICBcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgaW50ZXJ2YWw6IG51bWJlciwgcHVibGljIHJlcGVhdHM6IGJvb2xlYW4sIHB1YmxpYyB0YXJnZXQ6IEZ1bmN0aW9uKSB7XG4gICAgICAgIFxuICAgICAgICBzdXBlcigpXG4gICAgICAgIFxuICAgICAgICB0aGlzLnN1cGVyY2xhc3MgPSBVSU9iamVjdFxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBzY2hlZHVsZSgpIHtcbiAgICBcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXBlYXRzID09IE5PKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFyZ2V0KClcbiAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgXG4gICAgICAgIHRoaXMuX2ludGVydmFsSUQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoY2FsbGJhY2ssIHRoaXMuaW50ZXJ2YWwgKiAxMDAwKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgcmVzY2hlZHVsZSgpIHtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKVxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgZmlyZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVwZWF0cyA9PSBOTykge1xuICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlKClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzY2hlZHVsZSgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXQoKVxuICAgIH1cbiAgICBcbiAgICBpbnZhbGlkYXRlKCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsSUQpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuaXNWYWxpZCA9IE5PXG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICBcbiAgICBcbiAgICBcbn1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4iXX0=